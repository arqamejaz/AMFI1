const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/eth_estimateGas-Cj4V9rzg.js","assets/app-CjkAWxH4.js","assets/eth_getTransactionCount-Bfb0lzTY.js","assets/decimals-CUGxQaU7.js","assets/eth_sendRawTransaction-DPdnXbFR.js","assets/hashMessage-CizUcFF7.js","assets/checkContractWalletSignature-BQ3i7Ta8.js","assets/isValidSignature-DPQRTdQv.js","assets/checkContractWalletSignedTypedData-fBYqsGTj.js","assets/send-transaction-BP-Haks5.js"])))=>i.map(i=>d[i]);
import{b as U,F as T,B as D,G as B,H as W,I as ke,J as $,S as Ot,K as Tn,L as $n,N as E,O as X,P as Oe,Q as Z,R as In,T as Sn,U as On,V as Ln,W as Bn,X as Un,Y as mt,Z as We,$ as be,a0 as j,a1 as Dn,a2 as Fn,a3 as Cn,a4 as Lt,a5 as Bt,a6 as Ut,a7 as Mn,a8 as Rn,a9 as Vn,aa as Nn,ab as zn,ac as Ee,ad as ht,ae as jn,af as Hn,ag as kn,ah as L,ai as C,aj as Wn,ak as Dt,al as Ft,am as Le,e as Zn,v as Kn,an as ce,ao as Yn,ap as K,aq as Jn,s as Ze,ar as Qn,as as Ke,C as ee,_ as P,y as xe,at as Ye,au as Ct,av as Xn,u as qn,aw as Y,ax as I,ay as M,az as fe,aA as Je,aB as er,aC as tr,aD as nr,aE as Mt,aF as q,aG as rr,aH as sr,g as ir,p as Rt,a as ar}from"./app-CjkAWxH4.js";import{e as or}from"./eth_sendRawTransaction-DPdnXbFR.js";function cr(e){return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,{balance:n.balance?U(n.balance):void 0,nonce:n.nonce?U(n.nonce):void 0,code:n.code,state:n.state,stateDiff:n.stateDiff}]))}async function ur(e,t){const{blockNumber:n,blockTag:r,...s}=t,a=(n?U(n):void 0)||r||"latest";return await e({method:"eth_call",params:t.stateOverrides?[s,a,cr(t.stateOverrides)]:[s,a]})}async function dr(e){const t=await e({method:"eth_gasPrice"});return T(t)}function lr(e,t){const n=e.exec(t);return n==null?void 0:n.groups}const gt=/^tuple(?<array>(\[(\d*)\])*)$/;function Be(e){let t=e.type;if(gt.test(e.type)&&"components"in e){t="(";const n=e.components.length;for(let s=0;s<n;s++){const i=e.components[s];t+=Be(i),s<n-1&&(t+=", ")}const r=lr(gt,e.type);return t+=`)${(r==null?void 0:r.array)??""}`,Be({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}function re(e){let t="";const n=e.length;for(let r=0;r<n;r++){const s=e[r];t+=Be(s),r!==n-1&&(t+=", ")}return t}function fr(e){return e.type==="function"?`function ${e.name}(${re(e.inputs)})${e.stateMutability&&e.stateMutability!=="nonpayable"?` ${e.stateMutability}`:""}${e.outputs.length?` returns (${re(e.outputs)})`:""}`:e.type==="event"?`event ${e.name}(${re(e.inputs)})`:e.type==="error"?`error ${e.name}(${re(e.inputs)})`:e.type==="constructor"?`constructor(${re(e.inputs)})${e.stateMutability==="payable"?" payable":""}`:e.type==="fallback"?"fallback()":"receive() external payable"}class pr extends D{constructor(t){super(`Filter type "${t}" is not supported.`,{name:"FilterTypeNotSupportedError"})}}function Qe(e,{dir:t="left"}={}){let n=typeof e=="string"?e.replace("0x",""):e,r=0;for(let s=0;s<n.length-1&&n[t==="left"?s:n.length-s-1].toString()==="0";s++)r++;return n=t==="left"?n.slice(r):n.slice(0,n.length-r),typeof e=="string"?(n.length===1&&t==="right"&&(n=`${n}0`),`0x${n.length%2===1?`0${n}`:n}`):n}const yr=e=>B(W(e));function mr(e){return yr(e)}function hr(e){let t=!0,n="",r=0,s="",i=!1;for(let a=0;a<e.length;a++){const o=e[a];if(["(",")",","].includes(o)&&(t=!0),o==="("&&r++,o===")"&&r--,!!t){if(r===0){if(o===" "&&["event","function",""].includes(s))s="";else if(s+=o,o===")"){i=!0;break}continue}if(o===" "){e[a-1]!==","&&n!==","&&n!==",("&&(n="",t=!1);continue}s+=o,n+=o}}if(!i)throw new D("Unable to normalize signature.");return s}const gr=e=>{const t=typeof e=="string"?e:fr(e);return hr(t)};function Xe(e){return mr(gr(e))}const qe=Xe;function _(e){return typeof e[0]=="string"?xr(e):br(e)}function br(e){let t=0;for(const s of e)t+=s.length;const n=new Uint8Array(t);let r=0;for(const s of e)n.set(s,r),r+=s.length;return n}function xr(e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}function ue(e,t,n,{strict:r}={}){return ke(e,{strict:!1})?wr(e,t,n,{strict:r}):zt(e,t,n,{strict:r})}function Vt(e,t){if(typeof t=="number"&&t>0&&t>$(e)-1)throw new Ot({offset:t,position:"start",size:$(e)})}function Nt(e,t,n){if(typeof t=="number"&&typeof n=="number"&&$(e)!==n-t)throw new Ot({offset:n,position:"end",size:$(e)})}function zt(e,t,n,{strict:r}={}){Vt(e,t);const s=e.slice(t,n);return r&&Nt(s,t,n),s}function wr(e,t,n,{strict:r}={}){Vt(e,t);const s=`0x${e.replace("0x","").slice((t??0)*2,(n??e.length)*2)}`;return r&&Nt(s,t,n),s}function et(e,t){if(e.length!==t.length)throw new Tn({expectedLength:e.length,givenLength:t.length});const n=Pr({params:e,values:t}),r=nt(n);return r.length===0?"0x":r}function Pr({params:e,values:t}){const n=[];for(let r=0;r<e.length;r++)n.push(tt({param:e[r],value:t[r]}));return n}function tt({param:e,value:t}){const n=rt(e.type);if(n){const[r,s]=n;return vr(t,{length:r,param:{...e,type:s}})}if(e.type==="tuple")return $r(t,{param:e});if(e.type==="address")return Ar(t);if(e.type==="bool")return Er(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){const r=e.type.startsWith("int");return Gr(t,{signed:r})}if(e.type.startsWith("bytes"))return _r(t,{param:e});if(e.type==="string")return Tr(t);throw new $n(e.type,{docsPath:"/docs/contract/encodeAbiParameters"})}function nt(e){let t=0;for(let i=0;i<e.length;i++){const{dynamic:a,encoded:o}=e[i];a?t+=32:t+=$(o)}const n=[],r=[];let s=0;for(let i=0;i<e.length;i++){const{dynamic:a,encoded:o}=e[i];a?(n.push(E(t+s,{size:32})),r.push(o),s+=$(o)):n.push(o)}return _([...n,...r])}function Ar(e){if(!X(e))throw new Oe({address:e});return{dynamic:!1,encoded:Z(e.toLowerCase())}}function vr(e,{length:t,param:n}){const r=t===null;if(!Array.isArray(e))throw new In(e);if(!r&&e.length!==t)throw new Sn({expectedLength:t,givenLength:e.length,type:`${n.type}[${t}]`});let s=!1;const i=[];for(let a=0;a<e.length;a++){const o=tt({param:n,value:e[a]});o.dynamic&&(s=!0),i.push(o)}if(r||s){const a=nt(i);if(r){const o=E(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?_([o,a]):o}}if(s)return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:_(i.map(({encoded:a})=>a))}}function _r(e,{param:t}){const[,n]=t.type.split("bytes"),r=$(e);if(!n){let s=e;return r%32!==0&&(s=Z(s,{dir:"right",size:Math.ceil((e.length-2)/2/32)*32})),{dynamic:!0,encoded:_([Z(E(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new On({expectedSize:Number.parseInt(n),value:e});return{dynamic:!1,encoded:Z(e,{dir:"right"})}}function Er(e){if(typeof e!="boolean")throw new D(`Invalid boolean value: "${e}" (type: ${typeof e}). Expected: \`true\` or \`false\`.`);return{dynamic:!1,encoded:Z(Ln(e))}}function Gr(e,{signed:t}){return{dynamic:!1,encoded:E(e,{size:32,signed:t})}}function Tr(e){const t=Bn(e),n=Math.ceil($(t)/32),r=[];for(let s=0;s<n;s++)r.push(Z(ue(t,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:_([Z(E($(t),{size:32})),...r])}}function $r(e,{param:t}){let n=!1;const r=[];for(let s=0;s<t.components.length;s++){const i=t.components[s],a=Array.isArray(e)?s:i.name,o=tt({param:i,value:e[a]});r.push(o),o.dynamic&&(n=!0)}return{dynamic:n,encoded:n?nt(r):_(r.map(({encoded:s})=>s))}}function rt(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}const st=e=>ue(Xe(e),0,4);function jt(e){const{abi:t,args:n=[],name:r}=e,s=ke(r,{strict:!1}),i=t.filter(o=>s?o.type==="function"?st(o)===r:o.type==="event"?qe(o)===r:!1:"name"in o&&o.name===r);if(i.length===0)return;if(i.length===1)return i[0];let a;for(const o of i){if(!("inputs"in o))continue;if(!n||n.length===0){if(!o.inputs||o.inputs.length===0)return o;continue}if(!o.inputs||o.inputs.length===0||o.inputs.length!==n.length)continue;if(n.every((u,d)=>{const l="inputs"in o&&o.inputs[d];return l?Ue(u,l):!1})){if(a&&"inputs"in a&&a.inputs){const u=Ht(o.inputs,a.inputs,n);if(u)throw new Un({abiItem:o,type:u[0]},{abiItem:a,type:u[1]})}a=o}}return a||i[0]}function Ue(e,t){const n=typeof e,r=t.type;switch(r){case"address":return X(e,{strict:!1});case"bool":return n==="boolean";case"function":return n==="string";case"string":return n==="string";default:return r==="tuple"&&"components"in t?Object.values(t.components).every((s,i)=>Ue(Object.values(e)[i],s)):/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/.test(r)?n==="number"||n==="bigint":/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/.test(r)?n==="string"||e instanceof Uint8Array:/[a-z]+[1-9]{0,3}(\[[0-9]{0,}\])+$/.test(r)?Array.isArray(e)&&e.every(s=>Ue(s,{...t,type:r.replace(/(\[[0-9]{0,}\])$/,"")})):!1}}function Ht(e,t,n){for(const r in e){const s=e[r],i=t[r];if(s.type==="tuple"&&i.type==="tuple"&&"components"in s&&"components"in i)return Ht(s.components,i.components,n[r]);const a=[s.type,i.type];if(a.includes("address")&&a.includes("bytes20")?!0:a.includes("address")&&a.includes("string")?X(n[r],{strict:!1}):a.includes("address")&&a.includes("bytes")?X(n[r],{strict:!1}):!1)return a}}const bt="/docs/contract/encodeEventTopics";function Ir(e){var c;const{abi:t,eventName:n,args:r}=e;let s=t[0];if(n){const u=jt({abi:t,name:n});if(!u)throw new mt(n,{docsPath:bt});s=u}if(s.type!=="event")throw new mt(void 0,{docsPath:bt});const i=We(s),a=qe(i);let o=[];if(r&&"inputs"in s){const u=(c=s.inputs)==null?void 0:c.filter(l=>"indexed"in l&&l.indexed),d=Array.isArray(r)?r:Object.values(r).length>0?(u==null?void 0:u.map(l=>r[l.name]))??[]:[];d.length>0&&(o=(u==null?void 0:u.map((l,p)=>Array.isArray(d[p])?d[p].map((y,b)=>xt({param:l,value:d[p][b]})):d[p]?xt({param:l,value:d[p]}):null))??[])}return[a,...o]}function xt({param:e,value:t}){if(e.type==="string"||e.type==="bytes")return B(W(t));if(e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/))throw new pr(e.type);return et([e],[t])}const Sr={inputs:[{name:"message",type:"string"}],name:"Error",type:"error"},Or={inputs:[{name:"reason",type:"uint256"}],name:"Panic",type:"error"};class wt extends D{constructor({offset:t}){super(`Offset \`${t}\` cannot be negative.`,{name:"NegativeOffsetError"})}}class kt extends D{constructor({length:t,position:n}){super(`Position \`${n}\` is out of bounds (\`0 < position < ${t}\`).`,{name:"PositionOutOfBoundsError"})}}class Lr extends D{constructor({count:t,limit:n}){super(`Recursive read limit of \`${n}\` exceeded (recursive read count: \`${t}\`).`,{name:"RecursiveReadLimitExceededError"})}}const Br={bytes:new Uint8Array,dataView:new DataView(new ArrayBuffer(0)),position:0,positionReadCount:new Map,recursiveReadCount:0,recursiveReadLimit:Number.POSITIVE_INFINITY,assertReadLimit(){if(this.recursiveReadCount>=this.recursiveReadLimit)throw new Lr({count:this.recursiveReadCount+1,limit:this.recursiveReadLimit})},assertPosition(e){if(e<0||e>this.bytes.length-1)throw new kt({length:this.bytes.length,position:e})},decrementPosition(e){if(e<0)throw new wt({offset:e});const t=this.position-e;this.assertPosition(t),this.position=t},getReadCount(e){return this.positionReadCount.get(e||this.position)||0},incrementPosition(e){if(e<0)throw new wt({offset:e});const t=this.position+e;this.assertPosition(t),this.position=t},inspectByte(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectBytes(e,t){const n=t??this.position;return this.assertPosition(n+e-1),this.bytes.subarray(n,n+e)},inspectUint8(e){const t=e??this.position;return this.assertPosition(t),this.bytes[t]},inspectUint16(e){const t=e??this.position;return this.assertPosition(t+1),this.dataView.getUint16(t)},inspectUint24(e){const t=e??this.position;return this.assertPosition(t+2),(this.dataView.getUint16(t)<<8)+this.dataView.getUint8(t+2)},inspectUint32(e){const t=e??this.position;return this.assertPosition(t+3),this.dataView.getUint32(t)},pushByte(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushBytes(e){this.assertPosition(this.position+e.length-1),this.bytes.set(e,this.position),this.position+=e.length},pushUint8(e){this.assertPosition(this.position),this.bytes[this.position]=e,this.position++},pushUint16(e){this.assertPosition(this.position+1),this.dataView.setUint16(this.position,e),this.position+=2},pushUint24(e){this.assertPosition(this.position+2),this.dataView.setUint16(this.position,e>>8),this.dataView.setUint8(this.position+2,e&255),this.position+=3},pushUint32(e){this.assertPosition(this.position+3),this.dataView.setUint32(this.position,e),this.position+=4},readByte(){this.assertReadLimit(),this._touch();const e=this.inspectByte();return this.position++,e},readBytes(e,t){this.assertReadLimit(),this._touch();const n=this.inspectBytes(e);return this.position+=t??e,n},readUint8(){this.assertReadLimit(),this._touch();const e=this.inspectUint8();return this.position+=1,e},readUint16(){this.assertReadLimit(),this._touch();const e=this.inspectUint16();return this.position+=2,e},readUint24(){this.assertReadLimit(),this._touch();const e=this.inspectUint24();return this.position+=3,e},readUint32(){this.assertReadLimit(),this._touch();const e=this.inspectUint32();return this.position+=4,e},get remaining(){return this.bytes.length-this.position},setPosition(e){const t=this.position;return this.assertPosition(e),this.position=e,()=>this.position=t},_touch(){if(this.recursiveReadLimit===Number.POSITIVE_INFINITY)return;const e=this.getReadCount();this.positionReadCount.set(this.position,e+1),e>0&&this.recursiveReadCount++}};function Wt(e,{recursiveReadLimit:t=8192}={}){const n=Object.create(Br);return n.bytes=e,n.dataView=new DataView(e.buffer,e.byteOffset,e.byteLength),n.positionReadCount=new Map,n.recursiveReadLimit=t,n}function Ur(e,t={}){typeof t.size<"u"&&be(e,{size:t.size});const n=j(e,t);return Dn(n,t)}function Dr(e,t={}){let n=e;if(typeof t.size<"u"&&(be(n,{size:t.size}),n=Qe(n)),n.length>1||n[0]>1)throw new Fn(n);return!!n[0]}function F(e,t={}){typeof t.size<"u"&&be(e,{size:t.size});const n=j(e,t);return Cn(n,t)}function Fr(e,t={}){let n=e;return typeof t.size<"u"&&(be(n,{size:t.size}),n=Qe(n,{dir:"right"})),new TextDecoder().decode(n)}function we(e,t){const n=typeof t=="string"?Lt(t):t,r=Wt(n);if($(n)===0&&e.length>0)throw new Bt;if($(t)&&$(t)<32)throw new Ut({data:typeof t=="string"?t:j(t),params:e,size:$(t)});let s=0;const i=[];for(let a=0;a<e.length;++a){const o=e[a];r.setPosition(s);const[c,u]=Q(r,o,{staticPosition:0});s+=u,i.push(c)}return i}function Q(e,t,{staticPosition:n}){const r=rt(t.type);if(r){const[s,i]=r;return Mr(e,{...t,type:i},{length:s,staticPosition:n})}if(t.type==="tuple")return zr(e,t,{staticPosition:n});if(t.type==="address")return Cr(e);if(t.type==="bool")return Rr(e);if(t.type.startsWith("bytes"))return Vr(e,t,{staticPosition:n});if(t.type.startsWith("uint")||t.type.startsWith("int"))return Nr(e,t);if(t.type==="string")return jr(e,{staticPosition:n});throw new Mn(t.type,{docsPath:"/docs/contract/decodeAbiParameters"})}const Pt=32,De=32;function Cr(e){const t=e.readBytes(32);return[Rn(j(zt(t,-20))),32]}function Mr(e,t,{length:n,staticPosition:r}){if(!n){const a=F(e.readBytes(De)),o=r+a,c=o+Pt;e.setPosition(o);const u=F(e.readBytes(Pt)),d=de(t);let l=0;const p=[];for(let y=0;y<u;++y){e.setPosition(c+(d?y*32:l));const[b,m]=Q(e,t,{staticPosition:c});l+=m,p.push(b)}return e.setPosition(r+32),[p,32]}if(de(t)){const a=F(e.readBytes(De)),o=r+a,c=[];for(let u=0;u<n;++u){e.setPosition(o+u*32);const[d]=Q(e,t,{staticPosition:o});c.push(d)}return e.setPosition(r+32),[c,32]}let s=0;const i=[];for(let a=0;a<n;++a){const[o,c]=Q(e,t,{staticPosition:r+s});s+=c,i.push(o)}return[i,s]}function Rr(e){return[Dr(e.readBytes(32),{size:32}),32]}function Vr(e,t,{staticPosition:n}){const[r,s]=t.type.split("bytes");if(!s){const a=F(e.readBytes(32));e.setPosition(n+a);const o=F(e.readBytes(32));if(o===0)return e.setPosition(n+32),["0x",32];const c=e.readBytes(o);return e.setPosition(n+32),[j(c),32]}return[j(e.readBytes(Number.parseInt(s),32)),32]}function Nr(e,t){const n=t.type.startsWith("int"),r=Number.parseInt(t.type.split("int")[1]||"256"),s=e.readBytes(32);return[r>48?Ur(s,{signed:n}):F(s,{signed:n}),32]}function zr(e,t,{staticPosition:n}){const r=t.components.length===0||t.components.some(({name:a})=>!a),s=r?[]:{};let i=0;if(de(t)){const a=F(e.readBytes(De)),o=n+a;for(let c=0;c<t.components.length;++c){const u=t.components[c];e.setPosition(o+i);const[d,l]=Q(e,u,{staticPosition:o});i+=l,s[r?c:u==null?void 0:u.name]=d}return e.setPosition(n+32),[s,32]}for(let a=0;a<t.components.length;++a){const o=t.components[a],[c,u]=Q(e,o,{staticPosition:n});s[r?a:o==null?void 0:o.name]=c,i+=u}return[s,i]}function jr(e,{staticPosition:t}){const n=F(e.readBytes(32)),r=t+n;e.setPosition(r);const s=F(e.readBytes(32));if(s===0)return e.setPosition(t+32),["",32];const i=e.readBytes(s,32),a=Fr(Qe(i));return e.setPosition(t+32),[a,32]}function de(e){var r;const{type:t}=e;if(t==="string"||t==="bytes"||t.endsWith("[]"))return!0;if(t==="tuple")return(r=e.components)==null?void 0:r.some(de);const n=rt(e.type);return!!(n&&de({...e,type:n[1]}))}function Zt(e){const{abi:t,data:n}=e,r=ue(n,0,4);if(r==="0x")throw new Bt;const i=[...t||[],Sr,Or].find(a=>a.type==="error"&&r===st(We(a)));if(!i)throw new Vn(r,{docsPath:"/docs/contract/decodeErrorResult"});return{abiItem:i,args:"inputs"in i&&i.inputs&&i.inputs.length>0?we(i.inputs,ue(n,4)):void 0,errorName:i.name}}function Hr(e,t="hex"){const n=Kt(e),r=Wt(new Uint8Array(n.length));return n.encode(r),t==="hex"?j(r.bytes):r.bytes}function Kt(e){return Array.isArray(e)?kr(e.map(t=>Kt(t))):Wr(e)}function kr(e){const t=e.reduce((s,i)=>s+i.length,0),n=Yt(t);return{length:t<=55?1+t:1+n+t,encode(s){t<=55?s.pushByte(192+t):(s.pushByte(247+n),n===1?s.pushUint8(t):n===2?s.pushUint16(t):n===3?s.pushUint24(t):s.pushUint32(t));for(const{encode:i}of e)i(s)}}}function Wr(e){const t=typeof e=="string"?Lt(e):e,n=Yt(t.length);return{length:t.length===1&&t[0]<128?1:t.length<=55?1+t.length:1+n+t.length,encode(s){t.length===1&&t[0]<128?s.pushBytes(t):t.length<=55?(s.pushByte(128+t.length),s.pushBytes(t)):(s.pushByte(183+n),n===1?s.pushUint8(t.length):n===2?s.pushUint16(t.length):n===3?s.pushUint24(t.length):s.pushUint32(t.length),s.pushBytes(t))}}}function Yt(e){if(e<2**8)return 1;if(e<2**16)return 2;if(e<2**24)return 3;if(e<2**32)return 4;throw new D("Length is too large.")}const Zr={legacy:"0x0",eip2930:"0x1",eip1559:"0x2",eip4844:"0x3",eip7702:"0x4"};function Kr(e){const t={};return typeof e.authorizationList<"u"&&(t.authorizationList=Yr(e.authorizationList)),typeof e.accessList<"u"&&(t.accessList=e.accessList),typeof e.blobVersionedHashes<"u"&&(t.blobVersionedHashes=e.blobVersionedHashes),typeof e.blobs<"u"&&(typeof e.blobs[0]!="string"?t.blobs=e.blobs.map(n=>j(n)):t.blobs=e.blobs),typeof e.data<"u"&&(t.data=e.data),typeof e.from<"u"&&(t.from=e.from),typeof e.gas<"u"&&(t.gas=E(e.gas)),typeof e.gasPrice<"u"&&(t.gasPrice=E(e.gasPrice)),typeof e.maxFeePerBlobGas<"u"&&(t.maxFeePerBlobGas=E(e.maxFeePerBlobGas)),typeof e.maxFeePerGas<"u"&&(t.maxFeePerGas=E(e.maxFeePerGas)),typeof e.maxPriorityFeePerGas<"u"&&(t.maxPriorityFeePerGas=E(e.maxPriorityFeePerGas)),typeof e.nonce<"u"&&(t.nonce=E(e.nonce)),typeof e.to<"u"&&(t.to=e.to),typeof e.type<"u"&&(t.type=Zr[e.type]),typeof e.value<"u"&&(t.value=E(e.value)),t}function Yr(e){return e.map(t=>({address:t.contractAddress,r:t.r,s:t.s,chainId:E(t.chainId),nonce:E(t.nonce),...typeof t.yParity<"u"?{yParity:E(t.yParity)}:{},...typeof t.v<"u"&&typeof t.yParity>"u"?{v:E(t.v)}:{}}))}function Jr(e){var n;const t=(n=e.transactions)==null?void 0:n.map(r=>typeof r=="string"?r:Nn(r));return{...e,baseFeePerGas:e.baseFeePerGas?BigInt(e.baseFeePerGas):null,blobGasUsed:e.blobGasUsed?BigInt(e.blobGasUsed):void 0,difficulty:e.difficulty?BigInt(e.difficulty):void 0,excessBlobGas:e.excessBlobGas?BigInt(e.excessBlobGas):void 0,gasLimit:e.gasLimit?BigInt(e.gasLimit):void 0,gasUsed:e.gasUsed?BigInt(e.gasUsed):void 0,hash:e.hash?e.hash:null,logsBloom:e.logsBloom?e.logsBloom:null,nonce:e.nonce?e.nonce:null,number:e.number?BigInt(e.number):null,size:e.size?BigInt(e.size):void 0,timestamp:e.timestamp?BigInt(e.timestamp):void 0,transactions:t,totalDifficulty:e.totalDifficulty?BigInt(e.totalDifficulty):null}}function Qr(e,t,n,r){if(typeof e.setBigUint64=="function")return e.setBigUint64(t,n,r);const s=BigInt(32),i=BigInt(4294967295),a=Number(n>>s&i),o=Number(n&i),c=r?4:0,u=r?0:4;e.setUint32(t+c,a,r),e.setUint32(t+u,o,r)}const Xr=(e,t,n)=>e&t^~e&n,qr=(e,t,n)=>e&t^e&n^t&n;class es extends zn{constructor(t,n,r,s){super(),this.blockLen=t,this.outputLen=n,this.padOffset=r,this.isLE=s,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(t),this.view=Ee(this.buffer)}update(t){ht(this);const{view:n,buffer:r,blockLen:s}=this;t=jn(t);const i=t.length;for(let a=0;a<i;){const o=Math.min(s-this.pos,i-a);if(o===s){const c=Ee(t);for(;s<=i-a;a+=s)this.process(c,a);continue}r.set(t.subarray(a,a+o),this.pos),this.pos+=o,a+=o,this.pos===s&&(this.process(n,0),this.pos=0)}return this.length+=t.length,this.roundClean(),this}digestInto(t){ht(this),Hn(t,this),this.finished=!0;const{buffer:n,view:r,blockLen:s,isLE:i}=this;let{pos:a}=this;n[a++]=128,this.buffer.subarray(a).fill(0),this.padOffset>s-a&&(this.process(r,0),a=0);for(let l=a;l<s;l++)n[l]=0;Qr(r,s-8,BigInt(this.length*8),i),this.process(r,0);const o=Ee(t),c=this.outputLen;if(c%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const u=c/4,d=this.get();if(u>d.length)throw new Error("_sha2: outputLen bigger than state");for(let l=0;l<u;l++)o.setUint32(4*l,d[l],i)}digest(){const{buffer:t,outputLen:n}=this;this.digestInto(t);const r=t.slice(0,n);return this.destroy(),r}_cloneInto(t){t||(t=new this.constructor),t.set(...this.get());const{blockLen:n,buffer:r,length:s,finished:i,destroyed:a,pos:o}=this;return t.length=s,t.pos=o,t.finished=i,t.destroyed=a,s%n&&t.buffer.set(r),t}}const ts=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),R=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),V=new Uint32Array(64);class ns extends es{constructor(){super(64,32,8,!1),this.A=R[0]|0,this.B=R[1]|0,this.C=R[2]|0,this.D=R[3]|0,this.E=R[4]|0,this.F=R[5]|0,this.G=R[6]|0,this.H=R[7]|0}get(){const{A:t,B:n,C:r,D:s,E:i,F:a,G:o,H:c}=this;return[t,n,r,s,i,a,o,c]}set(t,n,r,s,i,a,o,c){this.A=t|0,this.B=n|0,this.C=r|0,this.D=s|0,this.E=i|0,this.F=a|0,this.G=o|0,this.H=c|0}process(t,n){for(let l=0;l<16;l++,n+=4)V[l]=t.getUint32(n,!1);for(let l=16;l<64;l++){const p=V[l-15],y=V[l-2],b=L(p,7)^L(p,18)^p>>>3,m=L(y,17)^L(y,19)^y>>>10;V[l]=m+V[l-7]+b+V[l-16]|0}let{A:r,B:s,C:i,D:a,E:o,F:c,G:u,H:d}=this;for(let l=0;l<64;l++){const p=L(o,6)^L(o,11)^L(o,25),y=d+p+Xr(o,c,u)+ts[l]+V[l]|0,m=(L(r,2)^L(r,13)^L(r,22))+qr(r,s,i)|0;d=u,u=c,c=o,o=a+y|0,a=i,i=s,s=r,r=y+m|0}r=r+this.A|0,s=s+this.B|0,i=i+this.C|0,a=a+this.D|0,o=o+this.E|0,c=c+this.F|0,u=u+this.G|0,d=d+this.H|0,this.set(r,s,i,a,o,c,u,d)}roundClean(){V.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}const rs=kn(()=>new ns);function ss(e,t){const n=rs(ke(e,{strict:!1})?W(e):e);return C(n)}function is(e,t){if(!X(e,{strict:!1}))throw new Oe({address:e});if(!X(t,{strict:!1}))throw new Oe({address:t});return e.toLowerCase()===t.toLowerCase()}const At="/docs/contract/decodeEventLog";function as(e){const{abi:t,data:n,strict:r,topics:s}=e,i=r??!0,[a,...o]=s;if(!a)throw new Wn({docsPath:At});const c=t.find(m=>m.type==="event"&&a===qe(We(m)));if(!(c&&"name"in c)||c.type!=="event")throw new Dt(a,{docsPath:At});const{name:u,inputs:d}=c,l=d==null?void 0:d.some(m=>!("name"in m&&m.name));let p=l?[]:{};const y=d.filter(m=>"indexed"in m&&m.indexed);for(let m=0;m<y.length;m++){const f=y[m],g=o[m];if(!g)throw new Ft({abiItem:c,param:f});p[l?m:f.name||m]=os({param:f,value:g})}const b=d.filter(m=>!("indexed"in m&&m.indexed));if(b.length>0){if(n&&n!=="0x")try{const m=we(b,n);if(m)if(l)p=[...p,...m];else for(let f=0;f<b.length;f++)p[b[f].name]=m[f]}catch(m){if(i)throw m instanceof Ut||m instanceof kt?new Le({abiItem:c,data:n,params:b,size:$(n)}):m}else if(i)throw new Le({abiItem:c,data:"0x",params:b,size:0})}return{eventName:u,args:Object.values(p).length>0?p:void 0}}function os({param:e,value:t}){return e.type==="string"||e.type==="bytes"||e.type==="tuple"||e.type.match(/^(.*)\[(\d+)?\]$/)?t:(we([e],t)||[])[0]}function cs(e){const{abi:t,args:n,logs:r,strict:s=!0}=e,i=(()=>{if(e.eventName)return Array.isArray(e.eventName)?e.eventName:[e.eventName]})();return r.map(a=>{var o;try{const c=jt({abi:t,name:a.topics[0]});if(!c)return null;const u=as({...a,abi:[c],strict:s});return i&&!i.includes(u.eventName)||!us({args:u.args,inputs:c.inputs,matchArgs:n})?null:{...u,...a}}catch(c){let u,d;if(c instanceof Dt)return null;if(c instanceof Le||c instanceof Ft){if(s)return null;u=c.abiItem.name,d=(o=c.abiItem.inputs)==null?void 0:o.some(l=>!("name"in l&&l.name))}return{...a,args:d?[]:{},eventName:u}}}).filter(Boolean)}function us(e){const{args:t,inputs:n,matchArgs:r}=e;if(!r)return!0;if(!t)return!1;function s(i,a,o){try{return i.type==="address"?is(a,o):i.type==="string"||i.type==="bytes"?B(W(a))===o:a===o}catch{return!1}}return Array.isArray(t)&&Array.isArray(r)?r.every((i,a)=>{if(!i)return!0;const o=n[a];return o?(Array.isArray(i)?i:[i]).some(u=>s(o,u,t[a])):!1}):typeof t=="object"&&!Array.isArray(t)&&typeof r=="object"&&!Array.isArray(r)?Object.entries(r).every(([i,a])=>{if(!a)return!0;const o=n.find(u=>u.name===i);return o?(Array.isArray(a)?a:[a]).some(u=>s(o,u,t[i])):!1}):!1}function ds(e){const{domain:t={},message:n,primaryType:r}=e,s={EIP712Domain:Zn({domain:t}),...e.types};Kn({domain:t,message:n,primaryType:r,types:s});const i=["0x1901"];return t&&i.push(ls({domain:t,types:s})),r!=="EIP712Domain"&&i.push(Jt({data:n,primaryType:r,types:s})),B(_(i))}function ls({domain:e,types:t}){return Jt({data:e,primaryType:"EIP712Domain",types:t})}function Jt({data:e,primaryType:t,types:n}){const r=Qt({data:e,primaryType:t,types:n});return B(r)}function Qt({data:e,primaryType:t,types:n}){const r=[{type:"bytes32"}],s=[fs({primaryType:t,types:n})];for(const i of n[t]){const[a,o]=qt({types:n,name:i.name,type:i.type,value:e[i.name]});r.push(a),s.push(o)}return et(r,s)}function fs({primaryType:e,types:t}){const n=C(ps({primaryType:e,types:t}));return B(n)}function ps({primaryType:e,types:t}){let n="";const r=Xt({primaryType:e,types:t});r.delete(e);const s=[e,...Array.from(r).sort()];for(const i of s)n+=`${i}(${t[i].map(({name:a,type:o})=>`${o} ${a}`).join(",")})`;return n}function Xt({primaryType:e,types:t},n=new Set){const r=e.match(/^\w*/u),s=r==null?void 0:r[0];if(n.has(s)||t[s]===void 0)return n;n.add(s);for(const i of t[s])Xt({primaryType:i.type,types:t},n);return n}function qt({types:e,name:t,type:n,value:r}){if(e[n]!==void 0)return[{type:"bytes32"},B(Qt({data:r,primaryType:n,types:e}))];if(n==="bytes")return r=`0x${(r.length%2?"0":"")+r.slice(2)}`,[{type:"bytes32"},B(r)];if(n==="string")return[{type:"bytes32"},B(C(r))];if(n.lastIndexOf("]")===n.length-1){const s=n.slice(0,n.lastIndexOf("[")),i=r.map(a=>qt({name:t,type:s,types:e,value:a}));return[{type:"bytes32"},B(et(i.map(([a])=>a),i.map(([,a])=>a)))]}return[{type:n},r]}const ys=2n**16n-1n,ms=2n**96n-1n;async function hs(e,t){const n=t.blockTag??"latest",r=t.includeTransactions??!1,s=t.blockNumber!==void 0?U(t.blockNumber):void 0,i=await e({method:"eth_getBlockByNumber",params:[s||n,r]});if(!i)throw new Error("Block not found");return Jr(i)}async function gs(e){const t=await e({method:"eth_maxPriorityFeePerGas"});return T(t)}function en(e,t){return t&&(e.__preparedMethod=t.preparedMethod,e.__contract=t.contract),e}const bs=Object.freeze(Object.defineProperty({__proto__:null,prepareTransaction:en},Symbol.toStringTag,{value:"Module"})),xs="1.0.5";class G extends Error{constructor(t,n={}){var a;const r=n.cause instanceof G?n.cause.details:(a=n.cause)!=null&&a.message?n.cause.message:n.details,s=n.cause instanceof G&&n.cause.docsPath||n.docsPath,i=[t||"An error occurred.","",...n.metaMessages?[...n.metaMessages,""]:[],...s?[`Docs: https://abitype.dev${s}`]:[],...r?[`Details: ${r}`]:[],`Version: abitype@${xs}`].join(`
`);super(i),Object.defineProperty(this,"details",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"docsPath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"metaMessages",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"shortMessage",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"AbiTypeError"}),n.cause&&(this.cause=n.cause),this.details=r,this.docsPath=s,this.metaMessages=n.metaMessages,this.shortMessage=t}}function H(e,t){const n=e.exec(t);return n==null?void 0:n.groups}const tn=/^bytes([1-9]|1[0-9]|2[0-9]|3[0-2])?$/,nn=/^u?int(8|16|24|32|40|48|56|64|72|80|88|96|104|112|120|128|136|144|152|160|168|176|184|192|200|208|216|224|232|240|248|256)?$/,rn=/^\(.+?\).*?$/,vt=/^tuple(?<array>(\[(\d*)\])*)$/;function Fe(e){let t=e.type;if(vt.test(e.type)&&"components"in e){t="(";const n=e.components.length;for(let s=0;s<n;s++){const i=e.components[s];t+=Fe(i),s<n-1&&(t+=", ")}const r=H(vt,e.type);return t+=`)${(r==null?void 0:r.array)??""}`,Fe({...e,type:t})}return"indexed"in e&&e.indexed&&(t=`${t} indexed`),e.name?`${t} ${e.name}`:t}function se(e){let t="";const n=e.length;for(let r=0;r<n;r++){const s=e[r];t+=Fe(s),r!==n-1&&(t+=", ")}return t}function ws(e){return e.type==="function"?`function ${e.name}(${se(e.inputs)})${e.stateMutability&&e.stateMutability!=="nonpayable"?` ${e.stateMutability}`:""}${e.outputs.length?` returns (${se(e.outputs)})`:""}`:e.type==="event"?`event ${e.name}(${se(e.inputs)})`:e.type==="error"?`error ${e.name}(${se(e.inputs)})`:e.type==="constructor"?`constructor(${se(e.inputs)})${e.stateMutability==="payable"?" payable":""}`:e.type==="fallback"?"fallback()":"receive() external payable"}function Ps(e){const t=[],n=e.length;for(let r=0;r<n;r++){const s=e[r],i=ws(s);t.push(i)}return t}const sn=/^error (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function As(e){return sn.test(e)}function vs(e){return H(sn,e)}const an=/^event (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)$/;function _s(e){return an.test(e)}function Es(e){return H(an,e)}const on=/^function (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*)\((?<parameters>.*?)\)(?: (?<scope>external|public{1}))?(?: (?<stateMutability>pure|view|nonpayable|payable{1}))?(?: returns\s?\((?<returns>.*?)\))?$/;function Gs(e){return on.test(e)}function Ts(e){return H(on,e)}const cn=/^struct (?<name>[a-zA-Z$_][a-zA-Z0-9$_]*) \{(?<properties>.*?)\}$/;function it(e){return cn.test(e)}function $s(e){return H(cn,e)}const un=/^constructor\((?<parameters>.*?)\)(?:\s(?<stateMutability>payable{1}))?$/;function Is(e){return un.test(e)}function Ss(e){return H(un,e)}const Os=/^fallback\(\) external(?:\s(?<stateMutability>payable{1}))?$/;function Ls(e){return Os.test(e)}const Bs=/^receive\(\) external payable$/;function Us(e){return Bs.test(e)}const Ds=new Set(["indexed"]),Ce=new Set(["calldata","memory","storage"]);class Fs extends G{constructor({signature:t}){super("Failed to parse ABI item.",{details:`parseAbiItem(${JSON.stringify(t,null,2)})`,docsPath:"/api/human#parseabiitem-1"}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiItemError"})}}class Cs extends G{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type. Perhaps you forgot to include a struct signature?`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownTypeError"})}}class Ms extends G{constructor({type:t}){super("Unknown type.",{metaMessages:[`Type "${t}" is not a valid ABI type.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSolidityTypeError"})}}class Rs extends G{constructor({param:t}){super("Invalid ABI parameter.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParameterError"})}}class Vs extends G{constructor({param:t,name:n}){super("Invalid ABI parameter.",{details:t,metaMessages:[`"${n}" is a protected Solidity keyword. More info: https://docs.soliditylang.org/en/latest/cheatsheet.html`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"SolidityProtectedKeywordError"})}}class Ns extends G{constructor({param:t,type:n,modifier:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidModifierError"})}}class zs extends G{constructor({param:t,type:n,modifier:r}){super("Invalid ABI parameter.",{details:t,metaMessages:[`Modifier "${r}" not allowed${n?` in "${n}" type`:""}.`,`Data location can only be specified for array, struct, or mapping types, but "${r}" was given.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidFunctionModifierError"})}}class js extends G{constructor({abiParameter:t}){super("Invalid ABI parameter.",{details:JSON.stringify(t,null,2),metaMessages:["ABI parameter type is invalid."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidAbiTypeParameterError"})}}class ie extends G{constructor({signature:t,type:n}){super(`Invalid ${n} signature.`,{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidSignatureError"})}}class Hs extends G{constructor({signature:t}){super("Unknown signature.",{details:t}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"UnknownSignatureError"})}}class ks extends G{constructor({signature:t}){super("Invalid struct signature.",{details:t,metaMessages:["No properties exist."]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidStructSignatureError"})}}class Ws extends G{constructor({type:t}){super("Circular reference detected.",{metaMessages:[`Struct "${t}" is a circular reference.`]}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"CircularReferenceError"})}}class Zs extends G{constructor({current:t,depth:n}){super("Unbalanced parentheses.",{metaMessages:[`"${t.trim()}" has too many ${n>0?"opening":"closing"} parentheses.`],details:`Depth "${n}"`}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:"InvalidParenthesisError"})}}function Ks(e,t){return t?`${t}:${e}`:e}const Ge=new Map([["address",{type:"address"}],["bool",{type:"bool"}],["bytes",{type:"bytes"}],["bytes32",{type:"bytes32"}],["int",{type:"int256"}],["int256",{type:"int256"}],["string",{type:"string"}],["uint",{type:"uint256"}],["uint8",{type:"uint8"}],["uint16",{type:"uint16"}],["uint24",{type:"uint24"}],["uint32",{type:"uint32"}],["uint64",{type:"uint64"}],["uint96",{type:"uint96"}],["uint112",{type:"uint112"}],["uint160",{type:"uint160"}],["uint192",{type:"uint192"}],["uint256",{type:"uint256"}],["address owner",{type:"address",name:"owner"}],["address to",{type:"address",name:"to"}],["bool approved",{type:"bool",name:"approved"}],["bytes _data",{type:"bytes",name:"_data"}],["bytes data",{type:"bytes",name:"data"}],["bytes signature",{type:"bytes",name:"signature"}],["bytes32 hash",{type:"bytes32",name:"hash"}],["bytes32 r",{type:"bytes32",name:"r"}],["bytes32 root",{type:"bytes32",name:"root"}],["bytes32 s",{type:"bytes32",name:"s"}],["string name",{type:"string",name:"name"}],["string symbol",{type:"string",name:"symbol"}],["string tokenURI",{type:"string",name:"tokenURI"}],["uint tokenId",{type:"uint256",name:"tokenId"}],["uint8 v",{type:"uint8",name:"v"}],["uint256 balance",{type:"uint256",name:"balance"}],["uint256 tokenId",{type:"uint256",name:"tokenId"}],["uint256 value",{type:"uint256",name:"value"}],["event:address indexed from",{type:"address",name:"from",indexed:!0}],["event:address indexed to",{type:"address",name:"to",indexed:!0}],["event:uint indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}],["event:uint256 indexed tokenId",{type:"uint256",name:"tokenId",indexed:!0}]]);function Me(e,t={}){if(Gs(e)){const n=Ts(e);if(!n)throw new ie({signature:e,type:"function"});const r=S(n.parameters),s=[],i=r.length;for(let o=0;o<i;o++)s.push(k(r[o],{modifiers:Ce,structs:t,type:"function"}));const a=[];if(n.returns){const o=S(n.returns),c=o.length;for(let u=0;u<c;u++)a.push(k(o[u],{modifiers:Ce,structs:t,type:"function"}))}return{name:n.name,type:"function",stateMutability:n.stateMutability??"nonpayable",inputs:s,outputs:a}}if(_s(e)){const n=Es(e);if(!n)throw new ie({signature:e,type:"event"});const r=S(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(k(r[a],{modifiers:Ds,structs:t,type:"event"}));return{name:n.name,type:"event",inputs:s}}if(As(e)){const n=vs(e);if(!n)throw new ie({signature:e,type:"error"});const r=S(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(k(r[a],{structs:t,type:"error"}));return{name:n.name,type:"error",inputs:s}}if(Is(e)){const n=Ss(e);if(!n)throw new ie({signature:e,type:"constructor"});const r=S(n.parameters),s=[],i=r.length;for(let a=0;a<i;a++)s.push(k(r[a],{structs:t,type:"constructor"}));return{type:"constructor",stateMutability:n.stateMutability??"nonpayable",inputs:s}}if(Ls(e))return{type:"fallback"};if(Us(e))return{type:"receive",stateMutability:"payable"};throw new Hs({signature:e})}const Ys=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Js=/^\((?<type>.+?)\)(?<array>(?:\[\d*?\])+?)?(?:\s(?<modifier>calldata|indexed|memory|storage{1}))?(?:\s(?<name>[a-zA-Z$_][a-zA-Z0-9$_]*))?$/,Qs=/^u?int$/;function k(e,t){var l,p;const n=Ks(e,t==null?void 0:t.type);if(Ge.has(n))return Ge.get(n);const r=rn.test(e),s=H(r?Js:Ys,e);if(!s)throw new Rs({param:e});if(s.name&&qs(s.name))throw new Vs({param:e,name:s.name});const i=s.name?{name:s.name}:{},a=s.modifier==="indexed"?{indexed:!0}:{},o=(t==null?void 0:t.structs)??{};let c,u={};if(r){c="tuple";const y=S(s.type),b=[],m=y.length;for(let f=0;f<m;f++)b.push(k(y[f],{structs:o}));u={components:b}}else if(s.type in o)c="tuple",u={components:o[s.type]};else if(Qs.test(s.type))c=`${s.type}256`;else if(c=s.type,(t==null?void 0:t.type)!=="struct"&&!dn(c))throw new Ms({type:c});if(s.modifier){if(!((p=(l=t==null?void 0:t.modifiers)==null?void 0:l.has)!=null&&p.call(l,s.modifier)))throw new Ns({param:e,type:t==null?void 0:t.type,modifier:s.modifier});if(Ce.has(s.modifier)&&!ei(c,!!s.array))throw new zs({param:e,type:t==null?void 0:t.type,modifier:s.modifier})}const d={type:`${c}${s.array??""}`,...i,...a,...u};return Ge.set(n,d),d}function S(e,t=[],n="",r=0){const s=e.trim().length;for(let i=0;i<s;i++){const a=e[i],o=e.slice(i+1);switch(a){case",":return r===0?S(o,[...t,n.trim()]):S(o,t,`${n}${a}`,r);case"(":return S(o,t,`${n}${a}`,r+1);case")":return S(o,t,`${n}${a}`,r-1);default:return S(o,t,`${n}${a}`,r)}}if(n==="")return t;if(r!==0)throw new Zs({current:n,depth:r});return t.push(n.trim()),t}function dn(e){return e==="address"||e==="bool"||e==="function"||e==="string"||tn.test(e)||nn.test(e)}const Xs=/^(?:after|alias|anonymous|apply|auto|byte|calldata|case|catch|constant|copyof|default|defined|error|event|external|false|final|function|immutable|implements|in|indexed|inline|internal|let|mapping|match|memory|mutable|null|of|override|partial|private|promise|public|pure|reference|relocatable|return|returns|sizeof|static|storage|struct|super|supports|switch|this|true|try|typedef|typeof|var|view|virtual)$/;function qs(e){return e==="address"||e==="bool"||e==="function"||e==="string"||e==="tuple"||tn.test(e)||nn.test(e)||Xs.test(e)}function ei(e,t){return t||e==="bytes"||e==="string"||e==="tuple"}function ln(e){const t={},n=e.length;for(let a=0;a<n;a++){const o=e[a];if(!it(o))continue;const c=$s(o);if(!c)throw new ie({signature:o,type:"struct"});const u=c.properties.split(";"),d=[],l=u.length;for(let p=0;p<l;p++){const b=u[p].trim();if(!b)continue;const m=k(b,{type:"struct"});d.push(m)}if(!d.length)throw new ks({signature:o});t[c.name]=d}const r={},s=Object.entries(t),i=s.length;for(let a=0;a<i;a++){const[o,c]=s[a];r[o]=fn(c,t)}return r}const ti=/^(?<type>[a-zA-Z$_][a-zA-Z0-9$_]*)(?<array>(?:\[\d*?\])+?)?$/;function fn(e,t,n=new Set){const r=[],s=e.length;for(let i=0;i<s;i++){const a=e[i];if(rn.test(a.type))r.push(a);else{const c=H(ti,a.type);if(!(c!=null&&c.type))throw new js({abiParameter:a});const{array:u,type:d}=c;if(d in t){if(n.has(d))throw new Ws({type:d});r.push({...a,type:`tuple${u??""}`,components:fn(t[d]??[],t,new Set([...n,d]))})}else if(dn(d))r.push(a);else throw new Cs({type:d})}}return r}function ni(e){const t=ln(e),n=[],r=e.length;for(let s=0;s<r;s++){const i=e[s];it(i)||n.push(Me(i,t))}return n}function Pe(e){let t;if(typeof e=="string")t=Me(e);else{const n=ln(e),r=e.length;for(let s=0;s<r;s++){const i=e[s];if(!it(i)){t=Me(i,n);break}}}if(!t)throw new Fs({signature:e});return t}function at(e,t){if(e.length!==t.length)throw new Error("The number of parameters and values must match.");const n=ri({params:e,values:t}),r=ot(n);return r.length===0?"0x":r}function ri({params:e,values:t}){const n=[];for(let r=0;r<e.length;r++)n.push(Ae({param:e[r],value:t[r]}));return n}function Ae({param:e,value:t}){const n=di(e.type);if(n){const[r,s]=n;return si(t,{length:r,param:{...e,type:s}})}if(e.type==="tuple")return ui(t,{param:e});if(e.type==="address")return pn(t);if(e.type==="bool")return ai(t);if(e.type.startsWith("uint")||e.type.startsWith("int")){const r=e.type.startsWith("int");return oi(t,{signed:r})}if(e.type.startsWith("bytes"))return ii(t,{param:e});if(e.type==="string")return ci(t);throw new Error(`Unsupported parameter type: ${e.type}`)}function ot(e){let t=0;for(let i=0;i<e.length;i++){const{dynamic:a,encoded:o}=e[i];a?t+=32:t+=ce(o)}const n=[],r=[];let s=0;for(let i=0;i<e.length;i++){const{dynamic:a,encoded:o}=e[i];a?(n.push(U(t+s,{size:32})),r.push(o),s+=ce(o)):n.push(o)}return _([...n,...r])}function pn(e){if(e!==""&&e!==void 0&&!Yn(e))throw new Error(`Invalid address: ${e}`);return{dynamic:!1,encoded:K(e.toLowerCase())}}function si(e,{length:t,param:n}){const r=t===null;if(!Array.isArray(e))throw new Error("Invalid array value.");if(!r&&e.length!==t)throw new Error("Invalid array length.");let s=!1;const i=[];for(let a=0;a<e.length;a++){const o=Ae({param:n,value:e[a]});o.dynamic&&(s=!0),i.push(o)}if(r||s){const a=ot(i);if(r){const o=U(i.length,{size:32});return{dynamic:!0,encoded:i.length>0?_([o,a]):o}}if(s)return{dynamic:!0,encoded:a}}return{dynamic:!1,encoded:_(i.map(({encoded:a})=>a))}}function ii(e,{param:t}){const[,n]=t.type.split("bytes"),r=ce(e);if(!n){let s=e;return r%32!==0&&(s=K(s,{dir:"right",size:Math.ceil((e.length-2)/2/32)*32})),{dynamic:!0,encoded:_([K(U(r,{size:32})),s])}}if(r!==Number.parseInt(n))throw new Error(`Invalid bytes${n} size: ${r}`);return{dynamic:!1,encoded:K(e,{dir:"right"})}}function ai(e){return{dynamic:!1,encoded:K(Jn(e))}}function oi(e,{signed:t}){return{dynamic:!1,encoded:U(e,{size:32,signed:t})}}function ci(e){const t=Ze(e),n=Math.ceil(ce(t)/32),r=[];for(let s=0;s<n;s++)r.push(K(ue(t,s*32,(s+1)*32),{dir:"right"}));return{dynamic:!0,encoded:_([K(U(ce(t),{size:32})),...r])}}function ui(e,{param:t}){let n=!1;const r=[];for(let s=0;s<t.components.length;s++){const i=t.components[s],a=Array.isArray(e)?s:i.name,o=Ae({param:i,value:e[a]});r.push(o),o.dynamic&&(n=!0)}return{dynamic:n,encoded:n?ot(r):_(r.map(({encoded:s})=>s))}}function di(e){const t=e.match(/^(.*)\[(\d+)?\]$/);return t?[t[2]?Number(t[2]):null,t[1]]:void 0}const _t=Object.freeze(Object.defineProperty({__proto__:null,encodeAbiParameters:at,encodeAddress:pn,prepareParam:Ae},Symbol.toStringTag,{value:"Module"})),Te=new Qn(4096);function z(e){const t=typeof e=="string"?e:Ke(e);if(Te.has(t))return Te.get(t);const n=typeof e=="string"?Pe(e):e,s=[st(n),n.inputs,n.outputs];return Te.set(t,s),s}async function A(e){return typeof e=="function"?await e():e}function yn(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="function")}function ve(e){const{contract:t,method:n,params:r,...s}=e,i=()=>(async()=>{var a,o;if(Array.isArray(n))return n;if(yn(n))return z(n);if(typeof n=="function")return z(await n(t));if(typeof n=="string"&&n.startsWith("function ")){const c=Pe(n);if(c.type==="function")return z(c);throw new Error('"method" passed is not of type "function"')}if(t.abi&&((a=t.abi)==null?void 0:a.length)>0){const c=(o=t.abi)==null?void 0:o.find(u=>u.type==="function"&&u.name===n);if(c)return z(c)}throw new Error(`Could not resolve method "${n}".`)})();return en({...s,to:t.address,chain:t.chain,client:t.client,data:async()=>{let a;return Array.isArray(n)?a=n:a=await i(),a[1].length===0?a[0]:a[0]+at(a[1],await A(r??[])).slice(2)}},{preparedMethod:i,contract:t})}async function J(e){const{contract:t,method:n,params:r}=e,s=async()=>{var l,p;if(Array.isArray(n))return n;if(yn(n))return z(n);if(typeof n=="function")return z(await n(t));if(typeof n=="string"&&n.startsWith("function ")){const y=Pe(n);if(y.type==="function")return z(y);throw new Error('"method" passed is not of type "function"')}if(t.abi&&((l=t.abi)==null?void 0:l.length)>0){const y=(p=t.abi)==null?void 0:p.find(b=>b.type==="function"&&b.name===n);if(y)return z(y)}throw new Error(`Could not resolve method "${n}".`)},[i,a]=await Promise.all([s(),typeof r=="function"?r():r]);let o;i[1].length===0?o=i[0]:o=i[0]+at(i[1],a).slice(2);const c=ee({chain:t.chain,client:t.client}),u=await ur(c,{data:o,to:t.address,from:e.from}),d=we(i[2],u);return Array.isArray(d)&&d.length===1?d[0]:d}const le=Object.freeze(Object.defineProperty({__proto__:null,readContract:J},Symbol.toStringTag,{value:"Module"})),li="0x3e429396",fi=[],pi=[{type:"tuple[]",components:[{type:"address",name:"implementation"},{type:"tuple",name:"config",components:[{type:"bool",name:"registerInstallationCallback"},{type:"bytes4[]",name:"requiredInterfaces"},{type:"bytes4[]",name:"supportedInterfaces"},{type:"tuple[]",name:"callbackFunctions",components:[{type:"bytes4",name:"selector"}]},{type:"tuple[]",name:"fallbackFunctions",components:[{type:"bytes4",name:"selector"},{type:"uint256",name:"permissionBits"}]}]}]}];async function yi(e){return J({contract:e.contract,method:[li,fi,pi],params:[]})}const mi="https://{clientId}.ipfscdn.io/ipfs/{cid}";function hi(e){var t,n;if(e.uri.startsWith("ipfs://")){const r=((n=(t=e.client.config)==null?void 0:t.storage)==null?void 0:n.gatewayUrl)??mi,s=e.client.clientId,i=gi(e.uri);let a;return typeof globalThis<"u"&&"Application"in globalThis&&(a=globalThis.Application.applicationId),`${r.replace("{clientId}",s).split("/ipfs")[0]}/ipfs/${i}${a?`?bundleId=${a}`:""}`}if(e.uri.startsWith("http"))return e.uri;throw new Error('Invalid URI scheme, expected "ipfs://" or "http(s)://"')}function gi(e){if(!e.startsWith("ipfs://"))return e;const t=e.search(/\/(Qm|baf)/i);return e.slice(t+1)}async function bi(e){var r,s,i,a,o,c,u,d,l,p;let t;if(e.uri.startsWith("ar://")){const{resolveArweaveScheme:y}=await P(async()=>{const{resolveArweaveScheme:b}=await import("./arweave-CAGvOb64.js");return{resolveArweaveScheme:b}},[]);t=y(e)}else t=hi(e);const n=await xe(e.client)(t,{keepalive:(i=(s=(r=e.client.config)==null?void 0:r.storage)==null?void 0:s.fetch)==null?void 0:i.keepalive,headers:(c=(o=(a=e.client.config)==null?void 0:a.storage)==null?void 0:o.fetch)==null?void 0:c.headers,requestTimeoutMs:((l=(d=(u=e.client.config)==null?void 0:u.storage)==null?void 0:d.fetch)==null?void 0:l.requestTimeoutMs)??6e4});if(!n.ok)throw(p=n.body)==null||p.cancel(),new Error(`Failed to download file: ${n.statusText}`);return n}const ct="123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz",Re=ct.length,xi=ct.charAt(0),wi=Math.log(256)/Math.log(Re);function Pi(e){if(!(e instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(e.length===0)return"";let t=0,n=0,r=0;const s=e.length;for(;r!==s&&e[r]===0;)r++,t++;const i=(s-r)*wi+1>>>0,a=new Uint8Array(i);for(;r!==s;){let u=e[r]||0,d=0;for(let l=i-1;(u!==0||d<n)&&l!==-1;l--,d++)u+=256*(a[l]||0)>>>0,a[l]=u%Re>>>0,u=u/Re>>>0;if(u!==0)throw new Error("Non-zero carry");n=d,r++}let o=i-n;for(;o!==i&&a[o]===0;)o++;let c=xi.repeat(t);for(;o<i;++o)c+=ct.charAt(a[o]||0);return c}let x,me,h=0,Ve={},N,mn;const Et=0;let Ne=0,ae,ze,Ai;const Gt={useRecords:!1,mapsAsObjects:!0};function vi(e){let t;if(e<16&&(t=hn(e)))return t;if(e>64&&decoder)return decoder.decode(x.subarray(h,h+=e));const n=h+e,r=[];for(t="";h<n;){const s=x[h++];if(!(s&128))r.push(s);else if((s&224)===192){const i=x[h++]&63;r.push((s&31)<<6|i)}else if((s&240)===224){const i=x[h++]&63,a=x[h++]&63;r.push((s&31)<<12|i<<6|a)}else if((s&248)===240){const i=x[h++]&63,a=x[h++]&63,o=x[h++]&63;let c=(s&7)<<18|i<<12|a<<6|o;c>65535&&(c-=65536,r.push(c>>>10&1023|55296),c=56320|c&1023),r.push(c)}else r.push(s);r.length>=4096&&(t+=v.apply(String,r),r.length=0)}return r.length>0&&(t+=v.apply(String,r)),t}class ut{constructor(){Object.assign(this,Gt)}decodeKey(t){return t}decode(t,n=-1){me=n>-1?n:t.length,h=0,Ne=0,mn=null,ae=null,x=t;try{Ai=t.dataView||(t.dataView=new DataView(t.buffer,t.byteOffset,t.byteLength))}catch(r){throw x=null,t instanceof Uint8Array?r:new Error(`Source must be a Uint8Array or Buffer but was a ${t&&typeof t=="object"?t.constructor.name:typeof t}`)}return this instanceof ut?(Ve=this,this.sharedValues&&(this.pack?new Array(this.maxPrivatePackedValues||16).concat(this.sharedValues):this.sharedValues),(!N||N.length>0)&&(N=[])):(Ve=Gt,(!N||N.length>0)&&(N=[])),_i()}}function _i(){try{const e=ye();if(ae){if(h>=ae.postBundlePosition){const t=new Error("Unexpected bundle position");throw t.incomplete=!0,t}h=ae.postBundlePosition,ae=null}if(h===me)N=null,x=null,ze&&(ze=null);else if(h>me){const t=new Error("Unexpected end of CBOR data");throw t.incomplete=!0,t}else throw new Error("Data read, but end of buffer not reached");return e}catch(e){throw $i(),(e instanceof RangeError||e.message.startsWith("Unexpected end of buffer"))&&(e.incomplete=!0),e}}function ye(){let e=x[h++];const t=e>>5;if(e=e&31,e>23)switch(e){case 24:e=x[h++];break;default:throw new Error(`Unknown token ${e}`)}switch(t){case 0:return e;case 1:return~e;case 2:return Ti(e);case 3:if(Ne>=h)return mn.slice(h-Et,(h+=e)-Et);if(Ne===0&&me<140&&e<32){const n=e<16?hn(e):Gi(e);if(n!==null)return n}return vi(e);case 4:{const n=new Array(e);for(let r=0;r<e;r++)n[r]=ye();return n}case 5:{const n={};for(let r=0;r<e;r++)n[Ei(ye())]=ye();return n}default:if(Number.isNaN(e)){const n=new Error("Unexpected end of CBOR data");throw n.incomplete=!0,n}throw new Error(`Unknown CBOR token ${e}`)}}function Ei(e){if(typeof e=="string")return e==="__proto__"?"__proto_":e;if(typeof e!="object")return e.toString();throw new Error(`Invalid property name type ${typeof e}`)}const v=String.fromCharCode;function Gi(e){const t=h,n=new Array(e);for(let r=0;r<e;r++){const s=x[h++];if((s&128)>0){h=t;return}n[r]=s}return v.apply(String,n)}function hn(e){if(e<4){if(e<2){if(e===0)return"";const O=x[h++];if((O&128)>1){h-=1;return}return v(O)}const f=x[h++],g=x[h++];if((f&128)>0||(g&128)>0){h-=2;return}if(e<3)return v(f,g);const w=x[h++];if((w&128)>0){h-=3;return}return v(f,g,w)}const t=x[h++],n=x[h++],r=x[h++],s=x[h++];if((t&128)>0||(n&128)>0||(r&128)>0||(s&128)>0){h-=4;return}if(e<6){if(e===4)return v(t,n,r,s);const f=x[h++];if((f&128)>0){h-=5;return}return v(t,n,r,s,f)}if(e<8){const f=x[h++],g=x[h++];if((f&128)>0||(g&128)>0){h-=6;return}if(e<7)return v(t,n,r,s,f,g);const w=x[h++];if((w&128)>0){h-=7;return}return v(t,n,r,s,f,g,w)}const i=x[h++],a=x[h++],o=x[h++],c=x[h++];if((i&128)>0||(a&128)>0||(o&128)>0||(c&128)>0){h-=8;return}if(e<10){if(e===8)return v(t,n,r,s,i,a,o,c);const f=x[h++];if((f&128)>0){h-=9;return}return v(t,n,r,s,i,a,o,c,f)}if(e<12){const f=x[h++],g=x[h++];if((f&128)>0||(g&128)>0){h-=10;return}if(e<11)return v(t,n,r,s,i,a,o,c,f,g);const w=x[h++];if((w&128)>0){h-=11;return}return v(t,n,r,s,i,a,o,c,f,g,w)}const u=x[h++],d=x[h++],l=x[h++],p=x[h++];if((u&128)>0||(d&128)>0||(l&128)>0||(p&128)>0){h-=12;return}if(e<14){if(e===12)return v(t,n,r,s,i,a,o,c,u,d,l,p);const f=x[h++];if((f&128)>0){h-=13;return}return v(t,n,r,s,i,a,o,c,u,d,l,p,f)}const y=x[h++],b=x[h++];if((y&128)>0||(b&128)>0){h-=14;return}if(e<15)return v(t,n,r,s,i,a,o,c,u,d,l,p,y,b);const m=x[h++];if((m&128)>0){h-=15;return}return v(t,n,r,s,i,a,o,c,u,d,l,p,y,b,m)}function Ti(e){return Ve.copyBuffers?Uint8Array.prototype.slice.call(x,h,h+=e):x.subarray(h,h+=e)}function $i(){x=null,ze=null,N=null}const Ii=new Array(147);for(let e=0;e<256;e++)Ii[e]=+`1e${Math.floor(45.15-e*.30103)}`;const Si=new ut,Oi=Si.decode;function Li(e){return Ye(e,{strict:!1})?e:`0x${e}`}function Bi(e){const t=Ct(Li(e)),n=t[t.length-2]*256+t[t.length-1],r=t.length-2-n;if(r<0||r>t.length)return;const s=t.slice(r,-2),i=Oi(s);if("ipfs"in i)return`ipfs://${Pi(i.ipfs)}`}const $e=new WeakMap;function Ui(e,t="https://contract.thirdweb.com/abi"){if($e.has(e))return $e.get(e);const n=(async()=>{if(e.abi)return e.abi;try{return await Di(e,t)}catch{return await Ri(e)}})();return $e.set(e,n),n}async function Di(e,t="https://contract.thirdweb.com/abi"){const r=await(await xe(e.client)(`${t}/${e.chain.id}/${e.address}`)).json();if(!r||r.error)throw new Error(`Failed to resolve ABI from contract API. ${r.error||""}`);return r}async function gn(e){const t=await Xn(e);if(t==="0x"){const{id:r,name:s}=e.chain;throw new Error(`Failed to load contract bytecode. Make sure the contract [${e.address}] exists on the chain [${s||"Unknown Chain"} (chain id: ${r})]`)}const n=Bi(t);if(!n)return[];try{return(await(await bi({uri:n,client:e.client})).json()).output.abi}catch{return[]}}const Fi={inputs:[],name:"getAllPlugins",outputs:[{components:[{internalType:"bytes4",name:"functionSelector",type:"bytes4"},{internalType:"string",name:"functionSignature",type:"string"},{internalType:"address",name:"pluginAddress",type:"address"}],internalType:"struct IPluginMap.Plugin[]",name:"registered",type:"tuple[]"}],stateMutability:"view",type:"function"},Ci={inputs:[],name:"getAllExtensions",outputs:[{components:[{components:[{internalType:"string",name:"name",type:"string"},{internalType:"string",name:"metadataURI",type:"string"},{internalType:"address",name:"implementation",type:"address"}],internalType:"struct IExtension.ExtensionMetadata",name:"metadata",type:"tuple"},{components:[{internalType:"bytes4",name:"functionSelector",type:"bytes4"},{internalType:"string",name:"functionSignature",type:"string"}],internalType:"struct IExtension.ExtensionFunction[]",name:"functions",type:"tuple[]"}],internalType:"struct IExtension.Extension[]",name:"allExtensions",type:"tuple[]"}],stateMutability:"view",type:"function"},Mi={inputs:[],name:"facets",outputs:[{components:[{internalType:"address",name:"facetAddress",type:"address"},{internalType:"bytes4[]",name:"functionSelectors",type:"bytes4[]"}],type:"tuple[]"}],stateMutability:"view",type:"function"};async function Ri(e,t,n){const[r,s,i,a,o]=await Promise.all([gn(e),Vi(e),Ni(e),zi(e),ji(e)]),c=[...new Set([...s,...i,...a,...o])];if(!c.length)return r;const u=await Hi({contract:e,plugins:c,resolveSubAbi:n});return ki({rootAbi:r,pluginAbis:u})}async function Vi(e){try{const{readContract:t}=await P(async()=>{const{readContract:r}=await Promise.resolve().then(()=>le);return{readContract:r}},void 0),n=await t({contract:e,method:Fi});return n.length?[...new Set(n.map(r=>r.pluginAddress))]:[]}catch{}return[]}async function Ni(e){try{const{readContract:t}=await P(async()=>{const{readContract:r}=await Promise.resolve().then(()=>le);return{readContract:r}},void 0),n=await t({contract:e,method:Ci});return n.length?[...new Set(n.map(r=>r.metadata.implementation))]:[]}catch{}return[]}async function zi(e){try{const t=await yi({contract:e});return t.length?[...new Set(t.map(n=>n.implementation))]:[]}catch{}return[]}async function ji(e){try{const{readContract:t}=await P(async()=>{const{readContract:r}=await Promise.resolve().then(()=>le);return{readContract:r}},void 0),n=await t({contract:e,method:Mi});return n.length?n.map(r=>r.facetAddress):[]}catch{}return[]}async function Hi(e){return Promise.all(e.plugins.map(t=>{const n={...e.contract,address:t};return e.resolveSubAbi?e.resolveSubAbi(n):gn(n)}))}function ki(e){let t=e.pluginAbis.flat().filter(r=>r.type!=="constructor");e.rootAbi&&(t=[...e.rootAbi||[],...t].filter(Boolean));const n=[...new Set(Ps(t))];return ni(n)}const Ie=new WeakMap;async function te(e){if(Ie.has(e))return Ie.get(e);const t=(async()=>{const[n,r,{concatHex:s}]=await Promise.all([bn(e),xn(e),P(()=>Promise.resolve().then(()=>da),void 0)]);return r?s([n,r]):n})();return Ie.set(e,t),t}async function bn(e){if(e.data===void 0)return"0x";if(typeof e.data=="function"){const t=await e.data();return t||"0x"}return e.data}async function xn(e){if(e.extraCallData){if(typeof e.extraCallData=="function"){const t=await e.extraCallData();if(!t)return;if(!t.startsWith("0x"))throw Error("Invalid extra calldata - must be a hex string");return t==="0x"?void 0:t}if(!e.extraCallData.startsWith("0x"))throw Error("Invalid extra calldata - must be a hex string");return e.extraCallData}}const Wi=Object.freeze(Object.defineProperty({__proto__:null,encode:te,getDataFromTx:bn,getExtraCallDataFromTx:xn},Symbol.toStringTag,{value:"Module"}));function oe(e){if(e===0n||(e&e-1n)===0n)return e;let t=1n;for(;e>0n;)e>>=1n,t<<=1n;return t}async function Tt(e){const{error:t,contract:n}=e;if(typeof t=="object"){const r=t;if(r.data){if(r.data!=="0x"&&Ye(r.data)){let s=n==null?void 0:n.abi;n&&!s&&(s=await Ui(n).catch(()=>{}));const i=Zt({data:r.data,abi:s});return new $t(`${i.errorName}${i.args?` - ${i.args}`:""}`,n)}return new $t(`Execution Reverted: ${Ke(r)}`,n)}}return t}class $t extends Error{constructor(t,n){var s;let r=t;super(r),Object.defineProperty(this,"contractAddress",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"chainId",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name="TransactionError",this.contractAddress=n==null?void 0:n.address,this.chainId=(s=n==null?void 0:n.chain)==null?void 0:s.id,this.message=r}}const Se=new WeakMap;async function Zi(e){var i;const t=e.from??((i=e.account)==null?void 0:i.address)??void 0,n={...e.transaction,from:t};if(Se.has(n))return Se.get(n);const{account:r}=e,s=(async()=>{var b,m;const a=await A(e.transaction.gas);if(a!==void 0)return a;if(r!=null&&r.estimateGas)try{let f=await r.estimateGas(e.transaction);return(b=e.transaction.chain.experimental)!=null&&b.increaseZeroByteCount&&(f=oe(f)),f}catch(f){throw await Tt({error:f,contract:e.transaction.__contract})}const{encode:o}=await P(async()=>{const{encode:f}=await Promise.resolve().then(()=>Wi);return{encode:f}},void 0),[c,u,d]=await Promise.all([o(e.transaction),A(e.transaction.to),A(e.transaction.value)]),[{getRpcClient:l},{eth_estimateGas:p}]=await Promise.all([P(()=>import("./app-CjkAWxH4.js").then(f=>f.aU),[]),P(()=>import("./eth_estimateGas-Cj4V9rzg.js"),__vite__mapDeps([0,1]))]),y=l(e.transaction);try{let f=await p(y,Kr({to:u,data:c,from:t,value:d}));return(m=e.transaction.chain.experimental)!=null&&m.increaseZeroByteCount&&(f=oe(f)),f}catch(f){throw await Tt({error:f,contract:e.transaction.__contract})}})();return Se.set(n,s),s}async function Ki(e){const{client:t,chain:n,percentMultiplier:r}=e,s=ee({client:t,chain:n}),i=await dr(s),a=r?i/BigInt(100)*BigInt(r):0n;return i+a}function wn(e,t){let[n,r=""]=e.split(".");const s=n.startsWith("-")?"-":"";if(s&&(n=n.slice(1)),r=r.padEnd(t,"0"),t===0)r[0]&&Number.parseInt(r[0])>=5&&(n=(BigInt(n)+1n).toString()),r="";else if(r.length>t){const i=r[t];i&&Number.parseInt(i,10)>=5?(r=(BigInt(r.substring(0,t))+1n).toString().padStart(t,"0"),r.length>t&&(n=(BigInt(n)+1n).toString(),r=r.substring(r.length-t))):r=r.substring(0,t)}return BigInt(`${s}${n}${r}`)}const Yi=[78600,2040,248,9372,841,842,2016,9768];async function Ji(e){var i;const[t,n,r]=await Promise.all([A(e.maxFeePerGas),A(e.maxPriorityFeePerGas),A(e.gasPrice)]);if(t!==void 0&&n!==void 0)return{maxFeePerGas:t,maxPriorityFeePerGas:n};if(r)return{gasPrice:r};const s=await Pn(e.client,e.chain);return(i=e.chain.experimental)!=null&&i.increaseZeroByteCount?s.gasPrice?{gasPrice:oe(s.gasPrice)}:{maxFeePerGas:t??oe(s.maxFeePerGas??0n),maxPriorityFeePerGas:n??oe(s.maxPriorityFeePerGas??0n)}:s.gasPrice?s:{maxFeePerGas:t??s.maxFeePerGas,maxPriorityFeePerGas:n??s.maxPriorityFeePerGas}}async function Pn(e,t){if(!Yi.includes(t.id)){const n=await Qi(e,t);if(n.maxFeePerGas!==null&&n.maxPriorityFeePerGas!==null)return{maxFeePerGas:n.maxFeePerGas,maxPriorityFeePerGas:n.maxPriorityFeePerGas}}return{gasPrice:await Ki({client:e,chain:t,percentMultiplier:10})}}async function Qi(e,t){let n=null,r=null;const s=ee({client:e,chain:t}),[i,a]=await Promise.all([hs(s,{blockTag:"latest"}),gs(s).catch(()=>null)]),o=(i==null?void 0:i.baseFeePerGas)??0n,c=t.id;return c===220||c===1220?{maxFeePerGas:null,maxPriorityFeePerGas:null}:(c===80002||c===137?r=await ta(c):a!==null&&(r=a),r==null?{maxFeePerGas:null,maxPriorityFeePerGas:null}:(r=Xi(r),n=o*2n+r,(c===42220||c===44787||c===62320)&&(r=n),{maxFeePerGas:n,maxPriorityFeePerGas:r}))}function Xi(e,t=10){const n=e/BigInt(100)*BigInt(t);return e+n}function qi(e){switch(e){case 137:return"https://gasstation.polygon.technology/v2";case 80002:return"https://gasstation-testnet.polygon.technology/v2"}}const ea=31n;async function ta(e){const t=qi(e);try{const r=(await(await fetch(t)).json()).fast.maxPriorityFee;if(r>0){const s=Number.parseFloat(r).toFixed(9);return wn(s,9)}}catch(n){console.error("failed to fetch gas",n)}return ea}async function An(e){const t=ee(e.transaction),n=e.transaction.chain.id,r=e.from;let[s,i,a,o,c,u,d]=await Promise.all([te(e.transaction),(async()=>{const p=await A(e.transaction.nonce);return p!==void 0?p:r?await P(async()=>{const{eth_getTransactionCount:y}=await import("./eth_getTransactionCount-Bfb0lzTY.js");return{eth_getTransactionCount:y}},__vite__mapDeps([2,1])).then(({eth_getTransactionCount:y})=>y(t,{address:r,blockTag:"pending"})):void 0})(),Zi(e),Ji(e.transaction),A(e.transaction.to),A(e.transaction.accessList),A(e.transaction.value)]);const l=await A(e.transaction.extraGas);return l&&(a+=l),{to:c,chainId:n,data:s,gas:a,nonce:i,accessList:u,value:d,...o}}function na(e){return!!(e&&typeof e=="object"&&"type"in e&&e.type==="event")}function vn(e){const{signature:t}=e;let n;return na(t)?n=t:n=Pe(t),{abiEvent:n,hash:Xe(n),topics:Ir({abi:[n],args:e.filters})}}function ra(e){const{logs:t,events:n,strict:r}=e;return cs({logs:t,abi:n.map(s=>s.abiEvent),strict:r})}function sa(e){let t;return()=>(t||(t=e()),t)}const ia="0x095ea7b3",aa=[{type:"address",name:"spender"},{type:"uint256",name:"value"}],oa=[{type:"bool"}];function ca(e){const t=sa(async()=>"asyncParams"in e?await e.asyncParams():e);return ve({contract:e.contract,method:[ia,aa,oa],params:async()=>{const n=await t();return[n.spender,n.value]},value:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.value},accessList:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.accessList},gas:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.gas},gasPrice:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.gasPrice},maxFeePerGas:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.maxFeePerGas},maxPriorityFeePerGas:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.maxPriorityFeePerGas},nonce:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.nonce},extraGas:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.extraGas},erc20Value:async()=>{var n;return(n=(await t()).overrides)==null?void 0:n.erc20Value}})}function ua(e){return ca({contract:e.contract,asyncParams:async()=>{let t;if("amount"in e){const{decimals:n}=await P(async()=>{const{decimals:s}=await import("./decimals-CUGxQaU7.js");return{decimals:s}},__vite__mapDeps([3,1,4])),r=await n(e).catch(()=>18);t=wn(e.amount.toString(),r)}else t=e.amountWei;return{spender:e.spender,value:t,overrides:{erc20Value:{amountWei:t,tokenAddress:e.contract.address}}}}})}function dt(e){return`0x${e.reduce((t,n)=>t+n.replace("0x",""),"")}`}const da=Object.freeze(Object.defineProperty({__proto__:null,concatHex:dt},Symbol.toStringTag,{value:"Module"})),la="0xdd62ed3e",fa=[{type:"address",name:"owner"},{type:"address",name:"spender"}],pa=[{type:"uint256"}];async function ya(e){return J({contract:e.contract,method:[la,fa,pa],params:[e.owner,e.spender]})}function pe(e){if(["string","number"].includes(typeof e)&&!Number.isInteger(Number(e)))throw new Error(`Expected value to be an integer to convert to a bigint, got ${e} of type ${typeof e}`);return e instanceof Uint8Array?BigInt(qn(e)):BigInt(e)}const It=ys*32n;class ma extends D{constructor({givenLength:t,maxBytecodeSize:n}){super(`Bytecode cannot be longer than ${n} bytes. Given length: ${t}`,{name:"BytecodeLengthExceedsMaxSizeError"})}}class ha extends D{constructor({givenLengthInWords:t}){super(`Bytecode length in 32-byte words must be odd. Given length in words: ${t}`,{name:"BytecodeLengthInWordsMustBeOddError"})}}class ga extends D{constructor({givenLength:t}){super(`The bytecode length in bytes must be divisible by 32. Given length: ${t}`,{name:"BytecodeLengthMustBeDivisibleBy32Error"})}}function ba(e){const t=W(e);if(t.length%32!==0)throw new ga({givenLength:t.length});if(t.length>It)throw new ma({givenLength:t.length,maxBytecodeSize:It});const n=ss(t),r=W(n),s=t.length/32;if(s%2===0)throw new ha({givenLengthInWords:s});const i=W(s),a=Y(i,{size:2}),o=new Uint8Array([1,0]);return r.set(o,0),r.set(a,2),r}const _n=50000n,xa=e=>{const t=wa(e);return{domain:{name:"zkSync",version:"2",chainId:e.chainId},types:{Transaction:[{name:"txType",type:"uint256"},{name:"from",type:"uint256"},{name:"to",type:"uint256"},{name:"gasLimit",type:"uint256"},{name:"gasPerPubdataByteLimit",type:"uint256"},{name:"maxFeePerGas",type:"uint256"},{name:"maxPriorityFeePerGas",type:"uint256"},{name:"paymaster",type:"uint256"},{name:"nonce",type:"uint256"},{name:"value",type:"uint256"},{name:"data",type:"bytes"},{name:"factoryDeps",type:"bytes32[]"},{name:"paymasterInput",type:"bytes"}]},primaryType:"Transaction",message:t}};function wa(e){const{gas:t,nonce:n,to:r,from:s,value:i,maxFeePerGas:a,maxPriorityFeePerGas:o,paymaster:c,paymasterInput:u,gasPerPubdata:d,data:l,factoryDeps:p}=e;return{txType:113n,from:BigInt(s),to:r?BigInt(r):0n,gasLimit:t??0n,gasPerPubdataByteLimit:d??_n,maxFeePerGas:a??0n,maxPriorityFeePerGas:o??0n,paymaster:c?BigInt(c):0n,nonce:n?BigInt(n):0n,value:i??0n,data:l||"0x0",factoryDeps:(p==null?void 0:p.map(y=>I(ba(y))))??[],paymasterInput:u||"0x"}}async function Pa(e){const{account:t,transaction:n}=e,r=await ft(e),s=await lt({account:t,eip712Transaction:r,chainId:n.chain.id}),i=ee(n);return{transactionHash:await or(i,s),chain:n.chain,client:n.client}}async function lt(e){const{account:t,eip712Transaction:n,chainId:r}=e,s=xa(n),i=await t.signTypedData({...s});return Aa({...n,chainId:r,customSignature:i})}async function ft(e){const{account:t,transaction:n}=e;let[r,s,i,a,o,c,u]=await Promise.all([te(n),A(n.to),A(n.value),A(n.gas),A(n.maxFeePerGas),A(n.maxPriorityFeePerGas),A(n.eip712).then(l=>l==null?void 0:l.gasPerPubdata)]);if(!a||!o||!c){const p=await ee(n)({method:"zks_estimateFee",params:[{from:t.address,to:s,data:r,value:i?U(i):void 0}]});a=pe(p.gas_limit),o=pe(p.max_fee_per_gas)*2n,c=pe(p.max_priority_fee_per_gas)||1n,u=pe(p.gas_per_pubdata_limit)*2n}return{...await An({transaction:{...n,gas:a,maxFeePerGas:o,maxPriorityFeePerGas:c},from:t.address}),...n.eip712,gasPerPubdata:u,from:t.address}}function Aa(e){const{chainId:t,gas:n,nonce:r,to:s,from:i,value:a,maxFeePerGas:o,maxPriorityFeePerGas:c,customSignature:u,factoryDeps:d,paymaster:l,paymasterInput:p,gasPerPubdata:y,data:b}=e,m=[r?I(r):"0x",c?I(c):"0x",o?I(o):"0x",n?I(n):"0x",s??"0x",a?I(a):"0x",b??"0x0",I(t),I(""),I(""),I(t),i??"0x",y?I(y):I(_n),d??[],u??"0x",l&&p?[l,p]:[]];return dt(["0x71",Hr(m)])}const ho=Object.freeze(Object.defineProperty({__proto__:null,populateEip712Transaction:ft,sendEip712Transaction:Pa,signEip712Transaction:lt},Symbol.toStringTag,{value:"Module"}));function va(e){return e.id===324||e.id===300||e.id===302||e.id===11124}function _a(e={}){return vn({signature:"event UserOperationRevertReason(bytes32 indexed userOpHash, address indexed sender, uint256 nonce, bytes revertReason)",filters:e})}function Ea(e={}){return vn({signature:"event PostOpRevertReason(bytes32 indexed userOpHash, address indexed sender, uint256 nonce, bytes revertReason)",filters:e})}function Ga(e){const{receipt:t}=e,n={...t,transactionHash:t.transactionHash,blockNumber:t.blockNumber?BigInt(t.blockNumber):null,contractAddress:t.contractAddress?t.contractAddress:null,cumulativeGasUsed:t.cumulativeGasUsed?BigInt(t.cumulativeGasUsed):null,effectiveGasPrice:t.effectiveGasPrice?BigInt(t.effectiveGasPrice):null,gasUsed:t.gasUsed?BigInt(t.gasUsed):null,logs:t.logs,to:t.to?t.to:null,transactionIndex:t.transactionIndex,status:t.status,type:t.type};return t.blobGasPrice&&(n.blobGasPrice=BigInt(t.blobGasPrice)),t.blobGasUsed&&(n.blobGasUsed=BigInt(t.blobGasUsed)),{...e,receipt:n,userOpHash:e.userOpHash,actualGasCost:BigInt(e.actualGasCost),actualGasUsed:BigInt(e.actualGasUsed),nonce:BigInt(e.nonce)}}const Ta=()=>{const e=BigInt(Math.floor(Math.random()*4294967296)),t=BigInt(Math.floor(Math.random()*4294967296)),n=BigInt(Math.floor(Math.random()*4294967296)),r=BigInt(Math.floor(Math.random()*4294967296)),s=BigInt(Math.floor(Math.random()*4294967296)),i=BigInt(Math.floor(Math.random()*4294967296));return e<<BigInt(160)|t<<BigInt(128)|n<<BigInt(96)|r<<BigInt(64)|s<<BigInt(32)|i};function pt(e){return Object.fromEntries(Object.entries(e).map(([t,n])=>[t,n==null||Ye(n)?n:I(n)]))}async function $a(e){return ne({...e,operation:"eth_sendUserOperation",params:[pt(e.userOp),e.options.entrypointAddress??M]})}async function he(e){const t=await ne({...e,operation:"eth_estimateUserOperationGas",params:[pt(e.userOp),e.options.entrypointAddress??M]});return{preVerificationGas:T(t.preVerificationGas),verificationGas:T(t.verificationGas),verificationGasLimit:T(t.verificationGasLimit),callGasLimit:T(t.callGasLimit)+er,paymasterVerificationGasLimit:t.paymasterVerificationGasLimit!==void 0?T(t.paymasterVerificationGasLimit):void 0,paymasterPostOpGasLimit:t.paymasterPostOpGasLimit!==void 0?T(t.paymasterPostOpGasLimit):void 0}}async function Ia(e){const t=await ne({...e,operation:"thirdweb_getUserOperationGasPrice",params:[]});return{maxPriorityFeePerGas:T(t.maxPriorityFeePerGas),maxFeePerGas:T(t.maxFeePerGas)}}async function Sa(e){var n,r;const t=await Oa(e);if(t){if(t.success===!1){const i=(r=(n=ra({events:[_a(),Ea()],logs:t.logs})[0])==null?void 0:n.args)==null?void 0:r.revertReason;if(!i)throw new Error(`UserOp failed at txHash: ${t.receipt.transactionHash}`);const a=Zt({data:i});throw new Error(`UserOp failed with reason: '${a.args.join(",")}' at txHash: ${t.receipt.transactionHash}`)}return t.receipt}}async function Oa(e){const t=await ne({options:e,operation:"eth_getUserOperationReceipt",params:[e.userOpHash]});if(t)return Ga(t)}async function La(e){const t=await ne({options:e.options,operation:"zk_paymasterData",params:[e.transaction]});return{paymaster:t.paymaster,paymasterInput:t.paymasterInput}}async function Ba(e){return{transactionHash:(await ne({options:e.options,operation:"zk_broadcastTransaction",params:[{...e.transaction,signedTransaction:e.signedTransaction}]})).transactionHash}}async function ne(e){const{options:t,operation:n,params:r}=e,i=fe(t.entrypointAddress||M)==="v0.6"?"v1":"v2",a=t.bundlerUrl??Je(t.chain,i),c=await xe(t.client)(a,{method:"POST",headers:{"Content-Type":"application/json"},body:Ke({jsonrpc:"2.0",id:1,method:n,params:r})}),u=await c.json();if(!c.ok||u.error){let d=u.error||c.statusText;typeof d=="object"&&(d=JSON.stringify(d));const l=u.code||"UNKNOWN";throw new Error(`${n} error: ${d}
Status: ${c.status}
Code: ${l}`)}return u.result}async function Ua(e){const{factoryContract:t,predictAddressOverride:n,adminAddress:r,accountSalt:s,accountAddress:i}=e;if(n)return n(t);if(i)return i;if(!r)throw new Error("Account address is required to predict the smart wallet address.");const a=Ze(s??"");return J({contract:t,method:"function getAddress(address, bytes) returns (address)",params:[r,a]})}function En(e){const{adminAddress:t,factoryContract:n,createAccountOverride:r,accountSalt:s}=e;return r?r(n):ve({contract:n,method:"function createAccount(address, bytes) returns (address)",params:[t,Ze(s??"")]})}function Gn(e){const{accountContract:t,transaction:n,executeOverride:r}=e;return r?r(t,n):ve({contract:t,method:"function execute(address, uint256, bytes)",params:[n.to||"",n.value||0n,n.data||"0x"]})}function Da(e){const{accountContract:t,transactions:n,executeBatchOverride:r}=e;return r?r(t,n):ve({contract:t,method:"function executeBatch(address[], uint256[], bytes[])",params:[n.map(s=>s.to||""),n.map(s=>s.value||0n),n.map(s=>s.data||"0x")]})}const Fa="0x35567e1a",Ca=[{type:"address",name:"sender"},{type:"uint192",name:"key"}],Ma=[{type:"uint256",name:"nonce"}];async function Ra(e){return J({contract:e.contract,method:[Fa,Ca,Ma],params:[e.sender,e.key]})}const Va="0xa6193531",Na=[{type:"tuple",name:"userOp",components:[{type:"address",name:"sender"},{type:"uint256",name:"nonce"},{type:"bytes",name:"initCode"},{type:"bytes",name:"callData"},{type:"uint256",name:"callGasLimit"},{type:"uint256",name:"verificationGasLimit"},{type:"uint256",name:"preVerificationGas"},{type:"uint256",name:"maxFeePerGas"},{type:"uint256",name:"maxPriorityFeePerGas"},{type:"bytes",name:"paymasterAndData"},{type:"bytes",name:"signature"}]}],za=[{type:"bytes32"}];async function ja(e){return J({contract:e.contract,method:[Va,Na,za],params:[e.userOp]})}const Ha="0x22cdde4c",ka=[{type:"tuple",name:"userOp",components:[{type:"address",name:"sender"},{type:"uint256",name:"nonce"},{type:"bytes",name:"initCode"},{type:"bytes",name:"callData"},{type:"bytes32",name:"accountGasLimits"},{type:"uint256",name:"preVerificationGas"},{type:"bytes32",name:"gasFees"},{type:"bytes",name:"paymasterAndData"},{type:"bytes",name:"signature"}]}],Wa=[{type:"bytes32"}];async function Za(e){return J({contract:e.contract,method:[Ha,ka,Wa],params:[e.userOp]})}function Ka(e){return e.factory?_([e.factory,e.factoryData||"0x"]):"0x"}function Ya(e){return _([Y(C(e.verificationGasLimit),{size:16}),Y(C(e.callGasLimit),{size:16})])}function Ja(e){return _([Y(C(e.maxPriorityFeePerGas),{size:16}),Y(C(e.maxFeePerGas),{size:16})])}function Qa(e){return e.paymaster?_([e.paymaster,Y(C(e.paymasterVerificationGasLimit||BigInt(0)),{size:16}),Y(C(e.paymasterPostOpGasLimit||BigInt(0)),{size:16}),e.paymasterData||"0x"]):"0x"}const Xa=e=>({sender:e.sender,nonce:e.nonce,initCode:Ka(e),callData:e.callData,accountGasLimits:Ya(e),preVerificationGas:e.preVerificationGas,gasFees:Ja(e),paymasterAndData:Qa(e),signature:e.signature});async function ge(e){var m;const{userOp:t,paymasterOverride:n,client:r,chain:s,entrypointAddress:i}=e;if(n)return n(t);const a={"Content-Type":"application/json"},o=i??M,u=fe(o)==="v0.6"?"v1":"v2",d=Je(s,u),p=await xe(r)(d,{method:"POST",headers:a,body:JSON.stringify({jsonrpc:"2.0",id:1,method:"pm_sponsorUserOperation",params:[pt(t),o]})}),y=await p.json();if(!p.ok){const f=y.error||p.statusText,g=y.code||"UNKNOWN";throw new Error(`Paymaster error: ${f}
Status: ${p.status}
Code: ${g}`)}if(y.result)return typeof y.result=="string"?{paymasterAndData:y.result}:{paymasterAndData:y.result.paymasterAndData,verificationGasLimit:y.result.verificationGasLimit?T(y.result.verificationGasLimit):void 0,preVerificationGas:y.result.preVerificationGas?T(y.result.preVerificationGas):void 0,callGasLimit:y.result.callGasLimit?T(y.result.callGasLimit):void 0,paymaster:y.result.paymaster,paymasterData:y.result.paymasterData,paymasterVerificationGasLimit:y.result.paymasterVerificationGasLimit?T(y.result.paymasterVerificationGasLimit):void 0,paymasterPostOpGasLimit:y.result.paymasterPostOpGasLimit?T(y.result.paymasterPostOpGasLimit):void 0};const b=((m=y.error)==null?void 0:m.message)||y.error||p.statusText||"unknown error";throw new Error(`Paymaster error from ${d}: ${b}`)}async function qa(e){const t=e.timeoutMs||12e4,n=e.intervalMs||1e3,r=Date.now()+t;for(;Date.now()<r;){const s=await Sa(e);if(s)return s;await new Promise(i=>setTimeout(i,n))}throw new Error("Timeout waiting for userOp to be mined")}async function eo(e){var g;const{transaction:t,accountContract:n,factoryContract:r,adminAddress:s,overrides:i,sponsorGas:a}=e,o=t.chain,c=t.client,u={client:c,chain:o,entrypointAddress:i==null?void 0:i.entrypointAddress},d=fe(((g=e.overrides)==null?void 0:g.entrypointAddress)||M),[l,p,y,b]=await Promise.all([tr(n),te(t),to({executeTx:t,bundlerOptions:u,chain:o,client:c}),ao({accountContract:n,chain:o,client:c,entrypointAddress:i==null?void 0:i.entrypointAddress,getNonceOverride:i==null?void 0:i.getAccountNonce})]),{maxFeePerGas:m,maxPriorityFeePerGas:f}=y;return d==="v0.7"?no({bundlerOptions:u,factoryContract:r,accountContract:n,adminAddress:s,sponsorGas:a,overrides:i,isDeployed:l,nonce:b,callData:p,maxFeePerGas:m,maxPriorityFeePerGas:f}):ro({bundlerOptions:u,factoryContract:r,accountContract:n,adminAddress:s,sponsorGas:a,overrides:i,isDeployed:l,nonce:b,callData:p,maxFeePerGas:m,maxPriorityFeePerGas:f})}async function to(e){const{executeTx:t,bundlerOptions:n,chain:r,client:s}=e;let{maxFeePerGas:i,maxPriorityFeePerGas:a}=t;const c=fe(n.entrypointAddress||M)==="v0.6"?"v1":"v2",u=(n==null?void 0:n.bundlerUrl)??Je(r,c);if(nr(u)){const d=await Ia({options:n});i=d.maxFeePerGas,a=d.maxPriorityFeePerGas}else{const[d,l]=await Promise.all([A(i),A(a)]);if(d&&l)i=d,a=l;else{const p=await Pn(s,r);a=l??p.maxPriorityFeePerGas??0n,i=d??p.maxFeePerGas??0n}}return{maxFeePerGas:i,maxPriorityFeePerGas:a}}async function no(e){const{bundlerOptions:t,isDeployed:n,factoryContract:r,accountContract:s,adminAddress:i,sponsorGas:a,overrides:o,nonce:c,callData:u,maxFeePerGas:d,maxPriorityFeePerGas:l}=e,{chain:p,client:y}=t,b=n?void 0:r.address,m=n?"0x":await te(En({factoryContract:r,adminAddress:i,accountSalt:o==null?void 0:o.accountSalt,createAccountOverride:o==null?void 0:o.createAccount})),f={sender:s.address,nonce:c,callData:u,maxFeePerGas:d,maxPriorityFeePerGas:l,callGasLimit:0n,verificationGasLimit:0n,preVerificationGas:0n,factory:b,factoryData:m,paymaster:void 0,paymasterData:"0x",paymasterVerificationGasLimit:0n,paymasterPostOpGasLimit:0n,signature:Mt};if(a){const g=await ge({userOp:f,chain:p,client:y,entrypointAddress:o==null?void 0:o.entrypointAddress,paymasterOverride:o==null?void 0:o.paymaster});if(g.paymaster&&g.paymasterData&&(f.paymaster=g.paymaster,f.paymasterData=g.paymasterData),g.callGasLimit&&g.verificationGasLimit&&g.preVerificationGas&&g.paymasterPostOpGasLimit&&g.paymasterVerificationGasLimit)f.callGasLimit=g.callGasLimit,f.verificationGasLimit=g.verificationGasLimit,f.preVerificationGas=g.preVerificationGas,f.paymasterPostOpGasLimit=g.paymasterPostOpGasLimit,f.paymasterVerificationGasLimit=g.paymasterVerificationGasLimit;else{const w=await he({userOp:f,options:t});f.callGasLimit=w.callGasLimit,f.verificationGasLimit=w.verificationGasLimit,f.preVerificationGas=w.preVerificationGas,f.paymasterPostOpGasLimit=g.paymasterPostOpGasLimit||0n,f.paymasterVerificationGasLimit=g.paymasterVerificationGasLimit||0n;const O=await ge({userOp:f,chain:p,client:y,entrypointAddress:o==null?void 0:o.entrypointAddress,paymasterOverride:o==null?void 0:o.paymaster});O.paymaster&&O.paymasterData&&(f.paymaster=O.paymaster,f.paymasterData=O.paymasterData)}}else{const g=await he({userOp:f,options:t});f.callGasLimit=g.callGasLimit,f.verificationGasLimit=g.verificationGasLimit,f.preVerificationGas=g.preVerificationGas,f.paymasterPostOpGasLimit=g.paymasterPostOpGasLimit||0n,f.paymasterVerificationGasLimit=g.paymasterVerificationGasLimit||0n}return{...f,signature:"0x"}}async function ro(e){const{bundlerOptions:t,isDeployed:n,factoryContract:r,accountContract:s,adminAddress:i,sponsorGas:a,overrides:o,nonce:c,callData:u,maxFeePerGas:d,maxPriorityFeePerGas:l}=e,{chain:p,client:y}=t,b=n?"0x":await io({factoryContract:r,adminAddress:i,accountSalt:o==null?void 0:o.accountSalt,createAccountOverride:o==null?void 0:o.createAccount}),m={sender:s.address,nonce:c,initCode:b,callData:u,maxFeePerGas:d,maxPriorityFeePerGas:l,callGasLimit:0n,verificationGasLimit:0n,preVerificationGas:0n,paymasterAndData:"0x",signature:Mt};if(a){const f=await ge({userOp:m,chain:p,client:y,entrypointAddress:o==null?void 0:o.entrypointAddress,paymasterOverride:o==null?void 0:o.paymaster}),g="paymasterAndData"in f?f.paymasterAndData:"0x";if(g&&g!=="0x"&&(m.paymasterAndData=g),f.callGasLimit&&f.verificationGasLimit&&f.preVerificationGas)m.callGasLimit=f.callGasLimit,m.verificationGasLimit=f.verificationGasLimit,m.preVerificationGas=f.preVerificationGas;else{const w=await he({userOp:m,options:t});if(m.callGasLimit=w.callGasLimit,m.verificationGasLimit=w.verificationGasLimit,m.preVerificationGas=w.preVerificationGas,g&&g!=="0x"){const O=await ge({userOp:m,chain:p,client:y,entrypointAddress:o==null?void 0:o.entrypointAddress,paymasterOverride:o==null?void 0:o.paymaster}),_e="paymasterAndData"in O?O.paymasterAndData:"0x";_e&&_e!=="0x"&&(m.paymasterAndData=_e)}}}else{const f=await he({userOp:m,options:t});m.callGasLimit=f.callGasLimit,m.verificationGasLimit=f.verificationGasLimit,m.preVerificationGas=f.preVerificationGas}return{...m,signature:"0x"}}async function so(e){const{userOp:t,chain:n,entrypointAddress:r,adminAccount:s}=e,i=fe(r||M);let a;if(i==="v0.7"){const o=Xa(t);a=await Za({contract:q({address:r||rr,chain:n,client:e.client}),userOp:o})}else a=await ja({contract:q({address:r||M,chain:n,client:e.client}),userOp:t});if(s.signMessage){const o=await s.signMessage({message:{raw:Ct(a)}});return{...t,signature:o}}throw new Error("signMessage not implemented in signingAccount")}async function io(e){const{factoryContract:t,adminAddress:n,accountSalt:r,createAccountOverride:s}=e,i=En({factoryContract:t,adminAddress:n,accountSalt:r,createAccountOverride:s});return _([t.address,await te(i)])}async function ao(e){const{accountContract:t,chain:n,client:r,entrypointAddress:s,getNonceOverride:i}=e;return i?i(t):Ra({contract:q({address:s||M,chain:n,client:r}),key:Ta(),sender:t.address})}function oo(e){return e.id==="smart"}const yt=new WeakMap,je=new WeakMap;async function co(e,t,n){var b,m,f,g;const{personalAccount:r,client:s,chain:i}=t;if(!r)throw new Error("Personal wallet does not have an account");const a=n,o=a.factoryAddress??sr((b=n.overrides)==null?void 0:b.entrypointAddress),c=i??a.chain,u="gasless"in a?a.gasless:a.sponsorGas;if(va(c))return[po({creationOptions:n,connectionOptions:t,chain:c,sponsorGas:u}),c];const d=q({client:s,address:o,chain:c}),l=await Ua({factoryContract:d,adminAddress:r.address,predictAddressOverride:(m=a.overrides)==null?void 0:m.predictAddress,accountSalt:(f=a.overrides)==null?void 0:f.accountSalt,accountAddress:(g=a.overrides)==null?void 0:g.accountAddress}).then(w=>w).catch(w=>{throw new Error(`Failed to get account address with factory contract ${d.address} on chain ID ${c.id}: ${(w==null?void 0:w.message)||"unknown error"}`,{cause:w})}),p=q({client:s,address:l,chain:c}),y=await lo({...a,chain:c,sponsorGas:u,personalAccount:r,accountContract:p,factoryContract:d,client:s});return yt.set(r,e),je.set(e,r),[y,c]}async function uo(e){const t=je.get(e);t&&(yt.delete(t),je.delete(e))}async function lo(e){const{accountContract:t}=e,n={address:ir(t.address),async sendTransaction(r){var o,c,u;const s=(o=e.overrides)==null?void 0:o.erc20Paymaster;let i;if(s){await fo({accountContract:t,erc20Paymaster:s,options:e});const d=async()=>({paymasterAndData:dt([s.address,s==null?void 0:s.token]),paymaster:s.address,paymasterData:"0x"});i=((c=e.overrides)==null?void 0:c.paymaster)||d}const a=Gn({accountContract:t,transaction:r,executeOverride:(u=e.overrides)==null?void 0:u.execute});return He({executeTx:a,options:{...e,overrides:{...e.overrides,paymaster:i}}})},async sendBatchTransaction(r){var i;const s=Da({accountContract:t,transactions:r,executeBatchOverride:(i=e.overrides)==null?void 0:i.executeBatch});return He({executeTx:s,options:e})},async signMessage({message:r}){const[{isContractDeployed:s},{readContract:i},{encodeAbiParameters:a},{hashMessage:o},{checkContractWalletSignature:c}]=await Promise.all([P(()=>import("./app-CjkAWxH4.js").then(b=>b.aV),[]),P(()=>Promise.resolve().then(()=>le),void 0),P(()=>Promise.resolve().then(()=>_t),void 0),P(()=>import("./hashMessage-CizUcFF7.js"),__vite__mapDeps([5,1,4])),P(()=>import("./checkContractWalletSignature-BQ3i7Ta8.js"),__vite__mapDeps([6,7,1,4]))]);await s(t)||await St({options:e,account:n,accountContract:t});const d=o(r);let l=!1;try{await i({contract:t,method:"function getMessageHash(bytes32 _hash) public view returns (bytes32)",params:[d]}),l=!0}catch{}let p;if(l){const b=a([{type:"bytes32"}],[d]);p=await e.personalAccount.signTypedData({domain:{name:"Account",version:"1",chainId:e.chain.id,verifyingContract:t.address},primaryType:"AccountMessage",types:{AccountMessage:[{name:"message",type:"bytes"}]},message:{message:b}})}else p=await e.personalAccount.signMessage({message:r});if(await c({contract:t,message:r,signature:p}))return p;throw new Error("Unable to verify signature on smart account, please make sure the smart account is deployed and the signature is valid.")},async signTypedData(r){var m,f,g;const s=Rt(r),[{isContractDeployed:i},{readContract:a},{encodeAbiParameters:o},{checkContractWalletSignedTypedData:c}]=await Promise.all([P(()=>import("./app-CjkAWxH4.js").then(w=>w.aV),[]),P(()=>Promise.resolve().then(()=>le),void 0),P(()=>Promise.resolve().then(()=>_t),void 0),P(()=>import("./checkContractWalletSignedTypedData-fBYqsGTj.js"),__vite__mapDeps([8,7,1,4]))]);if(((f=(m=s.domain)==null?void 0:m.verifyingContract)==null?void 0:f.toLowerCase())===((g=t.address)==null?void 0:g.toLowerCase()))return e.personalAccount.signTypedData(s);await i(t)||await St({options:e,account:n,accountContract:t});const l=ds(s);let p=!1;try{await a({contract:t,method:"function getMessageHash(bytes32 _hash) public view returns (bytes32)",params:[l]}),p=!0}catch{}let y;if(p){const w=o([{type:"bytes32"}],[l]);y=await e.personalAccount.signTypedData({domain:{name:"Account",version:"1",chainId:e.chain.id,verifyingContract:t.address},primaryType:"AccountMessage",types:{AccountMessage:[{name:"message",type:"bytes"}]},message:{message:w}})}else y=await e.personalAccount.signTypedData(s);if(await c({contract:t,data:s,signature:y}))return y;throw new Error("Unable to verify signature on smart account, please make sure the smart account is deployed and the signature is valid.")},async onTransactionRequested(r){var s,i;return(i=(s=e.personalAccount).onTransactionRequested)==null?void 0:i.call(s,r)}};return n}async function fo(e){var d;const{accountContract:t,erc20Paymaster:n,options:r}=e,s=n.token,i=q({address:s,chain:t.chain,client:t.client});if(await ya({contract:i,owner:t.address,spender:n.address})>0n)return;const o=ua({contract:i,spender:n.address,amountWei:ms-1n}),c=await An({transaction:o,from:t.address}),u=Gn({accountContract:t,transaction:c,executeOverride:(d=r.overrides)==null?void 0:d.execute});await He({executeTx:u,options:{...r,overrides:{...r.overrides,erc20Paymaster:void 0}}})}function po(e){const{creationOptions:t,connectionOptions:n,chain:r}=e,s={address:n.personalAccount.address,async sendTransaction(i){var d,l,p,y;const a={data:i.data,to:i.to??void 0,value:i.value??0n,chain:ar(i.chainId),client:n.client};let o=await ft({account:s,transaction:a});if(e.sponsorGas){const b=await La({options:{client:n.client,chain:r,bundlerUrl:(d=t.overrides)==null?void 0:d.bundlerUrl,entrypointAddress:(l=t.overrides)==null?void 0:l.entrypointAddress},transaction:o});o={...o,...b}}const c=await lt({account:s,chainId:r.id,eip712Transaction:o});return{transactionHash:(await Ba({options:{client:n.client,chain:r,bundlerUrl:(p=t.overrides)==null?void 0:p.bundlerUrl,entrypointAddress:(y=t.overrides)==null?void 0:y.entrypointAddress},transaction:o,signedTransaction:c})).transactionHash,client:n.client,chain:r}},async signMessage({message:i}){return n.personalAccount.signMessage({message:i})},async signTypedData(i){const a=Rt(i);return n.personalAccount.signTypedData(a)},async onTransactionRequested(i){var a,o;return(o=(a=n.personalAccount).onTransactionRequested)==null?void 0:o.call(a,i)}};return s}async function St(e){const{options:t,account:n,accountContract:r}=e,[{sendTransaction:s},{prepareTransaction:i}]=await Promise.all([P(()=>import("./send-transaction-BP-Haks5.js").then(c=>c.s),__vite__mapDeps([9,1])),P(()=>Promise.resolve().then(()=>bs),void 0)]),a=i({client:t.client,chain:t.chain,to:r.address,value:0n,gas:50000n});return await s({transaction:a,account:n})}async function He(e){var c,u,d;const{executeTx:t,options:n}=e,r=await eo({transaction:t,factoryContract:n.factoryContract,accountContract:n.accountContract,adminAddress:n.personalAccount.address,sponsorGas:n.sponsorGas,overrides:n.overrides}),s=await so({client:n.client,chain:n.chain,adminAccount:n.personalAccount,entrypointAddress:(c=n.overrides)==null?void 0:c.entrypointAddress,userOp:r}),i={chain:n.chain,client:n.client,bundlerUrl:(u=n.overrides)==null?void 0:u.bundlerUrl,entrypointAddress:(d=n.overrides)==null?void 0:d.entrypointAddress},a=await $a({options:i,userOp:s}),o=await qa({...n,userOpHash:a});return{client:n.client,chain:n.chain,transactionHash:o.transactionHash}}const go=Object.freeze(Object.defineProperty({__proto__:null,connectSmartWallet:co,disconnectSmartWallet:uo,isSmartWallet:oo,personalAccountToSmartAccountMap:yt},Symbol.toStringTag,{value:"Module"}));export{_ as c,et as e,ds as h,go as i,J as r,ho as s,An as t};
