import{c4 as B,aF as x,aG as n,aI as f,aZ as L,a$ as I,aM as j,c5 as z,a_ as S,c6 as v,c7 as U,c8 as b,aX as C,c9 as F,ca as P,b1 as T,cb as H,av as O,cc as D,cd as E}from"./app-BRX2u24m.js";import{E as M,L as R,O as q,P as G,S as K}from"./SocialLogin-CRbGg41J.js";import{C as V,u as X}from"./useInAppWalletLocale-B6MAkqqI.js";import Z from"./AllWalletsUI-CNSwNAfn.js";import"./index-BpcY_UcC.js";import"./passkeys-BAuvfjdX.js";import"./oauth-C1kHiaxb.js";function _(e){var a,u,g,m,h,i,w,k,A,y,W;const c=e.size==="compact",{initialScreen:r,screen:l}=B(),[t,o]=x.useState(!1),d=l===e.wallet&&r===e.wallet,s=d&&!e.isLinking?void 0:e.goBack;return n.jsxs(f,{fullHeight:!0,flex:"column",p:"lg",animate:"fadein",style:{minHeight:"250px"},children:[c&&(d?n.jsxs(n.Fragment,{children:[n.jsx(L,{onBack:s,leftAligned:!e.isLinking,title:n.jsxs(n.Fragment,{children:[(a=e.meta)!=null&&a.titleIconUrl?n.jsx(I,{src:(u=e.meta)==null?void 0:u.titleIconUrl,width:j.md,height:j.md,client:e.client}):null,n.jsx(z,{children:((g=e.meta)==null?void 0:g.title)??e.inAppWalletLocale.emailLoginScreen.title})]})}),n.jsx(S,{y:"lg"})]}):n.jsx(L,{onBack:s,title:e.inAppWalletLocale.signIn})),n.jsx(f,{expand:!0,flex:"column",center:"y",p:c?void 0:"lg",children:n.jsx(V,{...e,locale:e.inAppWalletLocale,disabled:((m=e.meta)==null?void 0:m.requireApproval)&&!t})}),c&&(((h=e.meta)==null?void 0:h.showThirdwebBranding)!==!1||((i=e.meta)==null?void 0:i.termsOfServiceUrl)||((w=e.meta)==null?void 0:w.privacyPolicyUrl))&&n.jsx(S,{y:"xl"}),n.jsxs(f,{flex:"column",gap:"lg",children:[n.jsx(v,{termsOfServiceUrl:(k=e.meta)==null?void 0:k.termsOfServiceUrl,privacyPolicyUrl:(A=e.meta)==null?void 0:A.privacyPolicyUrl,locale:e.connectLocale.agreement,requireApproval:(y=e.meta)==null?void 0:y.requireApproval,onApprove:()=>{o(!t)},isApproved:t}),((W=e.meta)==null?void 0:W.showThirdwebBranding)!==!1&&n.jsx(U,{})]})]})}function $(){return b("useAddConnectedWallet").handleConnection}function J(e){const{wallet:c,done:r}=e,l=$(),t=x.useRef(),[o,d]=x.useState("selecting"),[s,a]=x.useState(),[u,g]=x.useState(!1),m=()=>{d("selecting"),t.current=void 0,e.onBack()};async function h(i){d("loading"),t.current=i;try{await H(c,{strategy:"wallet",wallet:i,chain:c.getChain()||O(1)}).catch(w=>{throw a(w.message),w}),l(i),r()}catch{d("error")}}return t.current?n.jsxs(f,{animate:"fadein",fullHeight:!0,flex:"column",children:[n.jsx(f,{p:"lg",children:n.jsx(L,{title:e.inAppLocale.linkWallet,onBack:m})}),n.jsx(f,{px:e.size==="wide"?"xxl":"lg",expand:!0,flex:"column",center:"y",children:n.jsx("div",{children:o==="error"?n.jsxs(n.Fragment,{children:[n.jsx(M,{onTryAgain:()=>{if(!t.current)throw new Error("Failed to connect to unknown wallet");h(t.current)},title:s||"Failed to Login"}),n.jsx(S,{y:"lg"})]}):n.jsx(n.Fragment,{children:n.jsx(R,{title:"Sign in with your wallet",subtitle:"A pop-up prompt will appear to sign-in and verify your wallet",icon:n.jsx(T,{id:t.current.id??"",size:j.xl,client:e.client})})})})})]}):u?n.jsx(x.Suspense,{fallback:n.jsx(C,{}),children:n.jsx(Z,{onBack:()=>g(!1),onSelect:async i=>{h(i),g(!1)},client:e.client,connectLocale:e.locale,recommendedWallets:void 0,specifiedWallets:[],size:e.size,disableSelectionDataReset:!0})}):n.jsx(F,{title:e.locale.connectAWallet,wallets:P(),selectWallet:async i=>{h(i)},onShowAll:()=>{g(!0)},done:()=>{},goBack:m,setModalVisibility:()=>{},client:e.client,connectLocale:e.locale,hideHeader:!1,recommendedWallets:void 0,chain:c.getChain(),showAllWallets:!0,chains:[],size:e.size,meta:e.meta||{},walletConnect:e.walletConnect,modalHeader:{title:e.inAppLocale.linkWallet,onBack:m},walletIdsToHide:["inApp"],disableSelectionDataReset:!0})}function te(e){const c=D(),r=E(),l=c,t=e.connectLocale.id,o=X(t),{initialScreen:d}=B();if(!o)return n.jsx(C,{});const s=d===e.wallet?()=>{r({})}:e.goBack,a=()=>{e.done(),r({})},u=l!=null&&l.emailLogin?{email:l.emailLogin}:l!=null&&l.phoneLogin?{phone:l.phoneLogin}:void 0;return u?n.jsx(q,{userInfo:u,locale:o,done:a,goBack:s,wallet:e.wallet,chain:e.chain,client:e.client,size:e.size,isLinking:e.isLinking}):l!=null&&l.passkeyLogin?n.jsx(G,{locale:e.connectLocale,wallet:e.wallet,done:a,onBack:s,chain:e.chain,client:e.client,size:e.size,isLinking:e.isLinking}):l!=null&&l.walletLogin?n.jsx(J,{meta:e.meta,inAppLocale:o,walletConnect:e.walletConnect,wallet:e.wallet,client:e.client,size:e.size,done:a,onBack:s||(()=>r({})),locale:e.connectLocale}):l!=null&&l.socialLogin?n.jsx(K,{socialAuth:l.socialLogin.type,locale:o,done:a,goBack:s,wallet:e.wallet,state:l,chain:e.chain,client:e.client,size:e.size,connectLocale:e.connectLocale,isLinking:e.isLinking}):n.jsx(_,{select:()=>{},connectLocale:e.connectLocale,inAppWalletLocale:o,done:a,goBack:e.goBack,wallet:e.wallet,client:e.client,meta:e.meta,size:e.size,chain:e.chain,isLinking:e.isLinking})}export{te as default};
