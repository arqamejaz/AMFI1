const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-zsoumjy1.js","assets/app-DYEeMrtl.js"])))=>i.map(i=>d[i]);
import{t as w4,w as fg,cY as A4,cZ as _4,x as r0,c_ as cg,c$ as M4,d0 as ug,d1 as Bo,d2 as E4,d3 as Ct,d4 as mf,d5 as nn,d6 as zi,d7 as dg,d8 as lg,d9 as pg,da as gg,db as I4,dc as mg,dd as tp,de as Ru,df as tf,dg as S4,dh as x4,di as P4,dj as N4,dk as Ur,dl as yi,r as os,dm as vf,dn as R4,dp as C4,dq as O4,dr as ep,ds as B4,dt as T4,du as Cu,dv as vg,dw as wo,dx as i0,dy as hn,dz as q4,dA as n0,dB as s0,dC as bf,dD as o0,dE as a0,dF as Gn,dG as gn,dH as Aa,dI as Ba,dJ as po,z as D4,dK as rp,dL as k4,_ as U4}from"./app-DYEeMrtl.js";var bg={};const z4="elliptic",F4="6.5.7",L4="EC cryptography",$4="lib/elliptic.js",j4=["lib"],H4={lint:"eslint lib test","lint:fix":"npm run lint -- --fix",unit:"istanbul test _mocha --reporter=spec test/index.js",test:"npm run lint && npm run unit",version:"grunt dist && git add dist/"},K4={type:"git",url:"git@github.com:indutny/elliptic"},Q4=["EC","Elliptic","curve","Cryptography"],J4="Fedor Indutny <fedor@indutny.com>",V4="MIT",G4={url:"https://github.com/indutny/elliptic/issues"},Y4="https://github.com/indutny/elliptic",W4={brfs:"^2.0.2",coveralls:"^3.1.0",eslint:"^7.6.0",grunt:"^1.2.1","grunt-browserify":"^5.3.0","grunt-cli":"^1.3.2","grunt-contrib-connect":"^3.0.0","grunt-contrib-copy":"^1.0.0","grunt-contrib-uglify":"^5.0.0","grunt-mocha-istanbul":"^5.0.2","grunt-saucelabs":"^9.0.1",istanbul:"^0.4.5",mocha:"^8.0.1"},X4={"bn.js":"^4.11.9",brorand:"^1.1.0","hash.js":"^1.0.0","hmac-drbg":"^1.0.1",inherits:"^2.0.4","minimalistic-assert":"^1.0.1","minimalistic-crypto-utils":"^1.0.1"},Z4={name:z4,version:F4,description:L4,main:$4,files:j4,scripts:H4,repository:K4,keywords:Q4,author:J4,license:V4,bugs:G4,homepage:Y4,devDependencies:W4,dependencies:X4};var wi={},h0={exports:{}};h0.exports;(function(r){(function(t,e){function i(T,y){if(!T)throw new Error(y||"Assertion failed")}function s(T,y){T.super_=y;var a=function(){};a.prototype=y.prototype,T.prototype=new a,T.prototype.constructor=T}function o(T,y,a){if(o.isBN(T))return T;this.negative=0,this.words=null,this.length=0,this.red=null,T!==null&&((y==="le"||y==="be")&&(a=y,y=10),this._init(T||0,y||10,a||"be"))}typeof t=="object"?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=w4.Buffer}catch{}o.isBN=function(y){return y instanceof o?!0:y!==null&&typeof y=="object"&&y.constructor.wordSize===o.wordSize&&Array.isArray(y.words)},o.max=function(y,a){return y.cmp(a)>0?y:a},o.min=function(y,a){return y.cmp(a)<0?y:a},o.prototype._init=function(y,a,f){if(typeof y=="number")return this._initNumber(y,a,f);if(typeof y=="object")return this._initArray(y,a,f);a==="hex"&&(a=16),i(a===(a|0)&&a>=2&&a<=36),y=y.toString().replace(/\s+/g,"");var d=0;y[0]==="-"&&(d++,this.negative=1),d<y.length&&(a===16?this._parseHex(y,d,f):(this._parseBase(y,a,d),f==="le"&&this._initArray(this.toArray(),a,f)))},o.prototype._initNumber=function(y,a,f){y<0&&(this.negative=1,y=-y),y<67108864?(this.words=[y&67108863],this.length=1):y<4503599627370496?(this.words=[y&67108863,y/67108864&67108863],this.length=2):(i(y<9007199254740992),this.words=[y&67108863,y/67108864&67108863,1],this.length=3),f==="le"&&this._initArray(this.toArray(),a,f)},o.prototype._initArray=function(y,a,f){if(i(typeof y.length=="number"),y.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(y.length/3),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var v,b,I=0;if(f==="be")for(d=y.length-1,v=0;d>=0;d-=3)b=y[d]|y[d-1]<<8|y[d-2]<<16,this.words[v]|=b<<I&67108863,this.words[v+1]=b>>>26-I&67108863,I+=24,I>=26&&(I-=26,v++);else if(f==="le")for(d=0,v=0;d<y.length;d+=3)b=y[d]|y[d+1]<<8|y[d+2]<<16,this.words[v]|=b<<I&67108863,this.words[v+1]=b>>>26-I&67108863,I+=24,I>=26&&(I-=26,v++);return this.strip()};function g(T,y){var a=T.charCodeAt(y);return a>=65&&a<=70?a-55:a>=97&&a<=102?a-87:a-48&15}function w(T,y,a){var f=g(T,a);return a-1>=y&&(f|=g(T,a-1)<<4),f}o.prototype._parseHex=function(y,a,f){this.length=Math.ceil((y.length-a)/6),this.words=new Array(this.length);for(var d=0;d<this.length;d++)this.words[d]=0;var v=0,b=0,I;if(f==="be")for(d=y.length-1;d>=a;d-=2)I=w(y,a,d)<<v,this.words[b]|=I&67108863,v>=18?(v-=18,b+=1,this.words[b]|=I>>>26):v+=8;else{var _=y.length-a;for(d=_%2===0?a+1:a;d<y.length;d+=2)I=w(y,a,d)<<v,this.words[b]|=I&67108863,v>=18?(v-=18,b+=1,this.words[b]|=I>>>26):v+=8}this.strip()};function A(T,y,a,f){for(var d=0,v=Math.min(T.length,a),b=y;b<v;b++){var I=T.charCodeAt(b)-48;d*=f,I>=49?d+=I-49+10:I>=17?d+=I-17+10:d+=I}return d}o.prototype._parseBase=function(y,a,f){this.words=[0],this.length=1;for(var d=0,v=1;v<=67108863;v*=a)d++;d--,v=v/a|0;for(var b=y.length-f,I=b%d,_=Math.min(b,b-I)+f,l=0,c=f;c<_;c+=d)l=A(y,c,c+d,a),this.imuln(v),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l);if(I!==0){var M=1;for(l=A(y,c,y.length,a),c=0;c<I;c++)M*=a;this.imuln(M),this.words[0]+l<67108864?this.words[0]+=l:this._iaddn(l)}this.strip()},o.prototype.copy=function(y){y.words=new Array(this.length);for(var a=0;a<this.length;a++)y.words[a]=this.words[a];y.length=this.length,y.negative=this.negative,y.red=this.red},o.prototype.clone=function(){var y=new o(null);return this.copy(y),y},o.prototype._expand=function(y){for(;this.length<y;)this.words[this.length++]=0;return this},o.prototype.strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},o.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var S=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],x=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],N=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(y,a){y=y||10,a=a|0||1;var f;if(y===16||y==="hex"){f="";for(var d=0,v=0,b=0;b<this.length;b++){var I=this.words[b],_=((I<<d|v)&16777215).toString(16);v=I>>>24-d&16777215,v!==0||b!==this.length-1?f=S[6-_.length]+_+f:f=_+f,d+=2,d>=26&&(d-=26,b--)}for(v!==0&&(f=v.toString(16)+f);f.length%a!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}if(y===(y|0)&&y>=2&&y<=36){var l=x[y],c=N[y];f="";var M=this.clone();for(M.negative=0;!M.isZero();){var J=M.modn(c).toString(y);M=M.idivn(c),M.isZero()?f=J+f:f=S[l-J.length]+J+f}for(this.isZero()&&(f="0"+f);f.length%a!==0;)f="0"+f;return this.negative!==0&&(f="-"+f),f}i(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var y=this.words[0];return this.length===2?y+=this.words[1]*67108864:this.length===3&&this.words[2]===1?y+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-y:y},o.prototype.toJSON=function(){return this.toString(16)},o.prototype.toBuffer=function(y,a){return i(typeof u<"u"),this.toArrayLike(u,y,a)},o.prototype.toArray=function(y,a){return this.toArrayLike(Array,y,a)},o.prototype.toArrayLike=function(y,a,f){var d=this.byteLength(),v=f||Math.max(1,d);i(d<=v,"byte array longer than desired length"),i(v>0,"Requested array length <= 0"),this.strip();var b=a==="le",I=new y(v),_,l,c=this.clone();if(b){for(l=0;!c.isZero();l++)_=c.andln(255),c.iushrn(8),I[l]=_;for(;l<v;l++)I[l]=0}else{for(l=0;l<v-d;l++)I[l]=0;for(l=0;!c.isZero();l++)_=c.andln(255),c.iushrn(8),I[v-l-1]=_}return I},Math.clz32?o.prototype._countBits=function(y){return 32-Math.clz32(y)}:o.prototype._countBits=function(y){var a=y,f=0;return a>=4096&&(f+=13,a>>>=13),a>=64&&(f+=7,a>>>=7),a>=8&&(f+=4,a>>>=4),a>=2&&(f+=2,a>>>=2),f+a},o.prototype._zeroBits=function(y){if(y===0)return 26;var a=y,f=0;return a&8191||(f+=13,a>>>=13),a&127||(f+=7,a>>>=7),a&15||(f+=4,a>>>=4),a&3||(f+=2,a>>>=2),a&1||f++,f},o.prototype.bitLength=function(){var y=this.words[this.length-1],a=this._countBits(y);return(this.length-1)*26+a};function R(T){for(var y=new Array(T.bitLength()),a=0;a<y.length;a++){var f=a/26|0,d=a%26;y[a]=(T.words[f]&1<<d)>>>d}return y}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var y=0,a=0;a<this.length;a++){var f=this._zeroBits(this.words[a]);if(y+=f,f!==26)break}return y},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(y){return this.negative!==0?this.abs().inotn(y).iaddn(1):this.clone()},o.prototype.fromTwos=function(y){return this.testn(y-1)?this.notn(y).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(y){for(;this.length<y.length;)this.words[this.length++]=0;for(var a=0;a<y.length;a++)this.words[a]=this.words[a]|y.words[a];return this.strip()},o.prototype.ior=function(y){return i((this.negative|y.negative)===0),this.iuor(y)},o.prototype.or=function(y){return this.length>y.length?this.clone().ior(y):y.clone().ior(this)},o.prototype.uor=function(y){return this.length>y.length?this.clone().iuor(y):y.clone().iuor(this)},o.prototype.iuand=function(y){var a;this.length>y.length?a=y:a=this;for(var f=0;f<a.length;f++)this.words[f]=this.words[f]&y.words[f];return this.length=a.length,this.strip()},o.prototype.iand=function(y){return i((this.negative|y.negative)===0),this.iuand(y)},o.prototype.and=function(y){return this.length>y.length?this.clone().iand(y):y.clone().iand(this)},o.prototype.uand=function(y){return this.length>y.length?this.clone().iuand(y):y.clone().iuand(this)},o.prototype.iuxor=function(y){var a,f;this.length>y.length?(a=this,f=y):(a=y,f=this);for(var d=0;d<f.length;d++)this.words[d]=a.words[d]^f.words[d];if(this!==a)for(;d<a.length;d++)this.words[d]=a.words[d];return this.length=a.length,this.strip()},o.prototype.ixor=function(y){return i((this.negative|y.negative)===0),this.iuxor(y)},o.prototype.xor=function(y){return this.length>y.length?this.clone().ixor(y):y.clone().ixor(this)},o.prototype.uxor=function(y){return this.length>y.length?this.clone().iuxor(y):y.clone().iuxor(this)},o.prototype.inotn=function(y){i(typeof y=="number"&&y>=0);var a=Math.ceil(y/26)|0,f=y%26;this._expand(a),f>0&&a--;for(var d=0;d<a;d++)this.words[d]=~this.words[d]&67108863;return f>0&&(this.words[d]=~this.words[d]&67108863>>26-f),this.strip()},o.prototype.notn=function(y){return this.clone().inotn(y)},o.prototype.setn=function(y,a){i(typeof y=="number"&&y>=0);var f=y/26|0,d=y%26;return this._expand(f+1),a?this.words[f]=this.words[f]|1<<d:this.words[f]=this.words[f]&~(1<<d),this.strip()},o.prototype.iadd=function(y){var a;if(this.negative!==0&&y.negative===0)return this.negative=0,a=this.isub(y),this.negative^=1,this._normSign();if(this.negative===0&&y.negative!==0)return y.negative=0,a=this.isub(y),y.negative=1,a._normSign();var f,d;this.length>y.length?(f=this,d=y):(f=y,d=this);for(var v=0,b=0;b<d.length;b++)a=(f.words[b]|0)+(d.words[b]|0)+v,this.words[b]=a&67108863,v=a>>>26;for(;v!==0&&b<f.length;b++)a=(f.words[b]|0)+v,this.words[b]=a&67108863,v=a>>>26;if(this.length=f.length,v!==0)this.words[this.length]=v,this.length++;else if(f!==this)for(;b<f.length;b++)this.words[b]=f.words[b];return this},o.prototype.add=function(y){var a;return y.negative!==0&&this.negative===0?(y.negative=0,a=this.sub(y),y.negative^=1,a):y.negative===0&&this.negative!==0?(this.negative=0,a=y.sub(this),this.negative=1,a):this.length>y.length?this.clone().iadd(y):y.clone().iadd(this)},o.prototype.isub=function(y){if(y.negative!==0){y.negative=0;var a=this.iadd(y);return y.negative=1,a._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(y),this.negative=1,this._normSign();var f=this.cmp(y);if(f===0)return this.negative=0,this.length=1,this.words[0]=0,this;var d,v;f>0?(d=this,v=y):(d=y,v=this);for(var b=0,I=0;I<v.length;I++)a=(d.words[I]|0)-(v.words[I]|0)+b,b=a>>26,this.words[I]=a&67108863;for(;b!==0&&I<d.length;I++)a=(d.words[I]|0)+b,b=a>>26,this.words[I]=a&67108863;if(b===0&&I<d.length&&d!==this)for(;I<d.length;I++)this.words[I]=d.words[I];return this.length=Math.max(this.length,I),d!==this&&(this.negative=1),this.strip()},o.prototype.sub=function(y){return this.clone().isub(y)};function O(T,y,a){a.negative=y.negative^T.negative;var f=T.length+y.length|0;a.length=f,f=f-1|0;var d=T.words[0]|0,v=y.words[0]|0,b=d*v,I=b&67108863,_=b/67108864|0;a.words[0]=I;for(var l=1;l<f;l++){for(var c=_>>>26,M=_&67108863,J=Math.min(l,y.length-1),K=Math.max(0,l-T.length+1);K<=J;K++){var m=l-K|0;d=T.words[m]|0,v=y.words[K]|0,b=d*v+M,c+=b/67108864|0,M=b&67108863}a.words[l]=M|0,_=c|0}return _!==0?a.words[l]=_|0:a.length--,a.strip()}var z=function(y,a,f){var d=y.words,v=a.words,b=f.words,I=0,_,l,c,M=d[0]|0,J=M&8191,K=M>>>13,m=d[1]|0,D=m&8191,q=m>>>13,U=d[2]|0,V=U&8191,Q=U>>>13,Y=d[3]|0,X=Y&8191,st=Y>>>13,G=d[4]|0,lt=G&8191,At=G>>>13,Bt=d[5]|0,de=Bt&8191,_t=Bt>>>13,Tt=d[6]|0,Zt=Tt&8191,pt=Tt>>>13,Dt=d[7]|0,ge=Dt&8191,gt=Dt>>>13,Ht=d[8]|0,ne=Ht&8191,dt=Ht>>>13,kt=d[9]|0,ae=kt&8191,vt=kt>>>13,Ut=v[0]|0,he=Ut&8191,bt=Ut>>>13,zt=v[1]|0,fe=zt&8191,yt=zt>>>13,Kt=v[2]|0,me=Kt&8191,Mt=Kt>>>13,$t=v[3]|0,le=$t&8191,Et=$t>>>13,Qt=v[4]|0,ve=Qt&8191,It=Qt>>>13,jt=v[5]|0,be=jt&8191,St=jt>>>13,Jt=v[6]|0,ce=Jt&8191,xt=Jt>>>13,Ft=v[7]|0,ye=Ft&8191,Pt=Ft>>>13,Vt=v[8]|0,we=Vt&8191,Nt=Vt>>>13,Gt=v[9]|0,Ae=Gt&8191,Rt=Gt>>>13;f.negative=y.negative^a.negative,f.length=19,_=Math.imul(J,he),l=Math.imul(J,bt),l=l+Math.imul(K,he)|0,c=Math.imul(K,bt);var Lt=(I+_|0)+((l&8191)<<13)|0;I=(c+(l>>>13)|0)+(Lt>>>26)|0,Lt&=67108863,_=Math.imul(D,he),l=Math.imul(D,bt),l=l+Math.imul(q,he)|0,c=Math.imul(q,bt),_=_+Math.imul(J,fe)|0,l=l+Math.imul(J,yt)|0,l=l+Math.imul(K,fe)|0,c=c+Math.imul(K,yt)|0;var Le=(I+_|0)+((l&8191)<<13)|0;I=(c+(l>>>13)|0)+(Le>>>26)|0,Le&=67108863,_=Math.imul(V,he),l=Math.imul(V,bt),l=l+Math.imul(Q,he)|0,c=Math.imul(Q,bt),_=_+Math.imul(D,fe)|0,l=l+Math.imul(D,yt)|0,l=l+Math.imul(q,fe)|0,c=c+Math.imul(q,yt)|0,_=_+Math.imul(J,me)|0,l=l+Math.imul(J,Mt)|0,l=l+Math.imul(K,me)|0,c=c+Math.imul(K,Mt)|0;var $e=(I+_|0)+((l&8191)<<13)|0;I=(c+(l>>>13)|0)+($e>>>26)|0,$e&=67108863,_=Math.imul(X,he),l=Math.imul(X,bt),l=l+Math.imul(st,he)|0,c=Math.imul(st,bt),_=_+Math.imul(V,fe)|0,l=l+Math.imul(V,yt)|0,l=l+Math.imul(Q,fe)|0,c=c+Math.imul(Q,yt)|0,_=_+Math.imul(D,me)|0,l=l+Math.imul(D,Mt)|0,l=l+Math.imul(q,me)|0,c=c+Math.imul(q,Mt)|0,_=_+Math.imul(J,le)|0,l=l+Math.imul(J,Et)|0,l=l+Math.imul(K,le)|0,c=c+Math.imul(K,Et)|0;var je=(I+_|0)+((l&8191)<<13)|0;I=(c+(l>>>13)|0)+(je>>>26)|0,je&=67108863,_=Math.imul(lt,he),l=Math.imul(lt,bt),l=l+Math.imul(At,he)|0,c=Math.imul(At,bt),_=_+Math.imul(X,fe)|0,l=l+Math.imul(X,yt)|0,l=l+Math.imul(st,fe)|0,c=c+Math.imul(st,yt)|0,_=_+Math.imul(V,me)|0,l=l+Math.imul(V,Mt)|0,l=l+Math.imul(Q,me)|0,c=c+Math.imul(Q,Mt)|0,_=_+Math.imul(D,le)|0,l=l+Math.imul(D,Et)|0,l=l+Math.imul(q,le)|0,c=c+Math.imul(q,Et)|0,_=_+Math.imul(J,ve)|0,l=l+Math.imul(J,It)|0,l=l+Math.imul(K,ve)|0,c=c+Math.imul(K,It)|0;var He=(I+_|0)+((l&8191)<<13)|0;I=(c+(l>>>13)|0)+(He>>>26)|0,He&=67108863,_=Math.imul(de,he),l=Math.imul(de,bt),l=l+Math.imul(_t,he)|0,c=Math.imul(_t,bt),_=_+Math.imul(lt,fe)|0,l=l+Math.imul(lt,yt)|0,l=l+Math.imul(At,fe)|0,c=c+Math.imul(At,yt)|0,_=_+Math.imul(X,me)|0,l=l+Math.imul(X,Mt)|0,l=l+Math.imul(st,me)|0,c=c+Math.imul(st,Mt)|0,_=_+Math.imul(V,le)|0,l=l+Math.imul(V,Et)|0,l=l+Math.imul(Q,le)|0,c=c+Math.imul(Q,Et)|0,_=_+Math.imul(D,ve)|0,l=l+Math.imul(D,It)|0,l=l+Math.imul(q,ve)|0,c=c+Math.imul(q,It)|0,_=_+Math.imul(J,be)|0,l=l+Math.imul(J,St)|0,l=l+Math.imul(K,be)|0,c=c+Math.imul(K,St)|0;var Ke=(I+_|0)+((l&8191)<<13)|0;I=(c+(l>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,_=Math.imul(Zt,he),l=Math.imul(Zt,bt),l=l+Math.imul(pt,he)|0,c=Math.imul(pt,bt),_=_+Math.imul(de,fe)|0,l=l+Math.imul(de,yt)|0,l=l+Math.imul(_t,fe)|0,c=c+Math.imul(_t,yt)|0,_=_+Math.imul(lt,me)|0,l=l+Math.imul(lt,Mt)|0,l=l+Math.imul(At,me)|0,c=c+Math.imul(At,Mt)|0,_=_+Math.imul(X,le)|0,l=l+Math.imul(X,Et)|0,l=l+Math.imul(st,le)|0,c=c+Math.imul(st,Et)|0,_=_+Math.imul(V,ve)|0,l=l+Math.imul(V,It)|0,l=l+Math.imul(Q,ve)|0,c=c+Math.imul(Q,It)|0,_=_+Math.imul(D,be)|0,l=l+Math.imul(D,St)|0,l=l+Math.imul(q,be)|0,c=c+Math.imul(q,St)|0,_=_+Math.imul(J,ce)|0,l=l+Math.imul(J,xt)|0,l=l+Math.imul(K,ce)|0,c=c+Math.imul(K,xt)|0;var Qe=(I+_|0)+((l&8191)<<13)|0;I=(c+(l>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,_=Math.imul(ge,he),l=Math.imul(ge,bt),l=l+Math.imul(gt,he)|0,c=Math.imul(gt,bt),_=_+Math.imul(Zt,fe)|0,l=l+Math.imul(Zt,yt)|0,l=l+Math.imul(pt,fe)|0,c=c+Math.imul(pt,yt)|0,_=_+Math.imul(de,me)|0,l=l+Math.imul(de,Mt)|0,l=l+Math.imul(_t,me)|0,c=c+Math.imul(_t,Mt)|0,_=_+Math.imul(lt,le)|0,l=l+Math.imul(lt,Et)|0,l=l+Math.imul(At,le)|0,c=c+Math.imul(At,Et)|0,_=_+Math.imul(X,ve)|0,l=l+Math.imul(X,It)|0,l=l+Math.imul(st,ve)|0,c=c+Math.imul(st,It)|0,_=_+Math.imul(V,be)|0,l=l+Math.imul(V,St)|0,l=l+Math.imul(Q,be)|0,c=c+Math.imul(Q,St)|0,_=_+Math.imul(D,ce)|0,l=l+Math.imul(D,xt)|0,l=l+Math.imul(q,ce)|0,c=c+Math.imul(q,xt)|0,_=_+Math.imul(J,ye)|0,l=l+Math.imul(J,Pt)|0,l=l+Math.imul(K,ye)|0,c=c+Math.imul(K,Pt)|0;var Ar=(I+_|0)+((l&8191)<<13)|0;I=(c+(l>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,_=Math.imul(ne,he),l=Math.imul(ne,bt),l=l+Math.imul(dt,he)|0,c=Math.imul(dt,bt),_=_+Math.imul(ge,fe)|0,l=l+Math.imul(ge,yt)|0,l=l+Math.imul(gt,fe)|0,c=c+Math.imul(gt,yt)|0,_=_+Math.imul(Zt,me)|0,l=l+Math.imul(Zt,Mt)|0,l=l+Math.imul(pt,me)|0,c=c+Math.imul(pt,Mt)|0,_=_+Math.imul(de,le)|0,l=l+Math.imul(de,Et)|0,l=l+Math.imul(_t,le)|0,c=c+Math.imul(_t,Et)|0,_=_+Math.imul(lt,ve)|0,l=l+Math.imul(lt,It)|0,l=l+Math.imul(At,ve)|0,c=c+Math.imul(At,It)|0,_=_+Math.imul(X,be)|0,l=l+Math.imul(X,St)|0,l=l+Math.imul(st,be)|0,c=c+Math.imul(st,St)|0,_=_+Math.imul(V,ce)|0,l=l+Math.imul(V,xt)|0,l=l+Math.imul(Q,ce)|0,c=c+Math.imul(Q,xt)|0,_=_+Math.imul(D,ye)|0,l=l+Math.imul(D,Pt)|0,l=l+Math.imul(q,ye)|0,c=c+Math.imul(q,Pt)|0,_=_+Math.imul(J,we)|0,l=l+Math.imul(J,Nt)|0,l=l+Math.imul(K,we)|0,c=c+Math.imul(K,Nt)|0;var ri=(I+_|0)+((l&8191)<<13)|0;I=(c+(l>>>13)|0)+(ri>>>26)|0,ri&=67108863,_=Math.imul(ae,he),l=Math.imul(ae,bt),l=l+Math.imul(vt,he)|0,c=Math.imul(vt,bt),_=_+Math.imul(ne,fe)|0,l=l+Math.imul(ne,yt)|0,l=l+Math.imul(dt,fe)|0,c=c+Math.imul(dt,yt)|0,_=_+Math.imul(ge,me)|0,l=l+Math.imul(ge,Mt)|0,l=l+Math.imul(gt,me)|0,c=c+Math.imul(gt,Mt)|0,_=_+Math.imul(Zt,le)|0,l=l+Math.imul(Zt,Et)|0,l=l+Math.imul(pt,le)|0,c=c+Math.imul(pt,Et)|0,_=_+Math.imul(de,ve)|0,l=l+Math.imul(de,It)|0,l=l+Math.imul(_t,ve)|0,c=c+Math.imul(_t,It)|0,_=_+Math.imul(lt,be)|0,l=l+Math.imul(lt,St)|0,l=l+Math.imul(At,be)|0,c=c+Math.imul(At,St)|0,_=_+Math.imul(X,ce)|0,l=l+Math.imul(X,xt)|0,l=l+Math.imul(st,ce)|0,c=c+Math.imul(st,xt)|0,_=_+Math.imul(V,ye)|0,l=l+Math.imul(V,Pt)|0,l=l+Math.imul(Q,ye)|0,c=c+Math.imul(Q,Pt)|0,_=_+Math.imul(D,we)|0,l=l+Math.imul(D,Nt)|0,l=l+Math.imul(q,we)|0,c=c+Math.imul(q,Nt)|0,_=_+Math.imul(J,Ae)|0,l=l+Math.imul(J,Rt)|0,l=l+Math.imul(K,Ae)|0,c=c+Math.imul(K,Rt)|0;var _r=(I+_|0)+((l&8191)<<13)|0;I=(c+(l>>>13)|0)+(_r>>>26)|0,_r&=67108863,_=Math.imul(ae,fe),l=Math.imul(ae,yt),l=l+Math.imul(vt,fe)|0,c=Math.imul(vt,yt),_=_+Math.imul(ne,me)|0,l=l+Math.imul(ne,Mt)|0,l=l+Math.imul(dt,me)|0,c=c+Math.imul(dt,Mt)|0,_=_+Math.imul(ge,le)|0,l=l+Math.imul(ge,Et)|0,l=l+Math.imul(gt,le)|0,c=c+Math.imul(gt,Et)|0,_=_+Math.imul(Zt,ve)|0,l=l+Math.imul(Zt,It)|0,l=l+Math.imul(pt,ve)|0,c=c+Math.imul(pt,It)|0,_=_+Math.imul(de,be)|0,l=l+Math.imul(de,St)|0,l=l+Math.imul(_t,be)|0,c=c+Math.imul(_t,St)|0,_=_+Math.imul(lt,ce)|0,l=l+Math.imul(lt,xt)|0,l=l+Math.imul(At,ce)|0,c=c+Math.imul(At,xt)|0,_=_+Math.imul(X,ye)|0,l=l+Math.imul(X,Pt)|0,l=l+Math.imul(st,ye)|0,c=c+Math.imul(st,Pt)|0,_=_+Math.imul(V,we)|0,l=l+Math.imul(V,Nt)|0,l=l+Math.imul(Q,we)|0,c=c+Math.imul(Q,Nt)|0,_=_+Math.imul(D,Ae)|0,l=l+Math.imul(D,Rt)|0,l=l+Math.imul(q,Ae)|0,c=c+Math.imul(q,Rt)|0;var ii=(I+_|0)+((l&8191)<<13)|0;I=(c+(l>>>13)|0)+(ii>>>26)|0,ii&=67108863,_=Math.imul(ae,me),l=Math.imul(ae,Mt),l=l+Math.imul(vt,me)|0,c=Math.imul(vt,Mt),_=_+Math.imul(ne,le)|0,l=l+Math.imul(ne,Et)|0,l=l+Math.imul(dt,le)|0,c=c+Math.imul(dt,Et)|0,_=_+Math.imul(ge,ve)|0,l=l+Math.imul(ge,It)|0,l=l+Math.imul(gt,ve)|0,c=c+Math.imul(gt,It)|0,_=_+Math.imul(Zt,be)|0,l=l+Math.imul(Zt,St)|0,l=l+Math.imul(pt,be)|0,c=c+Math.imul(pt,St)|0,_=_+Math.imul(de,ce)|0,l=l+Math.imul(de,xt)|0,l=l+Math.imul(_t,ce)|0,c=c+Math.imul(_t,xt)|0,_=_+Math.imul(lt,ye)|0,l=l+Math.imul(lt,Pt)|0,l=l+Math.imul(At,ye)|0,c=c+Math.imul(At,Pt)|0,_=_+Math.imul(X,we)|0,l=l+Math.imul(X,Nt)|0,l=l+Math.imul(st,we)|0,c=c+Math.imul(st,Nt)|0,_=_+Math.imul(V,Ae)|0,l=l+Math.imul(V,Rt)|0,l=l+Math.imul(Q,Ae)|0,c=c+Math.imul(Q,Rt)|0;var ni=(I+_|0)+((l&8191)<<13)|0;I=(c+(l>>>13)|0)+(ni>>>26)|0,ni&=67108863,_=Math.imul(ae,le),l=Math.imul(ae,Et),l=l+Math.imul(vt,le)|0,c=Math.imul(vt,Et),_=_+Math.imul(ne,ve)|0,l=l+Math.imul(ne,It)|0,l=l+Math.imul(dt,ve)|0,c=c+Math.imul(dt,It)|0,_=_+Math.imul(ge,be)|0,l=l+Math.imul(ge,St)|0,l=l+Math.imul(gt,be)|0,c=c+Math.imul(gt,St)|0,_=_+Math.imul(Zt,ce)|0,l=l+Math.imul(Zt,xt)|0,l=l+Math.imul(pt,ce)|0,c=c+Math.imul(pt,xt)|0,_=_+Math.imul(de,ye)|0,l=l+Math.imul(de,Pt)|0,l=l+Math.imul(_t,ye)|0,c=c+Math.imul(_t,Pt)|0,_=_+Math.imul(lt,we)|0,l=l+Math.imul(lt,Nt)|0,l=l+Math.imul(At,we)|0,c=c+Math.imul(At,Nt)|0,_=_+Math.imul(X,Ae)|0,l=l+Math.imul(X,Rt)|0,l=l+Math.imul(st,Ae)|0,c=c+Math.imul(st,Rt)|0;var si=(I+_|0)+((l&8191)<<13)|0;I=(c+(l>>>13)|0)+(si>>>26)|0,si&=67108863,_=Math.imul(ae,ve),l=Math.imul(ae,It),l=l+Math.imul(vt,ve)|0,c=Math.imul(vt,It),_=_+Math.imul(ne,be)|0,l=l+Math.imul(ne,St)|0,l=l+Math.imul(dt,be)|0,c=c+Math.imul(dt,St)|0,_=_+Math.imul(ge,ce)|0,l=l+Math.imul(ge,xt)|0,l=l+Math.imul(gt,ce)|0,c=c+Math.imul(gt,xt)|0,_=_+Math.imul(Zt,ye)|0,l=l+Math.imul(Zt,Pt)|0,l=l+Math.imul(pt,ye)|0,c=c+Math.imul(pt,Pt)|0,_=_+Math.imul(de,we)|0,l=l+Math.imul(de,Nt)|0,l=l+Math.imul(_t,we)|0,c=c+Math.imul(_t,Nt)|0,_=_+Math.imul(lt,Ae)|0,l=l+Math.imul(lt,Rt)|0,l=l+Math.imul(At,Ae)|0,c=c+Math.imul(At,Rt)|0;var zr=(I+_|0)+((l&8191)<<13)|0;I=(c+(l>>>13)|0)+(zr>>>26)|0,zr&=67108863,_=Math.imul(ae,be),l=Math.imul(ae,St),l=l+Math.imul(vt,be)|0,c=Math.imul(vt,St),_=_+Math.imul(ne,ce)|0,l=l+Math.imul(ne,xt)|0,l=l+Math.imul(dt,ce)|0,c=c+Math.imul(dt,xt)|0,_=_+Math.imul(ge,ye)|0,l=l+Math.imul(ge,Pt)|0,l=l+Math.imul(gt,ye)|0,c=c+Math.imul(gt,Pt)|0,_=_+Math.imul(Zt,we)|0,l=l+Math.imul(Zt,Nt)|0,l=l+Math.imul(pt,we)|0,c=c+Math.imul(pt,Nt)|0,_=_+Math.imul(de,Ae)|0,l=l+Math.imul(de,Rt)|0,l=l+Math.imul(_t,Ae)|0,c=c+Math.imul(_t,Rt)|0;var Fr=(I+_|0)+((l&8191)<<13)|0;I=(c+(l>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,_=Math.imul(ae,ce),l=Math.imul(ae,xt),l=l+Math.imul(vt,ce)|0,c=Math.imul(vt,xt),_=_+Math.imul(ne,ye)|0,l=l+Math.imul(ne,Pt)|0,l=l+Math.imul(dt,ye)|0,c=c+Math.imul(dt,Pt)|0,_=_+Math.imul(ge,we)|0,l=l+Math.imul(ge,Nt)|0,l=l+Math.imul(gt,we)|0,c=c+Math.imul(gt,Nt)|0,_=_+Math.imul(Zt,Ae)|0,l=l+Math.imul(Zt,Rt)|0,l=l+Math.imul(pt,Ae)|0,c=c+Math.imul(pt,Rt)|0;var Lr=(I+_|0)+((l&8191)<<13)|0;I=(c+(l>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,_=Math.imul(ae,ye),l=Math.imul(ae,Pt),l=l+Math.imul(vt,ye)|0,c=Math.imul(vt,Pt),_=_+Math.imul(ne,we)|0,l=l+Math.imul(ne,Nt)|0,l=l+Math.imul(dt,we)|0,c=c+Math.imul(dt,Nt)|0,_=_+Math.imul(ge,Ae)|0,l=l+Math.imul(ge,Rt)|0,l=l+Math.imul(gt,Ae)|0,c=c+Math.imul(gt,Rt)|0;var oi=(I+_|0)+((l&8191)<<13)|0;I=(c+(l>>>13)|0)+(oi>>>26)|0,oi&=67108863,_=Math.imul(ae,we),l=Math.imul(ae,Nt),l=l+Math.imul(vt,we)|0,c=Math.imul(vt,Nt),_=_+Math.imul(ne,Ae)|0,l=l+Math.imul(ne,Rt)|0,l=l+Math.imul(dt,Ae)|0,c=c+Math.imul(dt,Rt)|0;var ai=(I+_|0)+((l&8191)<<13)|0;I=(c+(l>>>13)|0)+(ai>>>26)|0,ai&=67108863,_=Math.imul(ae,Ae),l=Math.imul(ae,Rt),l=l+Math.imul(vt,Ae)|0,c=Math.imul(vt,Rt);var hi=(I+_|0)+((l&8191)<<13)|0;return I=(c+(l>>>13)|0)+(hi>>>26)|0,hi&=67108863,b[0]=Lt,b[1]=Le,b[2]=$e,b[3]=je,b[4]=He,b[5]=Ke,b[6]=Qe,b[7]=Ar,b[8]=ri,b[9]=_r,b[10]=ii,b[11]=ni,b[12]=si,b[13]=zr,b[14]=Fr,b[15]=Lr,b[16]=oi,b[17]=ai,b[18]=hi,I!==0&&(b[19]=I,f.length++),f};Math.imul||(z=O);function L(T,y,a){a.negative=y.negative^T.negative,a.length=T.length+y.length;for(var f=0,d=0,v=0;v<a.length-1;v++){var b=d;d=0;for(var I=f&67108863,_=Math.min(v,y.length-1),l=Math.max(0,v-T.length+1);l<=_;l++){var c=v-l,M=T.words[c]|0,J=y.words[l]|0,K=M*J,m=K&67108863;b=b+(K/67108864|0)|0,m=m+I|0,I=m&67108863,b=b+(m>>>26)|0,d+=b>>>26,b&=67108863}a.words[v]=I,f=b,b=d}return f!==0?a.words[v]=f:a.length--,a.strip()}function H(T,y,a){var f=new rt;return f.mulp(T,y,a)}o.prototype.mulTo=function(y,a){var f,d=this.length+y.length;return this.length===10&&y.length===10?f=z(this,y,a):d<63?f=O(this,y,a):d<1024?f=L(this,y,a):f=H(this,y,a),f};function rt(T,y){this.x=T,this.y=y}rt.prototype.makeRBT=function(y){for(var a=new Array(y),f=o.prototype._countBits(y)-1,d=0;d<y;d++)a[d]=this.revBin(d,f,y);return a},rt.prototype.revBin=function(y,a,f){if(y===0||y===f-1)return y;for(var d=0,v=0;v<a;v++)d|=(y&1)<<a-v-1,y>>=1;return d},rt.prototype.permute=function(y,a,f,d,v,b){for(var I=0;I<b;I++)d[I]=a[y[I]],v[I]=f[y[I]]},rt.prototype.transform=function(y,a,f,d,v,b){this.permute(b,y,a,f,d,v);for(var I=1;I<v;I<<=1)for(var _=I<<1,l=Math.cos(2*Math.PI/_),c=Math.sin(2*Math.PI/_),M=0;M<v;M+=_)for(var J=l,K=c,m=0;m<I;m++){var D=f[M+m],q=d[M+m],U=f[M+m+I],V=d[M+m+I],Q=J*U-K*V;V=J*V+K*U,U=Q,f[M+m]=D+U,d[M+m]=q+V,f[M+m+I]=D-U,d[M+m+I]=q-V,m!==_&&(Q=l*J-c*K,K=l*K+c*J,J=Q)}},rt.prototype.guessLen13b=function(y,a){var f=Math.max(a,y)|1,d=f&1,v=0;for(f=f/2|0;f;f=f>>>1)v++;return 1<<v+1+d},rt.prototype.conjugate=function(y,a,f){if(!(f<=1))for(var d=0;d<f/2;d++){var v=y[d];y[d]=y[f-d-1],y[f-d-1]=v,v=a[d],a[d]=-a[f-d-1],a[f-d-1]=-v}},rt.prototype.normalize13b=function(y,a){for(var f=0,d=0;d<a/2;d++){var v=Math.round(y[2*d+1]/a)*8192+Math.round(y[2*d]/a)+f;y[d]=v&67108863,v<67108864?f=0:f=v/67108864|0}return y},rt.prototype.convert13b=function(y,a,f,d){for(var v=0,b=0;b<a;b++)v=v+(y[b]|0),f[2*b]=v&8191,v=v>>>13,f[2*b+1]=v&8191,v=v>>>13;for(b=2*a;b<d;++b)f[b]=0;i(v===0),i((v&-8192)===0)},rt.prototype.stub=function(y){for(var a=new Array(y),f=0;f<y;f++)a[f]=0;return a},rt.prototype.mulp=function(y,a,f){var d=2*this.guessLen13b(y.length,a.length),v=this.makeRBT(d),b=this.stub(d),I=new Array(d),_=new Array(d),l=new Array(d),c=new Array(d),M=new Array(d),J=new Array(d),K=f.words;K.length=d,this.convert13b(y.words,y.length,I,d),this.convert13b(a.words,a.length,c,d),this.transform(I,b,_,l,d,v),this.transform(c,b,M,J,d,v);for(var m=0;m<d;m++){var D=_[m]*M[m]-l[m]*J[m];l[m]=_[m]*J[m]+l[m]*M[m],_[m]=D}return this.conjugate(_,l,d),this.transform(_,l,K,b,d,v),this.conjugate(K,b,d),this.normalize13b(K,d),f.negative=y.negative^a.negative,f.length=y.length+a.length,f.strip()},o.prototype.mul=function(y){var a=new o(null);return a.words=new Array(this.length+y.length),this.mulTo(y,a)},o.prototype.mulf=function(y){var a=new o(null);return a.words=new Array(this.length+y.length),H(this,y,a)},o.prototype.imul=function(y){return this.clone().mulTo(y,this)},o.prototype.imuln=function(y){i(typeof y=="number"),i(y<67108864);for(var a=0,f=0;f<this.length;f++){var d=(this.words[f]|0)*y,v=(d&67108863)+(a&67108863);a>>=26,a+=d/67108864|0,a+=v>>>26,this.words[f]=v&67108863}return a!==0&&(this.words[f]=a,this.length++),this},o.prototype.muln=function(y){return this.clone().imuln(y)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(y){var a=R(y);if(a.length===0)return new o(1);for(var f=this,d=0;d<a.length&&a[d]===0;d++,f=f.sqr());if(++d<a.length)for(var v=f.sqr();d<a.length;d++,v=v.sqr())a[d]!==0&&(f=f.mul(v));return f},o.prototype.iushln=function(y){i(typeof y=="number"&&y>=0);var a=y%26,f=(y-a)/26,d=67108863>>>26-a<<26-a,v;if(a!==0){var b=0;for(v=0;v<this.length;v++){var I=this.words[v]&d,_=(this.words[v]|0)-I<<a;this.words[v]=_|b,b=I>>>26-a}b&&(this.words[v]=b,this.length++)}if(f!==0){for(v=this.length-1;v>=0;v--)this.words[v+f]=this.words[v];for(v=0;v<f;v++)this.words[v]=0;this.length+=f}return this.strip()},o.prototype.ishln=function(y){return i(this.negative===0),this.iushln(y)},o.prototype.iushrn=function(y,a,f){i(typeof y=="number"&&y>=0);var d;a?d=(a-a%26)/26:d=0;var v=y%26,b=Math.min((y-v)/26,this.length),I=67108863^67108863>>>v<<v,_=f;if(d-=b,d=Math.max(0,d),_){for(var l=0;l<b;l++)_.words[l]=this.words[l];_.length=b}if(b!==0)if(this.length>b)for(this.length-=b,l=0;l<this.length;l++)this.words[l]=this.words[l+b];else this.words[0]=0,this.length=1;var c=0;for(l=this.length-1;l>=0&&(c!==0||l>=d);l--){var M=this.words[l]|0;this.words[l]=c<<26-v|M>>>v,c=M&I}return _&&c!==0&&(_.words[_.length++]=c),this.length===0&&(this.words[0]=0,this.length=1),this.strip()},o.prototype.ishrn=function(y,a,f){return i(this.negative===0),this.iushrn(y,a,f)},o.prototype.shln=function(y){return this.clone().ishln(y)},o.prototype.ushln=function(y){return this.clone().iushln(y)},o.prototype.shrn=function(y){return this.clone().ishrn(y)},o.prototype.ushrn=function(y){return this.clone().iushrn(y)},o.prototype.testn=function(y){i(typeof y=="number"&&y>=0);var a=y%26,f=(y-a)/26,d=1<<a;if(this.length<=f)return!1;var v=this.words[f];return!!(v&d)},o.prototype.imaskn=function(y){i(typeof y=="number"&&y>=0);var a=y%26,f=(y-a)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=f)return this;if(a!==0&&f++,this.length=Math.min(f,this.length),a!==0){var d=67108863^67108863>>>a<<a;this.words[this.length-1]&=d}return this.strip()},o.prototype.maskn=function(y){return this.clone().imaskn(y)},o.prototype.iaddn=function(y){return i(typeof y=="number"),i(y<67108864),y<0?this.isubn(-y):this.negative!==0?this.length===1&&(this.words[0]|0)<y?(this.words[0]=y-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(y),this.negative=1,this):this._iaddn(y)},o.prototype._iaddn=function(y){this.words[0]+=y;for(var a=0;a<this.length&&this.words[a]>=67108864;a++)this.words[a]-=67108864,a===this.length-1?this.words[a+1]=1:this.words[a+1]++;return this.length=Math.max(this.length,a+1),this},o.prototype.isubn=function(y){if(i(typeof y=="number"),i(y<67108864),y<0)return this.iaddn(-y);if(this.negative!==0)return this.negative=0,this.iaddn(y),this.negative=1,this;if(this.words[0]-=y,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var a=0;a<this.length&&this.words[a]<0;a++)this.words[a]+=67108864,this.words[a+1]-=1;return this.strip()},o.prototype.addn=function(y){return this.clone().iaddn(y)},o.prototype.subn=function(y){return this.clone().isubn(y)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(y,a,f){var d=y.length+f,v;this._expand(d);var b,I=0;for(v=0;v<y.length;v++){b=(this.words[v+f]|0)+I;var _=(y.words[v]|0)*a;b-=_&67108863,I=(b>>26)-(_/67108864|0),this.words[v+f]=b&67108863}for(;v<this.length-f;v++)b=(this.words[v+f]|0)+I,I=b>>26,this.words[v+f]=b&67108863;if(I===0)return this.strip();for(i(I===-1),I=0,v=0;v<this.length;v++)b=-(this.words[v]|0)+I,I=b>>26,this.words[v]=b&67108863;return this.negative=1,this.strip()},o.prototype._wordDiv=function(y,a){var f=this.length-y.length,d=this.clone(),v=y,b=v.words[v.length-1]|0,I=this._countBits(b);f=26-I,f!==0&&(v=v.ushln(f),d.iushln(f),b=v.words[v.length-1]|0);var _=d.length-v.length,l;if(a!=="mod"){l=new o(null),l.length=_+1,l.words=new Array(l.length);for(var c=0;c<l.length;c++)l.words[c]=0}var M=d.clone()._ishlnsubmul(v,1,_);M.negative===0&&(d=M,l&&(l.words[_]=1));for(var J=_-1;J>=0;J--){var K=(d.words[v.length+J]|0)*67108864+(d.words[v.length+J-1]|0);for(K=Math.min(K/b|0,67108863),d._ishlnsubmul(v,K,J);d.negative!==0;)K--,d.negative=0,d._ishlnsubmul(v,1,J),d.isZero()||(d.negative^=1);l&&(l.words[J]=K)}return l&&l.strip(),d.strip(),a!=="div"&&f!==0&&d.iushrn(f),{div:l||null,mod:d}},o.prototype.divmod=function(y,a,f){if(i(!y.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var d,v,b;return this.negative!==0&&y.negative===0?(b=this.neg().divmod(y,a),a!=="mod"&&(d=b.div.neg()),a!=="div"&&(v=b.mod.neg(),f&&v.negative!==0&&v.iadd(y)),{div:d,mod:v}):this.negative===0&&y.negative!==0?(b=this.divmod(y.neg(),a),a!=="mod"&&(d=b.div.neg()),{div:d,mod:b.mod}):this.negative&y.negative?(b=this.neg().divmod(y.neg(),a),a!=="div"&&(v=b.mod.neg(),f&&v.negative!==0&&v.isub(y)),{div:b.div,mod:v}):y.length>this.length||this.cmp(y)<0?{div:new o(0),mod:this}:y.length===1?a==="div"?{div:this.divn(y.words[0]),mod:null}:a==="mod"?{div:null,mod:new o(this.modn(y.words[0]))}:{div:this.divn(y.words[0]),mod:new o(this.modn(y.words[0]))}:this._wordDiv(y,a)},o.prototype.div=function(y){return this.divmod(y,"div",!1).div},o.prototype.mod=function(y){return this.divmod(y,"mod",!1).mod},o.prototype.umod=function(y){return this.divmod(y,"mod",!0).mod},o.prototype.divRound=function(y){var a=this.divmod(y);if(a.mod.isZero())return a.div;var f=a.div.negative!==0?a.mod.isub(y):a.mod,d=y.ushrn(1),v=y.andln(1),b=f.cmp(d);return b<0||v===1&&b===0?a.div:a.div.negative!==0?a.div.isubn(1):a.div.iaddn(1)},o.prototype.modn=function(y){i(y<=67108863);for(var a=(1<<26)%y,f=0,d=this.length-1;d>=0;d--)f=(a*f+(this.words[d]|0))%y;return f},o.prototype.idivn=function(y){i(y<=67108863);for(var a=0,f=this.length-1;f>=0;f--){var d=(this.words[f]|0)+a*67108864;this.words[f]=d/y|0,a=d%y}return this.strip()},o.prototype.divn=function(y){return this.clone().idivn(y)},o.prototype.egcd=function(y){i(y.negative===0),i(!y.isZero());var a=this,f=y.clone();a.negative!==0?a=a.umod(y):a=a.clone();for(var d=new o(1),v=new o(0),b=new o(0),I=new o(1),_=0;a.isEven()&&f.isEven();)a.iushrn(1),f.iushrn(1),++_;for(var l=f.clone(),c=a.clone();!a.isZero();){for(var M=0,J=1;!(a.words[0]&J)&&M<26;++M,J<<=1);if(M>0)for(a.iushrn(M);M-- >0;)(d.isOdd()||v.isOdd())&&(d.iadd(l),v.isub(c)),d.iushrn(1),v.iushrn(1);for(var K=0,m=1;!(f.words[0]&m)&&K<26;++K,m<<=1);if(K>0)for(f.iushrn(K);K-- >0;)(b.isOdd()||I.isOdd())&&(b.iadd(l),I.isub(c)),b.iushrn(1),I.iushrn(1);a.cmp(f)>=0?(a.isub(f),d.isub(b),v.isub(I)):(f.isub(a),b.isub(d),I.isub(v))}return{a:b,b:I,gcd:f.iushln(_)}},o.prototype._invmp=function(y){i(y.negative===0),i(!y.isZero());var a=this,f=y.clone();a.negative!==0?a=a.umod(y):a=a.clone();for(var d=new o(1),v=new o(0),b=f.clone();a.cmpn(1)>0&&f.cmpn(1)>0;){for(var I=0,_=1;!(a.words[0]&_)&&I<26;++I,_<<=1);if(I>0)for(a.iushrn(I);I-- >0;)d.isOdd()&&d.iadd(b),d.iushrn(1);for(var l=0,c=1;!(f.words[0]&c)&&l<26;++l,c<<=1);if(l>0)for(f.iushrn(l);l-- >0;)v.isOdd()&&v.iadd(b),v.iushrn(1);a.cmp(f)>=0?(a.isub(f),d.isub(v)):(f.isub(a),v.isub(d))}var M;return a.cmpn(1)===0?M=d:M=v,M.cmpn(0)<0&&M.iadd(y),M},o.prototype.gcd=function(y){if(this.isZero())return y.abs();if(y.isZero())return this.abs();var a=this.clone(),f=y.clone();a.negative=0,f.negative=0;for(var d=0;a.isEven()&&f.isEven();d++)a.iushrn(1),f.iushrn(1);do{for(;a.isEven();)a.iushrn(1);for(;f.isEven();)f.iushrn(1);var v=a.cmp(f);if(v<0){var b=a;a=f,f=b}else if(v===0||f.cmpn(1)===0)break;a.isub(f)}while(!0);return f.iushln(d)},o.prototype.invm=function(y){return this.egcd(y).a.umod(y)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(y){return this.words[0]&y},o.prototype.bincn=function(y){i(typeof y=="number");var a=y%26,f=(y-a)/26,d=1<<a;if(this.length<=f)return this._expand(f+1),this.words[f]|=d,this;for(var v=d,b=f;v!==0&&b<this.length;b++){var I=this.words[b]|0;I+=v,v=I>>>26,I&=67108863,this.words[b]=I}return v!==0&&(this.words[b]=v,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(y){var a=y<0;if(this.negative!==0&&!a)return-1;if(this.negative===0&&a)return 1;this.strip();var f;if(this.length>1)f=1;else{a&&(y=-y),i(y<=67108863,"Number is too big");var d=this.words[0]|0;f=d===y?0:d<y?-1:1}return this.negative!==0?-f|0:f},o.prototype.cmp=function(y){if(this.negative!==0&&y.negative===0)return-1;if(this.negative===0&&y.negative!==0)return 1;var a=this.ucmp(y);return this.negative!==0?-a|0:a},o.prototype.ucmp=function(y){if(this.length>y.length)return 1;if(this.length<y.length)return-1;for(var a=0,f=this.length-1;f>=0;f--){var d=this.words[f]|0,v=y.words[f]|0;if(d!==v){d<v?a=-1:d>v&&(a=1);break}}return a},o.prototype.gtn=function(y){return this.cmpn(y)===1},o.prototype.gt=function(y){return this.cmp(y)===1},o.prototype.gten=function(y){return this.cmpn(y)>=0},o.prototype.gte=function(y){return this.cmp(y)>=0},o.prototype.ltn=function(y){return this.cmpn(y)===-1},o.prototype.lt=function(y){return this.cmp(y)===-1},o.prototype.lten=function(y){return this.cmpn(y)<=0},o.prototype.lte=function(y){return this.cmp(y)<=0},o.prototype.eqn=function(y){return this.cmpn(y)===0},o.prototype.eq=function(y){return this.cmp(y)===0},o.red=function(y){return new mt(y)},o.prototype.toRed=function(y){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),y.convertTo(this)._forceRed(y)},o.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(y){return this.red=y,this},o.prototype.forceRed=function(y){return i(!this.red,"Already a number in reduction context"),this._forceRed(y)},o.prototype.redAdd=function(y){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,y)},o.prototype.redIAdd=function(y){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,y)},o.prototype.redSub=function(y){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,y)},o.prototype.redISub=function(y){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,y)},o.prototype.redShl=function(y){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,y)},o.prototype.redMul=function(y){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,y),this.red.mul(this,y)},o.prototype.redIMul=function(y){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,y),this.red.imul(this,y)},o.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(y){return i(this.red&&!y.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,y)};var ht={k256:null,p224:null,p192:null,p25519:null};function Z(T,y){this.name=T,this.p=new o(y,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}Z.prototype._tmp=function(){var y=new o(null);return y.words=new Array(Math.ceil(this.n/13)),y},Z.prototype.ireduce=function(y){var a=y,f;do this.split(a,this.tmp),a=this.imulK(a),a=a.iadd(this.tmp),f=a.bitLength();while(f>this.n);var d=f<this.n?-1:a.ucmp(this.p);return d===0?(a.words[0]=0,a.length=1):d>0?a.isub(this.p):a.strip!==void 0?a.strip():a._strip(),a},Z.prototype.split=function(y,a){y.iushrn(this.n,0,a)},Z.prototype.imulK=function(y){return y.imul(this.k)};function et(){Z.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(et,Z),et.prototype.split=function(y,a){for(var f=4194303,d=Math.min(y.length,9),v=0;v<d;v++)a.words[v]=y.words[v];if(a.length=d,y.length<=9){y.words[0]=0,y.length=1;return}var b=y.words[9];for(a.words[a.length++]=b&f,v=10;v<y.length;v++){var I=y.words[v]|0;y.words[v-10]=(I&f)<<4|b>>>22,b=I}b>>>=22,y.words[v-10]=b,b===0&&y.length>10?y.length-=10:y.length-=9},et.prototype.imulK=function(y){y.words[y.length]=0,y.words[y.length+1]=0,y.length+=2;for(var a=0,f=0;f<y.length;f++){var d=y.words[f]|0;a+=d*977,y.words[f]=a&67108863,a=d*64+(a/67108864|0)}return y.words[y.length-1]===0&&(y.length--,y.words[y.length-1]===0&&y.length--),y};function at(){Z.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(at,Z);function ft(){Z.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(ft,Z);function ct(){Z.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(ct,Z),ct.prototype.imulK=function(y){for(var a=0,f=0;f<y.length;f++){var d=(y.words[f]|0)*19+a,v=d&67108863;d>>>=26,y.words[f]=v,a=d}return a!==0&&(y.words[y.length++]=a),y},o._prime=function(y){if(ht[y])return ht[y];var a;if(y==="k256")a=new et;else if(y==="p224")a=new at;else if(y==="p192")a=new ft;else if(y==="p25519")a=new ct;else throw new Error("Unknown prime "+y);return ht[y]=a,a};function mt(T){if(typeof T=="string"){var y=o._prime(T);this.m=y.p,this.prime=y}else i(T.gtn(1),"modulus must be greater than 1"),this.m=T,this.prime=null}mt.prototype._verify1=function(y){i(y.negative===0,"red works only with positives"),i(y.red,"red works only with red numbers")},mt.prototype._verify2=function(y,a){i((y.negative|a.negative)===0,"red works only with positives"),i(y.red&&y.red===a.red,"red works only with red numbers")},mt.prototype.imod=function(y){return this.prime?this.prime.ireduce(y)._forceRed(this):y.umod(this.m)._forceRed(this)},mt.prototype.neg=function(y){return y.isZero()?y.clone():this.m.sub(y)._forceRed(this)},mt.prototype.add=function(y,a){this._verify2(y,a);var f=y.add(a);return f.cmp(this.m)>=0&&f.isub(this.m),f._forceRed(this)},mt.prototype.iadd=function(y,a){this._verify2(y,a);var f=y.iadd(a);return f.cmp(this.m)>=0&&f.isub(this.m),f},mt.prototype.sub=function(y,a){this._verify2(y,a);var f=y.sub(a);return f.cmpn(0)<0&&f.iadd(this.m),f._forceRed(this)},mt.prototype.isub=function(y,a){this._verify2(y,a);var f=y.isub(a);return f.cmpn(0)<0&&f.iadd(this.m),f},mt.prototype.shl=function(y,a){return this._verify1(y),this.imod(y.ushln(a))},mt.prototype.imul=function(y,a){return this._verify2(y,a),this.imod(y.imul(a))},mt.prototype.mul=function(y,a){return this._verify2(y,a),this.imod(y.mul(a))},mt.prototype.isqr=function(y){return this.imul(y,y.clone())},mt.prototype.sqr=function(y){return this.mul(y,y)},mt.prototype.sqrt=function(y){if(y.isZero())return y.clone();var a=this.m.andln(3);if(i(a%2===1),a===3){var f=this.m.add(new o(1)).iushrn(2);return this.pow(y,f)}for(var d=this.m.subn(1),v=0;!d.isZero()&&d.andln(1)===0;)v++,d.iushrn(1);i(!d.isZero());var b=new o(1).toRed(this),I=b.redNeg(),_=this.m.subn(1).iushrn(1),l=this.m.bitLength();for(l=new o(2*l*l).toRed(this);this.pow(l,_).cmp(I)!==0;)l.redIAdd(I);for(var c=this.pow(l,d),M=this.pow(y,d.addn(1).iushrn(1)),J=this.pow(y,d),K=v;J.cmp(b)!==0;){for(var m=J,D=0;m.cmp(b)!==0;D++)m=m.redSqr();i(D<K);var q=this.pow(c,new o(1).iushln(K-D-1));M=M.redMul(q),c=q.redSqr(),J=J.redMul(c),K=D}return M},mt.prototype.invm=function(y){var a=y._invmp(this.m);return a.negative!==0?(a.negative=0,this.imod(a).redNeg()):this.imod(a)},mt.prototype.pow=function(y,a){if(a.isZero())return new o(1).toRed(this);if(a.cmpn(1)===0)return y.clone();var f=4,d=new Array(1<<f);d[0]=new o(1).toRed(this),d[1]=y;for(var v=2;v<d.length;v++)d[v]=this.mul(d[v-1],y);var b=d[0],I=0,_=0,l=a.bitLength()%26;for(l===0&&(l=26),v=a.length-1;v>=0;v--){for(var c=a.words[v],M=l-1;M>=0;M--){var J=c>>M&1;if(b!==d[0]&&(b=this.sqr(b)),J===0&&I===0){_=0;continue}I<<=1,I|=J,_++,!(_!==f&&(v!==0||M!==0))&&(b=this.mul(b,d[I]),_=0,I=0)}l=26}return b},mt.prototype.convertTo=function(y){var a=y.umod(this.m);return a===y?a.clone():a},mt.prototype.convertFrom=function(y){var a=y.clone();return a.red=null,a},o.mont=function(y){return new se(y)};function se(T){mt.call(this,T),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(se,mt),se.prototype.convertTo=function(y){return this.imod(y.ushln(this.shift))},se.prototype.convertFrom=function(y){var a=this.imod(y.mul(this.rinv));return a.red=null,a},se.prototype.imul=function(y,a){if(y.isZero()||a.isZero())return y.words[0]=0,y.length=1,y;var f=y.imul(a),d=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=f.isub(d).iushrn(this.shift),b=v;return v.cmp(this.m)>=0?b=v.isub(this.m):v.cmpn(0)<0&&(b=v.iadd(this.m)),b._forceRed(this)},se.prototype.mul=function(y,a){if(y.isZero()||a.isZero())return new o(0)._forceRed(this);var f=y.mul(a),d=f.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),v=f.isub(d).iushrn(this.shift),b=v;return v.cmp(this.m)>=0?b=v.isub(this.m):v.cmpn(0)<0&&(b=v.iadd(this.m)),b._forceRed(this)},se.prototype.invm=function(y){var a=this.imod(y._invmp(this.m).mul(this.r2));return a._forceRed(this)}})(r,fg)})(h0);var as=h0.exports;(function(r){var t=r,e=as,i=A4,s=_4;t.assert=i,t.toArray=s.toArray,t.zero2=s.zero2,t.toHex=s.toHex,t.encode=s.encode;function o(S,x,N){var R=new Array(Math.max(S.bitLength(),N)+1),O;for(O=0;O<R.length;O+=1)R[O]=0;var z=1<<x+1,L=S.clone();for(O=0;O<R.length;O++){var H,rt=L.andln(z-1);L.isOdd()?(rt>(z>>1)-1?H=(z>>1)-rt:H=rt,L.isubn(H)):H=0,R[O]=H,L.iushrn(1)}return R}t.getNAF=o;function u(S,x){var N=[[],[]];S=S.clone(),x=x.clone();for(var R=0,O=0,z;S.cmpn(-R)>0||x.cmpn(-O)>0;){var L=S.andln(3)+R&3,H=x.andln(3)+O&3;L===3&&(L=-1),H===3&&(H=-1);var rt;L&1?(z=S.andln(7)+R&7,(z===3||z===5)&&H===2?rt=-L:rt=L):rt=0,N[0].push(rt);var ht;H&1?(z=x.andln(7)+O&7,(z===3||z===5)&&L===2?ht=-H:ht=H):ht=0,N[1].push(ht),2*R===rt+1&&(R=1-R),2*O===ht+1&&(O=1-O),S.iushrn(1),x.iushrn(1)}return N}t.getJSF=u;function g(S,x,N){var R="_"+x;S.prototype[x]=function(){return this[R]!==void 0?this[R]:this[R]=N.call(this)}}t.cachedProperty=g;function w(S){return typeof S=="string"?t.toArray(S,"hex"):S}t.parseBytes=w;function A(S){return new e(S,"hex","le")}t.intFromLE=A})(wi);var f0={},Ds=as,Ta=wi,ef=Ta.getNAF,tw=Ta.getJSF,rf=Ta.assert;function Ss(r,t){this.type=r,this.p=new Ds(t.p,16),this.red=t.prime?Ds.red(t.prime):Ds.mont(this.p),this.zero=new Ds(0).toRed(this.red),this.one=new Ds(1).toRed(this.red),this.two=new Ds(2).toRed(this.red),this.n=t.n&&new Ds(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var e=this.n&&this.p.div(this.n);!e||e.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var yf=Ss;Ss.prototype.point=function(){throw new Error("Not implemented")};Ss.prototype.validate=function(){throw new Error("Not implemented")};Ss.prototype._fixedNafMul=function(t,e){rf(t.precomputed);var i=t._getDoubles(),s=ef(e,1,this._bitLength),o=(1<<i.step+1)-(i.step%2===0?2:1);o/=3;var u=[],g,w;for(g=0;g<s.length;g+=i.step){w=0;for(var A=g+i.step-1;A>=g;A--)w=(w<<1)+s[A];u.push(w)}for(var S=this.jpoint(null,null,null),x=this.jpoint(null,null,null),N=o;N>0;N--){for(g=0;g<u.length;g++)w=u[g],w===N?x=x.mixedAdd(i.points[g]):w===-N&&(x=x.mixedAdd(i.points[g].neg()));S=S.add(x)}return S.toP()};Ss.prototype._wnafMul=function(t,e){var i=4,s=t._getNAFPoints(i);i=s.wnd;for(var o=s.points,u=ef(e,i,this._bitLength),g=this.jpoint(null,null,null),w=u.length-1;w>=0;w--){for(var A=0;w>=0&&u[w]===0;w--)A++;if(w>=0&&A++,g=g.dblp(A),w<0)break;var S=u[w];rf(S!==0),t.type==="affine"?S>0?g=g.mixedAdd(o[S-1>>1]):g=g.mixedAdd(o[-S-1>>1].neg()):S>0?g=g.add(o[S-1>>1]):g=g.add(o[-S-1>>1].neg())}return t.type==="affine"?g.toP():g};Ss.prototype._wnafMulAdd=function(t,e,i,s,o){var u=this._wnafT1,g=this._wnafT2,w=this._wnafT3,A=0,S,x,N;for(S=0;S<s;S++){N=e[S];var R=N._getNAFPoints(t);u[S]=R.wnd,g[S]=R.points}for(S=s-1;S>=1;S-=2){var O=S-1,z=S;if(u[O]!==1||u[z]!==1){w[O]=ef(i[O],u[O],this._bitLength),w[z]=ef(i[z],u[z],this._bitLength),A=Math.max(w[O].length,A),A=Math.max(w[z].length,A);continue}var L=[e[O],null,null,e[z]];e[O].y.cmp(e[z].y)===0?(L[1]=e[O].add(e[z]),L[2]=e[O].toJ().mixedAdd(e[z].neg())):e[O].y.cmp(e[z].y.redNeg())===0?(L[1]=e[O].toJ().mixedAdd(e[z]),L[2]=e[O].add(e[z].neg())):(L[1]=e[O].toJ().mixedAdd(e[z]),L[2]=e[O].toJ().mixedAdd(e[z].neg()));var H=[-3,-1,-5,-7,0,7,5,1,3],rt=tw(i[O],i[z]);for(A=Math.max(rt[0].length,A),w[O]=new Array(A),w[z]=new Array(A),x=0;x<A;x++){var ht=rt[0][x]|0,Z=rt[1][x]|0;w[O][x]=H[(ht+1)*3+(Z+1)],w[z][x]=0,g[O]=L}}var et=this.jpoint(null,null,null),at=this._wnafT4;for(S=A;S>=0;S--){for(var ft=0;S>=0;){var ct=!0;for(x=0;x<s;x++)at[x]=w[x][S]|0,at[x]!==0&&(ct=!1);if(!ct)break;ft++,S--}if(S>=0&&ft++,et=et.dblp(ft),S<0)break;for(x=0;x<s;x++){var mt=at[x];mt!==0&&(mt>0?N=g[x][mt-1>>1]:mt<0&&(N=g[x][-mt-1>>1].neg()),N.type==="affine"?et=et.mixedAdd(N):et=et.add(N))}}for(S=0;S<s;S++)g[S]=null;return o?et:et.toP()};function Li(r,t){this.curve=r,this.type=t,this.precomputed=null}Ss.BasePoint=Li;Li.prototype.eq=function(){throw new Error("Not implemented")};Li.prototype.validate=function(){return this.curve.validate(this)};Ss.prototype.decodePoint=function(t,e){t=Ta.toArray(t,e);var i=this.p.byteLength();if((t[0]===4||t[0]===6||t[0]===7)&&t.length-1===2*i){t[0]===6?rf(t[t.length-1]%2===0):t[0]===7&&rf(t[t.length-1]%2===1);var s=this.point(t.slice(1,1+i),t.slice(1+i,1+2*i));return s}else if((t[0]===2||t[0]===3)&&t.length-1===i)return this.pointFromX(t.slice(1,1+i),t[0]===3);throw new Error("Unknown point format")};Li.prototype.encodeCompressed=function(t){return this.encode(t,!0)};Li.prototype._encode=function(t){var e=this.curve.p.byteLength(),i=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",e))};Li.prototype.encode=function(t,e){return Ta.encode(this._encode(e),t)};Li.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this};Li.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return e?e.points.length>=Math.ceil((t.bitLength()+1)/e.step):!1};Li.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],s=this,o=0;o<e;o+=t){for(var u=0;u<t;u++)s=s.dbl();i.push(s)}return{step:t,points:i}};Li.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],i=(1<<t)-1,s=i===1?null:this.dbl(),o=1;o<i;o++)e[o]=e[o-1].add(s);return{wnd:t,points:e}};Li.prototype._getBeta=function(){return null};Li.prototype.dblp=function(t){for(var e=this,i=0;i<t;i++)e=e.dbl();return e};var ew=wi,Ye=as,c0=r0,To=yf,rw=ew.assert;function $i(r){To.call(this,"short",r),this.a=new Ye(r.a,16).toRed(this.red),this.b=new Ye(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}c0($i,To);var iw=$i;$i.prototype._getEndomorphism=function(t){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var e,i;if(t.beta)e=new Ye(t.beta,16).toRed(this.red);else{var s=this._getEndoRoots(this.p);e=s[0].cmp(s[1])<0?s[0]:s[1],e=e.toRed(this.red)}if(t.lambda)i=new Ye(t.lambda,16);else{var o=this._getEndoRoots(this.n);this.g.mul(o[0]).x.cmp(this.g.x.redMul(e))===0?i=o[0]:(i=o[1],rw(this.g.mul(i).x.cmp(this.g.x.redMul(e))===0))}var u;return t.basis?u=t.basis.map(function(g){return{a:new Ye(g.a,16),b:new Ye(g.b,16)}}):u=this._getEndoBasis(i),{beta:e,lambda:i,basis:u}}};$i.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:Ye.mont(t),i=new Ye(2).toRed(e).redInvm(),s=i.redNeg(),o=new Ye(3).toRed(e).redNeg().redSqrt().redMul(i),u=s.redAdd(o).fromRed(),g=s.redSub(o).fromRed();return[u,g]};$i.prototype._getEndoBasis=function(t){for(var e=this.n.ushrn(Math.floor(this.n.bitLength()/2)),i=t,s=this.n.clone(),o=new Ye(1),u=new Ye(0),g=new Ye(0),w=new Ye(1),A,S,x,N,R,O,z,L=0,H,rt;i.cmpn(0)!==0;){var ht=s.div(i);H=s.sub(ht.mul(i)),rt=g.sub(ht.mul(o));var Z=w.sub(ht.mul(u));if(!x&&H.cmp(e)<0)A=z.neg(),S=o,x=H.neg(),N=rt;else if(x&&++L===2)break;z=H,s=i,i=H,g=o,o=rt,w=u,u=Z}R=H.neg(),O=rt;var et=x.sqr().add(N.sqr()),at=R.sqr().add(O.sqr());return at.cmp(et)>=0&&(R=A,O=S),x.negative&&(x=x.neg(),N=N.neg()),R.negative&&(R=R.neg(),O=O.neg()),[{a:x,b:N},{a:R,b:O}]};$i.prototype._endoSplit=function(t){var e=this.endo.basis,i=e[0],s=e[1],o=s.b.mul(t).divRound(this.n),u=i.b.neg().mul(t).divRound(this.n),g=o.mul(i.a),w=u.mul(s.a),A=o.mul(i.b),S=u.mul(s.b),x=t.sub(g).sub(w),N=A.add(S).neg();return{k1:x,k2:N}};$i.prototype.pointFromX=function(t,e){t=new Ye(t,16),t.red||(t=t.toRed(this.red));var i=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),s=i.redSqrt();if(s.redSqr().redSub(i).cmp(this.zero)!==0)throw new Error("invalid point");var o=s.fromRed().isOdd();return(e&&!o||!e&&o)&&(s=s.redNeg()),this.point(t,s)};$i.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,i=t.y,s=this.a.redMul(e),o=e.redSqr().redMul(e).redIAdd(s).redIAdd(this.b);return i.redSqr().redISub(o).cmpn(0)===0};$i.prototype._endoWnafMulAdd=function(t,e,i){for(var s=this._endoWnafT1,o=this._endoWnafT2,u=0;u<t.length;u++){var g=this._endoSplit(e[u]),w=t[u],A=w._getBeta();g.k1.negative&&(g.k1.ineg(),w=w.neg(!0)),g.k2.negative&&(g.k2.ineg(),A=A.neg(!0)),s[u*2]=w,s[u*2+1]=A,o[u*2]=g.k1,o[u*2+1]=g.k2}for(var S=this._wnafMulAdd(1,s,o,u*2,i),x=0;x<u*2;x++)s[x]=null,o[x]=null;return S};function ur(r,t,e,i){To.BasePoint.call(this,r,"affine"),t===null&&e===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new Ye(t,16),this.y=new Ye(e,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}c0(ur,To.BasePoint);$i.prototype.point=function(t,e,i){return new ur(this,t,e,i)};$i.prototype.pointFromJSON=function(t,e){return ur.fromJSON(this,t,e)};ur.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var i=this.curve,s=function(o){return i.point(o.x.redMul(i.endo.beta),o.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(s)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(s)}}}return e}};ur.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]};ur.fromJSON=function(t,e,i){typeof e=="string"&&(e=JSON.parse(e));var s=t.point(e[0],e[1],i);if(!e[2])return s;function o(g){return t.point(g[0],g[1],i)}var u=e[2];return s.precomputed={beta:null,doubles:u.doubles&&{step:u.doubles.step,points:[s].concat(u.doubles.points.map(o))},naf:u.naf&&{wnd:u.naf.wnd,points:[s].concat(u.naf.points.map(o))}},s};ur.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"};ur.prototype.isInfinity=function(){return this.inf};ur.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(this.x.cmp(t.x)===0)return this.curve.point(null,null);var e=this.y.redSub(t.y);e.cmpn(0)!==0&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var i=e.redSqr().redISub(this.x).redISub(t.x),s=e.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,s)};ur.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(t.cmpn(0)===0)return this.curve.point(null,null);var e=this.curve.a,i=this.x.redSqr(),s=t.redInvm(),o=i.redAdd(i).redIAdd(i).redIAdd(e).redMul(s),u=o.redSqr().redISub(this.x.redAdd(this.x)),g=o.redMul(this.x.redSub(u)).redISub(this.y);return this.curve.point(u,g)};ur.prototype.getX=function(){return this.x.fromRed()};ur.prototype.getY=function(){return this.y.fromRed()};ur.prototype.mul=function(t){return t=new Ye(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)};ur.prototype.mulAdd=function(t,e,i){var s=[this,e],o=[t,i];return this.curve.endo?this.curve._endoWnafMulAdd(s,o):this.curve._wnafMulAdd(1,s,o,2)};ur.prototype.jmulAdd=function(t,e,i){var s=[this,e],o=[t,i];return this.curve.endo?this.curve._endoWnafMulAdd(s,o,!0):this.curve._wnafMulAdd(1,s,o,2,!0)};ur.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||this.x.cmp(t.x)===0&&this.y.cmp(t.y)===0)};ur.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var i=this.precomputed,s=function(o){return o.neg()};e.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(s)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(s)}}}return e};ur.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var t=this.curve.jpoint(this.x,this.y,this.curve.one);return t};function yr(r,t,e,i){To.BasePoint.call(this,r,"jacobian"),t===null&&e===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new Ye(0)):(this.x=new Ye(t,16),this.y=new Ye(e,16),this.z=new Ye(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}c0(yr,To.BasePoint);$i.prototype.jpoint=function(t,e,i){return new yr(this,t,e,i)};yr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),i=this.x.redMul(e),s=this.y.redMul(e).redMul(t);return this.curve.point(i,s)};yr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)};yr.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),i=this.z.redSqr(),s=this.x.redMul(e),o=t.x.redMul(i),u=this.y.redMul(e.redMul(t.z)),g=t.y.redMul(i.redMul(this.z)),w=s.redSub(o),A=u.redSub(g);if(w.cmpn(0)===0)return A.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var S=w.redSqr(),x=S.redMul(w),N=s.redMul(S),R=A.redSqr().redIAdd(x).redISub(N).redISub(N),O=A.redMul(N.redISub(R)).redISub(u.redMul(x)),z=this.z.redMul(t.z).redMul(w);return this.curve.jpoint(R,O,z)};yr.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),i=this.x,s=t.x.redMul(e),o=this.y,u=t.y.redMul(e).redMul(this.z),g=i.redSub(s),w=o.redSub(u);if(g.cmpn(0)===0)return w.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var A=g.redSqr(),S=A.redMul(g),x=i.redMul(A),N=w.redSqr().redIAdd(S).redISub(x).redISub(x),R=w.redMul(x.redISub(N)).redISub(o.redMul(S)),O=this.z.redMul(g);return this.curve.jpoint(N,R,O)};yr.prototype.dblp=function(t){if(t===0)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var i=this;for(e=0;e<t;e++)i=i.dbl();return i}var s=this.curve.a,o=this.curve.tinv,u=this.x,g=this.y,w=this.z,A=w.redSqr().redSqr(),S=g.redAdd(g);for(e=0;e<t;e++){var x=u.redSqr(),N=S.redSqr(),R=N.redSqr(),O=x.redAdd(x).redIAdd(x).redIAdd(s.redMul(A)),z=u.redMul(N),L=O.redSqr().redISub(z.redAdd(z)),H=z.redISub(L),rt=O.redMul(H);rt=rt.redIAdd(rt).redISub(R);var ht=S.redMul(w);e+1<t&&(A=A.redMul(R)),u=L,w=ht,S=rt}return this.curve.jpoint(u,S.redMul(o),w)};yr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()};yr.prototype._zeroDbl=function(){var t,e,i;if(this.zOne){var s=this.x.redSqr(),o=this.y.redSqr(),u=o.redSqr(),g=this.x.redAdd(o).redSqr().redISub(s).redISub(u);g=g.redIAdd(g);var w=s.redAdd(s).redIAdd(s),A=w.redSqr().redISub(g).redISub(g),S=u.redIAdd(u);S=S.redIAdd(S),S=S.redIAdd(S),t=A,e=w.redMul(g.redISub(A)).redISub(S),i=this.y.redAdd(this.y)}else{var x=this.x.redSqr(),N=this.y.redSqr(),R=N.redSqr(),O=this.x.redAdd(N).redSqr().redISub(x).redISub(R);O=O.redIAdd(O);var z=x.redAdd(x).redIAdd(x),L=z.redSqr(),H=R.redIAdd(R);H=H.redIAdd(H),H=H.redIAdd(H),t=L.redISub(O).redISub(O),e=z.redMul(O.redISub(t)).redISub(H),i=this.y.redMul(this.z),i=i.redIAdd(i)}return this.curve.jpoint(t,e,i)};yr.prototype._threeDbl=function(){var t,e,i;if(this.zOne){var s=this.x.redSqr(),o=this.y.redSqr(),u=o.redSqr(),g=this.x.redAdd(o).redSqr().redISub(s).redISub(u);g=g.redIAdd(g);var w=s.redAdd(s).redIAdd(s).redIAdd(this.curve.a),A=w.redSqr().redISub(g).redISub(g);t=A;var S=u.redIAdd(u);S=S.redIAdd(S),S=S.redIAdd(S),e=w.redMul(g.redISub(A)).redISub(S),i=this.y.redAdd(this.y)}else{var x=this.z.redSqr(),N=this.y.redSqr(),R=this.x.redMul(N),O=this.x.redSub(x).redMul(this.x.redAdd(x));O=O.redAdd(O).redIAdd(O);var z=R.redIAdd(R);z=z.redIAdd(z);var L=z.redAdd(z);t=O.redSqr().redISub(L),i=this.y.redAdd(this.z).redSqr().redISub(N).redISub(x);var H=N.redSqr();H=H.redIAdd(H),H=H.redIAdd(H),H=H.redIAdd(H),e=O.redMul(z.redISub(t)).redISub(H)}return this.curve.jpoint(t,e,i)};yr.prototype._dbl=function(){var t=this.curve.a,e=this.x,i=this.y,s=this.z,o=s.redSqr().redSqr(),u=e.redSqr(),g=i.redSqr(),w=u.redAdd(u).redIAdd(u).redIAdd(t.redMul(o)),A=e.redAdd(e);A=A.redIAdd(A);var S=A.redMul(g),x=w.redSqr().redISub(S.redAdd(S)),N=S.redISub(x),R=g.redSqr();R=R.redIAdd(R),R=R.redIAdd(R),R=R.redIAdd(R);var O=w.redMul(N).redISub(R),z=i.redAdd(i).redMul(s);return this.curve.jpoint(x,O,z)};yr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),i=this.z.redSqr(),s=e.redSqr(),o=t.redAdd(t).redIAdd(t),u=o.redSqr(),g=this.x.redAdd(e).redSqr().redISub(t).redISub(s);g=g.redIAdd(g),g=g.redAdd(g).redIAdd(g),g=g.redISub(u);var w=g.redSqr(),A=s.redIAdd(s);A=A.redIAdd(A),A=A.redIAdd(A),A=A.redIAdd(A);var S=o.redIAdd(g).redSqr().redISub(u).redISub(w).redISub(A),x=e.redMul(S);x=x.redIAdd(x),x=x.redIAdd(x);var N=this.x.redMul(w).redISub(x);N=N.redIAdd(N),N=N.redIAdd(N);var R=this.y.redMul(S.redMul(A.redISub(S)).redISub(g.redMul(w)));R=R.redIAdd(R),R=R.redIAdd(R),R=R.redIAdd(R);var O=this.z.redAdd(g).redSqr().redISub(i).redISub(w);return this.curve.jpoint(N,R,O)};yr.prototype.mul=function(t,e){return t=new Ye(t,e),this.curve._wnafMul(this,t)};yr.prototype.eq=function(t){if(t.type==="affine")return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),i=t.z.redSqr();if(this.x.redMul(i).redISub(t.x.redMul(e)).cmpn(0)!==0)return!1;var s=e.redMul(this.z),o=i.redMul(t.z);return this.y.redMul(o).redISub(t.y.redMul(s)).cmpn(0)===0};yr.prototype.eqXToP=function(t){var e=this.z.redSqr(),i=t.toRed(this.curve.red).redMul(e);if(this.x.cmp(i)===0)return!0;for(var s=t.clone(),o=this.curve.redN.redMul(e);;){if(s.iadd(this.curve.n),s.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(o),this.x.cmp(i)===0)return!0}};yr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"};yr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Ao=as,yg=r0,wf=yf,nw=wi;function qo(r){wf.call(this,"mont",r),this.a=new Ao(r.a,16).toRed(this.red),this.b=new Ao(r.b,16).toRed(this.red),this.i4=new Ao(4).toRed(this.red).redInvm(),this.two=new Ao(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}yg(qo,wf);var sw=qo;qo.prototype.validate=function(t){var e=t.normalize().x,i=e.redSqr(),s=i.redMul(e).redAdd(i.redMul(this.a)).redAdd(e),o=s.redSqrt();return o.redSqr().cmp(s)===0};function cr(r,t,e){wf.BasePoint.call(this,r,"projective"),t===null&&e===null?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new Ao(t,16),this.z=new Ao(e,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}yg(cr,wf.BasePoint);qo.prototype.decodePoint=function(t,e){return this.point(nw.toArray(t,e),1)};qo.prototype.point=function(t,e){return new cr(this,t,e)};qo.prototype.pointFromJSON=function(t){return cr.fromJSON(this,t)};cr.prototype.precompute=function(){};cr.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())};cr.fromJSON=function(t,e){return new cr(t,e[0],e[1]||t.one)};cr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};cr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};cr.prototype.dbl=function(){var t=this.x.redAdd(this.z),e=t.redSqr(),i=this.x.redSub(this.z),s=i.redSqr(),o=e.redSub(s),u=e.redMul(s),g=o.redMul(s.redAdd(this.curve.a24.redMul(o)));return this.curve.point(u,g)};cr.prototype.add=function(){throw new Error("Not supported on Montgomery curve")};cr.prototype.diffAdd=function(t,e){var i=this.x.redAdd(this.z),s=this.x.redSub(this.z),o=t.x.redAdd(t.z),u=t.x.redSub(t.z),g=u.redMul(i),w=o.redMul(s),A=e.z.redMul(g.redAdd(w).redSqr()),S=e.x.redMul(g.redISub(w).redSqr());return this.curve.point(A,S)};cr.prototype.mul=function(t){for(var e=t.clone(),i=this,s=this.curve.point(null,null),o=this,u=[];e.cmpn(0)!==0;e.iushrn(1))u.push(e.andln(1));for(var g=u.length-1;g>=0;g--)u[g]===0?(i=i.diffAdd(s,o),s=s.dbl()):(s=i.diffAdd(s,o),i=i.dbl());return s};cr.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")};cr.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")};cr.prototype.eq=function(t){return this.getX().cmp(t.getX())===0};cr.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this};cr.prototype.getX=function(){return this.normalize(),this.x.fromRed()};var ow=wi,ns=as,wg=r0,Af=yf,aw=ow.assert;function Bn(r){this.twisted=(r.a|0)!==1,this.mOneA=this.twisted&&(r.a|0)===-1,this.extended=this.mOneA,Af.call(this,"edwards",r),this.a=new ns(r.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new ns(r.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new ns(r.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),aw(!this.twisted||this.c.fromRed().cmpn(1)===0),this.oneC=(r.c|0)===1}wg(Bn,Af);var hw=Bn;Bn.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)};Bn.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)};Bn.prototype.jpoint=function(t,e,i,s){return this.point(t,e,i,s)};Bn.prototype.pointFromX=function(t,e){t=new ns(t,16),t.red||(t=t.toRed(this.red));var i=t.redSqr(),s=this.c2.redSub(this.a.redMul(i)),o=this.one.redSub(this.c2.redMul(this.d).redMul(i)),u=s.redMul(o.redInvm()),g=u.redSqrt();if(g.redSqr().redSub(u).cmp(this.zero)!==0)throw new Error("invalid point");var w=g.fromRed().isOdd();return(e&&!w||!e&&w)&&(g=g.redNeg()),this.point(t,g)};Bn.prototype.pointFromY=function(t,e){t=new ns(t,16),t.red||(t=t.toRed(this.red));var i=t.redSqr(),s=i.redSub(this.c2),o=i.redMul(this.d).redMul(this.c2).redSub(this.a),u=s.redMul(o.redInvm());if(u.cmp(this.zero)===0){if(e)throw new Error("invalid point");return this.point(this.zero,t)}var g=u.redSqrt();if(g.redSqr().redSub(u).cmp(this.zero)!==0)throw new Error("invalid point");return g.fromRed().isOdd()!==e&&(g=g.redNeg()),this.point(g,t)};Bn.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var e=t.x.redSqr(),i=t.y.redSqr(),s=e.redMul(this.a).redAdd(i),o=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(i)));return s.cmp(o)===0};function ke(r,t,e,i,s){Af.BasePoint.call(this,r,"projective"),t===null&&e===null&&i===null?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new ns(t,16),this.y=new ns(e,16),this.z=i?new ns(i,16):this.curve.one,this.t=s&&new ns(s,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}wg(ke,Af.BasePoint);Bn.prototype.pointFromJSON=function(t){return ke.fromJSON(this,t)};Bn.prototype.point=function(t,e,i,s){return new ke(this,t,e,i,s)};ke.fromJSON=function(t,e){return new ke(t,e[0],e[1],e[2])};ke.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"};ke.prototype.isInfinity=function(){return this.x.cmpn(0)===0&&(this.y.cmp(this.z)===0||this.zOne&&this.y.cmp(this.curve.c)===0)};ke.prototype._extDbl=function(){var t=this.x.redSqr(),e=this.y.redSqr(),i=this.z.redSqr();i=i.redIAdd(i);var s=this.curve._mulA(t),o=this.x.redAdd(this.y).redSqr().redISub(t).redISub(e),u=s.redAdd(e),g=u.redSub(i),w=s.redSub(e),A=o.redMul(g),S=u.redMul(w),x=o.redMul(w),N=g.redMul(u);return this.curve.point(A,S,N,x)};ke.prototype._projDbl=function(){var t=this.x.redAdd(this.y).redSqr(),e=this.x.redSqr(),i=this.y.redSqr(),s,o,u,g,w,A;if(this.curve.twisted){g=this.curve._mulA(e);var S=g.redAdd(i);this.zOne?(s=t.redSub(e).redSub(i).redMul(S.redSub(this.curve.two)),o=S.redMul(g.redSub(i)),u=S.redSqr().redSub(S).redSub(S)):(w=this.z.redSqr(),A=S.redSub(w).redISub(w),s=t.redSub(e).redISub(i).redMul(A),o=S.redMul(g.redSub(i)),u=S.redMul(A))}else g=e.redAdd(i),w=this.curve._mulC(this.z).redSqr(),A=g.redSub(w).redSub(w),s=this.curve._mulC(t.redISub(g)).redMul(A),o=this.curve._mulC(g).redMul(e.redISub(i)),u=g.redMul(A);return this.curve.point(s,o,u)};ke.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()};ke.prototype._extAdd=function(t){var e=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),i=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),s=this.t.redMul(this.curve.dd).redMul(t.t),o=this.z.redMul(t.z.redAdd(t.z)),u=i.redSub(e),g=o.redSub(s),w=o.redAdd(s),A=i.redAdd(e),S=u.redMul(g),x=w.redMul(A),N=u.redMul(A),R=g.redMul(w);return this.curve.point(S,x,R,N)};ke.prototype._projAdd=function(t){var e=this.z.redMul(t.z),i=e.redSqr(),s=this.x.redMul(t.x),o=this.y.redMul(t.y),u=this.curve.d.redMul(s).redMul(o),g=i.redSub(u),w=i.redAdd(u),A=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(s).redISub(o),S=e.redMul(g).redMul(A),x,N;return this.curve.twisted?(x=e.redMul(w).redMul(o.redSub(this.curve._mulA(s))),N=g.redMul(w)):(x=e.redMul(w).redMul(o.redSub(s)),N=this.curve._mulC(g).redMul(w)),this.curve.point(S,x,N)};ke.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)};ke.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)};ke.prototype.mulAdd=function(t,e,i){return this.curve._wnafMulAdd(1,[this,e],[t,i],2,!1)};ke.prototype.jmulAdd=function(t,e,i){return this.curve._wnafMulAdd(1,[this,e],[t,i],2,!0)};ke.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this};ke.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())};ke.prototype.getX=function(){return this.normalize(),this.x.fromRed()};ke.prototype.getY=function(){return this.normalize(),this.y.fromRed()};ke.prototype.eq=function(t){return this===t||this.getX().cmp(t.getX())===0&&this.getY().cmp(t.getY())===0};ke.prototype.eqXToP=function(t){var e=t.toRed(this.curve.red).redMul(this.z);if(this.x.cmp(e)===0)return!0;for(var i=t.clone(),s=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(e.redIAdd(s),this.x.cmp(e)===0)return!0}};ke.prototype.toP=ke.prototype.normalize;ke.prototype.mixedAdd=ke.prototype.add;(function(r){var t=r;t.base=yf,t.short=iw,t.mont=sw,t.edwards=hw})(f0);var _f={},Lc,ip;function fw(){return ip||(ip=1,Lc={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}),Lc}(function(r){var t=r,e=cg,i=f0,s=wi,o=s.assert;function u(A){A.type==="short"?this.curve=new i.short(A):A.type==="edwards"?this.curve=new i.edwards(A):this.curve=new i.mont(A),this.g=this.curve.g,this.n=this.curve.n,this.hash=A.hash,o(this.g.validate(),"Invalid curve"),o(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}t.PresetCurve=u;function g(A,S){Object.defineProperty(t,A,{configurable:!0,enumerable:!0,get:function(){var x=new u(S);return Object.defineProperty(t,A,{configurable:!0,enumerable:!0,value:x}),x}})}g("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:e.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),g("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:e.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),g("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:e.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),g("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:e.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),g("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:e.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),g("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:e.sha256,gRed:!1,g:["9"]}),g("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:e.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var w;try{w=fw()}catch{w=void 0}g("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:e.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",w]})})(_f);var cw=as,uw=wi,Ou=uw.assert;function xr(r,t){this.ec=r,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var dw=xr;xr.fromPublic=function(t,e,i){return e instanceof xr?e:new xr(t,{pub:e,pubEnc:i})};xr.fromPrivate=function(t,e,i){return e instanceof xr?e:new xr(t,{priv:e,privEnc:i})};xr.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}};xr.prototype.getPublic=function(t,e){return typeof t=="string"&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub};xr.prototype.getPrivate=function(t){return t==="hex"?this.priv.toString(16,2):this.priv};xr.prototype._importPrivate=function(t,e){this.priv=new cw(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)};xr.prototype._importPublic=function(t,e){if(t.x||t.y){this.ec.curve.type==="mont"?Ou(t.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&Ou(t.x&&t.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(t.x,t.y);return}this.pub=this.ec.curve.decodePoint(t,e)};xr.prototype.derive=function(t){return t.validate()||Ou(t.validate(),"public point not validated"),t.mul(this.priv).getX()};xr.prototype.sign=function(t,e,i){return this.ec.sign(t,this,e,i)};xr.prototype.verify=function(t,e){return this.ec.verify(t,e,this)};xr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var nf=as,u0=wi,lw=u0.assert;function Mf(r,t){if(r instanceof Mf)return r;this._importDER(r,t)||(lw(r.r&&r.s,"Signature without r or s"),this.r=new nf(r.r,16),this.s=new nf(r.s,16),r.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=r.recoveryParam)}var pw=Mf;function gw(){this.place=0}function $c(r,t){var e=r[t.place++];if(!(e&128))return e;var i=e&15;if(i===0||i>4||r[t.place]===0)return!1;for(var s=0,o=0,u=t.place;o<i;o++,u++)s<<=8,s|=r[u],s>>>=0;return s<=127?!1:(t.place=u,s)}function np(r){for(var t=0,e=r.length-1;!r[t]&&!(r[t+1]&128)&&t<e;)t++;return t===0?r:r.slice(t)}Mf.prototype._importDER=function(t,e){t=u0.toArray(t,e);var i=new gw;if(t[i.place++]!==48)return!1;var s=$c(t,i);if(s===!1||s+i.place!==t.length||t[i.place++]!==2)return!1;var o=$c(t,i);if(o===!1||t[i.place]&128)return!1;var u=t.slice(i.place,o+i.place);if(i.place+=o,t[i.place++]!==2)return!1;var g=$c(t,i);if(g===!1||t.length!==g+i.place||t[i.place]&128)return!1;var w=t.slice(i.place,g+i.place);if(u[0]===0)if(u[1]&128)u=u.slice(1);else return!1;if(w[0]===0)if(w[1]&128)w=w.slice(1);else return!1;return this.r=new nf(u),this.s=new nf(w),this.recoveryParam=null,!0};function jc(r,t){if(t<128){r.push(t);return}var e=1+(Math.log(t)/Math.LN2>>>3);for(r.push(e|128);--e;)r.push(t>>>(e<<3)&255);r.push(t)}Mf.prototype.toDER=function(t){var e=this.r.toArray(),i=this.s.toArray();for(e[0]&128&&(e=[0].concat(e)),i[0]&128&&(i=[0].concat(i)),e=np(e),i=np(i);!i[0]&&!(i[1]&128);)i=i.slice(1);var s=[2];jc(s,e.length),s=s.concat(e),s.push(2),jc(s,i.length);var o=s.concat(i),u=[48];return jc(u,o.length),u=u.concat(o),u0.encode(u,t)};var $s=as,Ag=M4,mw=wi,Hc=_f,vw=ug,_g=mw.assert,d0=dw,Ef=pw;function Fi(r){if(!(this instanceof Fi))return new Fi(r);typeof r=="string"&&(_g(Object.prototype.hasOwnProperty.call(Hc,r),"Unknown curve "+r),r=Hc[r]),r instanceof Hc.PresetCurve&&(r={curve:r}),this.curve=r.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=r.curve.g,this.g.precompute(r.curve.n.bitLength()+1),this.hash=r.hash||r.curve.hash}var bw=Fi;Fi.prototype.keyPair=function(t){return new d0(this,t)};Fi.prototype.keyFromPrivate=function(t,e){return d0.fromPrivate(this,t,e)};Fi.prototype.keyFromPublic=function(t,e){return d0.fromPublic(this,t,e)};Fi.prototype.genKeyPair=function(t){t||(t={});for(var e=new Ag({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||vw(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),s=this.n.sub(new $s(2));;){var o=new $s(e.generate(i));if(!(o.cmp(s)>0))return o.iaddn(1),this.keyFromPrivate(o)}};Fi.prototype._truncateToN=function(t,e){var i=t.byteLength()*8-this.n.bitLength();return i>0&&(t=t.ushrn(i)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t};Fi.prototype.sign=function(t,e,i,s){typeof i=="object"&&(s=i,i=null),s||(s={}),e=this.keyFromPrivate(e,i),t=this._truncateToN(new $s(t,16));for(var o=this.n.byteLength(),u=e.getPrivate().toArray("be",o),g=t.toArray("be",o),w=new Ag({hash:this.hash,entropy:u,nonce:g,pers:s.pers,persEnc:s.persEnc||"utf8"}),A=this.n.sub(new $s(1)),S=0;;S++){var x=s.k?s.k(S):new $s(w.generate(this.n.byteLength()));if(x=this._truncateToN(x,!0),!(x.cmpn(1)<=0||x.cmp(A)>=0)){var N=this.g.mul(x);if(!N.isInfinity()){var R=N.getX(),O=R.umod(this.n);if(O.cmpn(0)!==0){var z=x.invm(this.n).mul(O.mul(e.getPrivate()).iadd(t));if(z=z.umod(this.n),z.cmpn(0)!==0){var L=(N.getY().isOdd()?1:0)|(R.cmp(O)!==0?2:0);return s.canonical&&z.cmp(this.nh)>0&&(z=this.n.sub(z),L^=1),new Ef({r:O,s:z,recoveryParam:L})}}}}}};Fi.prototype.verify=function(t,e,i,s){t=this._truncateToN(new $s(t,16)),i=this.keyFromPublic(i,s),e=new Ef(e,"hex");var o=e.r,u=e.s;if(o.cmpn(1)<0||o.cmp(this.n)>=0||u.cmpn(1)<0||u.cmp(this.n)>=0)return!1;var g=u.invm(this.n),w=g.mul(t).umod(this.n),A=g.mul(o).umod(this.n),S;return this.curve._maxwellTrick?(S=this.g.jmulAdd(w,i.getPublic(),A),S.isInfinity()?!1:S.eqXToP(o)):(S=this.g.mulAdd(w,i.getPublic(),A),S.isInfinity()?!1:S.getX().umod(this.n).cmp(o)===0)};Fi.prototype.recoverPubKey=function(r,t,e,i){_g((3&e)===e,"The recovery param is more than two bits"),t=new Ef(t,i);var s=this.n,o=new $s(r),u=t.r,g=t.s,w=e&1,A=e>>1;if(u.cmp(this.curve.p.umod(this.curve.n))>=0&&A)throw new Error("Unable to find sencond key candinate");A?u=this.curve.pointFromX(u.add(this.curve.n),w):u=this.curve.pointFromX(u,w);var S=t.r.invm(s),x=s.sub(o).mul(S).umod(s),N=g.mul(S).umod(s);return this.g.mulAdd(x,u,N)};Fi.prototype.getKeyRecoveryParam=function(r,t,e,i){if(t=new Ef(t,i),t.recoveryParam!==null)return t.recoveryParam;for(var s=0;s<4;s++){var o;try{o=this.recoverPubKey(r,t,s)}catch{continue}if(o.eq(e))return s}throw new Error("Unable to find valid recovery factor")};var qa=wi,Mg=qa.assert,sp=qa.parseBytes,Do=qa.cachedProperty;function fr(r,t){this.eddsa=r,this._secret=sp(t.secret),r.isPoint(t.pub)?this._pub=t.pub:this._pubBytes=sp(t.pub)}fr.fromPublic=function(t,e){return e instanceof fr?e:new fr(t,{pub:e})};fr.fromSecret=function(t,e){return e instanceof fr?e:new fr(t,{secret:e})};fr.prototype.secret=function(){return this._secret};Do(fr,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())});Do(fr,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())});Do(fr,"privBytes",function(){var t=this.eddsa,e=this.hash(),i=t.encodingLength-1,s=e.slice(0,t.encodingLength);return s[0]&=248,s[i]&=127,s[i]|=64,s});Do(fr,"priv",function(){return this.eddsa.decodeInt(this.privBytes())});Do(fr,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()});Do(fr,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)});fr.prototype.sign=function(t){return Mg(this._secret,"KeyPair can only verify"),this.eddsa.sign(t,this)};fr.prototype.verify=function(t,e){return this.eddsa.verify(t,e,this)};fr.prototype.getSecret=function(t){return Mg(this._secret,"KeyPair is public only"),qa.encode(this.secret(),t)};fr.prototype.getPublic=function(t){return qa.encode(this.pubBytes(),t)};var yw=fr,ww=as,If=wi,op=If.assert,Sf=If.cachedProperty,Aw=If.parseBytes;function Js(r,t){this.eddsa=r,typeof t!="object"&&(t=Aw(t)),Array.isArray(t)&&(op(t.length===r.encodingLength*2,"Signature has invalid size"),t={R:t.slice(0,r.encodingLength),S:t.slice(r.encodingLength)}),op(t.R&&t.S,"Signature without R or S"),r.isPoint(t.R)&&(this._R=t.R),t.S instanceof ww&&(this._S=t.S),this._Rencoded=Array.isArray(t.R)?t.R:t.Rencoded,this._Sencoded=Array.isArray(t.S)?t.S:t.Sencoded}Sf(Js,"S",function(){return this.eddsa.decodeInt(this.Sencoded())});Sf(Js,"R",function(){return this.eddsa.decodePoint(this.Rencoded())});Sf(Js,"Rencoded",function(){return this.eddsa.encodePoint(this.R())});Sf(Js,"Sencoded",function(){return this.eddsa.encodeInt(this.S())});Js.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())};Js.prototype.toHex=function(){return If.encode(this.toBytes(),"hex").toUpperCase()};var _w=Js,Mw=cg,Ew=_f,xo=wi,Iw=xo.assert,Eg=xo.parseBytes,Ig=yw,ap=_w;function Zr(r){if(Iw(r==="ed25519","only tested with ed25519 so far"),!(this instanceof Zr))return new Zr(r);r=Ew[r].curve,this.curve=r,this.g=r.g,this.g.precompute(r.n.bitLength()+1),this.pointClass=r.point().constructor,this.encodingLength=Math.ceil(r.n.bitLength()/8),this.hash=Mw.sha512}var Sw=Zr;Zr.prototype.sign=function(t,e){t=Eg(t);var i=this.keyFromSecret(e),s=this.hashInt(i.messagePrefix(),t),o=this.g.mul(s),u=this.encodePoint(o),g=this.hashInt(u,i.pubBytes(),t).mul(i.priv()),w=s.add(g).umod(this.curve.n);return this.makeSignature({R:o,S:w,Rencoded:u})};Zr.prototype.verify=function(t,e,i){if(t=Eg(t),e=this.makeSignature(e),e.S().gte(e.eddsa.curve.n)||e.S().isNeg())return!1;var s=this.keyFromPublic(i),o=this.hashInt(e.Rencoded(),s.pubBytes(),t),u=this.g.mul(e.S()),g=e.R().add(s.pub().mul(o));return g.eq(u)};Zr.prototype.hashInt=function(){for(var t=this.hash(),e=0;e<arguments.length;e++)t.update(arguments[e]);return xo.intFromLE(t.digest()).umod(this.curve.n)};Zr.prototype.keyFromPublic=function(t){return Ig.fromPublic(this,t)};Zr.prototype.keyFromSecret=function(t){return Ig.fromSecret(this,t)};Zr.prototype.makeSignature=function(t){return t instanceof ap?t:new ap(this,t)};Zr.prototype.encodePoint=function(t){var e=t.getY().toArray("le",this.encodingLength);return e[this.encodingLength-1]|=t.getX().isOdd()?128:0,e};Zr.prototype.decodePoint=function(t){t=xo.parseBytes(t);var e=t.length-1,i=t.slice(0,e).concat(t[e]&-129),s=(t[e]&128)!==0,o=xo.intFromLE(i);return this.curve.pointFromY(o,s)};Zr.prototype.encodeInt=function(t){return t.toArray("le",this.encodingLength)};Zr.prototype.decodeInt=function(t){return xo.intFromLE(t)};Zr.prototype.isPoint=function(t){return t instanceof this.pointClass};(function(r){var t=r;t.version=Z4.version,t.utils=wi,t.rand=ug,t.curve=f0,t.curves=_f,t.ec=bw,t.eddsa=Sw})(bg);function hp(r,t=[]){const e=[];return Object.keys(r).forEach(i=>{if(t.length&&!t.includes(i))return;const s=r[i];e.push(...s.accounts)}),e}var Sg=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function xw(r){var t=r.default;if(typeof t=="function"){var e=function(){return t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var s=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:function(){return r[i]}})}),e}var Pw={exports:{}};/**
* [js-sha3]{@link https://github.com/emn178/js-sha3}
*
* @version 0.8.0
* @author Chen, Yi-Cyuan [emn178@gmail.com]
* @copyright Chen, Yi-Cyuan 2015-2018
* @license MIT
*/(function(r){(function(){var t="input is invalid type",e="finalize already called",i=typeof window=="object",s=i?window:{};s.JS_SHA3_NO_WINDOW&&(i=!1);var o=!i&&typeof self=="object",u=!s.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;u?s=Sg:o&&(s=self);var g=!s.JS_SHA3_NO_COMMON_JS&&!0&&r.exports,w=!s.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",A="0123456789abcdef".split(""),S=[31,7936,2031616,520093696],x=[4,1024,262144,67108864],N=[1,256,65536,16777216],R=[6,1536,393216,100663296],O=[0,8,16,24],z=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],L=[224,256,384,512],H=[128,256],rt=["hex","buffer","arrayBuffer","array","digest"],ht={128:168,256:136};(s.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(m){return Object.prototype.toString.call(m)==="[object Array]"}),w&&(s.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(m){return typeof m=="object"&&m.buffer&&m.buffer.constructor===ArrayBuffer});for(var Z=function(m,D,q){return function(U){return new M(m,D,m).update(U)[q]()}},et=function(m,D,q){return function(U,V){return new M(m,D,V).update(U)[q]()}},at=function(m,D,q){return function(U,V,Q,Y){return f["cshake"+m].update(U,V,Q,Y)[q]()}},ft=function(m,D,q){return function(U,V,Q,Y){return f["kmac"+m].update(U,V,Q,Y)[q]()}},ct=function(m,D,q,U){for(var V=0;V<rt.length;++V){var Q=rt[V];m[Q]=D(q,U,Q)}return m},mt=function(m,D){var q=Z(m,D,"hex");return q.create=function(){return new M(m,D,m)},q.update=function(U){return q.create().update(U)},ct(q,Z,m,D)},se=function(m,D){var q=et(m,D,"hex");return q.create=function(U){return new M(m,D,U)},q.update=function(U,V){return q.create(V).update(U)},ct(q,et,m,D)},T=function(m,D){var q=ht[m],U=at(m,D,"hex");return U.create=function(V,Q,Y){return!Q&&!Y?f["shake"+m].create(V):new M(m,D,V).bytepad([Q,Y],q)},U.update=function(V,Q,Y,X){return U.create(Q,Y,X).update(V)},ct(U,at,m,D)},y=function(m,D){var q=ht[m],U=ft(m,D,"hex");return U.create=function(V,Q,Y){return new J(m,D,Q).bytepad(["KMAC",Y],q).bytepad([V],q)},U.update=function(V,Q,Y,X){return U.create(V,Y,X).update(Q)},ct(U,ft,m,D)},a=[{name:"keccak",padding:N,bits:L,createMethod:mt},{name:"sha3",padding:R,bits:L,createMethod:mt},{name:"shake",padding:S,bits:H,createMethod:se},{name:"cshake",padding:x,bits:H,createMethod:T},{name:"kmac",padding:x,bits:H,createMethod:y}],f={},d=[],v=0;v<a.length;++v)for(var b=a[v],I=b.bits,_=0;_<I.length;++_){var l=b.name+"_"+I[_];if(d.push(l),f[l]=b.createMethod(I[_],b.padding),b.name!=="sha3"){var c=b.name+I[_];d.push(c),f[c]=f[l]}}function M(m,D,q){this.blocks=[],this.s=[],this.padding=D,this.outputBits=q,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(m<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=q>>5,this.extraBytes=(q&31)>>3;for(var U=0;U<50;++U)this.s[U]=0}M.prototype.update=function(m){if(this.finalized)throw new Error(e);var D,q=typeof m;if(q!=="string"){if(q==="object"){if(m===null)throw new Error(t);if(w&&m.constructor===ArrayBuffer)m=new Uint8Array(m);else if(!Array.isArray(m)&&(!w||!ArrayBuffer.isView(m)))throw new Error(t)}else throw new Error(t);D=!0}for(var U=this.blocks,V=this.byteCount,Q=m.length,Y=this.blockCount,X=0,st=this.s,G,lt;X<Q;){if(this.reset)for(this.reset=!1,U[0]=this.block,G=1;G<Y+1;++G)U[G]=0;if(D)for(G=this.start;X<Q&&G<V;++X)U[G>>2]|=m[X]<<O[G++&3];else for(G=this.start;X<Q&&G<V;++X)lt=m.charCodeAt(X),lt<128?U[G>>2]|=lt<<O[G++&3]:lt<2048?(U[G>>2]|=(192|lt>>6)<<O[G++&3],U[G>>2]|=(128|lt&63)<<O[G++&3]):lt<55296||lt>=57344?(U[G>>2]|=(224|lt>>12)<<O[G++&3],U[G>>2]|=(128|lt>>6&63)<<O[G++&3],U[G>>2]|=(128|lt&63)<<O[G++&3]):(lt=65536+((lt&1023)<<10|m.charCodeAt(++X)&1023),U[G>>2]|=(240|lt>>18)<<O[G++&3],U[G>>2]|=(128|lt>>12&63)<<O[G++&3],U[G>>2]|=(128|lt>>6&63)<<O[G++&3],U[G>>2]|=(128|lt&63)<<O[G++&3]);if(this.lastByteIndex=G,G>=V){for(this.start=G-V,this.block=U[Y],G=0;G<Y;++G)st[G]^=U[G];K(st),this.reset=!0}else this.start=G}return this},M.prototype.encode=function(m,D){var q=m&255,U=1,V=[q];for(m=m>>8,q=m&255;q>0;)V.unshift(q),m=m>>8,q=m&255,++U;return D?V.push(U):V.unshift(U),this.update(V),V.length},M.prototype.encodeString=function(m){var D,q=typeof m;if(q!=="string"){if(q==="object"){if(m===null)throw new Error(t);if(w&&m.constructor===ArrayBuffer)m=new Uint8Array(m);else if(!Array.isArray(m)&&(!w||!ArrayBuffer.isView(m)))throw new Error(t)}else throw new Error(t);D=!0}var U=0,V=m.length;if(D)U=V;else for(var Q=0;Q<m.length;++Q){var Y=m.charCodeAt(Q);Y<128?U+=1:Y<2048?U+=2:Y<55296||Y>=57344?U+=3:(Y=65536+((Y&1023)<<10|m.charCodeAt(++Q)&1023),U+=4)}return U+=this.encode(U*8),this.update(m),U},M.prototype.bytepad=function(m,D){for(var q=this.encode(D),U=0;U<m.length;++U)q+=this.encodeString(m[U]);var V=D-q%D,Q=[];return Q.length=V,this.update(Q),this},M.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var m=this.blocks,D=this.lastByteIndex,q=this.blockCount,U=this.s;if(m[D>>2]|=this.padding[D&3],this.lastByteIndex===this.byteCount)for(m[0]=m[q],D=1;D<q+1;++D)m[D]=0;for(m[q-1]|=2147483648,D=0;D<q;++D)U[D]^=m[D];K(U)}},M.prototype.toString=M.prototype.hex=function(){this.finalize();for(var m=this.blockCount,D=this.s,q=this.outputBlocks,U=this.extraBytes,V=0,Q=0,Y="",X;Q<q;){for(V=0;V<m&&Q<q;++V,++Q)X=D[V],Y+=A[X>>4&15]+A[X&15]+A[X>>12&15]+A[X>>8&15]+A[X>>20&15]+A[X>>16&15]+A[X>>28&15]+A[X>>24&15];Q%m===0&&(K(D),V=0)}return U&&(X=D[V],Y+=A[X>>4&15]+A[X&15],U>1&&(Y+=A[X>>12&15]+A[X>>8&15]),U>2&&(Y+=A[X>>20&15]+A[X>>16&15])),Y},M.prototype.arrayBuffer=function(){this.finalize();var m=this.blockCount,D=this.s,q=this.outputBlocks,U=this.extraBytes,V=0,Q=0,Y=this.outputBits>>3,X;U?X=new ArrayBuffer(q+1<<2):X=new ArrayBuffer(Y);for(var st=new Uint32Array(X);Q<q;){for(V=0;V<m&&Q<q;++V,++Q)st[Q]=D[V];Q%m===0&&K(D)}return U&&(st[V]=D[V],X=X.slice(0,Y)),X},M.prototype.buffer=M.prototype.arrayBuffer,M.prototype.digest=M.prototype.array=function(){this.finalize();for(var m=this.blockCount,D=this.s,q=this.outputBlocks,U=this.extraBytes,V=0,Q=0,Y=[],X,st;Q<q;){for(V=0;V<m&&Q<q;++V,++Q)X=Q<<2,st=D[V],Y[X]=st&255,Y[X+1]=st>>8&255,Y[X+2]=st>>16&255,Y[X+3]=st>>24&255;Q%m===0&&K(D)}return U&&(X=Q<<2,st=D[V],Y[X]=st&255,U>1&&(Y[X+1]=st>>8&255),U>2&&(Y[X+2]=st>>16&255)),Y};function J(m,D,q){M.call(this,m,D,q)}J.prototype=new M,J.prototype.finalize=function(){return this.encode(this.outputBits,!0),M.prototype.finalize.call(this)};var K=function(m){var D,q,U,V,Q,Y,X,st,G,lt,At,Bt,de,_t,Tt,Zt,pt,Dt,ge,gt,Ht,ne,dt,kt,ae,vt,Ut,he,bt,zt,fe,yt,Kt,me,Mt,$t,le,Et,Qt,ve,It,jt,be,St,Jt,ce,xt,Ft,ye,Pt,Vt,we,Nt,Gt,Ae,Rt,Lt,Le,$e,je,He,Ke,Qe;for(U=0;U<48;U+=2)V=m[0]^m[10]^m[20]^m[30]^m[40],Q=m[1]^m[11]^m[21]^m[31]^m[41],Y=m[2]^m[12]^m[22]^m[32]^m[42],X=m[3]^m[13]^m[23]^m[33]^m[43],st=m[4]^m[14]^m[24]^m[34]^m[44],G=m[5]^m[15]^m[25]^m[35]^m[45],lt=m[6]^m[16]^m[26]^m[36]^m[46],At=m[7]^m[17]^m[27]^m[37]^m[47],Bt=m[8]^m[18]^m[28]^m[38]^m[48],de=m[9]^m[19]^m[29]^m[39]^m[49],D=Bt^(Y<<1|X>>>31),q=de^(X<<1|Y>>>31),m[0]^=D,m[1]^=q,m[10]^=D,m[11]^=q,m[20]^=D,m[21]^=q,m[30]^=D,m[31]^=q,m[40]^=D,m[41]^=q,D=V^(st<<1|G>>>31),q=Q^(G<<1|st>>>31),m[2]^=D,m[3]^=q,m[12]^=D,m[13]^=q,m[22]^=D,m[23]^=q,m[32]^=D,m[33]^=q,m[42]^=D,m[43]^=q,D=Y^(lt<<1|At>>>31),q=X^(At<<1|lt>>>31),m[4]^=D,m[5]^=q,m[14]^=D,m[15]^=q,m[24]^=D,m[25]^=q,m[34]^=D,m[35]^=q,m[44]^=D,m[45]^=q,D=st^(Bt<<1|de>>>31),q=G^(de<<1|Bt>>>31),m[6]^=D,m[7]^=q,m[16]^=D,m[17]^=q,m[26]^=D,m[27]^=q,m[36]^=D,m[37]^=q,m[46]^=D,m[47]^=q,D=lt^(V<<1|Q>>>31),q=At^(Q<<1|V>>>31),m[8]^=D,m[9]^=q,m[18]^=D,m[19]^=q,m[28]^=D,m[29]^=q,m[38]^=D,m[39]^=q,m[48]^=D,m[49]^=q,_t=m[0],Tt=m[1],ce=m[11]<<4|m[10]>>>28,xt=m[10]<<4|m[11]>>>28,he=m[20]<<3|m[21]>>>29,bt=m[21]<<3|m[20]>>>29,je=m[31]<<9|m[30]>>>23,He=m[30]<<9|m[31]>>>23,jt=m[40]<<18|m[41]>>>14,be=m[41]<<18|m[40]>>>14,me=m[2]<<1|m[3]>>>31,Mt=m[3]<<1|m[2]>>>31,Zt=m[13]<<12|m[12]>>>20,pt=m[12]<<12|m[13]>>>20,Ft=m[22]<<10|m[23]>>>22,ye=m[23]<<10|m[22]>>>22,zt=m[33]<<13|m[32]>>>19,fe=m[32]<<13|m[33]>>>19,Ke=m[42]<<2|m[43]>>>30,Qe=m[43]<<2|m[42]>>>30,Gt=m[5]<<30|m[4]>>>2,Ae=m[4]<<30|m[5]>>>2,$t=m[14]<<6|m[15]>>>26,le=m[15]<<6|m[14]>>>26,Dt=m[25]<<11|m[24]>>>21,ge=m[24]<<11|m[25]>>>21,Pt=m[34]<<15|m[35]>>>17,Vt=m[35]<<15|m[34]>>>17,yt=m[45]<<29|m[44]>>>3,Kt=m[44]<<29|m[45]>>>3,kt=m[6]<<28|m[7]>>>4,ae=m[7]<<28|m[6]>>>4,Rt=m[17]<<23|m[16]>>>9,Lt=m[16]<<23|m[17]>>>9,Et=m[26]<<25|m[27]>>>7,Qt=m[27]<<25|m[26]>>>7,gt=m[36]<<21|m[37]>>>11,Ht=m[37]<<21|m[36]>>>11,we=m[47]<<24|m[46]>>>8,Nt=m[46]<<24|m[47]>>>8,St=m[8]<<27|m[9]>>>5,Jt=m[9]<<27|m[8]>>>5,vt=m[18]<<20|m[19]>>>12,Ut=m[19]<<20|m[18]>>>12,Le=m[29]<<7|m[28]>>>25,$e=m[28]<<7|m[29]>>>25,ve=m[38]<<8|m[39]>>>24,It=m[39]<<8|m[38]>>>24,ne=m[48]<<14|m[49]>>>18,dt=m[49]<<14|m[48]>>>18,m[0]=_t^~Zt&Dt,m[1]=Tt^~pt&ge,m[10]=kt^~vt&he,m[11]=ae^~Ut&bt,m[20]=me^~$t&Et,m[21]=Mt^~le&Qt,m[30]=St^~ce&Ft,m[31]=Jt^~xt&ye,m[40]=Gt^~Rt&Le,m[41]=Ae^~Lt&$e,m[2]=Zt^~Dt&gt,m[3]=pt^~ge&Ht,m[12]=vt^~he&zt,m[13]=Ut^~bt&fe,m[22]=$t^~Et&ve,m[23]=le^~Qt&It,m[32]=ce^~Ft&Pt,m[33]=xt^~ye&Vt,m[42]=Rt^~Le&je,m[43]=Lt^~$e&He,m[4]=Dt^~gt&ne,m[5]=ge^~Ht&dt,m[14]=he^~zt&yt,m[15]=bt^~fe&Kt,m[24]=Et^~ve&jt,m[25]=Qt^~It&be,m[34]=Ft^~Pt&we,m[35]=ye^~Vt&Nt,m[44]=Le^~je&Ke,m[45]=$e^~He&Qe,m[6]=gt^~ne&_t,m[7]=Ht^~dt&Tt,m[16]=zt^~yt&kt,m[17]=fe^~Kt&ae,m[26]=ve^~jt&me,m[27]=It^~be&Mt,m[36]=Pt^~we&St,m[37]=Vt^~Nt&Jt,m[46]=je^~Ke&Gt,m[47]=He^~Qe&Ae,m[8]=ne^~_t&Zt,m[9]=dt^~Tt&pt,m[18]=yt^~kt&vt,m[19]=Kt^~ae&Ut,m[28]=jt^~me&$t,m[29]=be^~Mt&le,m[38]=we^~St&ce,m[39]=Nt^~Jt&xt,m[48]=Ke^~Gt&Rt,m[49]=Qe^~Ae&Lt,m[0]^=z[U],m[1]^=z[U+1]};if(g)r.exports=f;else for(v=0;v<d.length;++v)s[d[v]]=f[d[v]]})()})(Pw);const Nw="logger/5.7.0";let fp=!1,cp=!1;const jh={debug:1,default:2,info:2,warning:3,error:4,off:5};let up=jh.default,Kc=null;function Rw(){try{const r=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test".normalize(t)!=="test")throw new Error("bad normalize")}catch{r.push(t)}}),r.length)throw new Error("missing "+r.join(", "));if("é".normalize("NFD")!=="é")throw new Error("broken implementation")}catch(r){return r.message}return null}const dp=Rw();var Bu;(function(r){r.DEBUG="DEBUG",r.INFO="INFO",r.WARNING="WARNING",r.ERROR="ERROR",r.OFF="OFF"})(Bu||(Bu={}));var Zi;(function(r){r.UNKNOWN_ERROR="UNKNOWN_ERROR",r.NOT_IMPLEMENTED="NOT_IMPLEMENTED",r.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",r.NETWORK_ERROR="NETWORK_ERROR",r.SERVER_ERROR="SERVER_ERROR",r.TIMEOUT="TIMEOUT",r.BUFFER_OVERRUN="BUFFER_OVERRUN",r.NUMERIC_FAULT="NUMERIC_FAULT",r.MISSING_NEW="MISSING_NEW",r.INVALID_ARGUMENT="INVALID_ARGUMENT",r.MISSING_ARGUMENT="MISSING_ARGUMENT",r.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",r.CALL_EXCEPTION="CALL_EXCEPTION",r.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",r.NONCE_EXPIRED="NONCE_EXPIRED",r.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",r.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",r.TRANSACTION_REPLACED="TRANSACTION_REPLACED",r.ACTION_REJECTED="ACTION_REJECTED"})(Zi||(Zi={}));const lp="0123456789abcdef";let Xr=class nr{constructor(t){Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}_log(t,e){const i=t.toLowerCase();jh[i]==null&&this.throwArgumentError("invalid log level name","logLevel",t),!(up>jh[i])&&console.log.apply(console,e)}debug(...t){this._log(nr.levels.DEBUG,t)}info(...t){this._log(nr.levels.INFO,t)}warn(...t){this._log(nr.levels.WARNING,t)}makeError(t,e,i){if(cp)return this.makeError("censored error",e,{});e||(e=nr.errors.UNKNOWN_ERROR),i||(i={});const s=[];Object.keys(i).forEach(w=>{const A=i[w];try{if(A instanceof Uint8Array){let S="";for(let x=0;x<A.length;x++)S+=lp[A[x]>>4],S+=lp[A[x]&15];s.push(w+"=Uint8Array(0x"+S+")")}else s.push(w+"="+JSON.stringify(A))}catch{s.push(w+"="+JSON.stringify(i[w].toString()))}}),s.push(`code=${e}`),s.push(`version=${this.version}`);const o=t;let u="";switch(e){case Zi.NUMERIC_FAULT:{u="NUMERIC_FAULT";const w=t;switch(w){case"overflow":case"underflow":case"division-by-zero":u+="-"+w;break;case"negative-power":case"negative-width":u+="-unsupported";break;case"unbound-bitwise-result":u+="-unbound-result";break}break}case Zi.CALL_EXCEPTION:case Zi.INSUFFICIENT_FUNDS:case Zi.MISSING_NEW:case Zi.NONCE_EXPIRED:case Zi.REPLACEMENT_UNDERPRICED:case Zi.TRANSACTION_REPLACED:case Zi.UNPREDICTABLE_GAS_LIMIT:u=e;break}u&&(t+=" [ See: https://links.ethers.org/v5-errors-"+u+" ]"),s.length&&(t+=" ("+s.join(", ")+")");const g=new Error(t);return g.reason=o,g.code=e,Object.keys(i).forEach(function(w){g[w]=i[w]}),g}throwError(t,e,i){throw this.makeError(t,e,i)}throwArgumentError(t,e,i){return this.throwError(t,nr.errors.INVALID_ARGUMENT,{argument:e,value:i})}assert(t,e,i,s){t||this.throwError(e,i,s)}assertArgument(t,e,i,s){t||this.throwArgumentError(e,i,s)}checkNormalize(t){dp&&this.throwError("platform missing String.prototype.normalize",nr.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:dp})}checkSafeUint53(t,e){typeof t=="number"&&(e==null&&(e="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(e,nr.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(e,nr.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}checkArgumentCount(t,e,i){i?i=": "+i:i="",t<e&&this.throwError("missing argument"+i,nr.errors.MISSING_ARGUMENT,{count:t,expectedCount:e}),t>e&&this.throwError("too many arguments"+i,nr.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:e})}checkNew(t,e){(t===Object||t==null)&&this.throwError("missing new",nr.errors.MISSING_NEW,{name:e.name})}checkAbstract(t,e){t===e?this.throwError("cannot instantiate abstract class "+JSON.stringify(e.name)+" directly; use a sub-class",nr.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):(t===Object||t==null)&&this.throwError("missing new",nr.errors.MISSING_NEW,{name:e.name})}static globalLogger(){return Kc||(Kc=new nr(Nw)),Kc}static setCensorship(t,e){if(!t&&e&&this.globalLogger().throwError("cannot permanently disable censorship",nr.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),fp){if(!t)return;this.globalLogger().throwError("error censorship permanent",nr.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}cp=!!t,fp=!!e}static setLogLevel(t){const e=jh[t.toLowerCase()];if(e==null){nr.globalLogger().warn("invalid log level - "+t);return}up=e}static from(t){return new nr(t)}};Xr.errors=Zi,Xr.levels=Bu;const Cw="bytes/5.7.0",Is=new Xr(Cw);function xg(r){return!!r.toHexString}function Hh(r){return r.slice||(r.slice=function(){const t=Array.prototype.slice.call(arguments);return Hh(new Uint8Array(Array.prototype.slice.apply(r,t)))}),r}function pp(r){return typeof r=="number"&&r==r&&r%1===0}function Da(r){if(r==null)return!1;if(r.constructor===Uint8Array)return!0;if(typeof r=="string"||!pp(r.length)||r.length<0)return!1;for(let t=0;t<r.length;t++){const e=r[t];if(!pp(e)||e<0||e>=256)return!1}return!0}function Pg(r,t){if(t||(t={}),typeof r=="number"){Is.checkSafeUint53(r,"invalid arrayify value");const e=[];for(;r;)e.unshift(r&255),r=parseInt(String(r/256));return e.length===0&&e.push(0),Hh(new Uint8Array(e))}if(t.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),xg(r)&&(r=r.toHexString()),Po(r)){let e=r.substring(2);e.length%2&&(t.hexPad==="left"?e="0"+e:t.hexPad==="right"?e+="0":Is.throwArgumentError("hex data is odd-length","value",r));const i=[];for(let s=0;s<e.length;s+=2)i.push(parseInt(e.substring(s,s+2),16));return Hh(new Uint8Array(i))}return Da(r)?Hh(new Uint8Array(r)):Is.throwArgumentError("invalid arrayify value","value",r)}function Po(r,t){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||t)}const Qc="0123456789abcdef";function Ng(r,t){if(t||(t={}),typeof r=="number"){Is.checkSafeUint53(r,"invalid hexlify value");let e="";for(;r;)e=Qc[r&15]+e,r=Math.floor(r/16);return e.length?(e.length%2&&(e="0"+e),"0x"+e):"0x00"}if(typeof r=="bigint")return r=r.toString(16),r.length%2?"0x0"+r:"0x"+r;if(t.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),xg(r))return r.toHexString();if(Po(r))return r.length%2&&(t.hexPad==="left"?r="0x0"+r.substring(2):t.hexPad==="right"?r+="0":Is.throwArgumentError("hex data is odd-length","value",r)),r.toLowerCase();if(Da(r)){let e="0x";for(let i=0;i<r.length;i++){let s=r[i];e+=Qc[(s&240)>>4]+Qc[s&15]}return e}return Is.throwArgumentError("invalid hexlify value","value",r)}function sf(r,t){for(typeof r!="string"?r=Ng(r):Po(r)||Is.throwArgumentError("invalid hex string","value",r),r.length>2*t+2&&Is.throwArgumentError("value out of range","value",arguments[1]);r.length<2*t+2;)r="0x0"+r.substring(2);return r}var Rg={exports:{}},Ow={},Bw=Object.freeze({__proto__:null,default:Ow}),Tw=xw(Bw);(function(r){(function(t,e){function i(a,f){if(!a)throw new Error(f||"Assertion failed")}function s(a,f){a.super_=f;var d=function(){};d.prototype=f.prototype,a.prototype=new d,a.prototype.constructor=a}function o(a,f,d){if(o.isBN(a))return a;this.negative=0,this.words=null,this.length=0,this.red=null,a!==null&&((f==="le"||f==="be")&&(d=f,f=10),this._init(a||0,f||10,d||"be"))}typeof t=="object"?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=Tw.Buffer}catch{}o.isBN=function(a){return a instanceof o?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===o.wordSize&&Array.isArray(a.words)},o.max=function(a,f){return a.cmp(f)>0?a:f},o.min=function(a,f){return a.cmp(f)<0?a:f},o.prototype._init=function(a,f,d){if(typeof a=="number")return this._initNumber(a,f,d);if(typeof a=="object")return this._initArray(a,f,d);f==="hex"&&(f=16),i(f===(f|0)&&f>=2&&f<=36),a=a.toString().replace(/\s+/g,"");var v=0;a[0]==="-"&&(v++,this.negative=1),v<a.length&&(f===16?this._parseHex(a,v,d):(this._parseBase(a,f,v),d==="le"&&this._initArray(this.toArray(),f,d)))},o.prototype._initNumber=function(a,f,d){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(i(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),d==="le"&&this._initArray(this.toArray(),f,d)},o.prototype._initArray=function(a,f,d){if(i(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var b,I,_=0;if(d==="be")for(v=a.length-1,b=0;v>=0;v-=3)I=a[v]|a[v-1]<<8|a[v-2]<<16,this.words[b]|=I<<_&67108863,this.words[b+1]=I>>>26-_&67108863,_+=24,_>=26&&(_-=26,b++);else if(d==="le")for(v=0,b=0;v<a.length;v+=3)I=a[v]|a[v+1]<<8|a[v+2]<<16,this.words[b]|=I<<_&67108863,this.words[b+1]=I>>>26-_&67108863,_+=24,_>=26&&(_-=26,b++);return this._strip()};function g(a,f){var d=a.charCodeAt(f);if(d>=48&&d<=57)return d-48;if(d>=65&&d<=70)return d-55;if(d>=97&&d<=102)return d-87;i(!1,"Invalid character in "+a)}function w(a,f,d){var v=g(a,d);return d-1>=f&&(v|=g(a,d-1)<<4),v}o.prototype._parseHex=function(a,f,d){this.length=Math.ceil((a.length-f)/6),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var b=0,I=0,_;if(d==="be")for(v=a.length-1;v>=f;v-=2)_=w(a,f,v)<<b,this.words[I]|=_&67108863,b>=18?(b-=18,I+=1,this.words[I]|=_>>>26):b+=8;else{var l=a.length-f;for(v=l%2===0?f+1:f;v<a.length;v+=2)_=w(a,f,v)<<b,this.words[I]|=_&67108863,b>=18?(b-=18,I+=1,this.words[I]|=_>>>26):b+=8}this._strip()};function A(a,f,d,v){for(var b=0,I=0,_=Math.min(a.length,d),l=f;l<_;l++){var c=a.charCodeAt(l)-48;b*=v,c>=49?I=c-49+10:c>=17?I=c-17+10:I=c,i(c>=0&&I<v,"Invalid character"),b+=I}return b}o.prototype._parseBase=function(a,f,d){this.words=[0],this.length=1;for(var v=0,b=1;b<=67108863;b*=f)v++;v--,b=b/f|0;for(var I=a.length-d,_=I%v,l=Math.min(I,I-_)+d,c=0,M=d;M<l;M+=v)c=A(a,M,M+v,f),this.imuln(b),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(_!==0){var J=1;for(c=A(a,M,a.length,f),M=0;M<_;M++)J*=f;this.imuln(J),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},o.prototype.copy=function(a){a.words=new Array(this.length);for(var f=0;f<this.length;f++)a.words[f]=this.words[f];a.length=this.length,a.negative=this.negative,a.red=this.red};function S(a,f){a.words=f.words,a.length=f.length,a.negative=f.negative,a.red=f.red}if(o.prototype._move=function(a){S(a,this)},o.prototype.clone=function(){var a=new o(null);return this.copy(a),a},o.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=x}catch{o.prototype.inspect=x}else o.prototype.inspect=x;function x(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var N=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],R=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],O=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(a,f){a=a||10,f=f|0||1;var d;if(a===16||a==="hex"){d="";for(var v=0,b=0,I=0;I<this.length;I++){var _=this.words[I],l=((_<<v|b)&16777215).toString(16);b=_>>>24-v&16777215,v+=2,v>=26&&(v-=26,I--),b!==0||I!==this.length-1?d=N[6-l.length]+l+d:d=l+d}for(b!==0&&(d=b.toString(16)+d);d.length%f!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}if(a===(a|0)&&a>=2&&a<=36){var c=R[a],M=O[a];d="";var J=this.clone();for(J.negative=0;!J.isZero();){var K=J.modrn(M).toString(a);J=J.idivn(M),J.isZero()?d=K+d:d=N[c-K.length]+K+d}for(this.isZero()&&(d="0"+d);d.length%f!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}i(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},o.prototype.toJSON=function(){return this.toString(16,2)},u&&(o.prototype.toBuffer=function(a,f){return this.toArrayLike(u,a,f)}),o.prototype.toArray=function(a,f){return this.toArrayLike(Array,a,f)};var z=function(a,f){return a.allocUnsafe?a.allocUnsafe(f):new a(f)};o.prototype.toArrayLike=function(a,f,d){this._strip();var v=this.byteLength(),b=d||Math.max(1,v);i(v<=b,"byte array longer than desired length"),i(b>0,"Requested array length <= 0");var I=z(a,b),_=f==="le"?"LE":"BE";return this["_toArrayLike"+_](I,v),I},o.prototype._toArrayLikeLE=function(a,f){for(var d=0,v=0,b=0,I=0;b<this.length;b++){var _=this.words[b]<<I|v;a[d++]=_&255,d<a.length&&(a[d++]=_>>8&255),d<a.length&&(a[d++]=_>>16&255),I===6?(d<a.length&&(a[d++]=_>>24&255),v=0,I=0):(v=_>>>24,I+=2)}if(d<a.length)for(a[d++]=v;d<a.length;)a[d++]=0},o.prototype._toArrayLikeBE=function(a,f){for(var d=a.length-1,v=0,b=0,I=0;b<this.length;b++){var _=this.words[b]<<I|v;a[d--]=_&255,d>=0&&(a[d--]=_>>8&255),d>=0&&(a[d--]=_>>16&255),I===6?(d>=0&&(a[d--]=_>>24&255),v=0,I=0):(v=_>>>24,I+=2)}if(d>=0)for(a[d--]=v;d>=0;)a[d--]=0},Math.clz32?o.prototype._countBits=function(a){return 32-Math.clz32(a)}:o.prototype._countBits=function(a){var f=a,d=0;return f>=4096&&(d+=13,f>>>=13),f>=64&&(d+=7,f>>>=7),f>=8&&(d+=4,f>>>=4),f>=2&&(d+=2,f>>>=2),d+f},o.prototype._zeroBits=function(a){if(a===0)return 26;var f=a,d=0;return f&8191||(d+=13,f>>>=13),f&127||(d+=7,f>>>=7),f&15||(d+=4,f>>>=4),f&3||(d+=2,f>>>=2),f&1||d++,d},o.prototype.bitLength=function(){var a=this.words[this.length-1],f=this._countBits(a);return(this.length-1)*26+f};function L(a){for(var f=new Array(a.bitLength()),d=0;d<f.length;d++){var v=d/26|0,b=d%26;f[d]=a.words[v]>>>b&1}return f}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,f=0;f<this.length;f++){var d=this._zeroBits(this.words[f]);if(a+=d,d!==26)break}return a},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},o.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var f=0;f<a.length;f++)this.words[f]=this.words[f]|a.words[f];return this._strip()},o.prototype.ior=function(a){return i((this.negative|a.negative)===0),this.iuor(a)},o.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},o.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},o.prototype.iuand=function(a){var f;this.length>a.length?f=a:f=this;for(var d=0;d<f.length;d++)this.words[d]=this.words[d]&a.words[d];return this.length=f.length,this._strip()},o.prototype.iand=function(a){return i((this.negative|a.negative)===0),this.iuand(a)},o.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},o.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},o.prototype.iuxor=function(a){var f,d;this.length>a.length?(f=this,d=a):(f=a,d=this);for(var v=0;v<d.length;v++)this.words[v]=f.words[v]^d.words[v];if(this!==f)for(;v<f.length;v++)this.words[v]=f.words[v];return this.length=f.length,this._strip()},o.prototype.ixor=function(a){return i((this.negative|a.negative)===0),this.iuxor(a)},o.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},o.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},o.prototype.inotn=function(a){i(typeof a=="number"&&a>=0);var f=Math.ceil(a/26)|0,d=a%26;this._expand(f),d>0&&f--;for(var v=0;v<f;v++)this.words[v]=~this.words[v]&67108863;return d>0&&(this.words[v]=~this.words[v]&67108863>>26-d),this._strip()},o.prototype.notn=function(a){return this.clone().inotn(a)},o.prototype.setn=function(a,f){i(typeof a=="number"&&a>=0);var d=a/26|0,v=a%26;return this._expand(d+1),f?this.words[d]=this.words[d]|1<<v:this.words[d]=this.words[d]&~(1<<v),this._strip()},o.prototype.iadd=function(a){var f;if(this.negative!==0&&a.negative===0)return this.negative=0,f=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,f=this.isub(a),a.negative=1,f._normSign();var d,v;this.length>a.length?(d=this,v=a):(d=a,v=this);for(var b=0,I=0;I<v.length;I++)f=(d.words[I]|0)+(v.words[I]|0)+b,this.words[I]=f&67108863,b=f>>>26;for(;b!==0&&I<d.length;I++)f=(d.words[I]|0)+b,this.words[I]=f&67108863,b=f>>>26;if(this.length=d.length,b!==0)this.words[this.length]=b,this.length++;else if(d!==this)for(;I<d.length;I++)this.words[I]=d.words[I];return this},o.prototype.add=function(a){var f;return a.negative!==0&&this.negative===0?(a.negative=0,f=this.sub(a),a.negative^=1,f):a.negative===0&&this.negative!==0?(this.negative=0,f=a.sub(this),this.negative=1,f):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},o.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var f=this.iadd(a);return a.negative=1,f._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var d=this.cmp(a);if(d===0)return this.negative=0,this.length=1,this.words[0]=0,this;var v,b;d>0?(v=this,b=a):(v=a,b=this);for(var I=0,_=0;_<b.length;_++)f=(v.words[_]|0)-(b.words[_]|0)+I,I=f>>26,this.words[_]=f&67108863;for(;I!==0&&_<v.length;_++)f=(v.words[_]|0)+I,I=f>>26,this.words[_]=f&67108863;if(I===0&&_<v.length&&v!==this)for(;_<v.length;_++)this.words[_]=v.words[_];return this.length=Math.max(this.length,_),v!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(a){return this.clone().isub(a)};function H(a,f,d){d.negative=f.negative^a.negative;var v=a.length+f.length|0;d.length=v,v=v-1|0;var b=a.words[0]|0,I=f.words[0]|0,_=b*I,l=_&67108863,c=_/67108864|0;d.words[0]=l;for(var M=1;M<v;M++){for(var J=c>>>26,K=c&67108863,m=Math.min(M,f.length-1),D=Math.max(0,M-a.length+1);D<=m;D++){var q=M-D|0;b=a.words[q]|0,I=f.words[D]|0,_=b*I+K,J+=_/67108864|0,K=_&67108863}d.words[M]=K|0,c=J|0}return c!==0?d.words[M]=c|0:d.length--,d._strip()}var rt=function(a,f,d){var v=a.words,b=f.words,I=d.words,_=0,l,c,M,J=v[0]|0,K=J&8191,m=J>>>13,D=v[1]|0,q=D&8191,U=D>>>13,V=v[2]|0,Q=V&8191,Y=V>>>13,X=v[3]|0,st=X&8191,G=X>>>13,lt=v[4]|0,At=lt&8191,Bt=lt>>>13,de=v[5]|0,_t=de&8191,Tt=de>>>13,Zt=v[6]|0,pt=Zt&8191,Dt=Zt>>>13,ge=v[7]|0,gt=ge&8191,Ht=ge>>>13,ne=v[8]|0,dt=ne&8191,kt=ne>>>13,ae=v[9]|0,vt=ae&8191,Ut=ae>>>13,he=b[0]|0,bt=he&8191,zt=he>>>13,fe=b[1]|0,yt=fe&8191,Kt=fe>>>13,me=b[2]|0,Mt=me&8191,$t=me>>>13,le=b[3]|0,Et=le&8191,Qt=le>>>13,ve=b[4]|0,It=ve&8191,jt=ve>>>13,be=b[5]|0,St=be&8191,Jt=be>>>13,ce=b[6]|0,xt=ce&8191,Ft=ce>>>13,ye=b[7]|0,Pt=ye&8191,Vt=ye>>>13,we=b[8]|0,Nt=we&8191,Gt=we>>>13,Ae=b[9]|0,Rt=Ae&8191,Lt=Ae>>>13;d.negative=a.negative^f.negative,d.length=19,l=Math.imul(K,bt),c=Math.imul(K,zt),c=c+Math.imul(m,bt)|0,M=Math.imul(m,zt);var Le=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+(Le>>>26)|0,Le&=67108863,l=Math.imul(q,bt),c=Math.imul(q,zt),c=c+Math.imul(U,bt)|0,M=Math.imul(U,zt),l=l+Math.imul(K,yt)|0,c=c+Math.imul(K,Kt)|0,c=c+Math.imul(m,yt)|0,M=M+Math.imul(m,Kt)|0;var $e=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+($e>>>26)|0,$e&=67108863,l=Math.imul(Q,bt),c=Math.imul(Q,zt),c=c+Math.imul(Y,bt)|0,M=Math.imul(Y,zt),l=l+Math.imul(q,yt)|0,c=c+Math.imul(q,Kt)|0,c=c+Math.imul(U,yt)|0,M=M+Math.imul(U,Kt)|0,l=l+Math.imul(K,Mt)|0,c=c+Math.imul(K,$t)|0,c=c+Math.imul(m,Mt)|0,M=M+Math.imul(m,$t)|0;var je=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+(je>>>26)|0,je&=67108863,l=Math.imul(st,bt),c=Math.imul(st,zt),c=c+Math.imul(G,bt)|0,M=Math.imul(G,zt),l=l+Math.imul(Q,yt)|0,c=c+Math.imul(Q,Kt)|0,c=c+Math.imul(Y,yt)|0,M=M+Math.imul(Y,Kt)|0,l=l+Math.imul(q,Mt)|0,c=c+Math.imul(q,$t)|0,c=c+Math.imul(U,Mt)|0,M=M+Math.imul(U,$t)|0,l=l+Math.imul(K,Et)|0,c=c+Math.imul(K,Qt)|0,c=c+Math.imul(m,Et)|0,M=M+Math.imul(m,Qt)|0;var He=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+(He>>>26)|0,He&=67108863,l=Math.imul(At,bt),c=Math.imul(At,zt),c=c+Math.imul(Bt,bt)|0,M=Math.imul(Bt,zt),l=l+Math.imul(st,yt)|0,c=c+Math.imul(st,Kt)|0,c=c+Math.imul(G,yt)|0,M=M+Math.imul(G,Kt)|0,l=l+Math.imul(Q,Mt)|0,c=c+Math.imul(Q,$t)|0,c=c+Math.imul(Y,Mt)|0,M=M+Math.imul(Y,$t)|0,l=l+Math.imul(q,Et)|0,c=c+Math.imul(q,Qt)|0,c=c+Math.imul(U,Et)|0,M=M+Math.imul(U,Qt)|0,l=l+Math.imul(K,It)|0,c=c+Math.imul(K,jt)|0,c=c+Math.imul(m,It)|0,M=M+Math.imul(m,jt)|0;var Ke=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,l=Math.imul(_t,bt),c=Math.imul(_t,zt),c=c+Math.imul(Tt,bt)|0,M=Math.imul(Tt,zt),l=l+Math.imul(At,yt)|0,c=c+Math.imul(At,Kt)|0,c=c+Math.imul(Bt,yt)|0,M=M+Math.imul(Bt,Kt)|0,l=l+Math.imul(st,Mt)|0,c=c+Math.imul(st,$t)|0,c=c+Math.imul(G,Mt)|0,M=M+Math.imul(G,$t)|0,l=l+Math.imul(Q,Et)|0,c=c+Math.imul(Q,Qt)|0,c=c+Math.imul(Y,Et)|0,M=M+Math.imul(Y,Qt)|0,l=l+Math.imul(q,It)|0,c=c+Math.imul(q,jt)|0,c=c+Math.imul(U,It)|0,M=M+Math.imul(U,jt)|0,l=l+Math.imul(K,St)|0,c=c+Math.imul(K,Jt)|0,c=c+Math.imul(m,St)|0,M=M+Math.imul(m,Jt)|0;var Qe=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,l=Math.imul(pt,bt),c=Math.imul(pt,zt),c=c+Math.imul(Dt,bt)|0,M=Math.imul(Dt,zt),l=l+Math.imul(_t,yt)|0,c=c+Math.imul(_t,Kt)|0,c=c+Math.imul(Tt,yt)|0,M=M+Math.imul(Tt,Kt)|0,l=l+Math.imul(At,Mt)|0,c=c+Math.imul(At,$t)|0,c=c+Math.imul(Bt,Mt)|0,M=M+Math.imul(Bt,$t)|0,l=l+Math.imul(st,Et)|0,c=c+Math.imul(st,Qt)|0,c=c+Math.imul(G,Et)|0,M=M+Math.imul(G,Qt)|0,l=l+Math.imul(Q,It)|0,c=c+Math.imul(Q,jt)|0,c=c+Math.imul(Y,It)|0,M=M+Math.imul(Y,jt)|0,l=l+Math.imul(q,St)|0,c=c+Math.imul(q,Jt)|0,c=c+Math.imul(U,St)|0,M=M+Math.imul(U,Jt)|0,l=l+Math.imul(K,xt)|0,c=c+Math.imul(K,Ft)|0,c=c+Math.imul(m,xt)|0,M=M+Math.imul(m,Ft)|0;var Ar=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,l=Math.imul(gt,bt),c=Math.imul(gt,zt),c=c+Math.imul(Ht,bt)|0,M=Math.imul(Ht,zt),l=l+Math.imul(pt,yt)|0,c=c+Math.imul(pt,Kt)|0,c=c+Math.imul(Dt,yt)|0,M=M+Math.imul(Dt,Kt)|0,l=l+Math.imul(_t,Mt)|0,c=c+Math.imul(_t,$t)|0,c=c+Math.imul(Tt,Mt)|0,M=M+Math.imul(Tt,$t)|0,l=l+Math.imul(At,Et)|0,c=c+Math.imul(At,Qt)|0,c=c+Math.imul(Bt,Et)|0,M=M+Math.imul(Bt,Qt)|0,l=l+Math.imul(st,It)|0,c=c+Math.imul(st,jt)|0,c=c+Math.imul(G,It)|0,M=M+Math.imul(G,jt)|0,l=l+Math.imul(Q,St)|0,c=c+Math.imul(Q,Jt)|0,c=c+Math.imul(Y,St)|0,M=M+Math.imul(Y,Jt)|0,l=l+Math.imul(q,xt)|0,c=c+Math.imul(q,Ft)|0,c=c+Math.imul(U,xt)|0,M=M+Math.imul(U,Ft)|0,l=l+Math.imul(K,Pt)|0,c=c+Math.imul(K,Vt)|0,c=c+Math.imul(m,Pt)|0,M=M+Math.imul(m,Vt)|0;var ri=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+(ri>>>26)|0,ri&=67108863,l=Math.imul(dt,bt),c=Math.imul(dt,zt),c=c+Math.imul(kt,bt)|0,M=Math.imul(kt,zt),l=l+Math.imul(gt,yt)|0,c=c+Math.imul(gt,Kt)|0,c=c+Math.imul(Ht,yt)|0,M=M+Math.imul(Ht,Kt)|0,l=l+Math.imul(pt,Mt)|0,c=c+Math.imul(pt,$t)|0,c=c+Math.imul(Dt,Mt)|0,M=M+Math.imul(Dt,$t)|0,l=l+Math.imul(_t,Et)|0,c=c+Math.imul(_t,Qt)|0,c=c+Math.imul(Tt,Et)|0,M=M+Math.imul(Tt,Qt)|0,l=l+Math.imul(At,It)|0,c=c+Math.imul(At,jt)|0,c=c+Math.imul(Bt,It)|0,M=M+Math.imul(Bt,jt)|0,l=l+Math.imul(st,St)|0,c=c+Math.imul(st,Jt)|0,c=c+Math.imul(G,St)|0,M=M+Math.imul(G,Jt)|0,l=l+Math.imul(Q,xt)|0,c=c+Math.imul(Q,Ft)|0,c=c+Math.imul(Y,xt)|0,M=M+Math.imul(Y,Ft)|0,l=l+Math.imul(q,Pt)|0,c=c+Math.imul(q,Vt)|0,c=c+Math.imul(U,Pt)|0,M=M+Math.imul(U,Vt)|0,l=l+Math.imul(K,Nt)|0,c=c+Math.imul(K,Gt)|0,c=c+Math.imul(m,Nt)|0,M=M+Math.imul(m,Gt)|0;var _r=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+(_r>>>26)|0,_r&=67108863,l=Math.imul(vt,bt),c=Math.imul(vt,zt),c=c+Math.imul(Ut,bt)|0,M=Math.imul(Ut,zt),l=l+Math.imul(dt,yt)|0,c=c+Math.imul(dt,Kt)|0,c=c+Math.imul(kt,yt)|0,M=M+Math.imul(kt,Kt)|0,l=l+Math.imul(gt,Mt)|0,c=c+Math.imul(gt,$t)|0,c=c+Math.imul(Ht,Mt)|0,M=M+Math.imul(Ht,$t)|0,l=l+Math.imul(pt,Et)|0,c=c+Math.imul(pt,Qt)|0,c=c+Math.imul(Dt,Et)|0,M=M+Math.imul(Dt,Qt)|0,l=l+Math.imul(_t,It)|0,c=c+Math.imul(_t,jt)|0,c=c+Math.imul(Tt,It)|0,M=M+Math.imul(Tt,jt)|0,l=l+Math.imul(At,St)|0,c=c+Math.imul(At,Jt)|0,c=c+Math.imul(Bt,St)|0,M=M+Math.imul(Bt,Jt)|0,l=l+Math.imul(st,xt)|0,c=c+Math.imul(st,Ft)|0,c=c+Math.imul(G,xt)|0,M=M+Math.imul(G,Ft)|0,l=l+Math.imul(Q,Pt)|0,c=c+Math.imul(Q,Vt)|0,c=c+Math.imul(Y,Pt)|0,M=M+Math.imul(Y,Vt)|0,l=l+Math.imul(q,Nt)|0,c=c+Math.imul(q,Gt)|0,c=c+Math.imul(U,Nt)|0,M=M+Math.imul(U,Gt)|0,l=l+Math.imul(K,Rt)|0,c=c+Math.imul(K,Lt)|0,c=c+Math.imul(m,Rt)|0,M=M+Math.imul(m,Lt)|0;var ii=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+(ii>>>26)|0,ii&=67108863,l=Math.imul(vt,yt),c=Math.imul(vt,Kt),c=c+Math.imul(Ut,yt)|0,M=Math.imul(Ut,Kt),l=l+Math.imul(dt,Mt)|0,c=c+Math.imul(dt,$t)|0,c=c+Math.imul(kt,Mt)|0,M=M+Math.imul(kt,$t)|0,l=l+Math.imul(gt,Et)|0,c=c+Math.imul(gt,Qt)|0,c=c+Math.imul(Ht,Et)|0,M=M+Math.imul(Ht,Qt)|0,l=l+Math.imul(pt,It)|0,c=c+Math.imul(pt,jt)|0,c=c+Math.imul(Dt,It)|0,M=M+Math.imul(Dt,jt)|0,l=l+Math.imul(_t,St)|0,c=c+Math.imul(_t,Jt)|0,c=c+Math.imul(Tt,St)|0,M=M+Math.imul(Tt,Jt)|0,l=l+Math.imul(At,xt)|0,c=c+Math.imul(At,Ft)|0,c=c+Math.imul(Bt,xt)|0,M=M+Math.imul(Bt,Ft)|0,l=l+Math.imul(st,Pt)|0,c=c+Math.imul(st,Vt)|0,c=c+Math.imul(G,Pt)|0,M=M+Math.imul(G,Vt)|0,l=l+Math.imul(Q,Nt)|0,c=c+Math.imul(Q,Gt)|0,c=c+Math.imul(Y,Nt)|0,M=M+Math.imul(Y,Gt)|0,l=l+Math.imul(q,Rt)|0,c=c+Math.imul(q,Lt)|0,c=c+Math.imul(U,Rt)|0,M=M+Math.imul(U,Lt)|0;var ni=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+(ni>>>26)|0,ni&=67108863,l=Math.imul(vt,Mt),c=Math.imul(vt,$t),c=c+Math.imul(Ut,Mt)|0,M=Math.imul(Ut,$t),l=l+Math.imul(dt,Et)|0,c=c+Math.imul(dt,Qt)|0,c=c+Math.imul(kt,Et)|0,M=M+Math.imul(kt,Qt)|0,l=l+Math.imul(gt,It)|0,c=c+Math.imul(gt,jt)|0,c=c+Math.imul(Ht,It)|0,M=M+Math.imul(Ht,jt)|0,l=l+Math.imul(pt,St)|0,c=c+Math.imul(pt,Jt)|0,c=c+Math.imul(Dt,St)|0,M=M+Math.imul(Dt,Jt)|0,l=l+Math.imul(_t,xt)|0,c=c+Math.imul(_t,Ft)|0,c=c+Math.imul(Tt,xt)|0,M=M+Math.imul(Tt,Ft)|0,l=l+Math.imul(At,Pt)|0,c=c+Math.imul(At,Vt)|0,c=c+Math.imul(Bt,Pt)|0,M=M+Math.imul(Bt,Vt)|0,l=l+Math.imul(st,Nt)|0,c=c+Math.imul(st,Gt)|0,c=c+Math.imul(G,Nt)|0,M=M+Math.imul(G,Gt)|0,l=l+Math.imul(Q,Rt)|0,c=c+Math.imul(Q,Lt)|0,c=c+Math.imul(Y,Rt)|0,M=M+Math.imul(Y,Lt)|0;var si=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+(si>>>26)|0,si&=67108863,l=Math.imul(vt,Et),c=Math.imul(vt,Qt),c=c+Math.imul(Ut,Et)|0,M=Math.imul(Ut,Qt),l=l+Math.imul(dt,It)|0,c=c+Math.imul(dt,jt)|0,c=c+Math.imul(kt,It)|0,M=M+Math.imul(kt,jt)|0,l=l+Math.imul(gt,St)|0,c=c+Math.imul(gt,Jt)|0,c=c+Math.imul(Ht,St)|0,M=M+Math.imul(Ht,Jt)|0,l=l+Math.imul(pt,xt)|0,c=c+Math.imul(pt,Ft)|0,c=c+Math.imul(Dt,xt)|0,M=M+Math.imul(Dt,Ft)|0,l=l+Math.imul(_t,Pt)|0,c=c+Math.imul(_t,Vt)|0,c=c+Math.imul(Tt,Pt)|0,M=M+Math.imul(Tt,Vt)|0,l=l+Math.imul(At,Nt)|0,c=c+Math.imul(At,Gt)|0,c=c+Math.imul(Bt,Nt)|0,M=M+Math.imul(Bt,Gt)|0,l=l+Math.imul(st,Rt)|0,c=c+Math.imul(st,Lt)|0,c=c+Math.imul(G,Rt)|0,M=M+Math.imul(G,Lt)|0;var zr=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+(zr>>>26)|0,zr&=67108863,l=Math.imul(vt,It),c=Math.imul(vt,jt),c=c+Math.imul(Ut,It)|0,M=Math.imul(Ut,jt),l=l+Math.imul(dt,St)|0,c=c+Math.imul(dt,Jt)|0,c=c+Math.imul(kt,St)|0,M=M+Math.imul(kt,Jt)|0,l=l+Math.imul(gt,xt)|0,c=c+Math.imul(gt,Ft)|0,c=c+Math.imul(Ht,xt)|0,M=M+Math.imul(Ht,Ft)|0,l=l+Math.imul(pt,Pt)|0,c=c+Math.imul(pt,Vt)|0,c=c+Math.imul(Dt,Pt)|0,M=M+Math.imul(Dt,Vt)|0,l=l+Math.imul(_t,Nt)|0,c=c+Math.imul(_t,Gt)|0,c=c+Math.imul(Tt,Nt)|0,M=M+Math.imul(Tt,Gt)|0,l=l+Math.imul(At,Rt)|0,c=c+Math.imul(At,Lt)|0,c=c+Math.imul(Bt,Rt)|0,M=M+Math.imul(Bt,Lt)|0;var Fr=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,l=Math.imul(vt,St),c=Math.imul(vt,Jt),c=c+Math.imul(Ut,St)|0,M=Math.imul(Ut,Jt),l=l+Math.imul(dt,xt)|0,c=c+Math.imul(dt,Ft)|0,c=c+Math.imul(kt,xt)|0,M=M+Math.imul(kt,Ft)|0,l=l+Math.imul(gt,Pt)|0,c=c+Math.imul(gt,Vt)|0,c=c+Math.imul(Ht,Pt)|0,M=M+Math.imul(Ht,Vt)|0,l=l+Math.imul(pt,Nt)|0,c=c+Math.imul(pt,Gt)|0,c=c+Math.imul(Dt,Nt)|0,M=M+Math.imul(Dt,Gt)|0,l=l+Math.imul(_t,Rt)|0,c=c+Math.imul(_t,Lt)|0,c=c+Math.imul(Tt,Rt)|0,M=M+Math.imul(Tt,Lt)|0;var Lr=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,l=Math.imul(vt,xt),c=Math.imul(vt,Ft),c=c+Math.imul(Ut,xt)|0,M=Math.imul(Ut,Ft),l=l+Math.imul(dt,Pt)|0,c=c+Math.imul(dt,Vt)|0,c=c+Math.imul(kt,Pt)|0,M=M+Math.imul(kt,Vt)|0,l=l+Math.imul(gt,Nt)|0,c=c+Math.imul(gt,Gt)|0,c=c+Math.imul(Ht,Nt)|0,M=M+Math.imul(Ht,Gt)|0,l=l+Math.imul(pt,Rt)|0,c=c+Math.imul(pt,Lt)|0,c=c+Math.imul(Dt,Rt)|0,M=M+Math.imul(Dt,Lt)|0;var oi=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+(oi>>>26)|0,oi&=67108863,l=Math.imul(vt,Pt),c=Math.imul(vt,Vt),c=c+Math.imul(Ut,Pt)|0,M=Math.imul(Ut,Vt),l=l+Math.imul(dt,Nt)|0,c=c+Math.imul(dt,Gt)|0,c=c+Math.imul(kt,Nt)|0,M=M+Math.imul(kt,Gt)|0,l=l+Math.imul(gt,Rt)|0,c=c+Math.imul(gt,Lt)|0,c=c+Math.imul(Ht,Rt)|0,M=M+Math.imul(Ht,Lt)|0;var ai=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+(ai>>>26)|0,ai&=67108863,l=Math.imul(vt,Nt),c=Math.imul(vt,Gt),c=c+Math.imul(Ut,Nt)|0,M=Math.imul(Ut,Gt),l=l+Math.imul(dt,Rt)|0,c=c+Math.imul(dt,Lt)|0,c=c+Math.imul(kt,Rt)|0,M=M+Math.imul(kt,Lt)|0;var hi=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+(hi>>>26)|0,hi&=67108863,l=Math.imul(vt,Rt),c=Math.imul(vt,Lt),c=c+Math.imul(Ut,Rt)|0,M=Math.imul(Ut,Lt);var kn=(_+l|0)+((c&8191)<<13)|0;return _=(M+(c>>>13)|0)+(kn>>>26)|0,kn&=67108863,I[0]=Le,I[1]=$e,I[2]=je,I[3]=He,I[4]=Ke,I[5]=Qe,I[6]=Ar,I[7]=ri,I[8]=_r,I[9]=ii,I[10]=ni,I[11]=si,I[12]=zr,I[13]=Fr,I[14]=Lr,I[15]=oi,I[16]=ai,I[17]=hi,I[18]=kn,_!==0&&(I[19]=_,d.length++),d};Math.imul||(rt=H);function ht(a,f,d){d.negative=f.negative^a.negative,d.length=a.length+f.length;for(var v=0,b=0,I=0;I<d.length-1;I++){var _=b;b=0;for(var l=v&67108863,c=Math.min(I,f.length-1),M=Math.max(0,I-a.length+1);M<=c;M++){var J=I-M,K=a.words[J]|0,m=f.words[M]|0,D=K*m,q=D&67108863;_=_+(D/67108864|0)|0,q=q+l|0,l=q&67108863,_=_+(q>>>26)|0,b+=_>>>26,_&=67108863}d.words[I]=l,v=_,_=b}return v!==0?d.words[I]=v:d.length--,d._strip()}function Z(a,f,d){return ht(a,f,d)}o.prototype.mulTo=function(a,f){var d,v=this.length+a.length;return this.length===10&&a.length===10?d=rt(this,a,f):v<63?d=H(this,a,f):v<1024?d=ht(this,a,f):d=Z(this,a,f),d},o.prototype.mul=function(a){var f=new o(null);return f.words=new Array(this.length+a.length),this.mulTo(a,f)},o.prototype.mulf=function(a){var f=new o(null);return f.words=new Array(this.length+a.length),Z(this,a,f)},o.prototype.imul=function(a){return this.clone().mulTo(a,this)},o.prototype.imuln=function(a){var f=a<0;f&&(a=-a),i(typeof a=="number"),i(a<67108864);for(var d=0,v=0;v<this.length;v++){var b=(this.words[v]|0)*a,I=(b&67108863)+(d&67108863);d>>=26,d+=b/67108864|0,d+=I>>>26,this.words[v]=I&67108863}return d!==0&&(this.words[v]=d,this.length++),f?this.ineg():this},o.prototype.muln=function(a){return this.clone().imuln(a)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(a){var f=L(a);if(f.length===0)return new o(1);for(var d=this,v=0;v<f.length&&f[v]===0;v++,d=d.sqr());if(++v<f.length)for(var b=d.sqr();v<f.length;v++,b=b.sqr())f[v]!==0&&(d=d.mul(b));return d},o.prototype.iushln=function(a){i(typeof a=="number"&&a>=0);var f=a%26,d=(a-f)/26,v=67108863>>>26-f<<26-f,b;if(f!==0){var I=0;for(b=0;b<this.length;b++){var _=this.words[b]&v,l=(this.words[b]|0)-_<<f;this.words[b]=l|I,I=_>>>26-f}I&&(this.words[b]=I,this.length++)}if(d!==0){for(b=this.length-1;b>=0;b--)this.words[b+d]=this.words[b];for(b=0;b<d;b++)this.words[b]=0;this.length+=d}return this._strip()},o.prototype.ishln=function(a){return i(this.negative===0),this.iushln(a)},o.prototype.iushrn=function(a,f,d){i(typeof a=="number"&&a>=0);var v;f?v=(f-f%26)/26:v=0;var b=a%26,I=Math.min((a-b)/26,this.length),_=67108863^67108863>>>b<<b,l=d;if(v-=I,v=Math.max(0,v),l){for(var c=0;c<I;c++)l.words[c]=this.words[c];l.length=I}if(I!==0)if(this.length>I)for(this.length-=I,c=0;c<this.length;c++)this.words[c]=this.words[c+I];else this.words[0]=0,this.length=1;var M=0;for(c=this.length-1;c>=0&&(M!==0||c>=v);c--){var J=this.words[c]|0;this.words[c]=M<<26-b|J>>>b,M=J&_}return l&&M!==0&&(l.words[l.length++]=M),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(a,f,d){return i(this.negative===0),this.iushrn(a,f,d)},o.prototype.shln=function(a){return this.clone().ishln(a)},o.prototype.ushln=function(a){return this.clone().iushln(a)},o.prototype.shrn=function(a){return this.clone().ishrn(a)},o.prototype.ushrn=function(a){return this.clone().iushrn(a)},o.prototype.testn=function(a){i(typeof a=="number"&&a>=0);var f=a%26,d=(a-f)/26,v=1<<f;if(this.length<=d)return!1;var b=this.words[d];return!!(b&v)},o.prototype.imaskn=function(a){i(typeof a=="number"&&a>=0);var f=a%26,d=(a-f)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=d)return this;if(f!==0&&d++,this.length=Math.min(d,this.length),f!==0){var v=67108863^67108863>>>f<<f;this.words[this.length-1]&=v}return this._strip()},o.prototype.maskn=function(a){return this.clone().imaskn(a)},o.prototype.iaddn=function(a){return i(typeof a=="number"),i(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},o.prototype._iaddn=function(a){this.words[0]+=a;for(var f=0;f<this.length&&this.words[f]>=67108864;f++)this.words[f]-=67108864,f===this.length-1?this.words[f+1]=1:this.words[f+1]++;return this.length=Math.max(this.length,f+1),this},o.prototype.isubn=function(a){if(i(typeof a=="number"),i(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var f=0;f<this.length&&this.words[f]<0;f++)this.words[f]+=67108864,this.words[f+1]-=1;return this._strip()},o.prototype.addn=function(a){return this.clone().iaddn(a)},o.prototype.subn=function(a){return this.clone().isubn(a)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(a,f,d){var v=a.length+d,b;this._expand(v);var I,_=0;for(b=0;b<a.length;b++){I=(this.words[b+d]|0)+_;var l=(a.words[b]|0)*f;I-=l&67108863,_=(I>>26)-(l/67108864|0),this.words[b+d]=I&67108863}for(;b<this.length-d;b++)I=(this.words[b+d]|0)+_,_=I>>26,this.words[b+d]=I&67108863;if(_===0)return this._strip();for(i(_===-1),_=0,b=0;b<this.length;b++)I=-(this.words[b]|0)+_,_=I>>26,this.words[b]=I&67108863;return this.negative=1,this._strip()},o.prototype._wordDiv=function(a,f){var d=this.length-a.length,v=this.clone(),b=a,I=b.words[b.length-1]|0,_=this._countBits(I);d=26-_,d!==0&&(b=b.ushln(d),v.iushln(d),I=b.words[b.length-1]|0);var l=v.length-b.length,c;if(f!=="mod"){c=new o(null),c.length=l+1,c.words=new Array(c.length);for(var M=0;M<c.length;M++)c.words[M]=0}var J=v.clone()._ishlnsubmul(b,1,l);J.negative===0&&(v=J,c&&(c.words[l]=1));for(var K=l-1;K>=0;K--){var m=(v.words[b.length+K]|0)*67108864+(v.words[b.length+K-1]|0);for(m=Math.min(m/I|0,67108863),v._ishlnsubmul(b,m,K);v.negative!==0;)m--,v.negative=0,v._ishlnsubmul(b,1,K),v.isZero()||(v.negative^=1);c&&(c.words[K]=m)}return c&&c._strip(),v._strip(),f!=="div"&&d!==0&&v.iushrn(d),{div:c||null,mod:v}},o.prototype.divmod=function(a,f,d){if(i(!a.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var v,b,I;return this.negative!==0&&a.negative===0?(I=this.neg().divmod(a,f),f!=="mod"&&(v=I.div.neg()),f!=="div"&&(b=I.mod.neg(),d&&b.negative!==0&&b.iadd(a)),{div:v,mod:b}):this.negative===0&&a.negative!==0?(I=this.divmod(a.neg(),f),f!=="mod"&&(v=I.div.neg()),{div:v,mod:I.mod}):this.negative&a.negative?(I=this.neg().divmod(a.neg(),f),f!=="div"&&(b=I.mod.neg(),d&&b.negative!==0&&b.isub(a)),{div:I.div,mod:b}):a.length>this.length||this.cmp(a)<0?{div:new o(0),mod:this}:a.length===1?f==="div"?{div:this.divn(a.words[0]),mod:null}:f==="mod"?{div:null,mod:new o(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new o(this.modrn(a.words[0]))}:this._wordDiv(a,f)},o.prototype.div=function(a){return this.divmod(a,"div",!1).div},o.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},o.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},o.prototype.divRound=function(a){var f=this.divmod(a);if(f.mod.isZero())return f.div;var d=f.div.negative!==0?f.mod.isub(a):f.mod,v=a.ushrn(1),b=a.andln(1),I=d.cmp(v);return I<0||b===1&&I===0?f.div:f.div.negative!==0?f.div.isubn(1):f.div.iaddn(1)},o.prototype.modrn=function(a){var f=a<0;f&&(a=-a),i(a<=67108863);for(var d=(1<<26)%a,v=0,b=this.length-1;b>=0;b--)v=(d*v+(this.words[b]|0))%a;return f?-v:v},o.prototype.modn=function(a){return this.modrn(a)},o.prototype.idivn=function(a){var f=a<0;f&&(a=-a),i(a<=67108863);for(var d=0,v=this.length-1;v>=0;v--){var b=(this.words[v]|0)+d*67108864;this.words[v]=b/a|0,d=b%a}return this._strip(),f?this.ineg():this},o.prototype.divn=function(a){return this.clone().idivn(a)},o.prototype.egcd=function(a){i(a.negative===0),i(!a.isZero());var f=this,d=a.clone();f.negative!==0?f=f.umod(a):f=f.clone();for(var v=new o(1),b=new o(0),I=new o(0),_=new o(1),l=0;f.isEven()&&d.isEven();)f.iushrn(1),d.iushrn(1),++l;for(var c=d.clone(),M=f.clone();!f.isZero();){for(var J=0,K=1;!(f.words[0]&K)&&J<26;++J,K<<=1);if(J>0)for(f.iushrn(J);J-- >0;)(v.isOdd()||b.isOdd())&&(v.iadd(c),b.isub(M)),v.iushrn(1),b.iushrn(1);for(var m=0,D=1;!(d.words[0]&D)&&m<26;++m,D<<=1);if(m>0)for(d.iushrn(m);m-- >0;)(I.isOdd()||_.isOdd())&&(I.iadd(c),_.isub(M)),I.iushrn(1),_.iushrn(1);f.cmp(d)>=0?(f.isub(d),v.isub(I),b.isub(_)):(d.isub(f),I.isub(v),_.isub(b))}return{a:I,b:_,gcd:d.iushln(l)}},o.prototype._invmp=function(a){i(a.negative===0),i(!a.isZero());var f=this,d=a.clone();f.negative!==0?f=f.umod(a):f=f.clone();for(var v=new o(1),b=new o(0),I=d.clone();f.cmpn(1)>0&&d.cmpn(1)>0;){for(var _=0,l=1;!(f.words[0]&l)&&_<26;++_,l<<=1);if(_>0)for(f.iushrn(_);_-- >0;)v.isOdd()&&v.iadd(I),v.iushrn(1);for(var c=0,M=1;!(d.words[0]&M)&&c<26;++c,M<<=1);if(c>0)for(d.iushrn(c);c-- >0;)b.isOdd()&&b.iadd(I),b.iushrn(1);f.cmp(d)>=0?(f.isub(d),v.isub(b)):(d.isub(f),b.isub(v))}var J;return f.cmpn(1)===0?J=v:J=b,J.cmpn(0)<0&&J.iadd(a),J},o.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var f=this.clone(),d=a.clone();f.negative=0,d.negative=0;for(var v=0;f.isEven()&&d.isEven();v++)f.iushrn(1),d.iushrn(1);do{for(;f.isEven();)f.iushrn(1);for(;d.isEven();)d.iushrn(1);var b=f.cmp(d);if(b<0){var I=f;f=d,d=I}else if(b===0||d.cmpn(1)===0)break;f.isub(d)}while(!0);return d.iushln(v)},o.prototype.invm=function(a){return this.egcd(a).a.umod(a)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(a){return this.words[0]&a},o.prototype.bincn=function(a){i(typeof a=="number");var f=a%26,d=(a-f)/26,v=1<<f;if(this.length<=d)return this._expand(d+1),this.words[d]|=v,this;for(var b=v,I=d;b!==0&&I<this.length;I++){var _=this.words[I]|0;_+=b,b=_>>>26,_&=67108863,this.words[I]=_}return b!==0&&(this.words[I]=b,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(a){var f=a<0;if(this.negative!==0&&!f)return-1;if(this.negative===0&&f)return 1;this._strip();var d;if(this.length>1)d=1;else{f&&(a=-a),i(a<=67108863,"Number is too big");var v=this.words[0]|0;d=v===a?0:v<a?-1:1}return this.negative!==0?-d|0:d},o.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var f=this.ucmp(a);return this.negative!==0?-f|0:f},o.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var f=0,d=this.length-1;d>=0;d--){var v=this.words[d]|0,b=a.words[d]|0;if(v!==b){v<b?f=-1:v>b&&(f=1);break}}return f},o.prototype.gtn=function(a){return this.cmpn(a)===1},o.prototype.gt=function(a){return this.cmp(a)===1},o.prototype.gten=function(a){return this.cmpn(a)>=0},o.prototype.gte=function(a){return this.cmp(a)>=0},o.prototype.ltn=function(a){return this.cmpn(a)===-1},o.prototype.lt=function(a){return this.cmp(a)===-1},o.prototype.lten=function(a){return this.cmpn(a)<=0},o.prototype.lte=function(a){return this.cmp(a)<=0},o.prototype.eqn=function(a){return this.cmpn(a)===0},o.prototype.eq=function(a){return this.cmp(a)===0},o.red=function(a){return new T(a)},o.prototype.toRed=function(a){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},o.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(a){return this.red=a,this},o.prototype.forceRed=function(a){return i(!this.red,"Already a number in reduction context"),this._forceRed(a)},o.prototype.redAdd=function(a){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},o.prototype.redIAdd=function(a){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},o.prototype.redSub=function(a){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},o.prototype.redISub=function(a){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},o.prototype.redShl=function(a){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},o.prototype.redMul=function(a){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},o.prototype.redIMul=function(a){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},o.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(a){return i(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var et={k256:null,p224:null,p192:null,p25519:null};function at(a,f){this.name=a,this.p=new o(f,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}at.prototype._tmp=function(){var a=new o(null);return a.words=new Array(Math.ceil(this.n/13)),a},at.prototype.ireduce=function(a){var f=a,d;do this.split(f,this.tmp),f=this.imulK(f),f=f.iadd(this.tmp),d=f.bitLength();while(d>this.n);var v=d<this.n?-1:f.ucmp(this.p);return v===0?(f.words[0]=0,f.length=1):v>0?f.isub(this.p):f.strip!==void 0?f.strip():f._strip(),f},at.prototype.split=function(a,f){a.iushrn(this.n,0,f)},at.prototype.imulK=function(a){return a.imul(this.k)};function ft(){at.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(ft,at),ft.prototype.split=function(a,f){for(var d=4194303,v=Math.min(a.length,9),b=0;b<v;b++)f.words[b]=a.words[b];if(f.length=v,a.length<=9){a.words[0]=0,a.length=1;return}var I=a.words[9];for(f.words[f.length++]=I&d,b=10;b<a.length;b++){var _=a.words[b]|0;a.words[b-10]=(_&d)<<4|I>>>22,I=_}I>>>=22,a.words[b-10]=I,I===0&&a.length>10?a.length-=10:a.length-=9},ft.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var f=0,d=0;d<a.length;d++){var v=a.words[d]|0;f+=v*977,a.words[d]=f&67108863,f=v*64+(f/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function ct(){at.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(ct,at);function mt(){at.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(mt,at);function se(){at.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(se,at),se.prototype.imulK=function(a){for(var f=0,d=0;d<a.length;d++){var v=(a.words[d]|0)*19+f,b=v&67108863;v>>>=26,a.words[d]=b,f=v}return f!==0&&(a.words[a.length++]=f),a},o._prime=function(a){if(et[a])return et[a];var f;if(a==="k256")f=new ft;else if(a==="p224")f=new ct;else if(a==="p192")f=new mt;else if(a==="p25519")f=new se;else throw new Error("Unknown prime "+a);return et[a]=f,f};function T(a){if(typeof a=="string"){var f=o._prime(a);this.m=f.p,this.prime=f}else i(a.gtn(1),"modulus must be greater than 1"),this.m=a,this.prime=null}T.prototype._verify1=function(a){i(a.negative===0,"red works only with positives"),i(a.red,"red works only with red numbers")},T.prototype._verify2=function(a,f){i((a.negative|f.negative)===0,"red works only with positives"),i(a.red&&a.red===f.red,"red works only with red numbers")},T.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(S(a,a.umod(this.m)._forceRed(this)),a)},T.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},T.prototype.add=function(a,f){this._verify2(a,f);var d=a.add(f);return d.cmp(this.m)>=0&&d.isub(this.m),d._forceRed(this)},T.prototype.iadd=function(a,f){this._verify2(a,f);var d=a.iadd(f);return d.cmp(this.m)>=0&&d.isub(this.m),d},T.prototype.sub=function(a,f){this._verify2(a,f);var d=a.sub(f);return d.cmpn(0)<0&&d.iadd(this.m),d._forceRed(this)},T.prototype.isub=function(a,f){this._verify2(a,f);var d=a.isub(f);return d.cmpn(0)<0&&d.iadd(this.m),d},T.prototype.shl=function(a,f){return this._verify1(a),this.imod(a.ushln(f))},T.prototype.imul=function(a,f){return this._verify2(a,f),this.imod(a.imul(f))},T.prototype.mul=function(a,f){return this._verify2(a,f),this.imod(a.mul(f))},T.prototype.isqr=function(a){return this.imul(a,a.clone())},T.prototype.sqr=function(a){return this.mul(a,a)},T.prototype.sqrt=function(a){if(a.isZero())return a.clone();var f=this.m.andln(3);if(i(f%2===1),f===3){var d=this.m.add(new o(1)).iushrn(2);return this.pow(a,d)}for(var v=this.m.subn(1),b=0;!v.isZero()&&v.andln(1)===0;)b++,v.iushrn(1);i(!v.isZero());var I=new o(1).toRed(this),_=I.redNeg(),l=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);this.pow(c,l).cmp(_)!==0;)c.redIAdd(_);for(var M=this.pow(c,v),J=this.pow(a,v.addn(1).iushrn(1)),K=this.pow(a,v),m=b;K.cmp(I)!==0;){for(var D=K,q=0;D.cmp(I)!==0;q++)D=D.redSqr();i(q<m);var U=this.pow(M,new o(1).iushln(m-q-1));J=J.redMul(U),M=U.redSqr(),K=K.redMul(M),m=q}return J},T.prototype.invm=function(a){var f=a._invmp(this.m);return f.negative!==0?(f.negative=0,this.imod(f).redNeg()):this.imod(f)},T.prototype.pow=function(a,f){if(f.isZero())return new o(1).toRed(this);if(f.cmpn(1)===0)return a.clone();var d=4,v=new Array(1<<d);v[0]=new o(1).toRed(this),v[1]=a;for(var b=2;b<v.length;b++)v[b]=this.mul(v[b-1],a);var I=v[0],_=0,l=0,c=f.bitLength()%26;for(c===0&&(c=26),b=f.length-1;b>=0;b--){for(var M=f.words[b],J=c-1;J>=0;J--){var K=M>>J&1;if(I!==v[0]&&(I=this.sqr(I)),K===0&&_===0){l=0;continue}_<<=1,_|=K,l++,!(l!==d&&(b!==0||J!==0))&&(I=this.mul(I,v[_]),l=0,_=0)}c=26}return I},T.prototype.convertTo=function(a){var f=a.umod(this.m);return f===a?f.clone():f},T.prototype.convertFrom=function(a){var f=a.clone();return f.red=null,f},o.mont=function(a){return new y(a)};function y(a){T.call(this,a),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(y,T),y.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},y.prototype.convertFrom=function(a){var f=this.imod(a.mul(this.rinv));return f.red=null,f},y.prototype.imul=function(a,f){if(a.isZero()||f.isZero())return a.words[0]=0,a.length=1,a;var d=a.imul(f),v=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=d.isub(v).iushrn(this.shift),I=b;return b.cmp(this.m)>=0?I=b.isub(this.m):b.cmpn(0)<0&&(I=b.iadd(this.m)),I._forceRed(this)},y.prototype.mul=function(a,f){if(a.isZero()||f.isZero())return new o(0)._forceRed(this);var d=a.mul(f),v=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=d.isub(v).iushrn(this.shift),I=b;return b.cmp(this.m)>=0?I=b.isub(this.m):b.cmpn(0)<0&&(I=b.iadd(this.m)),I._forceRed(this)},y.prototype.invm=function(a){var f=this.imod(a._invmp(this.m).mul(this.r2));return f._forceRed(this)}})(r,Sg)})(Rg);var re=Rg.exports;const Cg="bignumber/5.7.0";var Tu=re.BN;const Wn=new Xr(Cg),Jc={},gp=9007199254740991;function qw(r){return r!=null&&(Dr.isBigNumber(r)||typeof r=="number"&&r%1===0||typeof r=="string"&&!!r.match(/^-?[0-9]+$/)||Po(r)||typeof r=="bigint"||Da(r))}let mp=!1,Dr=class Wi{constructor(t,e){t!==Jc&&Wn.throwError("cannot call constructor directly; use BigNumber.from",Xr.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=e,this._isBigNumber=!0,Object.freeze(this)}fromTwos(t){return Qr(Ie(this).fromTwos(t))}toTwos(t){return Qr(Ie(this).toTwos(t))}abs(){return this._hex[0]==="-"?Wi.from(this._hex.substring(1)):this}add(t){return Qr(Ie(this).add(Ie(t)))}sub(t){return Qr(Ie(this).sub(Ie(t)))}div(t){return Wi.from(t).isZero()&&Ni("division-by-zero","div"),Qr(Ie(this).div(Ie(t)))}mul(t){return Qr(Ie(this).mul(Ie(t)))}mod(t){const e=Ie(t);return e.isNeg()&&Ni("division-by-zero","mod"),Qr(Ie(this).umod(e))}pow(t){const e=Ie(t);return e.isNeg()&&Ni("negative-power","pow"),Qr(Ie(this).pow(e))}and(t){const e=Ie(t);return(this.isNegative()||e.isNeg())&&Ni("unbound-bitwise-result","and"),Qr(Ie(this).and(e))}or(t){const e=Ie(t);return(this.isNegative()||e.isNeg())&&Ni("unbound-bitwise-result","or"),Qr(Ie(this).or(e))}xor(t){const e=Ie(t);return(this.isNegative()||e.isNeg())&&Ni("unbound-bitwise-result","xor"),Qr(Ie(this).xor(e))}mask(t){return(this.isNegative()||t<0)&&Ni("negative-width","mask"),Qr(Ie(this).maskn(t))}shl(t){return(this.isNegative()||t<0)&&Ni("negative-width","shl"),Qr(Ie(this).shln(t))}shr(t){return(this.isNegative()||t<0)&&Ni("negative-width","shr"),Qr(Ie(this).shrn(t))}eq(t){return Ie(this).eq(Ie(t))}lt(t){return Ie(this).lt(Ie(t))}lte(t){return Ie(this).lte(Ie(t))}gt(t){return Ie(this).gt(Ie(t))}gte(t){return Ie(this).gte(Ie(t))}isNegative(){return this._hex[0]==="-"}isZero(){return Ie(this).isZero()}toNumber(){try{return Ie(this).toNumber()}catch{Ni("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return Wn.throwError("this platform does not support BigInt",Xr.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?mp||(mp=!0,Wn.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?Wn.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",Xr.errors.UNEXPECTED_ARGUMENT,{}):Wn.throwError("BigNumber.toString does not accept parameters",Xr.errors.UNEXPECTED_ARGUMENT,{})),Ie(this).toString(10)}toHexString(){return this._hex}toJSON(t){return{type:"BigNumber",hex:this.toHexString()}}static from(t){if(t instanceof Wi)return t;if(typeof t=="string")return t.match(/^-?0x[0-9a-f]+$/i)?new Wi(Jc,Pa(t)):t.match(/^-?[0-9]+$/)?new Wi(Jc,Pa(new Tu(t))):Wn.throwArgumentError("invalid BigNumber string","value",t);if(typeof t=="number")return t%1&&Ni("underflow","BigNumber.from",t),(t>=gp||t<=-gp)&&Ni("overflow","BigNumber.from",t),Wi.from(String(t));const e=t;if(typeof e=="bigint")return Wi.from(e.toString());if(Da(e))return Wi.from(Ng(e));if(e)if(e.toHexString){const i=e.toHexString();if(typeof i=="string")return Wi.from(i)}else{let i=e._hex;if(i==null&&e.type==="BigNumber"&&(i=e.hex),typeof i=="string"&&(Po(i)||i[0]==="-"&&Po(i.substring(1))))return Wi.from(i)}return Wn.throwArgumentError("invalid BigNumber value","value",t)}static isBigNumber(t){return!!(t&&t._isBigNumber)}};function Pa(r){if(typeof r!="string")return Pa(r.toString(16));if(r[0]==="-")return r=r.substring(1),r[0]==="-"&&Wn.throwArgumentError("invalid hex","value",r),r=Pa(r),r==="0x00"?r:"-"+r;if(r.substring(0,2)!=="0x"&&(r="0x"+r),r==="0x")return"0x00";for(r.length%2&&(r="0x0"+r.substring(2));r.length>4&&r.substring(0,4)==="0x00";)r="0x"+r.substring(4);return r}function Qr(r){return Dr.from(Pa(r))}function Ie(r){const t=Dr.from(r).toHexString();return t[0]==="-"?new Tu("-"+t.substring(3),16):new Tu(t.substring(2),16)}function Ni(r,t,e){const i={fault:r,operation:t};return e!=null&&(i.value=e),Wn.throwError(r,Xr.errors.NUMERIC_FAULT,i)}const Br=new Xr(Cg),_a={},Og=Dr.from(0),Bg=Dr.from(-1);function Tg(r,t,e,i){const s={fault:t,operation:e};return i!==void 0&&(s.value=i),Br.throwError(r,Xr.errors.NUMERIC_FAULT,s)}let Ma="0";for(;Ma.length<256;)Ma+=Ma;function l0(r){if(typeof r!="number")try{r=Dr.from(r).toNumber()}catch{}return typeof r=="number"&&r>=0&&r<=256&&!(r%1)?"1"+Ma.substring(0,r):Br.throwArgumentError("invalid decimal size","decimals",r)}function Vc(r,t){t==null&&(t=0);const e=l0(t);r=Dr.from(r);const i=r.lt(Og);i&&(r=r.mul(Bg));let s=r.mod(e).toString();for(;s.length<e.length-1;)s="0"+s;s=s.match(/^([0-9]*[1-9]|0)(0*)/)[1];const o=r.div(e).toString();return e.length===1?r=o:r=o+"."+s,i&&(r="-"+r),r}function Jn(r,t){t==null&&(t=0);const e=l0(t);(typeof r!="string"||!r.match(/^-?[0-9.]+$/))&&Br.throwArgumentError("invalid decimal value","value",r);const i=r.substring(0,1)==="-";i&&(r=r.substring(1)),r==="."&&Br.throwArgumentError("missing value","value",r);const s=r.split(".");s.length>2&&Br.throwArgumentError("too many decimal points","value",r);let o=s[0],u=s[1];for(o||(o="0"),u||(u="0");u[u.length-1]==="0";)u=u.substring(0,u.length-1);for(u.length>e.length-1&&Tg("fractional component exceeds decimals","underflow","parseFixed"),u===""&&(u="0");u.length<e.length-1;)u+="0";const g=Dr.from(o),w=Dr.from(u);let A=g.mul(e).add(w);return i&&(A=A.mul(Bg)),A}let Gc=class qu{constructor(t,e,i,s){t!==_a&&Br.throwError("cannot use FixedFormat constructor; use FixedFormat.from",Xr.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=e,this.width=i,this.decimals=s,this.name=(e?"":"u")+"fixed"+String(i)+"x"+String(s),this._multiplier=l0(s),Object.freeze(this)}static from(t){if(t instanceof qu)return t;typeof t=="number"&&(t=`fixed128x${t}`);let e=!0,i=128,s=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")e=!1;else{const o=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);o||Br.throwArgumentError("invalid fixed format","format",t),e=o[1]!=="u",i=parseInt(o[2]),s=parseInt(o[3])}}else if(t){const o=(u,g,w)=>t[u]==null?w:(typeof t[u]!==g&&Br.throwArgumentError("invalid fixed format ("+u+" not "+g+")","format."+u,t[u]),t[u]);e=o("signed","boolean",e),i=o("width","number",i),s=o("decimals","number",s)}return i%8&&Br.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",i),s>80&&Br.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",s),new qu(_a,e,i,s)}},qg=class Cr{constructor(t,e,i,s){t!==_a&&Br.throwError("cannot use FixedNumber constructor; use FixedNumber.from",Xr.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=s,this._hex=e,this._value=i,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(t){this.format.name!==t.format.name&&Br.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",t)}addUnsafe(t){this._checkFormat(t);const e=Jn(this._value,this.format.decimals),i=Jn(t._value,t.format.decimals);return Cr.fromValue(e.add(i),this.format.decimals,this.format)}subUnsafe(t){this._checkFormat(t);const e=Jn(this._value,this.format.decimals),i=Jn(t._value,t.format.decimals);return Cr.fromValue(e.sub(i),this.format.decimals,this.format)}mulUnsafe(t){this._checkFormat(t);const e=Jn(this._value,this.format.decimals),i=Jn(t._value,t.format.decimals);return Cr.fromValue(e.mul(i).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(t){this._checkFormat(t);const e=Jn(this._value,this.format.decimals),i=Jn(t._value,t.format.decimals);return Cr.fromValue(e.mul(this.format._multiplier).div(i),this.format.decimals,this.format)}floor(){const t=this.toString().split(".");t.length===1&&t.push("0");let e=Cr.from(t[0],this.format);const i=!t[1].match(/^(0*)$/);return this.isNegative()&&i&&(e=e.subUnsafe(vp.toFormat(e.format))),e}ceiling(){const t=this.toString().split(".");t.length===1&&t.push("0");let e=Cr.from(t[0],this.format);const i=!t[1].match(/^(0*)$/);return!this.isNegative()&&i&&(e=e.addUnsafe(vp.toFormat(e.format))),e}round(t){t==null&&(t=0);const e=this.toString().split(".");if(e.length===1&&e.push("0"),(t<0||t>80||t%1)&&Br.throwArgumentError("invalid decimal count","decimals",t),e[1].length<=t)return this;const i=Cr.from("1"+Ma.substring(0,t),this.format),s=Dw.toFormat(this.format);return this.mulUnsafe(i).addUnsafe(s).floor().divUnsafe(i)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(t){if(t==null)return this._hex;t%8&&Br.throwArgumentError("invalid byte width","width",t);const e=Dr.from(this._hex).fromTwos(this.format.width).toTwos(t).toHexString();return sf(e,t/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return Cr.fromString(this._value,t)}static fromValue(t,e,i){return i==null&&e!=null&&!qw(e)&&(i=e,e=null),e==null&&(e=0),i==null&&(i="fixed"),Cr.fromString(Vc(t,e),Gc.from(i))}static fromString(t,e){e==null&&(e="fixed");const i=Gc.from(e),s=Jn(t,i.decimals);!i.signed&&s.lt(Og)&&Tg("unsigned value cannot be negative","overflow","value",t);let o=null;i.signed?o=s.toTwos(i.width).toHexString():(o=s.toHexString(),o=sf(o,i.width/8));const u=Vc(s,i.decimals);return new Cr(_a,o,u,i)}static fromBytes(t,e){e==null&&(e="fixed");const i=Gc.from(e);if(Pg(t).length>i.width/8)throw new Error("overflow");let s=Dr.from(t);i.signed&&(s=s.fromTwos(i.width));const o=s.toTwos((i.signed?0:1)+i.width).toHexString(),u=Vc(s,i.decimals);return new Cr(_a,o,u,i)}static from(t,e){if(typeof t=="string")return Cr.fromString(t,e);if(Da(t))return Cr.fromBytes(t,e);try{return Cr.fromValue(t,0,e)}catch(i){if(i.code!==Xr.errors.INVALID_ARGUMENT)throw i}return Br.throwArgumentError("invalid FixedNumber value","value",t)}static isFixedNumber(t){return!!(t&&t._isFixedNumber)}};const vp=qg.from(1),Dw=qg.from("0.5");var bp;(function(r){r.current="",r.NFC="NFC",r.NFD="NFD",r.NFKC="NFKC",r.NFKD="NFKD"})(bp||(bp={}));var yp;(function(r){r.UNEXPECTED_CONTINUE="unexpected continuation byte",r.BAD_PREFIX="bad codepoint prefix",r.OVERRUN="string overrun",r.MISSING_CONTINUE="missing continuation byte",r.OUT_OF_RANGE="out of UTF-8 range",r.UTF16_SURROGATE="UTF-16 surrogate",r.OVERLONG="overlong representation"})(yp||(yp={}));function kw(r){if(r.length%4!==0)throw new Error("bad data");let t=[];for(let e=0;e<r.length;e+=4)t.push(parseInt(r.substring(e,e+4),16));return t}function Yc(r,t){t||(t=function(s){return[parseInt(s,16)]});let e=0,i={};return r.split(",").forEach(s=>{let o=s.split(":");e+=parseInt(o[0],16),i[e]=t(o[1])}),i}function wp(r){let t=0;return r.split(",").map(e=>{let i=e.split("-");i.length===1?i[1]="0":i[1]===""&&(i[1]="1");let s=t+parseInt(i[0],16);return t=parseInt(i[1],16),{l:s,h:t}})}wp("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),"ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map(r=>parseInt(r,16)),Yc("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),Yc("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),Yc("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",kw),wp("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function Uw(r){r=atob(r);const t=[];for(let e=0;e<r.length;e++)t.push(r.charCodeAt(e));return Pg(t)}function Dg(r,t){t==null&&(t=1);const e=[],i=e.forEach,s=function(o,u){i.call(o,function(g){u>0&&Array.isArray(g)?s(g,u-1):e.push(g)})};return s(r,t),e}function zw(r){const t={};for(let e=0;e<r.length;e++){const i=r[e];t[i[0]]=i[1]}return t}function Fw(r){let t=0;function e(){return r[t++]<<8|r[t++]}let i=e(),s=1,o=[0,1];for(let et=1;et<i;et++)o.push(s+=e());let u=e(),g=t;t+=u;let w=0,A=0;function S(){return w==0&&(A=A<<8|r[t++],w=8),A>>--w&1}const x=31,N=Math.pow(2,x),R=N>>>1,O=R>>1,z=N-1;let L=0;for(let et=0;et<x;et++)L=L<<1|S();let H=[],rt=0,ht=N;for(;;){let et=Math.floor(((L-rt+1)*s-1)/ht),at=0,ft=i;for(;ft-at>1;){let se=at+ft>>>1;et<o[se]?ft=se:at=se}if(at==0)break;H.push(at);let ct=rt+Math.floor(ht*o[at]/s),mt=rt+Math.floor(ht*o[at+1]/s)-1;for(;!((ct^mt)&R);)L=L<<1&z|S(),ct=ct<<1&z,mt=mt<<1&z|1;for(;ct&~mt&O;)L=L&R|L<<1&z>>>1|S(),ct=ct<<1^R,mt=(mt^R)<<1|R|1;rt=ct,ht=1+mt-ct}let Z=i-4;return H.map(et=>{switch(et-Z){case 3:return Z+65792+(r[g++]<<16|r[g++]<<8|r[g++]);case 2:return Z+256+(r[g++]<<8|r[g++]);case 1:return Z+r[g++];default:return et-1}})}function Lw(r){let t=0;return()=>r[t++]}function $w(r){return Lw(Fw(r))}function jw(r){return r&1?~r>>1:r>>1}function Hw(r,t){let e=Array(r);for(let i=0;i<r;i++)e[i]=1+t();return e}function Ap(r,t){let e=Array(r);for(let i=0,s=-1;i<r;i++)e[i]=s+=1+t();return e}function Kw(r,t){let e=Array(r);for(let i=0,s=0;i<r;i++)e[i]=s+=jw(t());return e}function of(r,t){let e=Ap(r(),r),i=r(),s=Ap(i,r),o=Hw(i,r);for(let u=0;u<i;u++)for(let g=0;g<o[u];g++)e.push(s[u]+g);return t?e.map(u=>t[u]):e}function Qw(r){let t=[];for(;;){let e=r();if(e==0)break;t.push(Vw(e,r))}for(;;){let e=r()-1;if(e<0)break;t.push(Gw(e,r))}return zw(Dg(t))}function Jw(r){let t=[];for(;;){let e=r();if(e==0)break;t.push(e)}return t}function kg(r,t,e){let i=Array(r).fill(void 0).map(()=>[]);for(let s=0;s<t;s++)Kw(r,e).forEach((o,u)=>i[u].push(o));return i}function Vw(r,t){let e=1+t(),i=t(),s=Jw(t),o=kg(s.length,1+r,t);return Dg(o.map((u,g)=>{const w=u[0],A=u.slice(1);return Array(s[g]).fill(void 0).map((S,x)=>{let N=x*i;return[w+x*e,A.map(R=>R+N)]})}))}function Gw(r,t){let e=1+t();return kg(e,1+r,t).map(i=>[i[0],i.slice(1)])}function Yw(r){let t=of(r).sort((i,s)=>i-s);return e();function e(){let i=[];for(;;){let A=of(r,t);if(A.length==0)break;i.push({set:new Set(A),node:e()})}i.sort((A,S)=>S.set.size-A.set.size);let s=r(),o=s%3;s=s/3|0;let u=!!(s&1);s>>=1;let g=s==1,w=s==2;return{branches:i,valid:o,fe0f:u,save:g,check:w}}}function Ww(){return $w(Uw("AEQF2AO2DEsA2wIrAGsBRABxAN8AZwCcAEwAqgA0AGwAUgByADcATAAVAFYAIQAyACEAKAAYAFgAGwAjABQAMAAmADIAFAAfABQAKwATACoADgAbAA8AHQAYABoAGQAxADgALAAoADwAEwA9ABMAGgARAA4ADwAWABMAFgAIAA8AHgQXBYMA5BHJAS8JtAYoAe4AExozi0UAH21tAaMnBT8CrnIyhrMDhRgDygIBUAEHcoFHUPe8AXBjAewCjgDQR8IICIcEcQLwATXCDgzvHwBmBoHNAqsBdBcUAykgDhAMShskMgo8AY8jqAQfAUAfHw8BDw87MioGlCIPBwZCa4ELatMAAMspJVgsDl8AIhckSg8XAHdvTwBcIQEiDT4OPhUqbyECAEoAS34Aej8Ybx83JgT/Xw8gHxZ/7w8RICxPHA9vBw+Pfw8PHwAPFv+fAsAvCc8vEr8ivwD/EQ8Bol8OEBa/A78hrwAPCU8vESNvvwWfHwNfAVoDHr+ZAAED34YaAdJPAK7PLwSEgDLHAGo1Pz8Pvx9fUwMrpb8O/58VTzAPIBoXIyQJNF8hpwIVAT8YGAUADDNBaX3RAMomJCg9EhUeA29MABsZBTMNJipjOhc19gcIDR8bBwQHEggCWi6DIgLuAQYA+BAFCha3A5XiAEsqM7UFFgFLhAMjFTMYE1Klnw74nRVBG/ASCm0BYRN/BrsU3VoWy+S0vV8LQx+vN8gF2AC2AK5EAWwApgYDKmAAroQ0NDQ0AT+OCg7wAAIHRAbpNgVcBV0APTA5BfbPFgMLzcYL/QqqA82eBALKCjQCjqYCht0/k2+OAsXQAoP3ASTKDgDw6ACKAUYCMpIKJpRaAE4A5womABzZvs0REEKiACIQAd5QdAECAj4Ywg/wGqY2AVgAYADYvAoCGAEubA0gvAY2ALAAbpbvqpyEAGAEpgQAJgAG7gAgAEACmghUFwCqAMpAINQIwC4DthRAAPcycKgApoIdABwBfCisABoATwBqASIAvhnSBP8aH/ECeAKXAq40NjgDBTwFYQU6AXs3oABgAD4XNgmcCY1eCl5tIFZeUqGgyoNHABgAEQAaABNwWQAmABMATPMa3T34ADldyprmM1M2XociUQgLzvwAXT3xABgAEQAaABNwIGFAnADD8AAgAD4BBJWzaCcIAIEBFMAWwKoAAdq9BWAF5wLQpALEtQAKUSGkahR4GnJM+gsAwCgeFAiUAECQ0BQuL8AAIAAAADKeIheclvFqQAAETr4iAMxIARMgAMIoHhQIAn0E0pDQFC4HhznoAAAAIAI2C0/4lvFqQAAETgBJJwYCAy4ABgYAFAA8MBKYEH4eRhTkAjYeFcgACAYAeABsOqyQ5gRwDayqugEgaIIAtgoACgDmEABmBAWGme5OBJJA2m4cDeoAmITWAXwrMgOgAGwBCh6CBXYF1Tzg1wKAAFdiuABRAFwAXQBsAG8AdgBrAHYAbwCEAHEwfxQBVE5TEQADVFhTBwBDANILAqcCzgLTApQCrQL6vAAMAL8APLhNBKkE6glGKTAU4Dr4N2EYEwBCkABKk8rHAbYBmwIoAiU4Ajf/Aq4CowCAANIChzgaNBsCsTgeODcFXrgClQKdAqQBiQGYAqsCsjTsNHsfNPA0ixsAWTWiOAMFPDQSNCk2BDZHNow2TTZUNhk28Jk9VzI3QkEoAoICoQKwAqcAQAAxBV4FXbS9BW47YkIXP1ciUqs05DS/FwABUwJW11e6nHuYZmSh/RAYA8oMKvZ8KASoUAJYWAJ6ILAsAZSoqjpgA0ocBIhmDgDWAAawRDQoAAcuAj5iAHABZiR2AIgiHgCaAU68ACxuHAG0ygM8MiZIAlgBdF4GagJqAPZOHAMuBgoATkYAsABiAHgAMLoGDPj0HpKEBAAOJgAuALggTAHWAeAMEDbd20Uege0ADwAWADkAQgA9OHd+2MUQZBBhBgNNDkxxPxUQArEPqwvqERoM1irQ090ANK4H8ANYB/ADWANYB/AH8ANYB/ADWANYA1gDWBwP8B/YxRBkD00EcgWTBZAE2wiIJk4RhgctCNdUEnQjHEwDSgEBIypJITuYMxAlR0wRTQgIATZHbKx9PQNMMbBU+pCnA9AyVDlxBgMedhKlAC8PeCE1uk6DekxxpQpQT7NX9wBFBgASqwAS5gBJDSgAUCwGPQBI4zTYABNGAE2bAE3KAExdGABKaAbgAFBXAFCOAFBJABI2SWdObALDOq0//QomCZhvwHdTBkIQHCemEPgMNAG2ATwN7kvZBPIGPATKH34ZGg/OlZ0Ipi3eDO4m5C6igFsj9iqEBe5L9TzeC05RaQ9aC2YJ5DpkgU8DIgEOIowK3g06CG4Q9ArKbA3mEUYHOgPWSZsApgcCCxIdNhW2JhFirQsKOXgG/Br3C5AmsBMqev0F1BoiBk4BKhsAANAu6IWxWjJcHU9gBgQLJiPIFKlQIQ0mQLh4SRocBxYlqgKSQ3FKiFE3HpQh9zw+DWcuFFF9B/Y8BhlQC4I8n0asRQ8R0z6OPUkiSkwtBDaALDAnjAnQD4YMunxzAVoJIgmyDHITMhEYN8YIOgcaLpclJxYIIkaWYJsE+KAD9BPSAwwFQAlCBxQDthwuEy8VKgUOgSXYAvQ21i60ApBWgQEYBcwPJh/gEFFH4Q7qCJwCZgOEJewALhUiABginAhEZABgj9lTBi7MCMhqbSN1A2gU6GIRdAeSDlgHqBw0FcAc4nDJXgyGCSiksAlcAXYJmgFgBOQICjVcjKEgQmdUi1kYnCBiQUBd/QIyDGYVoES+h3kCjA9sEhwBNgF0BzoNAgJ4Ee4RbBCWCOyGBTW2M/k6JgRQIYQgEgooA1BszwsoJvoM+WoBpBJjAw00PnfvZ6xgtyUX/gcaMsZBYSHyC5NPzgydGsIYQ1QvGeUHwAP0GvQn60FYBgADpAQUOk4z7wS+C2oIjAlAAEoOpBgH2BhrCnKM0QEyjAG4mgNYkoQCcJAGOAcMAGgMiAV65gAeAqgIpAAGANADWAA6Aq4HngAaAIZCAT4DKDABIuYCkAOUCDLMAZYwAfQqBBzEDBYA+DhuSwLDsgKAa2ajBd5ZAo8CSjYBTiYEBk9IUgOwcuIA3ABMBhTgSAEWrEvMG+REAeBwLADIAPwABjYHBkIBzgH0bgC4AWALMgmjtLYBTuoqAIQAFmwB2AKKAN4ANgCA8gFUAE4FWvoF1AJQSgESMhksWGIBvAMgATQBDgB6BsyOpsoIIARuB9QCEBwV4gLvLwe2AgMi4BPOQsYCvd9WADIXUu5eZwqoCqdeaAC0YTQHMnM9UQAPH6k+yAdy/BZIiQImSwBQ5gBQQzSaNTFWSTYBpwGqKQK38AFtqwBI/wK37gK3rQK3sAK6280C0gK33AK3zxAAUEIAUD9SklKDArekArw5AEQAzAHCO147WTteO1k7XjtZO147WTteO1kDmChYI03AVU0oJqkKbV9GYewMpw3VRMk6ShPcYFJgMxPJLbgUwhXPJVcZPhq9JwYl5VUKDwUt1GYxCC00dhe9AEApaYNCY4ceMQpMHOhTklT5LRwAskujM7ANrRsWREEFSHXuYisWDwojAmSCAmJDXE6wXDchAqH4AmiZAmYKAp+FOBwMAmY8AmYnBG8EgAN/FAN+kzkHOXgYOYM6JCQCbB4CMjc4CwJtyAJtr/CLADRoRiwBaADfAOIASwYHmQyOAP8MwwAOtgJ3MAJ2o0ACeUxEAni7Hl3cRa9G9AJ8QAJ6yQJ9CgJ88UgBSH5kJQAsFklZSlwWGErNAtECAtDNSygDiFADh+dExpEzAvKiXQQDA69Lz0wuJgTQTU1NsAKLQAKK2cIcCB5EaAa4Ao44Ao5dQZiCAo7aAo5deVG1UzYLUtVUhgKT/AKTDQDqAB1VH1WwVdEHLBwplocy4nhnRTw6ApegAu+zWCKpAFomApaQApZ9nQCqWa1aCoJOADwClrYClk9cRVzSApnMApllXMtdCBoCnJw5wzqeApwXAp+cAp65iwAeEDIrEAKd8gKekwC2PmE1YfACntQCoG8BqgKeoCACnk+mY8lkKCYsAiewAiZ/AqD8AqBN2AKmMAKlzwKoAAB+AqfzaH1osgAESmodatICrOQCrK8CrWgCrQMCVx4CVd0CseLYAx9PbJgCsr4OArLpGGzhbWRtSWADJc4Ctl08QG6RAylGArhfArlIFgK5K3hwN3DiAr0aAy2zAzISAr6JcgMDM3ICvhtzI3NQAsPMAsMFc4N0TDZGdOEDPKgDPJsDPcACxX0CxkgCxhGKAshqUgLIRQLJUALJLwJkngLd03h6YniveSZL0QMYpGcDAmH1GfSVJXsMXpNevBICz2wCz20wTFTT9BSgAMeuAs90ASrrA04TfkwGAtwoAtuLAtJQA1JdA1NgAQIDVY2AikABzBfuYUZ2AILPg44C2sgC2d+EEYRKpz0DhqYAMANkD4ZyWvoAVgLfZgLeuXR4AuIw7RUB8zEoAfScAfLTiALr9ALpcXoAAur6AurlAPpIAboC7ooC652Wq5cEAu5AA4XhmHpw4XGiAvMEAGoDjheZlAL3FAORbwOSiAL3mQL52gL4Z5odmqy8OJsfA52EAv77ARwAOp8dn7QDBY4DpmsDptoA0sYDBmuhiaIGCgMMSgFgASACtgNGAJwEgLpoBgC8BGzAEowcggCEDC6kdjoAJAM0C5IKRoABZCgiAIzw3AYBLACkfng9ogigkgNmWAN6AEQCvrkEVqTGAwCsBRbAA+4iQkMCHR072jI2PTbUNsk2RjY5NvA23TZKNiU3EDcZN5I+RTxDRTBCJkK5VBYKFhZfwQCWygU3AJBRHpu+OytgNxa61A40GMsYjsn7BVwFXQVcBV0FaAVdBVwFXQVcBV0FXAVdBVwFXUsaCNyKAK4AAQUHBwKU7oICoW1e7jAEzgPxA+YDwgCkBFDAwADABKzAAOxFLhitA1UFTDeyPkM+bj51QkRCuwTQWWQ8X+0AWBYzsACNA8xwzAGm7EZ/QisoCTAbLDs6fnLfb8H2GccsbgFw13M1HAVkBW/Jxsm9CNRO8E8FDD0FBQw9FkcClOYCoMFegpDfADgcMiA2AJQACB8AsigKAIzIEAJKeBIApY5yPZQIAKQiHb4fvj5BKSRPQrZCOz0oXyxgOywfKAnGbgMClQaCAkILXgdeCD9IIGUgQj5fPoY+dT52Ao5CM0dAX9BTVG9SDzFwWTQAbxBzJF/lOEIQQglCCkKJIAls5AcClQICoKPMODEFxhi6KSAbiyfIRrMjtCgdWCAkPlFBIitCsEJRzAbMAV/OEyQzDg0OAQQEJ36i328/Mk9AybDJsQlq3tDRApUKAkFzXf1d/j9uALYP6hCoFgCTGD8kPsFKQiobrm0+zj0KSD8kPnVCRBwMDyJRTHFgMTJa5rwXQiQ2YfI/JD7BMEJEHGINTw4TOFlIRzwJO0icMQpyPyQ+wzJCRBv6DVgnKB01NgUKj2bwYzMqCoBkznBgEF+zYDIocwRIX+NgHj4HICNfh2C4CwdwFWpTG/lgUhYGAwRfv2Ts8mAaXzVgml/XYIJfuWC4HI1gUF9pYJZgMR6ilQHMAOwLAlDRefC0in4AXAEJA6PjCwc0IamOANMMCAECRQDFNRTZBgd+CwQlRA+r6+gLBDEFBnwUBXgKATIArwAGRAAHA3cDdAN2A3kDdwN9A3oDdQN7A30DfAN4A3oDfQAYEAAlAtYASwMAUAFsAHcKAHcAmgB3AHUAdQB2AHVu8UgAygDAAHcAdQB1AHYAdQALCgB3AAsAmgB3AAsCOwB3AAtu8UgAygDAAHgKAJoAdwB3AHUAdQB2AHUAeAB1AHUAdgB1bvFIAMoAwAALCgCaAHcACwB3AAsCOwB3AAtu8UgAygDAAH4ACwGgALcBpwC6AahdAu0COwLtbvFIAMoAwAALCgCaAu0ACwLtAAsCOwLtAAtu8UgAygDAA24ACwNvAAu0VsQAAzsAABCkjUIpAAsAUIusOggWcgMeBxVsGwL67U/2HlzmWOEeOgALASvuAAseAfpKUpnpGgYJDCIZM6YyARUE9ThqAD5iXQgnAJYJPnOzw0ZAEZxEKsIAkA4DhAHnTAIDxxUDK0lxCQlPYgIvIQVYJQBVqE1GakUAKGYiDToSBA1EtAYAXQJYAIF8GgMHRyAAIAjOe9YncekRAA0KACUrjwE7Ayc6AAYWAqaiKG4McEcqANoN3+Mg9TwCBhIkuCny+JwUQ29L008JluRxu3K+oAdqiHOqFH0AG5SUIfUJ5SxCGfxdipRzqTmT4V5Zb+r1Uo4Vm+NqSSEl2mNvR2JhIa8SpYO6ntdwFXHCWTCK8f2+Hxo7uiG3drDycAuKIMP5bhi06ACnqArH1rz4Rqg//lm6SgJGEVbF9xJHISaR6HxqxSnkw6shDnelHKNEfGUXSJRJ1GcsmtJw25xrZMDK9gXSm1/YMkdX4/6NKYOdtk/NQ3/NnDASjTc3fPjIjW/5sVfVObX2oTDWkr1dF9f3kxBsD3/3aQO8hPfRz+e0uEiJqt1161griu7gz8hDDwtpy+F+BWtefnKHZPAxcZoWbnznhJpy0e842j36bcNzGnIEusgGX0a8ZxsnjcSsPDZ09yZ36fCQbriHeQ72JRMILNl6ePPf2HWoVwgWAm1fb3V2sAY0+B6rAXqSwPBgseVmoqsBTSrm91+XasMYYySI8eeRxH3ZvHkMz3BQ5aJ3iUVbYPNM3/7emRtjlsMgv/9VyTsyt/mK+8fgWeT6SoFaclXqn42dAIsvAarF5vNNWHzKSkKQ/8Hfk5ZWK7r9yliOsooyBjRhfkHP4Q2DkWXQi6FG/9r/IwbmkV5T7JSopHKn1pJwm9tb5Ot0oyN1Z2mPpKXHTxx2nlK08fKk1hEYA8WgVVWL5lgx0iTv+KdojJeU23ZDjmiubXOxVXJKKi2Wjuh2HLZOFLiSC7Tls5SMh4f+Pj6xUSrNjFqLGehRNB8lC0QSLNmkJJx/wSG3MnjE9T1CkPwJI0wH2lfzwETIiVqUxg0dfu5q39Gt+hwdcxkhhNvQ4TyrBceof3Mhs/IxFci1HmHr4FMZgXEEczPiGCx0HRwzAqDq2j9AVm1kwN0mRVLWLylgtoPNapF5cY4Y1wJh/e0BBwZj44YgZrDNqvD/9Hv7GFYdUQeDJuQ3EWI4HaKqavU1XjC/n41kT4L79kqGq0kLhdTZvgP3TA3fS0ozVz+5piZsoOtIvBUFoMKbNcmBL6YxxaUAusHB38XrS8dQMnQwJfUUkpRoGr5AUeWicvBTzyK9g77+yCkf5PAysL7r/JjcZgrbvRpMW9iyaxZvKO6ceZN2EwIxKwVFPuvFuiEPGCoagbMo+SpydLrXqBzNCDGFCrO/rkcwa2xhokQZ5CdZ0AsU3JfSqJ6n5I14YA+P/uAgfhPU84Tlw7cEFfp7AEE8ey4sP12PTt4Cods1GRgDOB5xvyiR5m+Bx8O5nBCNctU8BevfV5A08x6RHd5jcwPTMDSZJOedIZ1cGQ704lxbAzqZOP05ZxaOghzSdvFBHYqomATARyAADK4elP8Ly3IrUZKfWh23Xy20uBUmLS4Pfagu9+oyVa2iPgqRP3F2CTUsvJ7+RYnN8fFZbU/HVvxvcFFDKkiTqV5UBZ3Gz54JAKByi9hkKMZJvuGgcSYXFmw08UyoQyVdfTD1/dMkCHXcTGAKeROgArsvmRrQTLUOXioOHGK2QkjHuoYFgXciZoTJd6Fs5q1QX1G+p/e26hYsEf7QZD1nnIyl/SFkNtYYmmBhpBrxl9WbY0YpHWRuw2Ll/tj9mD8P4snVzJl4F9J+1arVeTb9E5r2ILH04qStjxQNwn3m4YNqxmaNbLAqW2TN6LidwuJRqS+NXbtqxoeDXpxeGWmxzSkWxjkyCkX4NQRme6q5SAcC+M7+9ETfA/EwrzQajKakCwYyeunP6ZFlxU2oMEn1Pz31zeStW74G406ZJFCl1wAXIoUKkWotYEpOuXB1uVNxJ63dpJEqfxBeptwIHNrPz8BllZoIcBoXwgfJ+8VAUnVPvRvexnw0Ma/WiGYuJO5y8QTvEYBigFmhUxY5RqzE8OcywN/8m4UYrlaniJO75XQ6KSo9+tWHlu+hMi0UVdiKQp7NelnoZUzNaIyBPVeOwK6GNp+FfHuPOoyhaWuNvTYFkvxscMQWDh+zeFCFkgwbXftiV23ywJ4+uwRqmg9k3KzwIQpzppt8DBBOMbrqwQM5Gb05sEwdKzMiAqOloaA/lr0KA+1pr0/+HiWoiIjHA/wir2nIuS3PeU/ji3O6ZwoxcR1SZ9FhtLC5S0FIzFhbBWcGVP/KpxOPSiUoAdWUpqKH++6Scz507iCcxYI6rdMBICPJZea7OcmeFw5mObJSiqpjg2UoWNIs+cFhyDSt6geV5qgi3FunmwwDoGSMgerFOZGX1m0dMCYo5XOruxO063dwENK9DbnVM9wYFREzh4vyU1WYYJ/LRRp6oxgjqP/X5a8/4Af6p6NWkQferzBmXme0zY/4nwMJm/wd1tIqSwGz+E3xPEAOoZlJit3XddD7/BT1pllzOx+8bmQtANQ/S6fZexc6qi3W+Q2xcmXTUhuS5mpHQRvcxZUN0S5+PL9lXWUAaRZhEH8hTdAcuNMMCuVNKTEGtSUKNi3O6KhSaTzck8csZ2vWRZ+d7mW8c4IKwXIYd25S/zIftPkwPzufjEvOHWVD1m+FjpDVUTV0DGDuHj6QnaEwLu/dEgdLQOg9E1Sro9XHJ8ykLAwtPu+pxqKDuFexqON1sKQm7rwbE1E68UCfA/erovrTCG+DBSNg0l4goDQvZN6uNlbyLpcZAwj2UclycvLpIZMgv4yRlpb3YuMftozorbcGVHt/VeDV3+Fdf1TP0iuaCsPi2G4XeGhsyF1ubVDxkoJhmniQ0/jSg/eYML9KLfnCFgISWkp91eauR3IQvED0nAPXK+6hPCYs+n3+hCZbiskmVMG2da+0EsZPonUeIY8EbfusQXjsK/eFDaosbPjEfQS0RKG7yj5GG69M7MeO1HmiUYocgygJHL6M1qzUDDwUSmr99V7Sdr2F3JjQAJY+F0yH33Iv3+C9M38eML7gTgmNu/r2bUMiPvpYbZ6v1/IaESirBHNa7mPKn4dEmYg7v/+HQgPN1G79jBQ1+soydfDC2r+h2Bl/KIc5KjMK7OH6nb1jLsNf0EHVe2KBiE51ox636uyG6Lho0t3J34L5QY/ilE3mikaF4HKXG1mG1rCevT1Vv6GavltxoQe/bMrpZvRggnBxSEPEeEzkEdOxTnPXHVjUYdw8JYvjB/o7Eegc3Ma+NUxLLnsK0kJlinPmUHzHGtrk5+CAbVzFOBqpyy3QVUnzTDfC/0XD94/okH+OB+i7g9lolhWIjSnfIb+Eq43ZXOWmwvjyV/qqD+t0e+7mTEM74qP/Ozt8nmC7mRpyu63OB4KnUzFc074SqoyPUAgM+/TJGFo6T44EHnQU4X4z6qannVqgw/U7zCpwcmXV1AubIrvOmkKHazJAR55ePjp5tLBsN8vAqs3NAHdcEHOR2xQ0lsNAFzSUuxFQCFYvXLZJdOj9p4fNq6p0HBGUik2YzaI4xySy91KzhQ0+q1hjxvImRwPRf76tChlRkhRCi74NXZ9qUNeIwP+s5p+3m5nwPdNOHgSLD79n7O9m1n1uDHiMntq4nkYwV5OZ1ENbXxFd4PgrlvavZsyUO4MqYlqqn1O8W/I1dEZq5dXhrbETLaZIbC2Kj/Aa/QM+fqUOHdf0tXAQ1huZ3cmWECWSXy/43j35+Mvq9xws7JKseriZ1pEWKc8qlzNrGPUGcVgOa9cPJYIJsGnJTAUsEcDOEVULO5x0rXBijc1lgXEzQQKhROf8zIV82w8eswc78YX11KYLWQRcgHNJElBxfXr72lS2RBSl07qTKorO2uUDZr3sFhYsvnhLZn0A94KRzJ/7DEGIAhW5ZWFpL8gEwu1aLA9MuWZzNwl8Oze9Y+bX+v9gywRVnoB5I/8kXTXU3141yRLYrIOOz6SOnyHNy4SieqzkBXharjfjqq1q6tklaEbA8Qfm2DaIPs7OTq/nvJBjKfO2H9bH2cCMh1+5gspfycu8f/cuuRmtDjyqZ7uCIMyjdV3a+p3fqmXsRx4C8lujezIFHnQiVTXLXuI1XrwN3+siYYj2HHTvESUx8DlOTXpak9qFRK+L3mgJ1WsD7F4cu1aJoFoYQnu+wGDMOjJM3kiBQWHCcvhJ/HRdxodOQp45YZaOTA22Nb4XKCVxqkbwMYFhzYQYIAnCW8FW14uf98jhUG2zrKhQQ0q0CEq0t5nXyvUyvR8DvD69LU+g3i+HFWQMQ8PqZuHD+sNKAV0+M6EJC0szq7rEr7B5bQ8BcNHzvDMc9eqB5ZCQdTf80Obn4uzjwpYU7SISdtV0QGa9D3Wrh2BDQtpBKxaNFV+/Cy2P/Sv+8s7Ud0Fd74X4+o/TNztWgETUapy+majNQ68Lq3ee0ZO48VEbTZYiH1Co4OlfWef82RWeyUXo7woM03PyapGfikTnQinoNq5z5veLpeMV3HCAMTaZmA1oGLAn7XS3XYsz+XK7VMQsc4XKrmDXOLU/pSXVNUq8dIqTba///3x6LiLS6xs1xuCAYSfcQ3+rQgmu7uvf3THKt5Ooo97TqcbRqxx7EASizaQCBQllG/rYxVapMLgtLbZS64w1MDBMXX+PQpBKNwqUKOf2DDRDUXQf9EhOS0Qj4nTmlA8dzSLz/G1d+Ud8MTy/6ghhdiLpeerGY/UlDOfiuqFsMUU5/UYlP+BAmgRLuNpvrUaLlVkrqDievNVEAwF+4CoM1MZTmjxjJMsKJq+u8Zd7tNCUFy6LiyYXRJQ4VyvEQFFaCGKsxIwQkk7EzZ6LTJq2hUuPhvAW+gQnSG6J+MszC+7QCRHcnqDdyNRJ6T9xyS87A6MDutbzKGvGktpbXqtzWtXb9HsfK2cBMomjN9a4y+TaJLnXxAeX/HWzmf4cR4vALt/P4w4qgKY04ml4ZdLOinFYS6cup3G/1ie4+t1eOnpBNlqGqs75ilzkT4+DsZQxNvaSKJ//6zIbbk/M7LOhFmRc/1R+kBtz7JFGdZm/COotIdvQoXpTqP/1uqEUmCb/QWoGLMwO5ANcHzxdY48IGP5+J+zKOTBFZ4Pid+GTM+Wq12MV/H86xEJptBa6T+p3kgpwLedManBHC2GgNrFpoN2xnrMz9WFWX/8/ygSBkavq2Uv7FdCsLEYLu9LLIvAU0bNRDtzYl+/vXmjpIvuJFYjmI0im6QEYqnIeMsNjXG4vIutIGHijeAG/9EDBozKV5cldkHbLxHh25vT+ZEzbhXlqvpzKJwcEgfNwLAKFeo0/pvEE10XDB+EXRTXtSzJozQKFFAJhMxYkVaCW+E9AL7tMeU8acxidHqzb6lX4691UsDpy/LLRmT+epgW56+5Cw8tB4kMUv6s9lh3eRKbyGs+H/4mQMaYzPTf2OOdokEn+zzgvoD3FqNKk8QqGAXVsqcGdXrT62fSPkR2vROFi68A6se86UxRUk4cajfPyCC4G5wDhD+zNq4jodQ4u4n/m37Lr36n4LIAAsVr02dFi9AiwA81MYs2rm4eDlDNmdMRvEKRHfBwW5DdMNp0jPFZMeARqF/wL4XBfd+EMLBfMzpH5GH6NaW+1vrvMdg+VxDzatk3MXgO3ro3P/DpcC6+Mo4MySJhKJhSR01SGGGp5hPWmrrUgrv3lDnP+HhcI3nt3YqBoVAVTBAQT5iuhTg8nvPtd8ZeYj6w1x6RqGUBrSku7+N1+BaasZvjTk64RoIDlL8brpEcJx3OmY7jLoZsswdtmhfC/G21llXhITOwmvRDDeTTPbyASOa16cF5/A1fZAidJpqju3wYAy9avPR1ya6eNp9K8XYrrtuxlqi+bDKwlfrYdR0RRiKRVTLOH85+ZY7XSmzRpfZBJjaTa81VDcJHpZnZnSQLASGYW9l51ZV/h7eVzTi3Hv6hUsgc/51AqJRTkpbFVLXXszoBL8nBX0u/0jBLT8nH+fJePbrwURT58OY+UieRjd1vs04w0VG5VN2U6MoGZkQzKN/ptz0Q366dxoTGmj7i1NQGHi9GgnquXFYdrCfZBmeb7s0T6yrdlZH5cZuwHFyIJ/kAtGsTg0xH5taAAq44BAk1CPk9KVVbqQzrCUiFdF/6gtlPQ8bHHc1G1W92MXGZ5HEHftyLYs8mbD/9xYRUWkHmlM0zC2ilJlnNgV4bfALpQghxOUoZL7VTqtCHIaQSXm+YUMnpkXybnV+A6xlm2CVy8fn0Xlm2XRa0+zzOa21JWWmixfiPMSCZ7qA4rS93VN3pkpF1s5TonQjisHf7iU9ZGvUPOAKZcR1pbeVf/Ul7OhepGCaId9wOtqo7pJ7yLcBZ0pFkOF28y4zEI/kcUNmutBHaQpBdNM8vjCS6HZRokkeo88TBAjGyG7SR+6vUgTcyK9Imalj0kuxz0wmK+byQU11AiJFk/ya5dNduRClcnU64yGu/ieWSeOos1t3ep+RPIWQ2pyTYVbZltTbsb7NiwSi3AV+8KLWk7LxCnfZUetEM8ThnsSoGH38/nyAwFguJp8FjvlHtcWZuU4hPva0rHfr0UhOOJ/F6vS62FW7KzkmRll2HEc7oUq4fyi5T70Vl7YVIfsPHUCdHesf9Lk7WNVWO75JDkYbMI8TOW8JKVtLY9d6UJRITO8oKo0xS+o99Yy04iniGHAaGj88kEWgwv0OrHdY/nr76DOGNS59hXCGXzTKUvDl9iKpLSWYN1lxIeyywdNpTkhay74w2jFT6NS8qkjo5CxA1yfSYwp6AJIZNKIeEK5PJAW7ORgWgwp0VgzYpqovMrWxbu+DGZ6Lhie1RAqpzm8VUzKJOH3mCzWuTOLsN3VT/dv2eeYe9UjbR8YTBsLz7q60VN1sU51k+um1f8JxD5pPhbhSC8rRaB454tmh6YUWrJI3+GWY0qeWioj/tbkYITOkJaeuGt4JrJvHA+l0Gu7kY7XOaa05alMnRWVCXqFgLIwSY4uF59Ue5SU4QKuc/HamDxbr0x6csCetXGoP7Qn1Bk/J9DsynO/UD6iZ1Hyrz+jit0hDCwi/E9OjgKTbB3ZQKQ/0ZOvevfNHG0NK4Aj3Cp7NpRk07RT1i/S0EL93Ag8GRgKI9CfpajKyK6+Jj/PI1KO5/85VAwz2AwzP8FTBb075IxCXv6T9RVvWT2tUaqxDS92zrGUbWzUYk9mSs82pECH+fkqsDt93VW++4YsR/dHCYcQSYTO/KaBMDj9LSD/J/+z20Kq8XvZUAIHtm9hRPP3ItbuAu2Hm5lkPs92pd7kCxgRs0xOVBnZ13ccdA0aunrwv9SdqElJRC3g+oCu+nXyCgmXUs9yMjTMAIHfxZV+aPKcZeUBWt057Xo85Ks1Ir5gzEHCWqZEhrLZMuF11ziGtFQUds/EESajhagzcKsxamcSZxGth4UII+adPhQkUnx2WyN+4YWR+r3f8MnkyGFuR4zjzxJS8WsQYR5PTyRaD9ixa6Mh741nBHbzfjXHskGDq179xaRNrCIB1z1xRfWfjqw2pHc1zk9xlPpL8sQWAIuETZZhbnmL54rceXVNRvUiKrrqIkeogsl0XXb17ylNb0f4GA9Wd44vffEG8FSZGHEL2fbaTGRcSiCeA8PmA/f6Hz8HCS76fXUHwgwkzSwlI71ekZ7Fapmlk/KC+Hs8hUcw3N2LN5LhkVYyizYFl/uPeVP5lsoJHhhfWvvSWruCUW1ZcJOeuTbrDgywJ/qG07gZJplnTvLcYdNaH0KMYOYMGX+rB4NGPFmQsNaIwlWrfCezxre8zXBrsMT+edVLbLqN1BqB76JH4BvZTqUIMfGwPGEn+EnmTV86fPBaYbFL3DFEhjB45CewkXEAtJxk4/Ms2pPXnaRqdky0HOYdcUcE2zcXq4vaIvW2/v0nHFJH2XXe22ueDmq/18XGtELSq85j9X8q0tcNSSKJIX8FTuJF/Pf8j5PhqG2u+osvsLxYrvvfeVJL+4tkcXcr9JV7v0ERmj/X6fM3NC4j6dS1+9Umr2oPavqiAydTZPLMNRGY23LO9zAVDly7jD+70G5TPPLdhRIl4WxcYjLnM+SNcJ26FOrkrISUtPObIz5Zb3AG612krnpy15RMW+1cQjlnWFI6538qky9axd2oJmHIHP08KyP0ubGO+TQNOYuv2uh17yCIvR8VcStw7o1g0NM60sk+8Tq7YfIBJrtp53GkvzXH7OA0p8/n/u1satf/VJhtR1l8Wa6Gmaug7haSpaCaYQax6ta0mkutlb+eAOSG1aobM81D9A4iS1RRlzBBoVX6tU1S6WE2N9ORY6DfeLRC4l9Rvr5h95XDWB2mR1d4WFudpsgVYwiTwT31ljskD8ZyDOlm5DkGh9N/UB/0AI5Xvb8ZBmai2hQ4BWMqFwYnzxwB26YHSOv9WgY3JXnvoN+2R4rqGVh/LLDMtpFP+SpMGJNWvbIl5SOodbCczW2RKleksPoUeGEzrjtKHVdtZA+kfqO+rVx/iclCqwoopepvJpSTDjT+b9GWylGRF8EDbGlw6eUzmJM95Ovoz+kwLX3c2fTjFeYEsE7vUZm3mqdGJuKh2w9/QGSaqRHs99aScGOdDqkFcACoqdbBoQqqjamhH6Q9ng39JCg3lrGJwd50Qk9ovnqBTr8MME7Ps2wiVfygUmPoUBJJfJWX5Nda0nuncbFkA=="))}const Rh=Ww();new Set(of(Rh)),new Set(of(Rh)),Qw(Rh),Yw(Rh);const Xw=new Uint8Array(32);Xw.fill(0);const Zw=new Uint8Array(32);Zw.fill(0),Dr.from(-1);const t5=Dr.from(0),e5=Dr.from(1);Dr.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),sf(e5.toHexString(),32),sf(t5.toHexString(),32);var mn={},xe={},ka=Ug;function Ug(r,t){if(!r)throw new Error(t||"Assertion failed")}Ug.equal=function(r,t,e){if(r!=t)throw new Error(e||"Assertion failed: "+r+" != "+t)};var Du={exports:{}};typeof Object.create=="function"?Du.exports=function(r,t){t&&(r.super_=t,r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:Du.exports=function(r,t){if(t){r.super_=t;var e=function(){};e.prototype=t.prototype,r.prototype=new e,r.prototype.constructor=r}};var r5=ka,i5=Du.exports;xe.inherits=i5;function n5(r,t){return(r.charCodeAt(t)&64512)!==55296||t<0||t+1>=r.length?!1:(r.charCodeAt(t+1)&64512)===56320}function s5(r,t){if(Array.isArray(r))return r.slice();if(!r)return[];var e=[];if(typeof r=="string")if(t){if(t==="hex")for(r=r.replace(/[^a-z0-9]+/ig,""),r.length%2!==0&&(r="0"+r),s=0;s<r.length;s+=2)e.push(parseInt(r[s]+r[s+1],16))}else for(var i=0,s=0;s<r.length;s++){var o=r.charCodeAt(s);o<128?e[i++]=o:o<2048?(e[i++]=o>>6|192,e[i++]=o&63|128):n5(r,s)?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[i++]=o>>18|240,e[i++]=o>>12&63|128,e[i++]=o>>6&63|128,e[i++]=o&63|128):(e[i++]=o>>12|224,e[i++]=o>>6&63|128,e[i++]=o&63|128)}else for(s=0;s<r.length;s++)e[s]=r[s]|0;return e}xe.toArray=s5;function o5(r){for(var t="",e=0;e<r.length;e++)t+=Fg(r[e].toString(16));return t}xe.toHex=o5;function zg(r){var t=r>>>24|r>>>8&65280|r<<8&16711680|(r&255)<<24;return t>>>0}xe.htonl=zg;function a5(r,t){for(var e="",i=0;i<r.length;i++){var s=r[i];t==="little"&&(s=zg(s)),e+=Lg(s.toString(16))}return e}xe.toHex32=a5;function Fg(r){return r.length===1?"0"+r:r}xe.zero2=Fg;function Lg(r){return r.length===7?"0"+r:r.length===6?"00"+r:r.length===5?"000"+r:r.length===4?"0000"+r:r.length===3?"00000"+r:r.length===2?"000000"+r:r.length===1?"0000000"+r:r}xe.zero8=Lg;function h5(r,t,e,i){var s=e-t;r5(s%4===0);for(var o=new Array(s/4),u=0,g=t;u<o.length;u++,g+=4){var w;i==="big"?w=r[g]<<24|r[g+1]<<16|r[g+2]<<8|r[g+3]:w=r[g+3]<<24|r[g+2]<<16|r[g+1]<<8|r[g],o[u]=w>>>0}return o}xe.join32=h5;function f5(r,t){for(var e=new Array(r.length*4),i=0,s=0;i<r.length;i++,s+=4){var o=r[i];t==="big"?(e[s]=o>>>24,e[s+1]=o>>>16&255,e[s+2]=o>>>8&255,e[s+3]=o&255):(e[s+3]=o>>>24,e[s+2]=o>>>16&255,e[s+1]=o>>>8&255,e[s]=o&255)}return e}xe.split32=f5;function c5(r,t){return r>>>t|r<<32-t}xe.rotr32=c5;function u5(r,t){return r<<t|r>>>32-t}xe.rotl32=u5;function d5(r,t){return r+t>>>0}xe.sum32=d5;function l5(r,t,e){return r+t+e>>>0}xe.sum32_3=l5;function p5(r,t,e,i){return r+t+e+i>>>0}xe.sum32_4=p5;function g5(r,t,e,i,s){return r+t+e+i+s>>>0}xe.sum32_5=g5;function m5(r,t,e,i){var s=r[t],o=r[t+1],u=i+o>>>0,g=(u<i?1:0)+e+s;r[t]=g>>>0,r[t+1]=u}xe.sum64=m5;function v5(r,t,e,i){var s=t+i>>>0,o=(s<t?1:0)+r+e;return o>>>0}xe.sum64_hi=v5;function b5(r,t,e,i){var s=t+i;return s>>>0}xe.sum64_lo=b5;function y5(r,t,e,i,s,o,u,g){var w=0,A=t;A=A+i>>>0,w+=A<t?1:0,A=A+o>>>0,w+=A<o?1:0,A=A+g>>>0,w+=A<g?1:0;var S=r+e+s+u+w;return S>>>0}xe.sum64_4_hi=y5;function w5(r,t,e,i,s,o,u,g){var w=t+i+o+g;return w>>>0}xe.sum64_4_lo=w5;function A5(r,t,e,i,s,o,u,g,w,A){var S=0,x=t;x=x+i>>>0,S+=x<t?1:0,x=x+o>>>0,S+=x<o?1:0,x=x+g>>>0,S+=x<g?1:0,x=x+A>>>0,S+=x<A?1:0;var N=r+e+s+u+w+S;return N>>>0}xe.sum64_5_hi=A5;function _5(r,t,e,i,s,o,u,g,w,A){var S=t+i+o+g+A;return S>>>0}xe.sum64_5_lo=_5;function M5(r,t,e){var i=t<<32-e|r>>>e;return i>>>0}xe.rotr64_hi=M5;function E5(r,t,e){var i=r<<32-e|t>>>e;return i>>>0}xe.rotr64_lo=E5;function I5(r,t,e){return r>>>e}xe.shr64_hi=I5;function S5(r,t,e){var i=r<<32-e|t>>>e;return i>>>0}xe.shr64_lo=S5;var ko={},_p=xe,x5=ka;function Ch(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}ko.BlockHash=Ch,Ch.prototype.update=function(r,t){if(r=_p.toArray(r,t),this.pending?this.pending=this.pending.concat(r):this.pending=r,this.pendingTotal+=r.length,this.pending.length>=this._delta8){r=this.pending;var e=r.length%this._delta8;this.pending=r.slice(r.length-e,r.length),this.pending.length===0&&(this.pending=null),r=_p.join32(r,0,r.length-e,this.endian);for(var i=0;i<r.length;i+=this._delta32)this._update(r,i,i+this._delta32)}return this},Ch.prototype.digest=function(r){return this.update(this._pad()),x5(this.pending===null),this._digest(r)},Ch.prototype._pad=function(){var r=this.pendingTotal,t=this._delta8,e=t-(r+this.padLength)%t,i=new Array(e+this.padLength);i[0]=128;for(var s=1;s<e;s++)i[s]=0;if(r<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=r>>>24&255,i[s++]=r>>>16&255,i[s++]=r>>>8&255,i[s++]=r&255}else for(i[s++]=r&255,i[s++]=r>>>8&255,i[s++]=r>>>16&255,i[s++]=r>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,o=8;o<this.padLength;o++)i[s++]=0;return i};var mo={},Tn={},P5=xe,In=P5.rotr32;function N5(r,t,e,i){if(r===0)return $g(t,e,i);if(r===1||r===3)return Hg(t,e,i);if(r===2)return jg(t,e,i)}Tn.ft_1=N5;function $g(r,t,e){return r&t^~r&e}Tn.ch32=$g;function jg(r,t,e){return r&t^r&e^t&e}Tn.maj32=jg;function Hg(r,t,e){return r^t^e}Tn.p32=Hg;function R5(r){return In(r,2)^In(r,13)^In(r,22)}Tn.s0_256=R5;function C5(r){return In(r,6)^In(r,11)^In(r,25)}Tn.s1_256=C5;function O5(r){return In(r,7)^In(r,18)^r>>>3}Tn.g0_256=O5;function B5(r){return In(r,17)^In(r,19)^r>>>10}Tn.g1_256=B5;var No=xe,T5=ko,q5=Tn,Wc=No.rotl32,aa=No.sum32,D5=No.sum32_5,k5=q5.ft_1,Kg=T5.BlockHash,U5=[1518500249,1859775393,2400959708,3395469782];function An(){if(!(this instanceof An))return new An;Kg.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}No.inherits(An,Kg);var z5=An;An.blockSize=512,An.outSize=160,An.hmacStrength=80,An.padLength=64,An.prototype._update=function(r,t){for(var e=this.W,i=0;i<16;i++)e[i]=r[t+i];for(;i<e.length;i++)e[i]=Wc(e[i-3]^e[i-8]^e[i-14]^e[i-16],1);var s=this.h[0],o=this.h[1],u=this.h[2],g=this.h[3],w=this.h[4];for(i=0;i<e.length;i++){var A=~~(i/20),S=D5(Wc(s,5),k5(A,o,u,g),w,e[i],U5[A]);w=g,g=u,u=Wc(o,30),o=s,s=S}this.h[0]=aa(this.h[0],s),this.h[1]=aa(this.h[1],o),this.h[2]=aa(this.h[2],u),this.h[3]=aa(this.h[3],g),this.h[4]=aa(this.h[4],w)},An.prototype._digest=function(r){return r==="hex"?No.toHex32(this.h,"big"):No.split32(this.h,"big")};var Ro=xe,F5=ko,Uo=Tn,L5=ka,Ji=Ro.sum32,$5=Ro.sum32_4,j5=Ro.sum32_5,H5=Uo.ch32,K5=Uo.maj32,Q5=Uo.s0_256,J5=Uo.s1_256,V5=Uo.g0_256,G5=Uo.g1_256,Qg=F5.BlockHash,Y5=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function _n(){if(!(this instanceof _n))return new _n;Qg.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=Y5,this.W=new Array(64)}Ro.inherits(_n,Qg);var Jg=_n;_n.blockSize=512,_n.outSize=256,_n.hmacStrength=192,_n.padLength=64,_n.prototype._update=function(r,t){for(var e=this.W,i=0;i<16;i++)e[i]=r[t+i];for(;i<e.length;i++)e[i]=$5(G5(e[i-2]),e[i-7],V5(e[i-15]),e[i-16]);var s=this.h[0],o=this.h[1],u=this.h[2],g=this.h[3],w=this.h[4],A=this.h[5],S=this.h[6],x=this.h[7];for(L5(this.k.length===e.length),i=0;i<e.length;i++){var N=j5(x,J5(w),H5(w,A,S),this.k[i],e[i]),R=Ji(Q5(s),K5(s,o,u));x=S,S=A,A=w,w=Ji(g,N),g=u,u=o,o=s,s=Ji(N,R)}this.h[0]=Ji(this.h[0],s),this.h[1]=Ji(this.h[1],o),this.h[2]=Ji(this.h[2],u),this.h[3]=Ji(this.h[3],g),this.h[4]=Ji(this.h[4],w),this.h[5]=Ji(this.h[5],A),this.h[6]=Ji(this.h[6],S),this.h[7]=Ji(this.h[7],x)},_n.prototype._digest=function(r){return r==="hex"?Ro.toHex32(this.h,"big"):Ro.split32(this.h,"big")};var ku=xe,Vg=Jg;function ts(){if(!(this instanceof ts))return new ts;Vg.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}ku.inherits(ts,Vg);var W5=ts;ts.blockSize=512,ts.outSize=224,ts.hmacStrength=192,ts.padLength=64,ts.prototype._digest=function(r){return r==="hex"?ku.toHex32(this.h.slice(0,7),"big"):ku.split32(this.h.slice(0,7),"big")};var ti=xe,X5=ko,Z5=ka,Sn=ti.rotr64_hi,xn=ti.rotr64_lo,Gg=ti.shr64_hi,Yg=ti.shr64_lo,vs=ti.sum64,Xc=ti.sum64_hi,Zc=ti.sum64_lo,t7=ti.sum64_4_hi,e7=ti.sum64_4_lo,r7=ti.sum64_5_hi,i7=ti.sum64_5_lo,Wg=X5.BlockHash,n7=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function en(){if(!(this instanceof en))return new en;Wg.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=n7,this.W=new Array(160)}ti.inherits(en,Wg);var Xg=en;en.blockSize=1024,en.outSize=512,en.hmacStrength=192,en.padLength=128,en.prototype._prepareBlock=function(r,t){for(var e=this.W,i=0;i<32;i++)e[i]=r[t+i];for(;i<e.length;i+=2){var s=g7(e[i-4],e[i-3]),o=m7(e[i-4],e[i-3]),u=e[i-14],g=e[i-13],w=l7(e[i-30],e[i-29]),A=p7(e[i-30],e[i-29]),S=e[i-32],x=e[i-31];e[i]=t7(s,o,u,g,w,A,S,x),e[i+1]=e7(s,o,u,g,w,A,S,x)}},en.prototype._update=function(r,t){this._prepareBlock(r,t);var e=this.W,i=this.h[0],s=this.h[1],o=this.h[2],u=this.h[3],g=this.h[4],w=this.h[5],A=this.h[6],S=this.h[7],x=this.h[8],N=this.h[9],R=this.h[10],O=this.h[11],z=this.h[12],L=this.h[13],H=this.h[14],rt=this.h[15];Z5(this.k.length===e.length);for(var ht=0;ht<e.length;ht+=2){var Z=H,et=rt,at=u7(x,N),ft=d7(x,N),ct=s7(x,N,R,O,z),mt=o7(x,N,R,O,z,L),se=this.k[ht],T=this.k[ht+1],y=e[ht],a=e[ht+1],f=r7(Z,et,at,ft,ct,mt,se,T,y,a),d=i7(Z,et,at,ft,ct,mt,se,T,y,a);Z=f7(i,s),et=c7(i,s),at=a7(i,s,o,u,g),ft=h7(i,s,o,u,g,w);var v=Xc(Z,et,at,ft),b=Zc(Z,et,at,ft);H=z,rt=L,z=R,L=O,R=x,O=N,x=Xc(A,S,f,d),N=Zc(S,S,f,d),A=g,S=w,g=o,w=u,o=i,u=s,i=Xc(f,d,v,b),s=Zc(f,d,v,b)}vs(this.h,0,i,s),vs(this.h,2,o,u),vs(this.h,4,g,w),vs(this.h,6,A,S),vs(this.h,8,x,N),vs(this.h,10,R,O),vs(this.h,12,z,L),vs(this.h,14,H,rt)},en.prototype._digest=function(r){return r==="hex"?ti.toHex32(this.h,"big"):ti.split32(this.h,"big")};function s7(r,t,e,i,s){var o=r&e^~r&s;return o<0&&(o+=4294967296),o}function o7(r,t,e,i,s,o){var u=t&i^~t&o;return u<0&&(u+=4294967296),u}function a7(r,t,e,i,s){var o=r&e^r&s^e&s;return o<0&&(o+=4294967296),o}function h7(r,t,e,i,s,o){var u=t&i^t&o^i&o;return u<0&&(u+=4294967296),u}function f7(r,t){var e=Sn(r,t,28),i=Sn(t,r,2),s=Sn(t,r,7),o=e^i^s;return o<0&&(o+=4294967296),o}function c7(r,t){var e=xn(r,t,28),i=xn(t,r,2),s=xn(t,r,7),o=e^i^s;return o<0&&(o+=4294967296),o}function u7(r,t){var e=Sn(r,t,14),i=Sn(r,t,18),s=Sn(t,r,9),o=e^i^s;return o<0&&(o+=4294967296),o}function d7(r,t){var e=xn(r,t,14),i=xn(r,t,18),s=xn(t,r,9),o=e^i^s;return o<0&&(o+=4294967296),o}function l7(r,t){var e=Sn(r,t,1),i=Sn(r,t,8),s=Gg(r,t,7),o=e^i^s;return o<0&&(o+=4294967296),o}function p7(r,t){var e=xn(r,t,1),i=xn(r,t,8),s=Yg(r,t,7),o=e^i^s;return o<0&&(o+=4294967296),o}function g7(r,t){var e=Sn(r,t,19),i=Sn(t,r,29),s=Gg(r,t,6),o=e^i^s;return o<0&&(o+=4294967296),o}function m7(r,t){var e=xn(r,t,19),i=xn(t,r,29),s=Yg(r,t,6),o=e^i^s;return o<0&&(o+=4294967296),o}var Uu=xe,Zg=Xg;function es(){if(!(this instanceof es))return new es;Zg.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Uu.inherits(es,Zg);var v7=es;es.blockSize=1024,es.outSize=384,es.hmacStrength=192,es.padLength=128,es.prototype._digest=function(r){return r==="hex"?Uu.toHex32(this.h.slice(0,12),"big"):Uu.split32(this.h.slice(0,12),"big")},mo.sha1=z5,mo.sha224=W5,mo.sha256=Jg,mo.sha384=v7,mo.sha512=Xg;var tm={},js=xe,b7=ko,Oh=js.rotl32,Mp=js.sum32,ha=js.sum32_3,Ep=js.sum32_4,em=b7.BlockHash;function vn(){if(!(this instanceof vn))return new vn;em.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}js.inherits(vn,em),tm.ripemd160=vn,vn.blockSize=512,vn.outSize=160,vn.hmacStrength=192,vn.padLength=64,vn.prototype._update=function(r,t){for(var e=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],u=this.h[4],g=e,w=i,A=s,S=o,x=u,N=0;N<80;N++){var R=Mp(Oh(Ep(e,Ip(N,i,s,o),r[A7[N]+t],y7(N)),M7[N]),u);e=u,u=o,o=Oh(s,10),s=i,i=R,R=Mp(Oh(Ep(g,Ip(79-N,w,A,S),r[_7[N]+t],w7(N)),E7[N]),x),g=x,x=S,S=Oh(A,10),A=w,w=R}R=ha(this.h[1],s,S),this.h[1]=ha(this.h[2],o,x),this.h[2]=ha(this.h[3],u,g),this.h[3]=ha(this.h[4],e,w),this.h[4]=ha(this.h[0],i,A),this.h[0]=R},vn.prototype._digest=function(r){return r==="hex"?js.toHex32(this.h,"little"):js.split32(this.h,"little")};function Ip(r,t,e,i){return r<=15?t^e^i:r<=31?t&e|~t&i:r<=47?(t|~e)^i:r<=63?t&i|e&~i:t^(e|~i)}function y7(r){return r<=15?0:r<=31?1518500249:r<=47?1859775393:r<=63?2400959708:2840853838}function w7(r){return r<=15?1352829926:r<=31?1548603684:r<=47?1836072691:r<=63?2053994217:0}var A7=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],_7=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],M7=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],E7=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],I7=xe,S7=ka;function Mo(r,t,e){if(!(this instanceof Mo))return new Mo(r,t,e);this.Hash=r,this.blockSize=r.blockSize/8,this.outSize=r.outSize/8,this.inner=null,this.outer=null,this._init(I7.toArray(t,e))}var x7=Mo;Mo.prototype._init=function(r){r.length>this.blockSize&&(r=new this.Hash().update(r).digest()),S7(r.length<=this.blockSize);for(var t=r.length;t<this.blockSize;t++)r.push(0);for(t=0;t<r.length;t++)r[t]^=54;for(this.inner=new this.Hash().update(r),t=0;t<r.length;t++)r[t]^=106;this.outer=new this.Hash().update(r)},Mo.prototype.update=function(r,t){return this.inner.update(r,t),this},Mo.prototype.digest=function(r){return this.outer.update(this.inner.digest()),this.outer.digest(r)},function(r){var t=r;t.utils=xe,t.common=ko,t.sha=mo,t.ripemd=tm,t.hmac=x7,t.sha1=t.sha.sha1,t.sha256=t.sha.sha256,t.sha224=t.sha.sha224,t.sha384=t.sha.sha384,t.sha512=t.sha.sha512,t.ripemd160=t.ripemd.ripemd160}(mn);function zo(r,t,e){return e={path:t,exports:{},require:function(i,s){return P7(i,s??e.path)}},r(e,e.exports),e.exports}function P7(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var p0=rm;function rm(r,t){if(!r)throw new Error(t||"Assertion failed")}rm.equal=function(r,t,e){if(r!=t)throw new Error(e||"Assertion failed: "+r+" != "+t)};var sn=zo(function(r,t){var e=t;function i(u,g){if(Array.isArray(u))return u.slice();if(!u)return[];var w=[];if(typeof u!="string"){for(var A=0;A<u.length;A++)w[A]=u[A]|0;return w}if(g==="hex"){u=u.replace(/[^a-z0-9]+/ig,""),u.length%2!==0&&(u="0"+u);for(var A=0;A<u.length;A+=2)w.push(parseInt(u[A]+u[A+1],16))}else for(var A=0;A<u.length;A++){var S=u.charCodeAt(A),x=S>>8,N=S&255;x?w.push(x,N):w.push(N)}return w}e.toArray=i;function s(u){return u.length===1?"0"+u:u}e.zero2=s;function o(u){for(var g="",w=0;w<u.length;w++)g+=s(u[w].toString(16));return g}e.toHex=o,e.encode=function(u,g){return g==="hex"?o(u):u}}),vi=zo(function(r,t){var e=t;e.assert=p0,e.toArray=sn.toArray,e.zero2=sn.zero2,e.toHex=sn.toHex,e.encode=sn.encode;function i(w,A,S){var x=new Array(Math.max(w.bitLength(),S)+1);x.fill(0);for(var N=1<<A+1,R=w.clone(),O=0;O<x.length;O++){var z,L=R.andln(N-1);R.isOdd()?(L>(N>>1)-1?z=(N>>1)-L:z=L,R.isubn(z)):z=0,x[O]=z,R.iushrn(1)}return x}e.getNAF=i;function s(w,A){var S=[[],[]];w=w.clone(),A=A.clone();for(var x=0,N=0,R;w.cmpn(-x)>0||A.cmpn(-N)>0;){var O=w.andln(3)+x&3,z=A.andln(3)+N&3;O===3&&(O=-1),z===3&&(z=-1);var L;O&1?(R=w.andln(7)+x&7,(R===3||R===5)&&z===2?L=-O:L=O):L=0,S[0].push(L);var H;z&1?(R=A.andln(7)+N&7,(R===3||R===5)&&O===2?H=-z:H=z):H=0,S[1].push(H),2*x===L+1&&(x=1-x),2*N===H+1&&(N=1-N),w.iushrn(1),A.iushrn(1)}return S}e.getJSF=s;function o(w,A,S){var x="_"+A;w.prototype[A]=function(){return this[x]!==void 0?this[x]:this[x]=S.call(this)}}e.cachedProperty=o;function u(w){return typeof w=="string"?e.toArray(w,"hex"):w}e.parseBytes=u;function g(w){return new re(w,"hex","le")}e.intFromLE=g}),Bh=vi.getNAF,N7=vi.getJSF,af=vi.assert;function As(r,t){this.type=r,this.p=new re(t.p,16),this.red=t.prime?re.red(t.prime):re.mont(this.p),this.zero=new re(0).toRed(this.red),this.one=new re(1).toRed(this.red),this.two=new re(2).toRed(this.red),this.n=t.n&&new re(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var e=this.n&&this.p.div(this.n);!e||e.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Vs=As;As.prototype.point=function(){throw new Error("Not implemented")},As.prototype.validate=function(){throw new Error("Not implemented")},As.prototype._fixedNafMul=function(r,t){af(r.precomputed);var e=r._getDoubles(),i=Bh(t,1,this._bitLength),s=(1<<e.step+1)-(e.step%2===0?2:1);s/=3;var o=[],u,g;for(u=0;u<i.length;u+=e.step){g=0;for(var w=u+e.step-1;w>=u;w--)g=(g<<1)+i[w];o.push(g)}for(var A=this.jpoint(null,null,null),S=this.jpoint(null,null,null),x=s;x>0;x--){for(u=0;u<o.length;u++)g=o[u],g===x?S=S.mixedAdd(e.points[u]):g===-x&&(S=S.mixedAdd(e.points[u].neg()));A=A.add(S)}return A.toP()},As.prototype._wnafMul=function(r,t){var e=4,i=r._getNAFPoints(e);e=i.wnd;for(var s=i.points,o=Bh(t,e,this._bitLength),u=this.jpoint(null,null,null),g=o.length-1;g>=0;g--){for(var w=0;g>=0&&o[g]===0;g--)w++;if(g>=0&&w++,u=u.dblp(w),g<0)break;var A=o[g];af(A!==0),r.type==="affine"?A>0?u=u.mixedAdd(s[A-1>>1]):u=u.mixedAdd(s[-A-1>>1].neg()):A>0?u=u.add(s[A-1>>1]):u=u.add(s[-A-1>>1].neg())}return r.type==="affine"?u.toP():u},As.prototype._wnafMulAdd=function(r,t,e,i,s){var o=this._wnafT1,u=this._wnafT2,g=this._wnafT3,w=0,A,S,x;for(A=0;A<i;A++){x=t[A];var N=x._getNAFPoints(r);o[A]=N.wnd,u[A]=N.points}for(A=i-1;A>=1;A-=2){var R=A-1,O=A;if(o[R]!==1||o[O]!==1){g[R]=Bh(e[R],o[R],this._bitLength),g[O]=Bh(e[O],o[O],this._bitLength),w=Math.max(g[R].length,w),w=Math.max(g[O].length,w);continue}var z=[t[R],null,null,t[O]];t[R].y.cmp(t[O].y)===0?(z[1]=t[R].add(t[O]),z[2]=t[R].toJ().mixedAdd(t[O].neg())):t[R].y.cmp(t[O].y.redNeg())===0?(z[1]=t[R].toJ().mixedAdd(t[O]),z[2]=t[R].add(t[O].neg())):(z[1]=t[R].toJ().mixedAdd(t[O]),z[2]=t[R].toJ().mixedAdd(t[O].neg()));var L=[-3,-1,-5,-7,0,7,5,1,3],H=N7(e[R],e[O]);for(w=Math.max(H[0].length,w),g[R]=new Array(w),g[O]=new Array(w),S=0;S<w;S++){var rt=H[0][S]|0,ht=H[1][S]|0;g[R][S]=L[(rt+1)*3+(ht+1)],g[O][S]=0,u[R]=z}}var Z=this.jpoint(null,null,null),et=this._wnafT4;for(A=w;A>=0;A--){for(var at=0;A>=0;){var ft=!0;for(S=0;S<i;S++)et[S]=g[S][A]|0,et[S]!==0&&(ft=!1);if(!ft)break;at++,A--}if(A>=0&&at++,Z=Z.dblp(at),A<0)break;for(S=0;S<i;S++){var ct=et[S];ct!==0&&(ct>0?x=u[S][ct-1>>1]:ct<0&&(x=u[S][-ct-1>>1].neg()),x.type==="affine"?Z=Z.mixedAdd(x):Z=Z.add(x))}}for(A=0;A<i;A++)u[A]=null;return s?Z:Z.toP()};function Ri(r,t){this.curve=r,this.type=t,this.precomputed=null}As.BasePoint=Ri,Ri.prototype.eq=function(){throw new Error("Not implemented")},Ri.prototype.validate=function(){return this.curve.validate(this)},As.prototype.decodePoint=function(r,t){r=vi.toArray(r,t);var e=this.p.byteLength();if((r[0]===4||r[0]===6||r[0]===7)&&r.length-1===2*e){r[0]===6?af(r[r.length-1]%2===0):r[0]===7&&af(r[r.length-1]%2===1);var i=this.point(r.slice(1,1+e),r.slice(1+e,1+2*e));return i}else if((r[0]===2||r[0]===3)&&r.length-1===e)return this.pointFromX(r.slice(1,1+e),r[0]===3);throw new Error("Unknown point format")},Ri.prototype.encodeCompressed=function(r){return this.encode(r,!0)},Ri.prototype._encode=function(r){var t=this.curve.p.byteLength(),e=this.getX().toArray("be",t);return r?[this.getY().isEven()?2:3].concat(e):[4].concat(e,this.getY().toArray("be",t))},Ri.prototype.encode=function(r,t){return vi.encode(this._encode(t),r)},Ri.prototype.precompute=function(r){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,r),t.beta=this._getBeta(),this.precomputed=t,this},Ri.prototype._hasDoubles=function(r){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((r.bitLength()+1)/t.step):!1},Ri.prototype._getDoubles=function(r,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var e=[this],i=this,s=0;s<t;s+=r){for(var o=0;o<r;o++)i=i.dbl();e.push(i)}return{step:r,points:e}},Ri.prototype._getNAFPoints=function(r){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],e=(1<<r)-1,i=e===1?null:this.dbl(),s=1;s<e;s++)t[s]=t[s-1].add(i);return{wnd:r,points:t}},Ri.prototype._getBeta=function(){return null},Ri.prototype.dblp=function(r){for(var t=this,e=0;e<r;e++)t=t.dbl();return t};var g0=zo(function(r){typeof Object.create=="function"?r.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:r.exports=function(t,e){if(e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}}}),R7=vi.assert;function ki(r){Vs.call(this,"short",r),this.a=new re(r.a,16).toRed(this.red),this.b=new re(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}g0(ki,Vs);var C7=ki;ki.prototype._getEndomorphism=function(r){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,e;if(r.beta)t=new re(r.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=i[0].cmp(i[1])<0?i[0]:i[1],t=t.toRed(this.red)}if(r.lambda)e=new re(r.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(t))===0?e=s[0]:(e=s[1],R7(this.g.mul(e).x.cmp(this.g.x.redMul(t))===0))}var o;return r.basis?o=r.basis.map(function(u){return{a:new re(u.a,16),b:new re(u.b,16)}}):o=this._getEndoBasis(e),{beta:t,lambda:e,basis:o}}},ki.prototype._getEndoRoots=function(r){var t=r===this.p?this.red:re.mont(r),e=new re(2).toRed(t).redInvm(),i=e.redNeg(),s=new re(3).toRed(t).redNeg().redSqrt().redMul(e),o=i.redAdd(s).fromRed(),u=i.redSub(s).fromRed();return[o,u]},ki.prototype._getEndoBasis=function(r){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),e=r,i=this.n.clone(),s=new re(1),o=new re(0),u=new re(0),g=new re(1),w,A,S,x,N,R,O,z=0,L,H;e.cmpn(0)!==0;){var rt=i.div(e);L=i.sub(rt.mul(e)),H=u.sub(rt.mul(s));var ht=g.sub(rt.mul(o));if(!S&&L.cmp(t)<0)w=O.neg(),A=s,S=L.neg(),x=H;else if(S&&++z===2)break;O=L,i=e,e=L,u=s,s=H,g=o,o=ht}N=L.neg(),R=H;var Z=S.sqr().add(x.sqr()),et=N.sqr().add(R.sqr());return et.cmp(Z)>=0&&(N=w,R=A),S.negative&&(S=S.neg(),x=x.neg()),N.negative&&(N=N.neg(),R=R.neg()),[{a:S,b:x},{a:N,b:R}]},ki.prototype._endoSplit=function(r){var t=this.endo.basis,e=t[0],i=t[1],s=i.b.mul(r).divRound(this.n),o=e.b.neg().mul(r).divRound(this.n),u=s.mul(e.a),g=o.mul(i.a),w=s.mul(e.b),A=o.mul(i.b),S=r.sub(u).sub(g),x=w.add(A).neg();return{k1:S,k2:x}},ki.prototype.pointFromX=function(r,t){r=new re(r,16),r.red||(r=r.toRed(this.red));var e=r.redSqr().redMul(r).redIAdd(r.redMul(this.a)).redIAdd(this.b),i=e.redSqrt();if(i.redSqr().redSub(e).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(t&&!s||!t&&s)&&(i=i.redNeg()),this.point(r,i)},ki.prototype.validate=function(r){if(r.inf)return!0;var t=r.x,e=r.y,i=this.a.redMul(t),s=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return e.redSqr().redISub(s).cmpn(0)===0},ki.prototype._endoWnafMulAdd=function(r,t,e){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<r.length;o++){var u=this._endoSplit(t[o]),g=r[o],w=g._getBeta();u.k1.negative&&(u.k1.ineg(),g=g.neg(!0)),u.k2.negative&&(u.k2.ineg(),w=w.neg(!0)),i[o*2]=g,i[o*2+1]=w,s[o*2]=u.k1,s[o*2+1]=u.k2}for(var A=this._wnafMulAdd(1,i,s,o*2,e),S=0;S<o*2;S++)i[S]=null,s[S]=null;return A};function ar(r,t,e,i){Vs.BasePoint.call(this,r,"affine"),t===null&&e===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new re(t,16),this.y=new re(e,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}g0(ar,Vs.BasePoint),ki.prototype.point=function(r,t,e){return new ar(this,r,t,e)},ki.prototype.pointFromJSON=function(r,t){return ar.fromJSON(this,r,t)},ar.prototype._getBeta=function(){if(this.curve.endo){var r=this.precomputed;if(r&&r.beta)return r.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(r){var e=this.curve,i=function(s){return e.point(s.x.redMul(e.endo.beta),s.y)};r.beta=t,t.precomputed={beta:null,naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(i)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(i)}}}return t}},ar.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},ar.fromJSON=function(r,t,e){typeof t=="string"&&(t=JSON.parse(t));var i=r.point(t[0],t[1],e);if(!t[2])return i;function s(u){return r.point(u[0],u[1],e)}var o=t[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i},ar.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},ar.prototype.isInfinity=function(){return this.inf},ar.prototype.add=function(r){if(this.inf)return r;if(r.inf)return this;if(this.eq(r))return this.dbl();if(this.neg().eq(r))return this.curve.point(null,null);if(this.x.cmp(r.x)===0)return this.curve.point(null,null);var t=this.y.redSub(r.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(r.x).redInvm()));var e=t.redSqr().redISub(this.x).redISub(r.x),i=t.redMul(this.x.redSub(e)).redISub(this.y);return this.curve.point(e,i)},ar.prototype.dbl=function(){if(this.inf)return this;var r=this.y.redAdd(this.y);if(r.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,e=this.x.redSqr(),i=r.redInvm(),s=e.redAdd(e).redIAdd(e).redIAdd(t).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),u=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,u)},ar.prototype.getX=function(){return this.x.fromRed()},ar.prototype.getY=function(){return this.y.fromRed()},ar.prototype.mul=function(r){return r=new re(r,16),this.isInfinity()?this:this._hasDoubles(r)?this.curve._fixedNafMul(this,r):this.curve.endo?this.curve._endoWnafMulAdd([this],[r]):this.curve._wnafMul(this,r)},ar.prototype.mulAdd=function(r,t,e){var i=[this,t],s=[r,e];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)},ar.prototype.jmulAdd=function(r,t,e){var i=[this,t],s=[r,e];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)},ar.prototype.eq=function(r){return this===r||this.inf===r.inf&&(this.inf||this.x.cmp(r.x)===0&&this.y.cmp(r.y)===0)},ar.prototype.neg=function(r){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(r&&this.precomputed){var e=this.precomputed,i=function(s){return s.neg()};t.precomputed={naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t},ar.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var r=this.curve.jpoint(this.x,this.y,this.curve.one);return r};function pr(r,t,e,i){Vs.BasePoint.call(this,r,"jacobian"),t===null&&e===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new re(0)):(this.x=new re(t,16),this.y=new re(e,16),this.z=new re(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}g0(pr,Vs.BasePoint),ki.prototype.jpoint=function(r,t,e){return new pr(this,r,t,e)},pr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var r=this.z.redInvm(),t=r.redSqr(),e=this.x.redMul(t),i=this.y.redMul(t).redMul(r);return this.curve.point(e,i)},pr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},pr.prototype.add=function(r){if(this.isInfinity())return r;if(r.isInfinity())return this;var t=r.z.redSqr(),e=this.z.redSqr(),i=this.x.redMul(t),s=r.x.redMul(e),o=this.y.redMul(t.redMul(r.z)),u=r.y.redMul(e.redMul(this.z)),g=i.redSub(s),w=o.redSub(u);if(g.cmpn(0)===0)return w.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var A=g.redSqr(),S=A.redMul(g),x=i.redMul(A),N=w.redSqr().redIAdd(S).redISub(x).redISub(x),R=w.redMul(x.redISub(N)).redISub(o.redMul(S)),O=this.z.redMul(r.z).redMul(g);return this.curve.jpoint(N,R,O)},pr.prototype.mixedAdd=function(r){if(this.isInfinity())return r.toJ();if(r.isInfinity())return this;var t=this.z.redSqr(),e=this.x,i=r.x.redMul(t),s=this.y,o=r.y.redMul(t).redMul(this.z),u=e.redSub(i),g=s.redSub(o);if(u.cmpn(0)===0)return g.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var w=u.redSqr(),A=w.redMul(u),S=e.redMul(w),x=g.redSqr().redIAdd(A).redISub(S).redISub(S),N=g.redMul(S.redISub(x)).redISub(s.redMul(A)),R=this.z.redMul(u);return this.curve.jpoint(x,N,R)},pr.prototype.dblp=function(r){if(r===0)return this;if(this.isInfinity())return this;if(!r)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var e=this;for(t=0;t<r;t++)e=e.dbl();return e}var i=this.curve.a,s=this.curve.tinv,o=this.x,u=this.y,g=this.z,w=g.redSqr().redSqr(),A=u.redAdd(u);for(t=0;t<r;t++){var S=o.redSqr(),x=A.redSqr(),N=x.redSqr(),R=S.redAdd(S).redIAdd(S).redIAdd(i.redMul(w)),O=o.redMul(x),z=R.redSqr().redISub(O.redAdd(O)),L=O.redISub(z),H=R.redMul(L);H=H.redIAdd(H).redISub(N);var rt=A.redMul(g);t+1<r&&(w=w.redMul(N)),o=z,g=rt,A=H}return this.curve.jpoint(o,A.redMul(s),g)},pr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},pr.prototype._zeroDbl=function(){var r,t,e;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),u=this.x.redAdd(s).redSqr().redISub(i).redISub(o);u=u.redIAdd(u);var g=i.redAdd(i).redIAdd(i),w=g.redSqr().redISub(u).redISub(u),A=o.redIAdd(o);A=A.redIAdd(A),A=A.redIAdd(A),r=w,t=g.redMul(u.redISub(w)).redISub(A),e=this.y.redAdd(this.y)}else{var S=this.x.redSqr(),x=this.y.redSqr(),N=x.redSqr(),R=this.x.redAdd(x).redSqr().redISub(S).redISub(N);R=R.redIAdd(R);var O=S.redAdd(S).redIAdd(S),z=O.redSqr(),L=N.redIAdd(N);L=L.redIAdd(L),L=L.redIAdd(L),r=z.redISub(R).redISub(R),t=O.redMul(R.redISub(r)).redISub(L),e=this.y.redMul(this.z),e=e.redIAdd(e)}return this.curve.jpoint(r,t,e)},pr.prototype._threeDbl=function(){var r,t,e;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),u=this.x.redAdd(s).redSqr().redISub(i).redISub(o);u=u.redIAdd(u);var g=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),w=g.redSqr().redISub(u).redISub(u);r=w;var A=o.redIAdd(o);A=A.redIAdd(A),A=A.redIAdd(A),t=g.redMul(u.redISub(w)).redISub(A),e=this.y.redAdd(this.y)}else{var S=this.z.redSqr(),x=this.y.redSqr(),N=this.x.redMul(x),R=this.x.redSub(S).redMul(this.x.redAdd(S));R=R.redAdd(R).redIAdd(R);var O=N.redIAdd(N);O=O.redIAdd(O);var z=O.redAdd(O);r=R.redSqr().redISub(z),e=this.y.redAdd(this.z).redSqr().redISub(x).redISub(S);var L=x.redSqr();L=L.redIAdd(L),L=L.redIAdd(L),L=L.redIAdd(L),t=R.redMul(O.redISub(r)).redISub(L)}return this.curve.jpoint(r,t,e)},pr.prototype._dbl=function(){var r=this.curve.a,t=this.x,e=this.y,i=this.z,s=i.redSqr().redSqr(),o=t.redSqr(),u=e.redSqr(),g=o.redAdd(o).redIAdd(o).redIAdd(r.redMul(s)),w=t.redAdd(t);w=w.redIAdd(w);var A=w.redMul(u),S=g.redSqr().redISub(A.redAdd(A)),x=A.redISub(S),N=u.redSqr();N=N.redIAdd(N),N=N.redIAdd(N),N=N.redIAdd(N);var R=g.redMul(x).redISub(N),O=e.redAdd(e).redMul(i);return this.curve.jpoint(S,R,O)},pr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var r=this.x.redSqr(),t=this.y.redSqr(),e=this.z.redSqr(),i=t.redSqr(),s=r.redAdd(r).redIAdd(r),o=s.redSqr(),u=this.x.redAdd(t).redSqr().redISub(r).redISub(i);u=u.redIAdd(u),u=u.redAdd(u).redIAdd(u),u=u.redISub(o);var g=u.redSqr(),w=i.redIAdd(i);w=w.redIAdd(w),w=w.redIAdd(w),w=w.redIAdd(w);var A=s.redIAdd(u).redSqr().redISub(o).redISub(g).redISub(w),S=t.redMul(A);S=S.redIAdd(S),S=S.redIAdd(S);var x=this.x.redMul(g).redISub(S);x=x.redIAdd(x),x=x.redIAdd(x);var N=this.y.redMul(A.redMul(w.redISub(A)).redISub(u.redMul(g)));N=N.redIAdd(N),N=N.redIAdd(N),N=N.redIAdd(N);var R=this.z.redAdd(u).redSqr().redISub(e).redISub(g);return this.curve.jpoint(x,N,R)},pr.prototype.mul=function(r,t){return r=new re(r,t),this.curve._wnafMul(this,r)},pr.prototype.eq=function(r){if(r.type==="affine")return this.eq(r.toJ());if(this===r)return!0;var t=this.z.redSqr(),e=r.z.redSqr();if(this.x.redMul(e).redISub(r.x.redMul(t)).cmpn(0)!==0)return!1;var i=t.redMul(this.z),s=e.redMul(r.z);return this.y.redMul(s).redISub(r.y.redMul(i)).cmpn(0)===0},pr.prototype.eqXToP=function(r){var t=this.z.redSqr(),e=r.toRed(this.curve.red).redMul(t);if(this.x.cmp(e)===0)return!0;for(var i=r.clone(),s=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(e.redIAdd(s),this.x.cmp(e)===0)return!0}},pr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},pr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Kh=zo(function(r,t){var e=t;e.base=Vs,e.short=C7,e.mont=null,e.edwards=null}),Qh=zo(function(r,t){var e=t,i=vi.assert;function s(g){g.type==="short"?this.curve=new Kh.short(g):g.type==="edwards"?this.curve=new Kh.edwards(g):this.curve=new Kh.mont(g),this.g=this.curve.g,this.n=this.curve.n,this.hash=g.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=s;function o(g,w){Object.defineProperty(e,g,{configurable:!0,enumerable:!0,get:function(){var A=new s(w);return Object.defineProperty(e,g,{configurable:!0,enumerable:!0,value:A}),A}})}o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:mn.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:mn.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:mn.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:mn.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:mn.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:mn.sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:mn.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var u;try{u=null.crash()}catch{u=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:mn.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",u]})});function _s(r){if(!(this instanceof _s))return new _s(r);this.hash=r.hash,this.predResist=!!r.predResist,this.outLen=this.hash.outSize,this.minEntropy=r.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=sn.toArray(r.entropy,r.entropyEnc||"hex"),e=sn.toArray(r.nonce,r.nonceEnc||"hex"),i=sn.toArray(r.pers,r.persEnc||"hex");p0(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,e,i)}var Sp=_s;_s.prototype._init=function(r,t,e){var i=r.concat(t).concat(e);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656},_s.prototype._hmac=function(){return new mn.hmac(this.hash,this.K)},_s.prototype._update=function(r){var t=this._hmac().update(this.V).update([0]);r&&(t=t.update(r)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),r&&(this.K=this._hmac().update(this.V).update([1]).update(r).digest(),this.V=this._hmac().update(this.V).digest())},_s.prototype.reseed=function(r,t,e,i){typeof t!="string"&&(i=e,e=t,t=null),r=sn.toArray(r,t),e=sn.toArray(e,i),p0(r.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(r.concat(e||[])),this._reseed=1},_s.prototype.generate=function(r,t,e,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(i=e,e=t,t=null),e&&(e=sn.toArray(e,i||"hex"),this._update(e));for(var s=[];s.length<r;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,r);return this._update(e),this._reseed++,sn.encode(o,t)};var tu=vi.assert;function Ir(r,t){this.ec=r,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var eu=Ir;Ir.fromPublic=function(r,t,e){return t instanceof Ir?t:new Ir(r,{pub:t,pubEnc:e})},Ir.fromPrivate=function(r,t,e){return t instanceof Ir?t:new Ir(r,{priv:t,privEnc:e})},Ir.prototype.validate=function(){var r=this.getPublic();return r.isInfinity()?{result:!1,reason:"Invalid public key"}:r.validate()?r.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Ir.prototype.getPublic=function(r,t){return typeof r=="string"&&(t=r,r=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,r):this.pub},Ir.prototype.getPrivate=function(r){return r==="hex"?this.priv.toString(16,2):this.priv},Ir.prototype._importPrivate=function(r,t){this.priv=new re(r,t||16),this.priv=this.priv.umod(this.ec.curve.n)},Ir.prototype._importPublic=function(r,t){if(r.x||r.y){this.ec.curve.type==="mont"?tu(r.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&tu(r.x&&r.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(r.x,r.y);return}this.pub=this.ec.curve.decodePoint(r,t)},Ir.prototype.derive=function(r){return r.validate()||tu(r.validate(),"public point not validated"),r.mul(this.priv).getX()},Ir.prototype.sign=function(r,t,e){return this.ec.sign(r,this,t,e)},Ir.prototype.verify=function(r,t){return this.ec.verify(r,t,this)},Ir.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var O7=vi.assert;function xf(r,t){if(r instanceof xf)return r;this._importDER(r,t)||(O7(r.r&&r.s,"Signature without r or s"),this.r=new re(r.r,16),this.s=new re(r.s,16),r.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=r.recoveryParam)}var Th=xf;function B7(){this.place=0}function ru(r,t){var e=r[t.place++];if(!(e&128))return e;var i=e&15;if(i===0||i>4)return!1;for(var s=0,o=0,u=t.place;o<i;o++,u++)s<<=8,s|=r[u],s>>>=0;return s<=127?!1:(t.place=u,s)}function xp(r){for(var t=0,e=r.length-1;!r[t]&&!(r[t+1]&128)&&t<e;)t++;return t===0?r:r.slice(t)}xf.prototype._importDER=function(r,t){r=vi.toArray(r,t);var e=new B7;if(r[e.place++]!==48)return!1;var i=ru(r,e);if(i===!1||i+e.place!==r.length||r[e.place++]!==2)return!1;var s=ru(r,e);if(s===!1)return!1;var o=r.slice(e.place,s+e.place);if(e.place+=s,r[e.place++]!==2)return!1;var u=ru(r,e);if(u===!1||r.length!==u+e.place)return!1;var g=r.slice(e.place,u+e.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(g[0]===0)if(g[1]&128)g=g.slice(1);else return!1;return this.r=new re(o),this.s=new re(g),this.recoveryParam=null,!0};function iu(r,t){if(t<128){r.push(t);return}var e=1+(Math.log(t)/Math.LN2>>>3);for(r.push(e|128);--e;)r.push(t>>>(e<<3)&255);r.push(t)}xf.prototype.toDER=function(r){var t=this.r.toArray(),e=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),e[0]&128&&(e=[0].concat(e)),t=xp(t),e=xp(e);!e[0]&&!(e[1]&128);)e=e.slice(1);var i=[2];iu(i,t.length),i=i.concat(t),i.push(2),iu(i,e.length);var s=i.concat(e),o=[48];return iu(o,s.length),o=o.concat(s),vi.encode(o,r)};var T7=function(){throw new Error("unsupported")},im=vi.assert;function qi(r){if(!(this instanceof qi))return new qi(r);typeof r=="string"&&(im(Object.prototype.hasOwnProperty.call(Qh,r),"Unknown curve "+r),r=Qh[r]),r instanceof Qh.PresetCurve&&(r={curve:r}),this.curve=r.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=r.curve.g,this.g.precompute(r.curve.n.bitLength()+1),this.hash=r.hash||r.curve.hash}var q7=qi;qi.prototype.keyPair=function(r){return new eu(this,r)},qi.prototype.keyFromPrivate=function(r,t){return eu.fromPrivate(this,r,t)},qi.prototype.keyFromPublic=function(r,t){return eu.fromPublic(this,r,t)},qi.prototype.genKeyPair=function(r){r||(r={});for(var t=new Sp({hash:this.hash,pers:r.pers,persEnc:r.persEnc||"utf8",entropy:r.entropy||T7(this.hash.hmacStrength),entropyEnc:r.entropy&&r.entropyEnc||"utf8",nonce:this.n.toArray()}),e=this.n.byteLength(),i=this.n.sub(new re(2));;){var s=new re(t.generate(e));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}},qi.prototype._truncateToN=function(r,t){var e=r.byteLength()*8-this.n.bitLength();return e>0&&(r=r.ushrn(e)),!t&&r.cmp(this.n)>=0?r.sub(this.n):r},qi.prototype.sign=function(r,t,e,i){typeof e=="object"&&(i=e,e=null),i||(i={}),t=this.keyFromPrivate(t,e),r=this._truncateToN(new re(r,16));for(var s=this.n.byteLength(),o=t.getPrivate().toArray("be",s),u=r.toArray("be",s),g=new Sp({hash:this.hash,entropy:o,nonce:u,pers:i.pers,persEnc:i.persEnc||"utf8"}),w=this.n.sub(new re(1)),A=0;;A++){var S=i.k?i.k(A):new re(g.generate(this.n.byteLength()));if(S=this._truncateToN(S,!0),!(S.cmpn(1)<=0||S.cmp(w)>=0)){var x=this.g.mul(S);if(!x.isInfinity()){var N=x.getX(),R=N.umod(this.n);if(R.cmpn(0)!==0){var O=S.invm(this.n).mul(R.mul(t.getPrivate()).iadd(r));if(O=O.umod(this.n),O.cmpn(0)!==0){var z=(x.getY().isOdd()?1:0)|(N.cmp(R)!==0?2:0);return i.canonical&&O.cmp(this.nh)>0&&(O=this.n.sub(O),z^=1),new Th({r:R,s:O,recoveryParam:z})}}}}}},qi.prototype.verify=function(r,t,e,i){r=this._truncateToN(new re(r,16)),e=this.keyFromPublic(e,i),t=new Th(t,"hex");var s=t.r,o=t.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var u=o.invm(this.n),g=u.mul(r).umod(this.n),w=u.mul(s).umod(this.n),A;return this.curve._maxwellTrick?(A=this.g.jmulAdd(g,e.getPublic(),w),A.isInfinity()?!1:A.eqXToP(s)):(A=this.g.mulAdd(g,e.getPublic(),w),A.isInfinity()?!1:A.getX().umod(this.n).cmp(s)===0)},qi.prototype.recoverPubKey=function(r,t,e,i){im((3&e)===e,"The recovery param is more than two bits"),t=new Th(t,i);var s=this.n,o=new re(r),u=t.r,g=t.s,w=e&1,A=e>>1;if(u.cmp(this.curve.p.umod(this.curve.n))>=0&&A)throw new Error("Unable to find sencond key candinate");A?u=this.curve.pointFromX(u.add(this.curve.n),w):u=this.curve.pointFromX(u,w);var S=t.r.invm(s),x=s.sub(o).mul(S).umod(s),N=g.mul(S).umod(s);return this.g.mulAdd(x,u,N)},qi.prototype.getKeyRecoveryParam=function(r,t,e,i){if(t=new Th(t,i),t.recoveryParam!==null)return t.recoveryParam;for(var s=0;s<4;s++){var o;try{o=this.recoverPubKey(r,t,s)}catch{continue}if(o.eq(e))return s}throw new Error("Unable to find valid recovery factor")};var D7=zo(function(r,t){var e=t;e.version="6.5.4",e.utils=vi,e.rand=function(){throw new Error("unsupported")},e.curve=Kh,e.curves=Qh,e.ec=q7,e.eddsa=null});D7.ec;var Pp;(function(r){r[r.legacy=0]="legacy",r[r.eip2930=1]="eip2930",r[r.eip1559=2]="eip1559"})(Pp||(Pp={}));const k7={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}};function U7(r,t){const{message:e,code:i}=k7[r];return{message:e,code:i}}function zu(r,t){return!!Array.isArray(r)}class z7 extends Bo{constructor(t){super(),this.opts=t,this.protocol="wc",this.version=2}}class F7 extends Bo{constructor(t,e){super(),this.core=t,this.logger=e,this.records=new Map}}class L7{constructor(t,e){this.logger=t,this.core=e}}let $7=class extends Bo{constructor(t,e){super(),this.relayer=t,this.logger=e}},j7=class extends Bo{constructor(t){super()}},H7=class{constructor(t,e,i,s){this.core=t,this.logger=e,this.name=i}},K7=class extends Bo{constructor(t,e){super(),this.relayer=t,this.logger=e}},Q7=class extends Bo{constructor(t,e){super(),this.core=t,this.logger=e}},J7=class{constructor(t,e,i){this.core=t,this.logger=e,this.store=i}},V7=class{constructor(t,e){this.projectId=t,this.logger=e}},G7=class{constructor(t,e,i){this.core=t,this.logger=e,this.telemetryEnabled=i}},Y7=class{constructor(t){this.opts=t,this.protocol="wc",this.version=2}},W7=class{constructor(t){this.client=t}};const X7=":";function Ea(r){const[t,e]=r.split(X7);return{namespace:t,reference:e}}function nm(r,t){return r.includes(":")?[r]:t.chains||[]}var Z7=Object.defineProperty,Np=Object.getOwnPropertySymbols,t9=Object.prototype.hasOwnProperty,e9=Object.prototype.propertyIsEnumerable,Rp=(r,t,e)=>t in r?Z7(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,Cp=(r,t)=>{for(var e in t||(t={}))t9.call(t,e)&&Rp(r,e,t[e]);if(Np)for(var e of Np(t))e9.call(t,e)&&Rp(r,e,t[e]);return r};const r9="ReactNative",gi={reactNative:"react-native",node:"node",browser:"browser",unknown:"unknown"},i9="js";function Na(){return typeof process<"u"&&typeof process.versions<"u"&&typeof process.versions.node<"u"}function Ua(){return!lg()&&!!dg()&&navigator.product===r9}function za(){return!Na()&&!!dg()&&!!lg()}function Fa(){return Ua()?gi.reactNative:Na()?gi.node:za()?gi.browser:gi.unknown}function n9(){var r;try{return Ua()&&typeof global<"u"&&typeof(global==null?void 0:global.Application)<"u"?(r=global.Application)==null?void 0:r.applicationId:void 0}catch{return}}function s9(r,t){let e=tf.parse(r);return e=Cp(Cp({},e),t),r=tf.stringify(e),r}function o9(){return E4()||{name:"",description:"",url:"",icons:[""]}}function a9(){if(Fa()===gi.reactNative&&typeof global<"u"&&typeof(global==null?void 0:global.Platform)<"u"){const{OS:e,Version:i}=global.Platform;return[e,i].join("-")}const r=x4();if(r===null)return"unknown";const t=r.os?r.os.replace(" ","").toLowerCase():"unknown";return r.type==="browser"?[t,r.name,r.version].join("-"):[t,r.version].join("-")}function h9(){var r;const t=Fa();return t===gi.browser?[t,((r=P4())==null?void 0:r.host)||"unknown"].join(":"):t}function f9(r,t,e){const i=a9(),s=h9();return[[r,t].join("-"),[i9,e].join("-"),i,s].join("/")}function c9({protocol:r,version:t,relayUrl:e,sdkVersion:i,auth:s,projectId:o,useOnCloseEvent:u,bundleId:g}){const w=e.split("?"),A=f9(r,t,i),S={auth:s,ua:A,projectId:o,useOnCloseEvent:u||void 0,origin:g||void 0},x=s9(w[1]||"",S);return w[0]+"?"+x}function Ls(r,t){return r.filter(e=>t.includes(e)).length===r.length}function sm(r){return Object.fromEntries(r.entries())}function om(r){return new Map(Object.entries(r))}function Fs(r=Ct.FIVE_MINUTES,t){const e=Ct.toMiliseconds(r||Ct.FIVE_MINUTES);let i,s,o;return{resolve:u=>{o&&i&&(clearTimeout(o),i(u))},reject:u=>{o&&s&&(clearTimeout(o),s(u))},done:()=>new Promise((u,g)=>{o=setTimeout(()=>{g(new Error(t))},e),i=u,s=g})}}function Eo(r,t,e){return new Promise(async(i,s)=>{const o=setTimeout(()=>s(new Error(e)),t);try{const u=await r;i(u)}catch(u){s(u)}clearTimeout(o)})}function am(r,t){if(typeof t=="string"&&t.startsWith(`${r}:`))return t;if(r.toLowerCase()==="topic"){if(typeof t!="string")throw new Error('Value must be "string" for expirer target type: topic');return`topic:${t}`}else if(r.toLowerCase()==="id"){if(typeof t!="number")throw new Error('Value must be "number" for expirer target type: id');return`id:${t}`}throw new Error(`Unknown expirer target type: ${r}`)}function u9(r){return am("topic",r)}function d9(r){return am("id",r)}function hm(r){const[t,e]=r.split(":"),i={id:void 0,topic:void 0};if(t==="topic"&&typeof e=="string")i.topic=e;else if(t==="id"&&Number.isInteger(Number(e)))i.id=Number(e);else throw new Error(`Invalid target, expected id:number or topic:string, got ${t}:${e}`);return i}function vr(r,t){return Ct.fromMiliseconds(Date.now()+Ct.toMiliseconds(r))}function ys(r){return Date.now()>=Ct.toMiliseconds(r)}function Me(r,t){return`${r}${t?`:${t}`:""}`}function Jh(r=[],t=[]){return[...new Set([...r,...t])]}async function l9({id:r,topic:t,wcDeepLink:e}){try{if(!e)return;const i=typeof e=="string"?JSON.parse(e):e;let s=i==null?void 0:i.href;if(typeof s!="string")return;s.endsWith("/")&&(s=s.slice(0,-1));const o=`${s}/wc?requestId=${r}&sessionTopic=${t}`,u=Fa();u===gi.browser?o.startsWith("https://")||o.startsWith("http://")?window.open(o,"_blank","noreferrer noopener"):window.open(o,"_self","noreferrer noopener"):u===gi.reactNative&&typeof(global==null?void 0:global.Linking)<"u"&&await global.Linking.openURL(o)}catch(i){console.error(i)}}async function p9(r,t){try{return await r.getItem(t)||(za()?localStorage.getItem(t):void 0)}catch(e){console.error(e)}}function g9(){return typeof crypto<"u"&&crypto!=null&&crypto.randomUUID?crypto.randomUUID():"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/gu,r=>{const t=Math.random()*16|0;return(r==="x"?t:t&3|8).toString(16)})}var fm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function m9(r){var t=r.default;if(typeof t=="function"){var e=function(){return t.apply(this,arguments)};e.prototype=t.prototype}else e={};return Object.defineProperty(e,"__esModule",{value:!0}),Object.keys(r).forEach(function(i){var s=Object.getOwnPropertyDescriptor(r,i);Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:function(){return r[i]}})}),e}var cm={exports:{}};/**
* [js-sha3]{@link https://github.com/emn178/js-sha3}
*
* @version 0.8.0
* @author Chen, Yi-Cyuan [emn178@gmail.com]
* @copyright Chen, Yi-Cyuan 2015-2018
* @license MIT
*/(function(r){(function(){var t="input is invalid type",e="finalize already called",i=typeof window=="object",s=i?window:{};s.JS_SHA3_NO_WINDOW&&(i=!1);var o=!i&&typeof self=="object",u=!s.JS_SHA3_NO_NODE_JS&&typeof process=="object"&&process.versions&&process.versions.node;u?s=fm:o&&(s=self);var g=!s.JS_SHA3_NO_COMMON_JS&&!0&&r.exports,w=!s.JS_SHA3_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u",A="0123456789abcdef".split(""),S=[31,7936,2031616,520093696],x=[4,1024,262144,67108864],N=[1,256,65536,16777216],R=[6,1536,393216,100663296],O=[0,8,16,24],z=[1,0,32898,0,32906,2147483648,2147516416,2147483648,32907,0,2147483649,0,2147516545,2147483648,32777,2147483648,138,0,136,0,2147516425,0,2147483658,0,2147516555,0,139,2147483648,32905,2147483648,32771,2147483648,32770,2147483648,128,2147483648,32778,0,2147483658,2147483648,2147516545,2147483648,32896,2147483648,2147483649,0,2147516424,2147483648],L=[224,256,384,512],H=[128,256],rt=["hex","buffer","arrayBuffer","array","digest"],ht={128:168,256:136};(s.JS_SHA3_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(m){return Object.prototype.toString.call(m)==="[object Array]"}),w&&(s.JS_SHA3_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(m){return typeof m=="object"&&m.buffer&&m.buffer.constructor===ArrayBuffer});for(var Z=function(m,D,q){return function(U){return new M(m,D,m).update(U)[q]()}},et=function(m,D,q){return function(U,V){return new M(m,D,V).update(U)[q]()}},at=function(m,D,q){return function(U,V,Q,Y){return f["cshake"+m].update(U,V,Q,Y)[q]()}},ft=function(m,D,q){return function(U,V,Q,Y){return f["kmac"+m].update(U,V,Q,Y)[q]()}},ct=function(m,D,q,U){for(var V=0;V<rt.length;++V){var Q=rt[V];m[Q]=D(q,U,Q)}return m},mt=function(m,D){var q=Z(m,D,"hex");return q.create=function(){return new M(m,D,m)},q.update=function(U){return q.create().update(U)},ct(q,Z,m,D)},se=function(m,D){var q=et(m,D,"hex");return q.create=function(U){return new M(m,D,U)},q.update=function(U,V){return q.create(V).update(U)},ct(q,et,m,D)},T=function(m,D){var q=ht[m],U=at(m,D,"hex");return U.create=function(V,Q,Y){return!Q&&!Y?f["shake"+m].create(V):new M(m,D,V).bytepad([Q,Y],q)},U.update=function(V,Q,Y,X){return U.create(Q,Y,X).update(V)},ct(U,at,m,D)},y=function(m,D){var q=ht[m],U=ft(m,D,"hex");return U.create=function(V,Q,Y){return new J(m,D,Q).bytepad(["KMAC",Y],q).bytepad([V],q)},U.update=function(V,Q,Y,X){return U.create(V,Y,X).update(Q)},ct(U,ft,m,D)},a=[{name:"keccak",padding:N,bits:L,createMethod:mt},{name:"sha3",padding:R,bits:L,createMethod:mt},{name:"shake",padding:S,bits:H,createMethod:se},{name:"cshake",padding:x,bits:H,createMethod:T},{name:"kmac",padding:x,bits:H,createMethod:y}],f={},d=[],v=0;v<a.length;++v)for(var b=a[v],I=b.bits,_=0;_<I.length;++_){var l=b.name+"_"+I[_];if(d.push(l),f[l]=b.createMethod(I[_],b.padding),b.name!=="sha3"){var c=b.name+I[_];d.push(c),f[c]=f[l]}}function M(m,D,q){this.blocks=[],this.s=[],this.padding=D,this.outputBits=q,this.reset=!0,this.finalized=!1,this.block=0,this.start=0,this.blockCount=1600-(m<<1)>>5,this.byteCount=this.blockCount<<2,this.outputBlocks=q>>5,this.extraBytes=(q&31)>>3;for(var U=0;U<50;++U)this.s[U]=0}M.prototype.update=function(m){if(this.finalized)throw new Error(e);var D,q=typeof m;if(q!=="string"){if(q==="object"){if(m===null)throw new Error(t);if(w&&m.constructor===ArrayBuffer)m=new Uint8Array(m);else if(!Array.isArray(m)&&(!w||!ArrayBuffer.isView(m)))throw new Error(t)}else throw new Error(t);D=!0}for(var U=this.blocks,V=this.byteCount,Q=m.length,Y=this.blockCount,X=0,st=this.s,G,lt;X<Q;){if(this.reset)for(this.reset=!1,U[0]=this.block,G=1;G<Y+1;++G)U[G]=0;if(D)for(G=this.start;X<Q&&G<V;++X)U[G>>2]|=m[X]<<O[G++&3];else for(G=this.start;X<Q&&G<V;++X)lt=m.charCodeAt(X),lt<128?U[G>>2]|=lt<<O[G++&3]:lt<2048?(U[G>>2]|=(192|lt>>6)<<O[G++&3],U[G>>2]|=(128|lt&63)<<O[G++&3]):lt<55296||lt>=57344?(U[G>>2]|=(224|lt>>12)<<O[G++&3],U[G>>2]|=(128|lt>>6&63)<<O[G++&3],U[G>>2]|=(128|lt&63)<<O[G++&3]):(lt=65536+((lt&1023)<<10|m.charCodeAt(++X)&1023),U[G>>2]|=(240|lt>>18)<<O[G++&3],U[G>>2]|=(128|lt>>12&63)<<O[G++&3],U[G>>2]|=(128|lt>>6&63)<<O[G++&3],U[G>>2]|=(128|lt&63)<<O[G++&3]);if(this.lastByteIndex=G,G>=V){for(this.start=G-V,this.block=U[Y],G=0;G<Y;++G)st[G]^=U[G];K(st),this.reset=!0}else this.start=G}return this},M.prototype.encode=function(m,D){var q=m&255,U=1,V=[q];for(m=m>>8,q=m&255;q>0;)V.unshift(q),m=m>>8,q=m&255,++U;return D?V.push(U):V.unshift(U),this.update(V),V.length},M.prototype.encodeString=function(m){var D,q=typeof m;if(q!=="string"){if(q==="object"){if(m===null)throw new Error(t);if(w&&m.constructor===ArrayBuffer)m=new Uint8Array(m);else if(!Array.isArray(m)&&(!w||!ArrayBuffer.isView(m)))throw new Error(t)}else throw new Error(t);D=!0}var U=0,V=m.length;if(D)U=V;else for(var Q=0;Q<m.length;++Q){var Y=m.charCodeAt(Q);Y<128?U+=1:Y<2048?U+=2:Y<55296||Y>=57344?U+=3:(Y=65536+((Y&1023)<<10|m.charCodeAt(++Q)&1023),U+=4)}return U+=this.encode(U*8),this.update(m),U},M.prototype.bytepad=function(m,D){for(var q=this.encode(D),U=0;U<m.length;++U)q+=this.encodeString(m[U]);var V=D-q%D,Q=[];return Q.length=V,this.update(Q),this},M.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var m=this.blocks,D=this.lastByteIndex,q=this.blockCount,U=this.s;if(m[D>>2]|=this.padding[D&3],this.lastByteIndex===this.byteCount)for(m[0]=m[q],D=1;D<q+1;++D)m[D]=0;for(m[q-1]|=2147483648,D=0;D<q;++D)U[D]^=m[D];K(U)}},M.prototype.toString=M.prototype.hex=function(){this.finalize();for(var m=this.blockCount,D=this.s,q=this.outputBlocks,U=this.extraBytes,V=0,Q=0,Y="",X;Q<q;){for(V=0;V<m&&Q<q;++V,++Q)X=D[V],Y+=A[X>>4&15]+A[X&15]+A[X>>12&15]+A[X>>8&15]+A[X>>20&15]+A[X>>16&15]+A[X>>28&15]+A[X>>24&15];Q%m===0&&(K(D),V=0)}return U&&(X=D[V],Y+=A[X>>4&15]+A[X&15],U>1&&(Y+=A[X>>12&15]+A[X>>8&15]),U>2&&(Y+=A[X>>20&15]+A[X>>16&15])),Y},M.prototype.arrayBuffer=function(){this.finalize();var m=this.blockCount,D=this.s,q=this.outputBlocks,U=this.extraBytes,V=0,Q=0,Y=this.outputBits>>3,X;U?X=new ArrayBuffer(q+1<<2):X=new ArrayBuffer(Y);for(var st=new Uint32Array(X);Q<q;){for(V=0;V<m&&Q<q;++V,++Q)st[Q]=D[V];Q%m===0&&K(D)}return U&&(st[V]=D[V],X=X.slice(0,Y)),X},M.prototype.buffer=M.prototype.arrayBuffer,M.prototype.digest=M.prototype.array=function(){this.finalize();for(var m=this.blockCount,D=this.s,q=this.outputBlocks,U=this.extraBytes,V=0,Q=0,Y=[],X,st;Q<q;){for(V=0;V<m&&Q<q;++V,++Q)X=Q<<2,st=D[V],Y[X]=st&255,Y[X+1]=st>>8&255,Y[X+2]=st>>16&255,Y[X+3]=st>>24&255;Q%m===0&&K(D)}return U&&(X=Q<<2,st=D[V],Y[X]=st&255,U>1&&(Y[X+1]=st>>8&255),U>2&&(Y[X+2]=st>>16&255)),Y};function J(m,D,q){M.call(this,m,D,q)}J.prototype=new M,J.prototype.finalize=function(){return this.encode(this.outputBits,!0),M.prototype.finalize.call(this)};var K=function(m){var D,q,U,V,Q,Y,X,st,G,lt,At,Bt,de,_t,Tt,Zt,pt,Dt,ge,gt,Ht,ne,dt,kt,ae,vt,Ut,he,bt,zt,fe,yt,Kt,me,Mt,$t,le,Et,Qt,ve,It,jt,be,St,Jt,ce,xt,Ft,ye,Pt,Vt,we,Nt,Gt,Ae,Rt,Lt,Le,$e,je,He,Ke,Qe;for(U=0;U<48;U+=2)V=m[0]^m[10]^m[20]^m[30]^m[40],Q=m[1]^m[11]^m[21]^m[31]^m[41],Y=m[2]^m[12]^m[22]^m[32]^m[42],X=m[3]^m[13]^m[23]^m[33]^m[43],st=m[4]^m[14]^m[24]^m[34]^m[44],G=m[5]^m[15]^m[25]^m[35]^m[45],lt=m[6]^m[16]^m[26]^m[36]^m[46],At=m[7]^m[17]^m[27]^m[37]^m[47],Bt=m[8]^m[18]^m[28]^m[38]^m[48],de=m[9]^m[19]^m[29]^m[39]^m[49],D=Bt^(Y<<1|X>>>31),q=de^(X<<1|Y>>>31),m[0]^=D,m[1]^=q,m[10]^=D,m[11]^=q,m[20]^=D,m[21]^=q,m[30]^=D,m[31]^=q,m[40]^=D,m[41]^=q,D=V^(st<<1|G>>>31),q=Q^(G<<1|st>>>31),m[2]^=D,m[3]^=q,m[12]^=D,m[13]^=q,m[22]^=D,m[23]^=q,m[32]^=D,m[33]^=q,m[42]^=D,m[43]^=q,D=Y^(lt<<1|At>>>31),q=X^(At<<1|lt>>>31),m[4]^=D,m[5]^=q,m[14]^=D,m[15]^=q,m[24]^=D,m[25]^=q,m[34]^=D,m[35]^=q,m[44]^=D,m[45]^=q,D=st^(Bt<<1|de>>>31),q=G^(de<<1|Bt>>>31),m[6]^=D,m[7]^=q,m[16]^=D,m[17]^=q,m[26]^=D,m[27]^=q,m[36]^=D,m[37]^=q,m[46]^=D,m[47]^=q,D=lt^(V<<1|Q>>>31),q=At^(Q<<1|V>>>31),m[8]^=D,m[9]^=q,m[18]^=D,m[19]^=q,m[28]^=D,m[29]^=q,m[38]^=D,m[39]^=q,m[48]^=D,m[49]^=q,_t=m[0],Tt=m[1],ce=m[11]<<4|m[10]>>>28,xt=m[10]<<4|m[11]>>>28,he=m[20]<<3|m[21]>>>29,bt=m[21]<<3|m[20]>>>29,je=m[31]<<9|m[30]>>>23,He=m[30]<<9|m[31]>>>23,jt=m[40]<<18|m[41]>>>14,be=m[41]<<18|m[40]>>>14,me=m[2]<<1|m[3]>>>31,Mt=m[3]<<1|m[2]>>>31,Zt=m[13]<<12|m[12]>>>20,pt=m[12]<<12|m[13]>>>20,Ft=m[22]<<10|m[23]>>>22,ye=m[23]<<10|m[22]>>>22,zt=m[33]<<13|m[32]>>>19,fe=m[32]<<13|m[33]>>>19,Ke=m[42]<<2|m[43]>>>30,Qe=m[43]<<2|m[42]>>>30,Gt=m[5]<<30|m[4]>>>2,Ae=m[4]<<30|m[5]>>>2,$t=m[14]<<6|m[15]>>>26,le=m[15]<<6|m[14]>>>26,Dt=m[25]<<11|m[24]>>>21,ge=m[24]<<11|m[25]>>>21,Pt=m[34]<<15|m[35]>>>17,Vt=m[35]<<15|m[34]>>>17,yt=m[45]<<29|m[44]>>>3,Kt=m[44]<<29|m[45]>>>3,kt=m[6]<<28|m[7]>>>4,ae=m[7]<<28|m[6]>>>4,Rt=m[17]<<23|m[16]>>>9,Lt=m[16]<<23|m[17]>>>9,Et=m[26]<<25|m[27]>>>7,Qt=m[27]<<25|m[26]>>>7,gt=m[36]<<21|m[37]>>>11,Ht=m[37]<<21|m[36]>>>11,we=m[47]<<24|m[46]>>>8,Nt=m[46]<<24|m[47]>>>8,St=m[8]<<27|m[9]>>>5,Jt=m[9]<<27|m[8]>>>5,vt=m[18]<<20|m[19]>>>12,Ut=m[19]<<20|m[18]>>>12,Le=m[29]<<7|m[28]>>>25,$e=m[28]<<7|m[29]>>>25,ve=m[38]<<8|m[39]>>>24,It=m[39]<<8|m[38]>>>24,ne=m[48]<<14|m[49]>>>18,dt=m[49]<<14|m[48]>>>18,m[0]=_t^~Zt&Dt,m[1]=Tt^~pt&ge,m[10]=kt^~vt&he,m[11]=ae^~Ut&bt,m[20]=me^~$t&Et,m[21]=Mt^~le&Qt,m[30]=St^~ce&Ft,m[31]=Jt^~xt&ye,m[40]=Gt^~Rt&Le,m[41]=Ae^~Lt&$e,m[2]=Zt^~Dt&gt,m[3]=pt^~ge&Ht,m[12]=vt^~he&zt,m[13]=Ut^~bt&fe,m[22]=$t^~Et&ve,m[23]=le^~Qt&It,m[32]=ce^~Ft&Pt,m[33]=xt^~ye&Vt,m[42]=Rt^~Le&je,m[43]=Lt^~$e&He,m[4]=Dt^~gt&ne,m[5]=ge^~Ht&dt,m[14]=he^~zt&yt,m[15]=bt^~fe&Kt,m[24]=Et^~ve&jt,m[25]=Qt^~It&be,m[34]=Ft^~Pt&we,m[35]=ye^~Vt&Nt,m[44]=Le^~je&Ke,m[45]=$e^~He&Qe,m[6]=gt^~ne&_t,m[7]=Ht^~dt&Tt,m[16]=zt^~yt&kt,m[17]=fe^~Kt&ae,m[26]=ve^~jt&me,m[27]=It^~be&Mt,m[36]=Pt^~we&St,m[37]=Vt^~Nt&Jt,m[46]=je^~Ke&Gt,m[47]=He^~Qe&Ae,m[8]=ne^~_t&Zt,m[9]=dt^~Tt&pt,m[18]=yt^~kt&vt,m[19]=Kt^~ae&Ut,m[28]=jt^~me&$t,m[29]=be^~Mt&le,m[38]=we^~St&ce,m[39]=Nt^~Jt&xt,m[48]=Ke^~Gt&Rt,m[49]=Qe^~Ae&Lt,m[0]^=z[U],m[1]^=z[U+1]};if(g)r.exports=f;else for(v=0;v<d.length;++v)s[d[v]]=f[d[v]]})()})(cm);var v9=cm.exports;const b9="logger/5.7.0";let Op=!1,Bp=!1;const Vh={debug:1,default:2,info:2,warning:3,error:4,off:5};let Tp=Vh.default,nu=null;function y9(){try{const r=[];if(["NFD","NFC","NFKD","NFKC"].forEach(t=>{try{if("test".normalize(t)!=="test")throw new Error("bad normalize")}catch{r.push(t)}}),r.length)throw new Error("missing "+r.join(", "));if("é".normalize("NFD")!=="é")throw new Error("broken implementation")}catch(r){return r.message}return null}const qp=y9();var Fu;(function(r){r.DEBUG="DEBUG",r.INFO="INFO",r.WARNING="WARNING",r.ERROR="ERROR",r.OFF="OFF"})(Fu||(Fu={}));var tn;(function(r){r.UNKNOWN_ERROR="UNKNOWN_ERROR",r.NOT_IMPLEMENTED="NOT_IMPLEMENTED",r.UNSUPPORTED_OPERATION="UNSUPPORTED_OPERATION",r.NETWORK_ERROR="NETWORK_ERROR",r.SERVER_ERROR="SERVER_ERROR",r.TIMEOUT="TIMEOUT",r.BUFFER_OVERRUN="BUFFER_OVERRUN",r.NUMERIC_FAULT="NUMERIC_FAULT",r.MISSING_NEW="MISSING_NEW",r.INVALID_ARGUMENT="INVALID_ARGUMENT",r.MISSING_ARGUMENT="MISSING_ARGUMENT",r.UNEXPECTED_ARGUMENT="UNEXPECTED_ARGUMENT",r.CALL_EXCEPTION="CALL_EXCEPTION",r.INSUFFICIENT_FUNDS="INSUFFICIENT_FUNDS",r.NONCE_EXPIRED="NONCE_EXPIRED",r.REPLACEMENT_UNDERPRICED="REPLACEMENT_UNDERPRICED",r.UNPREDICTABLE_GAS_LIMIT="UNPREDICTABLE_GAS_LIMIT",r.TRANSACTION_REPLACED="TRANSACTION_REPLACED",r.ACTION_REJECTED="ACTION_REJECTED"})(tn||(tn={}));const Dp="0123456789abcdef";let br=class sr{constructor(t){Object.defineProperty(this,"version",{enumerable:!0,value:t,writable:!1})}_log(t,e){const i=t.toLowerCase();Vh[i]==null&&this.throwArgumentError("invalid log level name","logLevel",t),!(Tp>Vh[i])&&console.log.apply(console,e)}debug(...t){this._log(sr.levels.DEBUG,t)}info(...t){this._log(sr.levels.INFO,t)}warn(...t){this._log(sr.levels.WARNING,t)}makeError(t,e,i){if(Bp)return this.makeError("censored error",e,{});e||(e=sr.errors.UNKNOWN_ERROR),i||(i={});const s=[];Object.keys(i).forEach(w=>{const A=i[w];try{if(A instanceof Uint8Array){let S="";for(let x=0;x<A.length;x++)S+=Dp[A[x]>>4],S+=Dp[A[x]&15];s.push(w+"=Uint8Array(0x"+S+")")}else s.push(w+"="+JSON.stringify(A))}catch{s.push(w+"="+JSON.stringify(i[w].toString()))}}),s.push(`code=${e}`),s.push(`version=${this.version}`);const o=t;let u="";switch(e){case tn.NUMERIC_FAULT:{u="NUMERIC_FAULT";const w=t;switch(w){case"overflow":case"underflow":case"division-by-zero":u+="-"+w;break;case"negative-power":case"negative-width":u+="-unsupported";break;case"unbound-bitwise-result":u+="-unbound-result";break}break}case tn.CALL_EXCEPTION:case tn.INSUFFICIENT_FUNDS:case tn.MISSING_NEW:case tn.NONCE_EXPIRED:case tn.REPLACEMENT_UNDERPRICED:case tn.TRANSACTION_REPLACED:case tn.UNPREDICTABLE_GAS_LIMIT:u=e;break}u&&(t+=" [ See: https://links.ethers.org/v5-errors-"+u+" ]"),s.length&&(t+=" ("+s.join(", ")+")");const g=new Error(t);return g.reason=o,g.code=e,Object.keys(i).forEach(function(w){g[w]=i[w]}),g}throwError(t,e,i){throw this.makeError(t,e,i)}throwArgumentError(t,e,i){return this.throwError(t,sr.errors.INVALID_ARGUMENT,{argument:e,value:i})}assert(t,e,i,s){t||this.throwError(e,i,s)}assertArgument(t,e,i,s){t||this.throwArgumentError(e,i,s)}checkNormalize(t){qp&&this.throwError("platform missing String.prototype.normalize",sr.errors.UNSUPPORTED_OPERATION,{operation:"String.prototype.normalize",form:qp})}checkSafeUint53(t,e){typeof t=="number"&&(e==null&&(e="value not safe"),(t<0||t>=9007199254740991)&&this.throwError(e,sr.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"out-of-safe-range",value:t}),t%1&&this.throwError(e,sr.errors.NUMERIC_FAULT,{operation:"checkSafeInteger",fault:"non-integer",value:t}))}checkArgumentCount(t,e,i){i?i=": "+i:i="",t<e&&this.throwError("missing argument"+i,sr.errors.MISSING_ARGUMENT,{count:t,expectedCount:e}),t>e&&this.throwError("too many arguments"+i,sr.errors.UNEXPECTED_ARGUMENT,{count:t,expectedCount:e})}checkNew(t,e){(t===Object||t==null)&&this.throwError("missing new",sr.errors.MISSING_NEW,{name:e.name})}checkAbstract(t,e){t===e?this.throwError("cannot instantiate abstract class "+JSON.stringify(e.name)+" directly; use a sub-class",sr.errors.UNSUPPORTED_OPERATION,{name:t.name,operation:"new"}):(t===Object||t==null)&&this.throwError("missing new",sr.errors.MISSING_NEW,{name:e.name})}static globalLogger(){return nu||(nu=new sr(b9)),nu}static setCensorship(t,e){if(!t&&e&&this.globalLogger().throwError("cannot permanently disable censorship",sr.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"}),Op){if(!t)return;this.globalLogger().throwError("error censorship permanent",sr.errors.UNSUPPORTED_OPERATION,{operation:"setCensorship"})}Bp=!!t,Op=!!e}static setLogLevel(t){const e=Vh[t.toLowerCase()];if(e==null){sr.globalLogger().warn("invalid log level - "+t);return}Tp=e}static from(t){return new sr(t)}};br.errors=tn,br.levels=Fu;const w9="bytes/5.7.0",Ze=new br(w9);function um(r){return!!r.toHexString}function Io(r){return r.slice||(r.slice=function(){const t=Array.prototype.slice.call(arguments);return Io(new Uint8Array(Array.prototype.slice.apply(r,t)))}),r}function A9(r){return mi(r)&&!(r.length%2)||Fo(r)}function kp(r){return typeof r=="number"&&r==r&&r%1===0}function Fo(r){if(r==null)return!1;if(r.constructor===Uint8Array)return!0;if(typeof r=="string"||!kp(r.length)||r.length<0)return!1;for(let t=0;t<r.length;t++){const e=r[t];if(!kp(e)||e<0||e>=256)return!1}return!0}function Ge(r,t){if(t||(t={}),typeof r=="number"){Ze.checkSafeUint53(r,"invalid arrayify value");const e=[];for(;r;)e.unshift(r&255),r=parseInt(String(r/256));return e.length===0&&e.push(0),Io(new Uint8Array(e))}if(t.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),um(r)&&(r=r.toHexString()),mi(r)){let e=r.substring(2);e.length%2&&(t.hexPad==="left"?e="0"+e:t.hexPad==="right"?e+="0":Ze.throwArgumentError("hex data is odd-length","value",r));const i=[];for(let s=0;s<e.length;s+=2)i.push(parseInt(e.substring(s,s+2),16));return Io(new Uint8Array(i))}return Fo(r)?Io(new Uint8Array(r)):Ze.throwArgumentError("invalid arrayify value","value",r)}function _9(r){const t=r.map(s=>Ge(s)),e=t.reduce((s,o)=>s+o.length,0),i=new Uint8Array(e);return t.reduce((s,o)=>(i.set(o,s),s+o.length),0),Io(i)}function M9(r,t){r=Ge(r),r.length>t&&Ze.throwArgumentError("value out of range","value",arguments[0]);const e=new Uint8Array(t);return e.set(r,t-r.length),Io(e)}function mi(r,t){return!(typeof r!="string"||!r.match(/^0x[0-9A-Fa-f]*$/)||t&&r.length!==2+2*t)}const su="0123456789abcdef";function Gr(r,t){if(t||(t={}),typeof r=="number"){Ze.checkSafeUint53(r,"invalid hexlify value");let e="";for(;r;)e=su[r&15]+e,r=Math.floor(r/16);return e.length?(e.length%2&&(e="0"+e),"0x"+e):"0x00"}if(typeof r=="bigint")return r=r.toString(16),r.length%2?"0x0"+r:"0x"+r;if(t.allowMissingPrefix&&typeof r=="string"&&r.substring(0,2)!=="0x"&&(r="0x"+r),um(r))return r.toHexString();if(mi(r))return r.length%2&&(t.hexPad==="left"?r="0x0"+r.substring(2):t.hexPad==="right"?r+="0":Ze.throwArgumentError("hex data is odd-length","value",r)),r.toLowerCase();if(Fo(r)){let e="0x";for(let i=0;i<r.length;i++){let s=r[i];e+=su[(s&240)>>4]+su[s&15]}return e}return Ze.throwArgumentError("invalid hexlify value","value",r)}function E9(r){if(typeof r!="string")r=Gr(r);else if(!mi(r)||r.length%2)return null;return(r.length-2)/2}function Up(r,t,e){return typeof r!="string"?r=Gr(r):(!mi(r)||r.length%2)&&Ze.throwArgumentError("invalid hexData","value",r),t=2+2*t,e!=null?"0x"+r.substring(t,2+2*e):"0x"+r.substring(t)}function Pn(r,t){for(typeof r!="string"?r=Gr(r):mi(r)||Ze.throwArgumentError("invalid hex string","value",r),r.length>2*t+2&&Ze.throwArgumentError("value out of range","value",arguments[1]);r.length<2*t+2;)r="0x0"+r.substring(2);return r}function dm(r){const t={r:"0x",s:"0x",_vs:"0x",recoveryParam:0,v:0,yParityAndS:"0x",compact:"0x"};if(A9(r)){let e=Ge(r);e.length===64?(t.v=27+(e[32]>>7),e[32]&=127,t.r=Gr(e.slice(0,32)),t.s=Gr(e.slice(32,64))):e.length===65?(t.r=Gr(e.slice(0,32)),t.s=Gr(e.slice(32,64)),t.v=e[64]):Ze.throwArgumentError("invalid signature string","signature",r),t.v<27&&(t.v===0||t.v===1?t.v+=27:Ze.throwArgumentError("signature invalid v byte","signature",r)),t.recoveryParam=1-t.v%2,t.recoveryParam&&(e[32]|=128),t._vs=Gr(e.slice(32,64))}else{if(t.r=r.r,t.s=r.s,t.v=r.v,t.recoveryParam=r.recoveryParam,t._vs=r._vs,t._vs!=null){const s=M9(Ge(t._vs),32);t._vs=Gr(s);const o=s[0]>=128?1:0;t.recoveryParam==null?t.recoveryParam=o:t.recoveryParam!==o&&Ze.throwArgumentError("signature recoveryParam mismatch _vs","signature",r),s[0]&=127;const u=Gr(s);t.s==null?t.s=u:t.s!==u&&Ze.throwArgumentError("signature v mismatch _vs","signature",r)}if(t.recoveryParam==null)t.v==null?Ze.throwArgumentError("signature missing v and recoveryParam","signature",r):t.v===0||t.v===1?t.recoveryParam=t.v:t.recoveryParam=1-t.v%2;else if(t.v==null)t.v=27+t.recoveryParam;else{const s=t.v===0||t.v===1?t.v:1-t.v%2;t.recoveryParam!==s&&Ze.throwArgumentError("signature recoveryParam mismatch v","signature",r)}t.r==null||!mi(t.r)?Ze.throwArgumentError("signature missing or invalid r","signature",r):t.r=Pn(t.r,32),t.s==null||!mi(t.s)?Ze.throwArgumentError("signature missing or invalid s","signature",r):t.s=Pn(t.s,32);const e=Ge(t.s);e[0]>=128&&Ze.throwArgumentError("signature s out of range","signature",r),t.recoveryParam&&(e[0]|=128);const i=Gr(e);t._vs&&(mi(t._vs)||Ze.throwArgumentError("signature invalid _vs","signature",r),t._vs=Pn(t._vs,32)),t._vs==null?t._vs=i:t._vs!==i&&Ze.throwArgumentError("signature _vs mismatch v and s","signature",r)}return t.yParityAndS=t._vs,t.compact=t.r+t.yParityAndS.substring(2),t}function m0(r){return"0x"+v9.keccak_256(Ge(r))}var lm={exports:{}},I9={},S9=Object.freeze({__proto__:null,default:I9}),x9=m9(S9);(function(r){(function(t,e){function i(a,f){if(!a)throw new Error(f||"Assertion failed")}function s(a,f){a.super_=f;var d=function(){};d.prototype=f.prototype,a.prototype=new d,a.prototype.constructor=a}function o(a,f,d){if(o.isBN(a))return a;this.negative=0,this.words=null,this.length=0,this.red=null,a!==null&&((f==="le"||f==="be")&&(d=f,f=10),this._init(a||0,f||10,d||"be"))}typeof t=="object"?t.exports=o:e.BN=o,o.BN=o,o.wordSize=26;var u;try{typeof window<"u"&&typeof window.Buffer<"u"?u=window.Buffer:u=x9.Buffer}catch{}o.isBN=function(a){return a instanceof o?!0:a!==null&&typeof a=="object"&&a.constructor.wordSize===o.wordSize&&Array.isArray(a.words)},o.max=function(a,f){return a.cmp(f)>0?a:f},o.min=function(a,f){return a.cmp(f)<0?a:f},o.prototype._init=function(a,f,d){if(typeof a=="number")return this._initNumber(a,f,d);if(typeof a=="object")return this._initArray(a,f,d);f==="hex"&&(f=16),i(f===(f|0)&&f>=2&&f<=36),a=a.toString().replace(/\s+/g,"");var v=0;a[0]==="-"&&(v++,this.negative=1),v<a.length&&(f===16?this._parseHex(a,v,d):(this._parseBase(a,f,v),d==="le"&&this._initArray(this.toArray(),f,d)))},o.prototype._initNumber=function(a,f,d){a<0&&(this.negative=1,a=-a),a<67108864?(this.words=[a&67108863],this.length=1):a<4503599627370496?(this.words=[a&67108863,a/67108864&67108863],this.length=2):(i(a<9007199254740992),this.words=[a&67108863,a/67108864&67108863,1],this.length=3),d==="le"&&this._initArray(this.toArray(),f,d)},o.prototype._initArray=function(a,f,d){if(i(typeof a.length=="number"),a.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(a.length/3),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var b,I,_=0;if(d==="be")for(v=a.length-1,b=0;v>=0;v-=3)I=a[v]|a[v-1]<<8|a[v-2]<<16,this.words[b]|=I<<_&67108863,this.words[b+1]=I>>>26-_&67108863,_+=24,_>=26&&(_-=26,b++);else if(d==="le")for(v=0,b=0;v<a.length;v+=3)I=a[v]|a[v+1]<<8|a[v+2]<<16,this.words[b]|=I<<_&67108863,this.words[b+1]=I>>>26-_&67108863,_+=24,_>=26&&(_-=26,b++);return this._strip()};function g(a,f){var d=a.charCodeAt(f);if(d>=48&&d<=57)return d-48;if(d>=65&&d<=70)return d-55;if(d>=97&&d<=102)return d-87;i(!1,"Invalid character in "+a)}function w(a,f,d){var v=g(a,d);return d-1>=f&&(v|=g(a,d-1)<<4),v}o.prototype._parseHex=function(a,f,d){this.length=Math.ceil((a.length-f)/6),this.words=new Array(this.length);for(var v=0;v<this.length;v++)this.words[v]=0;var b=0,I=0,_;if(d==="be")for(v=a.length-1;v>=f;v-=2)_=w(a,f,v)<<b,this.words[I]|=_&67108863,b>=18?(b-=18,I+=1,this.words[I]|=_>>>26):b+=8;else{var l=a.length-f;for(v=l%2===0?f+1:f;v<a.length;v+=2)_=w(a,f,v)<<b,this.words[I]|=_&67108863,b>=18?(b-=18,I+=1,this.words[I]|=_>>>26):b+=8}this._strip()};function A(a,f,d,v){for(var b=0,I=0,_=Math.min(a.length,d),l=f;l<_;l++){var c=a.charCodeAt(l)-48;b*=v,c>=49?I=c-49+10:c>=17?I=c-17+10:I=c,i(c>=0&&I<v,"Invalid character"),b+=I}return b}o.prototype._parseBase=function(a,f,d){this.words=[0],this.length=1;for(var v=0,b=1;b<=67108863;b*=f)v++;v--,b=b/f|0;for(var I=a.length-d,_=I%v,l=Math.min(I,I-_)+d,c=0,M=d;M<l;M+=v)c=A(a,M,M+v,f),this.imuln(b),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c);if(_!==0){var J=1;for(c=A(a,M,a.length,f),M=0;M<_;M++)J*=f;this.imuln(J),this.words[0]+c<67108864?this.words[0]+=c:this._iaddn(c)}this._strip()},o.prototype.copy=function(a){a.words=new Array(this.length);for(var f=0;f<this.length;f++)a.words[f]=this.words[f];a.length=this.length,a.negative=this.negative,a.red=this.red};function S(a,f){a.words=f.words,a.length=f.length,a.negative=f.negative,a.red=f.red}if(o.prototype._move=function(a){S(a,this)},o.prototype.clone=function(){var a=new o(null);return this.copy(a),a},o.prototype._expand=function(a){for(;this.length<a;)this.words[this.length++]=0;return this},o.prototype._strip=function(){for(;this.length>1&&this.words[this.length-1]===0;)this.length--;return this._normSign()},o.prototype._normSign=function(){return this.length===1&&this.words[0]===0&&(this.negative=0),this},typeof Symbol<"u"&&typeof Symbol.for=="function")try{o.prototype[Symbol.for("nodejs.util.inspect.custom")]=x}catch{o.prototype.inspect=x}else o.prototype.inspect=x;function x(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var N=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],R=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],O=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];o.prototype.toString=function(a,f){a=a||10,f=f|0||1;var d;if(a===16||a==="hex"){d="";for(var v=0,b=0,I=0;I<this.length;I++){var _=this.words[I],l=((_<<v|b)&16777215).toString(16);b=_>>>24-v&16777215,v+=2,v>=26&&(v-=26,I--),b!==0||I!==this.length-1?d=N[6-l.length]+l+d:d=l+d}for(b!==0&&(d=b.toString(16)+d);d.length%f!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}if(a===(a|0)&&a>=2&&a<=36){var c=R[a],M=O[a];d="";var J=this.clone();for(J.negative=0;!J.isZero();){var K=J.modrn(M).toString(a);J=J.idivn(M),J.isZero()?d=K+d:d=N[c-K.length]+K+d}for(this.isZero()&&(d="0"+d);d.length%f!==0;)d="0"+d;return this.negative!==0&&(d="-"+d),d}i(!1,"Base should be between 2 and 36")},o.prototype.toNumber=function(){var a=this.words[0];return this.length===2?a+=this.words[1]*67108864:this.length===3&&this.words[2]===1?a+=4503599627370496+this.words[1]*67108864:this.length>2&&i(!1,"Number can only safely store up to 53 bits"),this.negative!==0?-a:a},o.prototype.toJSON=function(){return this.toString(16,2)},u&&(o.prototype.toBuffer=function(a,f){return this.toArrayLike(u,a,f)}),o.prototype.toArray=function(a,f){return this.toArrayLike(Array,a,f)};var z=function(a,f){return a.allocUnsafe?a.allocUnsafe(f):new a(f)};o.prototype.toArrayLike=function(a,f,d){this._strip();var v=this.byteLength(),b=d||Math.max(1,v);i(v<=b,"byte array longer than desired length"),i(b>0,"Requested array length <= 0");var I=z(a,b),_=f==="le"?"LE":"BE";return this["_toArrayLike"+_](I,v),I},o.prototype._toArrayLikeLE=function(a,f){for(var d=0,v=0,b=0,I=0;b<this.length;b++){var _=this.words[b]<<I|v;a[d++]=_&255,d<a.length&&(a[d++]=_>>8&255),d<a.length&&(a[d++]=_>>16&255),I===6?(d<a.length&&(a[d++]=_>>24&255),v=0,I=0):(v=_>>>24,I+=2)}if(d<a.length)for(a[d++]=v;d<a.length;)a[d++]=0},o.prototype._toArrayLikeBE=function(a,f){for(var d=a.length-1,v=0,b=0,I=0;b<this.length;b++){var _=this.words[b]<<I|v;a[d--]=_&255,d>=0&&(a[d--]=_>>8&255),d>=0&&(a[d--]=_>>16&255),I===6?(d>=0&&(a[d--]=_>>24&255),v=0,I=0):(v=_>>>24,I+=2)}if(d>=0)for(a[d--]=v;d>=0;)a[d--]=0},Math.clz32?o.prototype._countBits=function(a){return 32-Math.clz32(a)}:o.prototype._countBits=function(a){var f=a,d=0;return f>=4096&&(d+=13,f>>>=13),f>=64&&(d+=7,f>>>=7),f>=8&&(d+=4,f>>>=4),f>=2&&(d+=2,f>>>=2),d+f},o.prototype._zeroBits=function(a){if(a===0)return 26;var f=a,d=0;return f&8191||(d+=13,f>>>=13),f&127||(d+=7,f>>>=7),f&15||(d+=4,f>>>=4),f&3||(d+=2,f>>>=2),f&1||d++,d},o.prototype.bitLength=function(){var a=this.words[this.length-1],f=this._countBits(a);return(this.length-1)*26+f};function L(a){for(var f=new Array(a.bitLength()),d=0;d<f.length;d++){var v=d/26|0,b=d%26;f[d]=a.words[v]>>>b&1}return f}o.prototype.zeroBits=function(){if(this.isZero())return 0;for(var a=0,f=0;f<this.length;f++){var d=this._zeroBits(this.words[f]);if(a+=d,d!==26)break}return a},o.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},o.prototype.toTwos=function(a){return this.negative!==0?this.abs().inotn(a).iaddn(1):this.clone()},o.prototype.fromTwos=function(a){return this.testn(a-1)?this.notn(a).iaddn(1).ineg():this.clone()},o.prototype.isNeg=function(){return this.negative!==0},o.prototype.neg=function(){return this.clone().ineg()},o.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},o.prototype.iuor=function(a){for(;this.length<a.length;)this.words[this.length++]=0;for(var f=0;f<a.length;f++)this.words[f]=this.words[f]|a.words[f];return this._strip()},o.prototype.ior=function(a){return i((this.negative|a.negative)===0),this.iuor(a)},o.prototype.or=function(a){return this.length>a.length?this.clone().ior(a):a.clone().ior(this)},o.prototype.uor=function(a){return this.length>a.length?this.clone().iuor(a):a.clone().iuor(this)},o.prototype.iuand=function(a){var f;this.length>a.length?f=a:f=this;for(var d=0;d<f.length;d++)this.words[d]=this.words[d]&a.words[d];return this.length=f.length,this._strip()},o.prototype.iand=function(a){return i((this.negative|a.negative)===0),this.iuand(a)},o.prototype.and=function(a){return this.length>a.length?this.clone().iand(a):a.clone().iand(this)},o.prototype.uand=function(a){return this.length>a.length?this.clone().iuand(a):a.clone().iuand(this)},o.prototype.iuxor=function(a){var f,d;this.length>a.length?(f=this,d=a):(f=a,d=this);for(var v=0;v<d.length;v++)this.words[v]=f.words[v]^d.words[v];if(this!==f)for(;v<f.length;v++)this.words[v]=f.words[v];return this.length=f.length,this._strip()},o.prototype.ixor=function(a){return i((this.negative|a.negative)===0),this.iuxor(a)},o.prototype.xor=function(a){return this.length>a.length?this.clone().ixor(a):a.clone().ixor(this)},o.prototype.uxor=function(a){return this.length>a.length?this.clone().iuxor(a):a.clone().iuxor(this)},o.prototype.inotn=function(a){i(typeof a=="number"&&a>=0);var f=Math.ceil(a/26)|0,d=a%26;this._expand(f),d>0&&f--;for(var v=0;v<f;v++)this.words[v]=~this.words[v]&67108863;return d>0&&(this.words[v]=~this.words[v]&67108863>>26-d),this._strip()},o.prototype.notn=function(a){return this.clone().inotn(a)},o.prototype.setn=function(a,f){i(typeof a=="number"&&a>=0);var d=a/26|0,v=a%26;return this._expand(d+1),f?this.words[d]=this.words[d]|1<<v:this.words[d]=this.words[d]&~(1<<v),this._strip()},o.prototype.iadd=function(a){var f;if(this.negative!==0&&a.negative===0)return this.negative=0,f=this.isub(a),this.negative^=1,this._normSign();if(this.negative===0&&a.negative!==0)return a.negative=0,f=this.isub(a),a.negative=1,f._normSign();var d,v;this.length>a.length?(d=this,v=a):(d=a,v=this);for(var b=0,I=0;I<v.length;I++)f=(d.words[I]|0)+(v.words[I]|0)+b,this.words[I]=f&67108863,b=f>>>26;for(;b!==0&&I<d.length;I++)f=(d.words[I]|0)+b,this.words[I]=f&67108863,b=f>>>26;if(this.length=d.length,b!==0)this.words[this.length]=b,this.length++;else if(d!==this)for(;I<d.length;I++)this.words[I]=d.words[I];return this},o.prototype.add=function(a){var f;return a.negative!==0&&this.negative===0?(a.negative=0,f=this.sub(a),a.negative^=1,f):a.negative===0&&this.negative!==0?(this.negative=0,f=a.sub(this),this.negative=1,f):this.length>a.length?this.clone().iadd(a):a.clone().iadd(this)},o.prototype.isub=function(a){if(a.negative!==0){a.negative=0;var f=this.iadd(a);return a.negative=1,f._normSign()}else if(this.negative!==0)return this.negative=0,this.iadd(a),this.negative=1,this._normSign();var d=this.cmp(a);if(d===0)return this.negative=0,this.length=1,this.words[0]=0,this;var v,b;d>0?(v=this,b=a):(v=a,b=this);for(var I=0,_=0;_<b.length;_++)f=(v.words[_]|0)-(b.words[_]|0)+I,I=f>>26,this.words[_]=f&67108863;for(;I!==0&&_<v.length;_++)f=(v.words[_]|0)+I,I=f>>26,this.words[_]=f&67108863;if(I===0&&_<v.length&&v!==this)for(;_<v.length;_++)this.words[_]=v.words[_];return this.length=Math.max(this.length,_),v!==this&&(this.negative=1),this._strip()},o.prototype.sub=function(a){return this.clone().isub(a)};function H(a,f,d){d.negative=f.negative^a.negative;var v=a.length+f.length|0;d.length=v,v=v-1|0;var b=a.words[0]|0,I=f.words[0]|0,_=b*I,l=_&67108863,c=_/67108864|0;d.words[0]=l;for(var M=1;M<v;M++){for(var J=c>>>26,K=c&67108863,m=Math.min(M,f.length-1),D=Math.max(0,M-a.length+1);D<=m;D++){var q=M-D|0;b=a.words[q]|0,I=f.words[D]|0,_=b*I+K,J+=_/67108864|0,K=_&67108863}d.words[M]=K|0,c=J|0}return c!==0?d.words[M]=c|0:d.length--,d._strip()}var rt=function(a,f,d){var v=a.words,b=f.words,I=d.words,_=0,l,c,M,J=v[0]|0,K=J&8191,m=J>>>13,D=v[1]|0,q=D&8191,U=D>>>13,V=v[2]|0,Q=V&8191,Y=V>>>13,X=v[3]|0,st=X&8191,G=X>>>13,lt=v[4]|0,At=lt&8191,Bt=lt>>>13,de=v[5]|0,_t=de&8191,Tt=de>>>13,Zt=v[6]|0,pt=Zt&8191,Dt=Zt>>>13,ge=v[7]|0,gt=ge&8191,Ht=ge>>>13,ne=v[8]|0,dt=ne&8191,kt=ne>>>13,ae=v[9]|0,vt=ae&8191,Ut=ae>>>13,he=b[0]|0,bt=he&8191,zt=he>>>13,fe=b[1]|0,yt=fe&8191,Kt=fe>>>13,me=b[2]|0,Mt=me&8191,$t=me>>>13,le=b[3]|0,Et=le&8191,Qt=le>>>13,ve=b[4]|0,It=ve&8191,jt=ve>>>13,be=b[5]|0,St=be&8191,Jt=be>>>13,ce=b[6]|0,xt=ce&8191,Ft=ce>>>13,ye=b[7]|0,Pt=ye&8191,Vt=ye>>>13,we=b[8]|0,Nt=we&8191,Gt=we>>>13,Ae=b[9]|0,Rt=Ae&8191,Lt=Ae>>>13;d.negative=a.negative^f.negative,d.length=19,l=Math.imul(K,bt),c=Math.imul(K,zt),c=c+Math.imul(m,bt)|0,M=Math.imul(m,zt);var Le=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+(Le>>>26)|0,Le&=67108863,l=Math.imul(q,bt),c=Math.imul(q,zt),c=c+Math.imul(U,bt)|0,M=Math.imul(U,zt),l=l+Math.imul(K,yt)|0,c=c+Math.imul(K,Kt)|0,c=c+Math.imul(m,yt)|0,M=M+Math.imul(m,Kt)|0;var $e=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+($e>>>26)|0,$e&=67108863,l=Math.imul(Q,bt),c=Math.imul(Q,zt),c=c+Math.imul(Y,bt)|0,M=Math.imul(Y,zt),l=l+Math.imul(q,yt)|0,c=c+Math.imul(q,Kt)|0,c=c+Math.imul(U,yt)|0,M=M+Math.imul(U,Kt)|0,l=l+Math.imul(K,Mt)|0,c=c+Math.imul(K,$t)|0,c=c+Math.imul(m,Mt)|0,M=M+Math.imul(m,$t)|0;var je=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+(je>>>26)|0,je&=67108863,l=Math.imul(st,bt),c=Math.imul(st,zt),c=c+Math.imul(G,bt)|0,M=Math.imul(G,zt),l=l+Math.imul(Q,yt)|0,c=c+Math.imul(Q,Kt)|0,c=c+Math.imul(Y,yt)|0,M=M+Math.imul(Y,Kt)|0,l=l+Math.imul(q,Mt)|0,c=c+Math.imul(q,$t)|0,c=c+Math.imul(U,Mt)|0,M=M+Math.imul(U,$t)|0,l=l+Math.imul(K,Et)|0,c=c+Math.imul(K,Qt)|0,c=c+Math.imul(m,Et)|0,M=M+Math.imul(m,Qt)|0;var He=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+(He>>>26)|0,He&=67108863,l=Math.imul(At,bt),c=Math.imul(At,zt),c=c+Math.imul(Bt,bt)|0,M=Math.imul(Bt,zt),l=l+Math.imul(st,yt)|0,c=c+Math.imul(st,Kt)|0,c=c+Math.imul(G,yt)|0,M=M+Math.imul(G,Kt)|0,l=l+Math.imul(Q,Mt)|0,c=c+Math.imul(Q,$t)|0,c=c+Math.imul(Y,Mt)|0,M=M+Math.imul(Y,$t)|0,l=l+Math.imul(q,Et)|0,c=c+Math.imul(q,Qt)|0,c=c+Math.imul(U,Et)|0,M=M+Math.imul(U,Qt)|0,l=l+Math.imul(K,It)|0,c=c+Math.imul(K,jt)|0,c=c+Math.imul(m,It)|0,M=M+Math.imul(m,jt)|0;var Ke=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+(Ke>>>26)|0,Ke&=67108863,l=Math.imul(_t,bt),c=Math.imul(_t,zt),c=c+Math.imul(Tt,bt)|0,M=Math.imul(Tt,zt),l=l+Math.imul(At,yt)|0,c=c+Math.imul(At,Kt)|0,c=c+Math.imul(Bt,yt)|0,M=M+Math.imul(Bt,Kt)|0,l=l+Math.imul(st,Mt)|0,c=c+Math.imul(st,$t)|0,c=c+Math.imul(G,Mt)|0,M=M+Math.imul(G,$t)|0,l=l+Math.imul(Q,Et)|0,c=c+Math.imul(Q,Qt)|0,c=c+Math.imul(Y,Et)|0,M=M+Math.imul(Y,Qt)|0,l=l+Math.imul(q,It)|0,c=c+Math.imul(q,jt)|0,c=c+Math.imul(U,It)|0,M=M+Math.imul(U,jt)|0,l=l+Math.imul(K,St)|0,c=c+Math.imul(K,Jt)|0,c=c+Math.imul(m,St)|0,M=M+Math.imul(m,Jt)|0;var Qe=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+(Qe>>>26)|0,Qe&=67108863,l=Math.imul(pt,bt),c=Math.imul(pt,zt),c=c+Math.imul(Dt,bt)|0,M=Math.imul(Dt,zt),l=l+Math.imul(_t,yt)|0,c=c+Math.imul(_t,Kt)|0,c=c+Math.imul(Tt,yt)|0,M=M+Math.imul(Tt,Kt)|0,l=l+Math.imul(At,Mt)|0,c=c+Math.imul(At,$t)|0,c=c+Math.imul(Bt,Mt)|0,M=M+Math.imul(Bt,$t)|0,l=l+Math.imul(st,Et)|0,c=c+Math.imul(st,Qt)|0,c=c+Math.imul(G,Et)|0,M=M+Math.imul(G,Qt)|0,l=l+Math.imul(Q,It)|0,c=c+Math.imul(Q,jt)|0,c=c+Math.imul(Y,It)|0,M=M+Math.imul(Y,jt)|0,l=l+Math.imul(q,St)|0,c=c+Math.imul(q,Jt)|0,c=c+Math.imul(U,St)|0,M=M+Math.imul(U,Jt)|0,l=l+Math.imul(K,xt)|0,c=c+Math.imul(K,Ft)|0,c=c+Math.imul(m,xt)|0,M=M+Math.imul(m,Ft)|0;var Ar=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+(Ar>>>26)|0,Ar&=67108863,l=Math.imul(gt,bt),c=Math.imul(gt,zt),c=c+Math.imul(Ht,bt)|0,M=Math.imul(Ht,zt),l=l+Math.imul(pt,yt)|0,c=c+Math.imul(pt,Kt)|0,c=c+Math.imul(Dt,yt)|0,M=M+Math.imul(Dt,Kt)|0,l=l+Math.imul(_t,Mt)|0,c=c+Math.imul(_t,$t)|0,c=c+Math.imul(Tt,Mt)|0,M=M+Math.imul(Tt,$t)|0,l=l+Math.imul(At,Et)|0,c=c+Math.imul(At,Qt)|0,c=c+Math.imul(Bt,Et)|0,M=M+Math.imul(Bt,Qt)|0,l=l+Math.imul(st,It)|0,c=c+Math.imul(st,jt)|0,c=c+Math.imul(G,It)|0,M=M+Math.imul(G,jt)|0,l=l+Math.imul(Q,St)|0,c=c+Math.imul(Q,Jt)|0,c=c+Math.imul(Y,St)|0,M=M+Math.imul(Y,Jt)|0,l=l+Math.imul(q,xt)|0,c=c+Math.imul(q,Ft)|0,c=c+Math.imul(U,xt)|0,M=M+Math.imul(U,Ft)|0,l=l+Math.imul(K,Pt)|0,c=c+Math.imul(K,Vt)|0,c=c+Math.imul(m,Pt)|0,M=M+Math.imul(m,Vt)|0;var ri=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+(ri>>>26)|0,ri&=67108863,l=Math.imul(dt,bt),c=Math.imul(dt,zt),c=c+Math.imul(kt,bt)|0,M=Math.imul(kt,zt),l=l+Math.imul(gt,yt)|0,c=c+Math.imul(gt,Kt)|0,c=c+Math.imul(Ht,yt)|0,M=M+Math.imul(Ht,Kt)|0,l=l+Math.imul(pt,Mt)|0,c=c+Math.imul(pt,$t)|0,c=c+Math.imul(Dt,Mt)|0,M=M+Math.imul(Dt,$t)|0,l=l+Math.imul(_t,Et)|0,c=c+Math.imul(_t,Qt)|0,c=c+Math.imul(Tt,Et)|0,M=M+Math.imul(Tt,Qt)|0,l=l+Math.imul(At,It)|0,c=c+Math.imul(At,jt)|0,c=c+Math.imul(Bt,It)|0,M=M+Math.imul(Bt,jt)|0,l=l+Math.imul(st,St)|0,c=c+Math.imul(st,Jt)|0,c=c+Math.imul(G,St)|0,M=M+Math.imul(G,Jt)|0,l=l+Math.imul(Q,xt)|0,c=c+Math.imul(Q,Ft)|0,c=c+Math.imul(Y,xt)|0,M=M+Math.imul(Y,Ft)|0,l=l+Math.imul(q,Pt)|0,c=c+Math.imul(q,Vt)|0,c=c+Math.imul(U,Pt)|0,M=M+Math.imul(U,Vt)|0,l=l+Math.imul(K,Nt)|0,c=c+Math.imul(K,Gt)|0,c=c+Math.imul(m,Nt)|0,M=M+Math.imul(m,Gt)|0;var _r=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+(_r>>>26)|0,_r&=67108863,l=Math.imul(vt,bt),c=Math.imul(vt,zt),c=c+Math.imul(Ut,bt)|0,M=Math.imul(Ut,zt),l=l+Math.imul(dt,yt)|0,c=c+Math.imul(dt,Kt)|0,c=c+Math.imul(kt,yt)|0,M=M+Math.imul(kt,Kt)|0,l=l+Math.imul(gt,Mt)|0,c=c+Math.imul(gt,$t)|0,c=c+Math.imul(Ht,Mt)|0,M=M+Math.imul(Ht,$t)|0,l=l+Math.imul(pt,Et)|0,c=c+Math.imul(pt,Qt)|0,c=c+Math.imul(Dt,Et)|0,M=M+Math.imul(Dt,Qt)|0,l=l+Math.imul(_t,It)|0,c=c+Math.imul(_t,jt)|0,c=c+Math.imul(Tt,It)|0,M=M+Math.imul(Tt,jt)|0,l=l+Math.imul(At,St)|0,c=c+Math.imul(At,Jt)|0,c=c+Math.imul(Bt,St)|0,M=M+Math.imul(Bt,Jt)|0,l=l+Math.imul(st,xt)|0,c=c+Math.imul(st,Ft)|0,c=c+Math.imul(G,xt)|0,M=M+Math.imul(G,Ft)|0,l=l+Math.imul(Q,Pt)|0,c=c+Math.imul(Q,Vt)|0,c=c+Math.imul(Y,Pt)|0,M=M+Math.imul(Y,Vt)|0,l=l+Math.imul(q,Nt)|0,c=c+Math.imul(q,Gt)|0,c=c+Math.imul(U,Nt)|0,M=M+Math.imul(U,Gt)|0,l=l+Math.imul(K,Rt)|0,c=c+Math.imul(K,Lt)|0,c=c+Math.imul(m,Rt)|0,M=M+Math.imul(m,Lt)|0;var ii=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+(ii>>>26)|0,ii&=67108863,l=Math.imul(vt,yt),c=Math.imul(vt,Kt),c=c+Math.imul(Ut,yt)|0,M=Math.imul(Ut,Kt),l=l+Math.imul(dt,Mt)|0,c=c+Math.imul(dt,$t)|0,c=c+Math.imul(kt,Mt)|0,M=M+Math.imul(kt,$t)|0,l=l+Math.imul(gt,Et)|0,c=c+Math.imul(gt,Qt)|0,c=c+Math.imul(Ht,Et)|0,M=M+Math.imul(Ht,Qt)|0,l=l+Math.imul(pt,It)|0,c=c+Math.imul(pt,jt)|0,c=c+Math.imul(Dt,It)|0,M=M+Math.imul(Dt,jt)|0,l=l+Math.imul(_t,St)|0,c=c+Math.imul(_t,Jt)|0,c=c+Math.imul(Tt,St)|0,M=M+Math.imul(Tt,Jt)|0,l=l+Math.imul(At,xt)|0,c=c+Math.imul(At,Ft)|0,c=c+Math.imul(Bt,xt)|0,M=M+Math.imul(Bt,Ft)|0,l=l+Math.imul(st,Pt)|0,c=c+Math.imul(st,Vt)|0,c=c+Math.imul(G,Pt)|0,M=M+Math.imul(G,Vt)|0,l=l+Math.imul(Q,Nt)|0,c=c+Math.imul(Q,Gt)|0,c=c+Math.imul(Y,Nt)|0,M=M+Math.imul(Y,Gt)|0,l=l+Math.imul(q,Rt)|0,c=c+Math.imul(q,Lt)|0,c=c+Math.imul(U,Rt)|0,M=M+Math.imul(U,Lt)|0;var ni=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+(ni>>>26)|0,ni&=67108863,l=Math.imul(vt,Mt),c=Math.imul(vt,$t),c=c+Math.imul(Ut,Mt)|0,M=Math.imul(Ut,$t),l=l+Math.imul(dt,Et)|0,c=c+Math.imul(dt,Qt)|0,c=c+Math.imul(kt,Et)|0,M=M+Math.imul(kt,Qt)|0,l=l+Math.imul(gt,It)|0,c=c+Math.imul(gt,jt)|0,c=c+Math.imul(Ht,It)|0,M=M+Math.imul(Ht,jt)|0,l=l+Math.imul(pt,St)|0,c=c+Math.imul(pt,Jt)|0,c=c+Math.imul(Dt,St)|0,M=M+Math.imul(Dt,Jt)|0,l=l+Math.imul(_t,xt)|0,c=c+Math.imul(_t,Ft)|0,c=c+Math.imul(Tt,xt)|0,M=M+Math.imul(Tt,Ft)|0,l=l+Math.imul(At,Pt)|0,c=c+Math.imul(At,Vt)|0,c=c+Math.imul(Bt,Pt)|0,M=M+Math.imul(Bt,Vt)|0,l=l+Math.imul(st,Nt)|0,c=c+Math.imul(st,Gt)|0,c=c+Math.imul(G,Nt)|0,M=M+Math.imul(G,Gt)|0,l=l+Math.imul(Q,Rt)|0,c=c+Math.imul(Q,Lt)|0,c=c+Math.imul(Y,Rt)|0,M=M+Math.imul(Y,Lt)|0;var si=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+(si>>>26)|0,si&=67108863,l=Math.imul(vt,Et),c=Math.imul(vt,Qt),c=c+Math.imul(Ut,Et)|0,M=Math.imul(Ut,Qt),l=l+Math.imul(dt,It)|0,c=c+Math.imul(dt,jt)|0,c=c+Math.imul(kt,It)|0,M=M+Math.imul(kt,jt)|0,l=l+Math.imul(gt,St)|0,c=c+Math.imul(gt,Jt)|0,c=c+Math.imul(Ht,St)|0,M=M+Math.imul(Ht,Jt)|0,l=l+Math.imul(pt,xt)|0,c=c+Math.imul(pt,Ft)|0,c=c+Math.imul(Dt,xt)|0,M=M+Math.imul(Dt,Ft)|0,l=l+Math.imul(_t,Pt)|0,c=c+Math.imul(_t,Vt)|0,c=c+Math.imul(Tt,Pt)|0,M=M+Math.imul(Tt,Vt)|0,l=l+Math.imul(At,Nt)|0,c=c+Math.imul(At,Gt)|0,c=c+Math.imul(Bt,Nt)|0,M=M+Math.imul(Bt,Gt)|0,l=l+Math.imul(st,Rt)|0,c=c+Math.imul(st,Lt)|0,c=c+Math.imul(G,Rt)|0,M=M+Math.imul(G,Lt)|0;var zr=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+(zr>>>26)|0,zr&=67108863,l=Math.imul(vt,It),c=Math.imul(vt,jt),c=c+Math.imul(Ut,It)|0,M=Math.imul(Ut,jt),l=l+Math.imul(dt,St)|0,c=c+Math.imul(dt,Jt)|0,c=c+Math.imul(kt,St)|0,M=M+Math.imul(kt,Jt)|0,l=l+Math.imul(gt,xt)|0,c=c+Math.imul(gt,Ft)|0,c=c+Math.imul(Ht,xt)|0,M=M+Math.imul(Ht,Ft)|0,l=l+Math.imul(pt,Pt)|0,c=c+Math.imul(pt,Vt)|0,c=c+Math.imul(Dt,Pt)|0,M=M+Math.imul(Dt,Vt)|0,l=l+Math.imul(_t,Nt)|0,c=c+Math.imul(_t,Gt)|0,c=c+Math.imul(Tt,Nt)|0,M=M+Math.imul(Tt,Gt)|0,l=l+Math.imul(At,Rt)|0,c=c+Math.imul(At,Lt)|0,c=c+Math.imul(Bt,Rt)|0,M=M+Math.imul(Bt,Lt)|0;var Fr=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+(Fr>>>26)|0,Fr&=67108863,l=Math.imul(vt,St),c=Math.imul(vt,Jt),c=c+Math.imul(Ut,St)|0,M=Math.imul(Ut,Jt),l=l+Math.imul(dt,xt)|0,c=c+Math.imul(dt,Ft)|0,c=c+Math.imul(kt,xt)|0,M=M+Math.imul(kt,Ft)|0,l=l+Math.imul(gt,Pt)|0,c=c+Math.imul(gt,Vt)|0,c=c+Math.imul(Ht,Pt)|0,M=M+Math.imul(Ht,Vt)|0,l=l+Math.imul(pt,Nt)|0,c=c+Math.imul(pt,Gt)|0,c=c+Math.imul(Dt,Nt)|0,M=M+Math.imul(Dt,Gt)|0,l=l+Math.imul(_t,Rt)|0,c=c+Math.imul(_t,Lt)|0,c=c+Math.imul(Tt,Rt)|0,M=M+Math.imul(Tt,Lt)|0;var Lr=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+(Lr>>>26)|0,Lr&=67108863,l=Math.imul(vt,xt),c=Math.imul(vt,Ft),c=c+Math.imul(Ut,xt)|0,M=Math.imul(Ut,Ft),l=l+Math.imul(dt,Pt)|0,c=c+Math.imul(dt,Vt)|0,c=c+Math.imul(kt,Pt)|0,M=M+Math.imul(kt,Vt)|0,l=l+Math.imul(gt,Nt)|0,c=c+Math.imul(gt,Gt)|0,c=c+Math.imul(Ht,Nt)|0,M=M+Math.imul(Ht,Gt)|0,l=l+Math.imul(pt,Rt)|0,c=c+Math.imul(pt,Lt)|0,c=c+Math.imul(Dt,Rt)|0,M=M+Math.imul(Dt,Lt)|0;var oi=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+(oi>>>26)|0,oi&=67108863,l=Math.imul(vt,Pt),c=Math.imul(vt,Vt),c=c+Math.imul(Ut,Pt)|0,M=Math.imul(Ut,Vt),l=l+Math.imul(dt,Nt)|0,c=c+Math.imul(dt,Gt)|0,c=c+Math.imul(kt,Nt)|0,M=M+Math.imul(kt,Gt)|0,l=l+Math.imul(gt,Rt)|0,c=c+Math.imul(gt,Lt)|0,c=c+Math.imul(Ht,Rt)|0,M=M+Math.imul(Ht,Lt)|0;var ai=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+(ai>>>26)|0,ai&=67108863,l=Math.imul(vt,Nt),c=Math.imul(vt,Gt),c=c+Math.imul(Ut,Nt)|0,M=Math.imul(Ut,Gt),l=l+Math.imul(dt,Rt)|0,c=c+Math.imul(dt,Lt)|0,c=c+Math.imul(kt,Rt)|0,M=M+Math.imul(kt,Lt)|0;var hi=(_+l|0)+((c&8191)<<13)|0;_=(M+(c>>>13)|0)+(hi>>>26)|0,hi&=67108863,l=Math.imul(vt,Rt),c=Math.imul(vt,Lt),c=c+Math.imul(Ut,Rt)|0,M=Math.imul(Ut,Lt);var kn=(_+l|0)+((c&8191)<<13)|0;return _=(M+(c>>>13)|0)+(kn>>>26)|0,kn&=67108863,I[0]=Le,I[1]=$e,I[2]=je,I[3]=He,I[4]=Ke,I[5]=Qe,I[6]=Ar,I[7]=ri,I[8]=_r,I[9]=ii,I[10]=ni,I[11]=si,I[12]=zr,I[13]=Fr,I[14]=Lr,I[15]=oi,I[16]=ai,I[17]=hi,I[18]=kn,_!==0&&(I[19]=_,d.length++),d};Math.imul||(rt=H);function ht(a,f,d){d.negative=f.negative^a.negative,d.length=a.length+f.length;for(var v=0,b=0,I=0;I<d.length-1;I++){var _=b;b=0;for(var l=v&67108863,c=Math.min(I,f.length-1),M=Math.max(0,I-a.length+1);M<=c;M++){var J=I-M,K=a.words[J]|0,m=f.words[M]|0,D=K*m,q=D&67108863;_=_+(D/67108864|0)|0,q=q+l|0,l=q&67108863,_=_+(q>>>26)|0,b+=_>>>26,_&=67108863}d.words[I]=l,v=_,_=b}return v!==0?d.words[I]=v:d.length--,d._strip()}function Z(a,f,d){return ht(a,f,d)}o.prototype.mulTo=function(a,f){var d,v=this.length+a.length;return this.length===10&&a.length===10?d=rt(this,a,f):v<63?d=H(this,a,f):v<1024?d=ht(this,a,f):d=Z(this,a,f),d},o.prototype.mul=function(a){var f=new o(null);return f.words=new Array(this.length+a.length),this.mulTo(a,f)},o.prototype.mulf=function(a){var f=new o(null);return f.words=new Array(this.length+a.length),Z(this,a,f)},o.prototype.imul=function(a){return this.clone().mulTo(a,this)},o.prototype.imuln=function(a){var f=a<0;f&&(a=-a),i(typeof a=="number"),i(a<67108864);for(var d=0,v=0;v<this.length;v++){var b=(this.words[v]|0)*a,I=(b&67108863)+(d&67108863);d>>=26,d+=b/67108864|0,d+=I>>>26,this.words[v]=I&67108863}return d!==0&&(this.words[v]=d,this.length++),f?this.ineg():this},o.prototype.muln=function(a){return this.clone().imuln(a)},o.prototype.sqr=function(){return this.mul(this)},o.prototype.isqr=function(){return this.imul(this.clone())},o.prototype.pow=function(a){var f=L(a);if(f.length===0)return new o(1);for(var d=this,v=0;v<f.length&&f[v]===0;v++,d=d.sqr());if(++v<f.length)for(var b=d.sqr();v<f.length;v++,b=b.sqr())f[v]!==0&&(d=d.mul(b));return d},o.prototype.iushln=function(a){i(typeof a=="number"&&a>=0);var f=a%26,d=(a-f)/26,v=67108863>>>26-f<<26-f,b;if(f!==0){var I=0;for(b=0;b<this.length;b++){var _=this.words[b]&v,l=(this.words[b]|0)-_<<f;this.words[b]=l|I,I=_>>>26-f}I&&(this.words[b]=I,this.length++)}if(d!==0){for(b=this.length-1;b>=0;b--)this.words[b+d]=this.words[b];for(b=0;b<d;b++)this.words[b]=0;this.length+=d}return this._strip()},o.prototype.ishln=function(a){return i(this.negative===0),this.iushln(a)},o.prototype.iushrn=function(a,f,d){i(typeof a=="number"&&a>=0);var v;f?v=(f-f%26)/26:v=0;var b=a%26,I=Math.min((a-b)/26,this.length),_=67108863^67108863>>>b<<b,l=d;if(v-=I,v=Math.max(0,v),l){for(var c=0;c<I;c++)l.words[c]=this.words[c];l.length=I}if(I!==0)if(this.length>I)for(this.length-=I,c=0;c<this.length;c++)this.words[c]=this.words[c+I];else this.words[0]=0,this.length=1;var M=0;for(c=this.length-1;c>=0&&(M!==0||c>=v);c--){var J=this.words[c]|0;this.words[c]=M<<26-b|J>>>b,M=J&_}return l&&M!==0&&(l.words[l.length++]=M),this.length===0&&(this.words[0]=0,this.length=1),this._strip()},o.prototype.ishrn=function(a,f,d){return i(this.negative===0),this.iushrn(a,f,d)},o.prototype.shln=function(a){return this.clone().ishln(a)},o.prototype.ushln=function(a){return this.clone().iushln(a)},o.prototype.shrn=function(a){return this.clone().ishrn(a)},o.prototype.ushrn=function(a){return this.clone().iushrn(a)},o.prototype.testn=function(a){i(typeof a=="number"&&a>=0);var f=a%26,d=(a-f)/26,v=1<<f;if(this.length<=d)return!1;var b=this.words[d];return!!(b&v)},o.prototype.imaskn=function(a){i(typeof a=="number"&&a>=0);var f=a%26,d=(a-f)/26;if(i(this.negative===0,"imaskn works only with positive numbers"),this.length<=d)return this;if(f!==0&&d++,this.length=Math.min(d,this.length),f!==0){var v=67108863^67108863>>>f<<f;this.words[this.length-1]&=v}return this._strip()},o.prototype.maskn=function(a){return this.clone().imaskn(a)},o.prototype.iaddn=function(a){return i(typeof a=="number"),i(a<67108864),a<0?this.isubn(-a):this.negative!==0?this.length===1&&(this.words[0]|0)<=a?(this.words[0]=a-(this.words[0]|0),this.negative=0,this):(this.negative=0,this.isubn(a),this.negative=1,this):this._iaddn(a)},o.prototype._iaddn=function(a){this.words[0]+=a;for(var f=0;f<this.length&&this.words[f]>=67108864;f++)this.words[f]-=67108864,f===this.length-1?this.words[f+1]=1:this.words[f+1]++;return this.length=Math.max(this.length,f+1),this},o.prototype.isubn=function(a){if(i(typeof a=="number"),i(a<67108864),a<0)return this.iaddn(-a);if(this.negative!==0)return this.negative=0,this.iaddn(a),this.negative=1,this;if(this.words[0]-=a,this.length===1&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var f=0;f<this.length&&this.words[f]<0;f++)this.words[f]+=67108864,this.words[f+1]-=1;return this._strip()},o.prototype.addn=function(a){return this.clone().iaddn(a)},o.prototype.subn=function(a){return this.clone().isubn(a)},o.prototype.iabs=function(){return this.negative=0,this},o.prototype.abs=function(){return this.clone().iabs()},o.prototype._ishlnsubmul=function(a,f,d){var v=a.length+d,b;this._expand(v);var I,_=0;for(b=0;b<a.length;b++){I=(this.words[b+d]|0)+_;var l=(a.words[b]|0)*f;I-=l&67108863,_=(I>>26)-(l/67108864|0),this.words[b+d]=I&67108863}for(;b<this.length-d;b++)I=(this.words[b+d]|0)+_,_=I>>26,this.words[b+d]=I&67108863;if(_===0)return this._strip();for(i(_===-1),_=0,b=0;b<this.length;b++)I=-(this.words[b]|0)+_,_=I>>26,this.words[b]=I&67108863;return this.negative=1,this._strip()},o.prototype._wordDiv=function(a,f){var d=this.length-a.length,v=this.clone(),b=a,I=b.words[b.length-1]|0,_=this._countBits(I);d=26-_,d!==0&&(b=b.ushln(d),v.iushln(d),I=b.words[b.length-1]|0);var l=v.length-b.length,c;if(f!=="mod"){c=new o(null),c.length=l+1,c.words=new Array(c.length);for(var M=0;M<c.length;M++)c.words[M]=0}var J=v.clone()._ishlnsubmul(b,1,l);J.negative===0&&(v=J,c&&(c.words[l]=1));for(var K=l-1;K>=0;K--){var m=(v.words[b.length+K]|0)*67108864+(v.words[b.length+K-1]|0);for(m=Math.min(m/I|0,67108863),v._ishlnsubmul(b,m,K);v.negative!==0;)m--,v.negative=0,v._ishlnsubmul(b,1,K),v.isZero()||(v.negative^=1);c&&(c.words[K]=m)}return c&&c._strip(),v._strip(),f!=="div"&&d!==0&&v.iushrn(d),{div:c||null,mod:v}},o.prototype.divmod=function(a,f,d){if(i(!a.isZero()),this.isZero())return{div:new o(0),mod:new o(0)};var v,b,I;return this.negative!==0&&a.negative===0?(I=this.neg().divmod(a,f),f!=="mod"&&(v=I.div.neg()),f!=="div"&&(b=I.mod.neg(),d&&b.negative!==0&&b.iadd(a)),{div:v,mod:b}):this.negative===0&&a.negative!==0?(I=this.divmod(a.neg(),f),f!=="mod"&&(v=I.div.neg()),{div:v,mod:I.mod}):this.negative&a.negative?(I=this.neg().divmod(a.neg(),f),f!=="div"&&(b=I.mod.neg(),d&&b.negative!==0&&b.isub(a)),{div:I.div,mod:b}):a.length>this.length||this.cmp(a)<0?{div:new o(0),mod:this}:a.length===1?f==="div"?{div:this.divn(a.words[0]),mod:null}:f==="mod"?{div:null,mod:new o(this.modrn(a.words[0]))}:{div:this.divn(a.words[0]),mod:new o(this.modrn(a.words[0]))}:this._wordDiv(a,f)},o.prototype.div=function(a){return this.divmod(a,"div",!1).div},o.prototype.mod=function(a){return this.divmod(a,"mod",!1).mod},o.prototype.umod=function(a){return this.divmod(a,"mod",!0).mod},o.prototype.divRound=function(a){var f=this.divmod(a);if(f.mod.isZero())return f.div;var d=f.div.negative!==0?f.mod.isub(a):f.mod,v=a.ushrn(1),b=a.andln(1),I=d.cmp(v);return I<0||b===1&&I===0?f.div:f.div.negative!==0?f.div.isubn(1):f.div.iaddn(1)},o.prototype.modrn=function(a){var f=a<0;f&&(a=-a),i(a<=67108863);for(var d=(1<<26)%a,v=0,b=this.length-1;b>=0;b--)v=(d*v+(this.words[b]|0))%a;return f?-v:v},o.prototype.modn=function(a){return this.modrn(a)},o.prototype.idivn=function(a){var f=a<0;f&&(a=-a),i(a<=67108863);for(var d=0,v=this.length-1;v>=0;v--){var b=(this.words[v]|0)+d*67108864;this.words[v]=b/a|0,d=b%a}return this._strip(),f?this.ineg():this},o.prototype.divn=function(a){return this.clone().idivn(a)},o.prototype.egcd=function(a){i(a.negative===0),i(!a.isZero());var f=this,d=a.clone();f.negative!==0?f=f.umod(a):f=f.clone();for(var v=new o(1),b=new o(0),I=new o(0),_=new o(1),l=0;f.isEven()&&d.isEven();)f.iushrn(1),d.iushrn(1),++l;for(var c=d.clone(),M=f.clone();!f.isZero();){for(var J=0,K=1;!(f.words[0]&K)&&J<26;++J,K<<=1);if(J>0)for(f.iushrn(J);J-- >0;)(v.isOdd()||b.isOdd())&&(v.iadd(c),b.isub(M)),v.iushrn(1),b.iushrn(1);for(var m=0,D=1;!(d.words[0]&D)&&m<26;++m,D<<=1);if(m>0)for(d.iushrn(m);m-- >0;)(I.isOdd()||_.isOdd())&&(I.iadd(c),_.isub(M)),I.iushrn(1),_.iushrn(1);f.cmp(d)>=0?(f.isub(d),v.isub(I),b.isub(_)):(d.isub(f),I.isub(v),_.isub(b))}return{a:I,b:_,gcd:d.iushln(l)}},o.prototype._invmp=function(a){i(a.negative===0),i(!a.isZero());var f=this,d=a.clone();f.negative!==0?f=f.umod(a):f=f.clone();for(var v=new o(1),b=new o(0),I=d.clone();f.cmpn(1)>0&&d.cmpn(1)>0;){for(var _=0,l=1;!(f.words[0]&l)&&_<26;++_,l<<=1);if(_>0)for(f.iushrn(_);_-- >0;)v.isOdd()&&v.iadd(I),v.iushrn(1);for(var c=0,M=1;!(d.words[0]&M)&&c<26;++c,M<<=1);if(c>0)for(d.iushrn(c);c-- >0;)b.isOdd()&&b.iadd(I),b.iushrn(1);f.cmp(d)>=0?(f.isub(d),v.isub(b)):(d.isub(f),b.isub(v))}var J;return f.cmpn(1)===0?J=v:J=b,J.cmpn(0)<0&&J.iadd(a),J},o.prototype.gcd=function(a){if(this.isZero())return a.abs();if(a.isZero())return this.abs();var f=this.clone(),d=a.clone();f.negative=0,d.negative=0;for(var v=0;f.isEven()&&d.isEven();v++)f.iushrn(1),d.iushrn(1);do{for(;f.isEven();)f.iushrn(1);for(;d.isEven();)d.iushrn(1);var b=f.cmp(d);if(b<0){var I=f;f=d,d=I}else if(b===0||d.cmpn(1)===0)break;f.isub(d)}while(!0);return d.iushln(v)},o.prototype.invm=function(a){return this.egcd(a).a.umod(a)},o.prototype.isEven=function(){return(this.words[0]&1)===0},o.prototype.isOdd=function(){return(this.words[0]&1)===1},o.prototype.andln=function(a){return this.words[0]&a},o.prototype.bincn=function(a){i(typeof a=="number");var f=a%26,d=(a-f)/26,v=1<<f;if(this.length<=d)return this._expand(d+1),this.words[d]|=v,this;for(var b=v,I=d;b!==0&&I<this.length;I++){var _=this.words[I]|0;_+=b,b=_>>>26,_&=67108863,this.words[I]=_}return b!==0&&(this.words[I]=b,this.length++),this},o.prototype.isZero=function(){return this.length===1&&this.words[0]===0},o.prototype.cmpn=function(a){var f=a<0;if(this.negative!==0&&!f)return-1;if(this.negative===0&&f)return 1;this._strip();var d;if(this.length>1)d=1;else{f&&(a=-a),i(a<=67108863,"Number is too big");var v=this.words[0]|0;d=v===a?0:v<a?-1:1}return this.negative!==0?-d|0:d},o.prototype.cmp=function(a){if(this.negative!==0&&a.negative===0)return-1;if(this.negative===0&&a.negative!==0)return 1;var f=this.ucmp(a);return this.negative!==0?-f|0:f},o.prototype.ucmp=function(a){if(this.length>a.length)return 1;if(this.length<a.length)return-1;for(var f=0,d=this.length-1;d>=0;d--){var v=this.words[d]|0,b=a.words[d]|0;if(v!==b){v<b?f=-1:v>b&&(f=1);break}}return f},o.prototype.gtn=function(a){return this.cmpn(a)===1},o.prototype.gt=function(a){return this.cmp(a)===1},o.prototype.gten=function(a){return this.cmpn(a)>=0},o.prototype.gte=function(a){return this.cmp(a)>=0},o.prototype.ltn=function(a){return this.cmpn(a)===-1},o.prototype.lt=function(a){return this.cmp(a)===-1},o.prototype.lten=function(a){return this.cmpn(a)<=0},o.prototype.lte=function(a){return this.cmp(a)<=0},o.prototype.eqn=function(a){return this.cmpn(a)===0},o.prototype.eq=function(a){return this.cmp(a)===0},o.red=function(a){return new T(a)},o.prototype.toRed=function(a){return i(!this.red,"Already a number in reduction context"),i(this.negative===0,"red works only with positives"),a.convertTo(this)._forceRed(a)},o.prototype.fromRed=function(){return i(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},o.prototype._forceRed=function(a){return this.red=a,this},o.prototype.forceRed=function(a){return i(!this.red,"Already a number in reduction context"),this._forceRed(a)},o.prototype.redAdd=function(a){return i(this.red,"redAdd works only with red numbers"),this.red.add(this,a)},o.prototype.redIAdd=function(a){return i(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,a)},o.prototype.redSub=function(a){return i(this.red,"redSub works only with red numbers"),this.red.sub(this,a)},o.prototype.redISub=function(a){return i(this.red,"redISub works only with red numbers"),this.red.isub(this,a)},o.prototype.redShl=function(a){return i(this.red,"redShl works only with red numbers"),this.red.shl(this,a)},o.prototype.redMul=function(a){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.mul(this,a)},o.prototype.redIMul=function(a){return i(this.red,"redMul works only with red numbers"),this.red._verify2(this,a),this.red.imul(this,a)},o.prototype.redSqr=function(){return i(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},o.prototype.redISqr=function(){return i(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},o.prototype.redSqrt=function(){return i(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},o.prototype.redInvm=function(){return i(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},o.prototype.redNeg=function(){return i(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},o.prototype.redPow=function(a){return i(this.red&&!a.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,a)};var et={k256:null,p224:null,p192:null,p25519:null};function at(a,f){this.name=a,this.p=new o(f,16),this.n=this.p.bitLength(),this.k=new o(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}at.prototype._tmp=function(){var a=new o(null);return a.words=new Array(Math.ceil(this.n/13)),a},at.prototype.ireduce=function(a){var f=a,d;do this.split(f,this.tmp),f=this.imulK(f),f=f.iadd(this.tmp),d=f.bitLength();while(d>this.n);var v=d<this.n?-1:f.ucmp(this.p);return v===0?(f.words[0]=0,f.length=1):v>0?f.isub(this.p):f.strip!==void 0?f.strip():f._strip(),f},at.prototype.split=function(a,f){a.iushrn(this.n,0,f)},at.prototype.imulK=function(a){return a.imul(this.k)};function ft(){at.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}s(ft,at),ft.prototype.split=function(a,f){for(var d=4194303,v=Math.min(a.length,9),b=0;b<v;b++)f.words[b]=a.words[b];if(f.length=v,a.length<=9){a.words[0]=0,a.length=1;return}var I=a.words[9];for(f.words[f.length++]=I&d,b=10;b<a.length;b++){var _=a.words[b]|0;a.words[b-10]=(_&d)<<4|I>>>22,I=_}I>>>=22,a.words[b-10]=I,I===0&&a.length>10?a.length-=10:a.length-=9},ft.prototype.imulK=function(a){a.words[a.length]=0,a.words[a.length+1]=0,a.length+=2;for(var f=0,d=0;d<a.length;d++){var v=a.words[d]|0;f+=v*977,a.words[d]=f&67108863,f=v*64+(f/67108864|0)}return a.words[a.length-1]===0&&(a.length--,a.words[a.length-1]===0&&a.length--),a};function ct(){at.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}s(ct,at);function mt(){at.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}s(mt,at);function se(){at.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}s(se,at),se.prototype.imulK=function(a){for(var f=0,d=0;d<a.length;d++){var v=(a.words[d]|0)*19+f,b=v&67108863;v>>>=26,a.words[d]=b,f=v}return f!==0&&(a.words[a.length++]=f),a},o._prime=function(a){if(et[a])return et[a];var f;if(a==="k256")f=new ft;else if(a==="p224")f=new ct;else if(a==="p192")f=new mt;else if(a==="p25519")f=new se;else throw new Error("Unknown prime "+a);return et[a]=f,f};function T(a){if(typeof a=="string"){var f=o._prime(a);this.m=f.p,this.prime=f}else i(a.gtn(1),"modulus must be greater than 1"),this.m=a,this.prime=null}T.prototype._verify1=function(a){i(a.negative===0,"red works only with positives"),i(a.red,"red works only with red numbers")},T.prototype._verify2=function(a,f){i((a.negative|f.negative)===0,"red works only with positives"),i(a.red&&a.red===f.red,"red works only with red numbers")},T.prototype.imod=function(a){return this.prime?this.prime.ireduce(a)._forceRed(this):(S(a,a.umod(this.m)._forceRed(this)),a)},T.prototype.neg=function(a){return a.isZero()?a.clone():this.m.sub(a)._forceRed(this)},T.prototype.add=function(a,f){this._verify2(a,f);var d=a.add(f);return d.cmp(this.m)>=0&&d.isub(this.m),d._forceRed(this)},T.prototype.iadd=function(a,f){this._verify2(a,f);var d=a.iadd(f);return d.cmp(this.m)>=0&&d.isub(this.m),d},T.prototype.sub=function(a,f){this._verify2(a,f);var d=a.sub(f);return d.cmpn(0)<0&&d.iadd(this.m),d._forceRed(this)},T.prototype.isub=function(a,f){this._verify2(a,f);var d=a.isub(f);return d.cmpn(0)<0&&d.iadd(this.m),d},T.prototype.shl=function(a,f){return this._verify1(a),this.imod(a.ushln(f))},T.prototype.imul=function(a,f){return this._verify2(a,f),this.imod(a.imul(f))},T.prototype.mul=function(a,f){return this._verify2(a,f),this.imod(a.mul(f))},T.prototype.isqr=function(a){return this.imul(a,a.clone())},T.prototype.sqr=function(a){return this.mul(a,a)},T.prototype.sqrt=function(a){if(a.isZero())return a.clone();var f=this.m.andln(3);if(i(f%2===1),f===3){var d=this.m.add(new o(1)).iushrn(2);return this.pow(a,d)}for(var v=this.m.subn(1),b=0;!v.isZero()&&v.andln(1)===0;)b++,v.iushrn(1);i(!v.isZero());var I=new o(1).toRed(this),_=I.redNeg(),l=this.m.subn(1).iushrn(1),c=this.m.bitLength();for(c=new o(2*c*c).toRed(this);this.pow(c,l).cmp(_)!==0;)c.redIAdd(_);for(var M=this.pow(c,v),J=this.pow(a,v.addn(1).iushrn(1)),K=this.pow(a,v),m=b;K.cmp(I)!==0;){for(var D=K,q=0;D.cmp(I)!==0;q++)D=D.redSqr();i(q<m);var U=this.pow(M,new o(1).iushln(m-q-1));J=J.redMul(U),M=U.redSqr(),K=K.redMul(M),m=q}return J},T.prototype.invm=function(a){var f=a._invmp(this.m);return f.negative!==0?(f.negative=0,this.imod(f).redNeg()):this.imod(f)},T.prototype.pow=function(a,f){if(f.isZero())return new o(1).toRed(this);if(f.cmpn(1)===0)return a.clone();var d=4,v=new Array(1<<d);v[0]=new o(1).toRed(this),v[1]=a;for(var b=2;b<v.length;b++)v[b]=this.mul(v[b-1],a);var I=v[0],_=0,l=0,c=f.bitLength()%26;for(c===0&&(c=26),b=f.length-1;b>=0;b--){for(var M=f.words[b],J=c-1;J>=0;J--){var K=M>>J&1;if(I!==v[0]&&(I=this.sqr(I)),K===0&&_===0){l=0;continue}_<<=1,_|=K,l++,!(l!==d&&(b!==0||J!==0))&&(I=this.mul(I,v[_]),l=0,_=0)}c=26}return I},T.prototype.convertTo=function(a){var f=a.umod(this.m);return f===a?f.clone():f},T.prototype.convertFrom=function(a){var f=a.clone();return f.red=null,f},o.mont=function(a){return new y(a)};function y(a){T.call(this,a),this.shift=this.m.bitLength(),this.shift%26!==0&&(this.shift+=26-this.shift%26),this.r=new o(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}s(y,T),y.prototype.convertTo=function(a){return this.imod(a.ushln(this.shift))},y.prototype.convertFrom=function(a){var f=this.imod(a.mul(this.rinv));return f.red=null,f},y.prototype.imul=function(a,f){if(a.isZero()||f.isZero())return a.words[0]=0,a.length=1,a;var d=a.imul(f),v=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=d.isub(v).iushrn(this.shift),I=b;return b.cmp(this.m)>=0?I=b.isub(this.m):b.cmpn(0)<0&&(I=b.iadd(this.m)),I._forceRed(this)},y.prototype.mul=function(a,f){if(a.isZero()||f.isZero())return new o(0)._forceRed(this);var d=a.mul(f),v=d.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),b=d.isub(v).iushrn(this.shift),I=b;return b.cmp(this.m)>=0?I=b.isub(this.m):b.cmpn(0)<0&&(I=b.iadd(this.m)),I._forceRed(this)},y.prototype.invm=function(a){var f=this.imod(a._invmp(this.m).mul(this.r2));return f._forceRed(this)}})(r,fm)})(lm);var ie=lm.exports;const pm="bignumber/5.7.0";var hf=ie.BN;const Xn=new br(pm),ou={},zp=9007199254740991;function P9(r){return r!=null&&(kr.isBigNumber(r)||typeof r=="number"&&r%1===0||typeof r=="string"&&!!r.match(/^-?[0-9]+$/)||mi(r)||typeof r=="bigint"||Fo(r))}let Fp=!1,kr=class Xi{constructor(t,e){t!==ou&&Xn.throwError("cannot call constructor directly; use BigNumber.from",br.errors.UNSUPPORTED_OPERATION,{operation:"new (BigNumber)"}),this._hex=e,this._isBigNumber=!0,Object.freeze(this)}fromTwos(t){return Jr(Se(this).fromTwos(t))}toTwos(t){return Jr(Se(this).toTwos(t))}abs(){return this._hex[0]==="-"?Xi.from(this._hex.substring(1)):this}add(t){return Jr(Se(this).add(Se(t)))}sub(t){return Jr(Se(this).sub(Se(t)))}div(t){return Xi.from(t).isZero()&&Ci("division-by-zero","div"),Jr(Se(this).div(Se(t)))}mul(t){return Jr(Se(this).mul(Se(t)))}mod(t){const e=Se(t);return e.isNeg()&&Ci("division-by-zero","mod"),Jr(Se(this).umod(e))}pow(t){const e=Se(t);return e.isNeg()&&Ci("negative-power","pow"),Jr(Se(this).pow(e))}and(t){const e=Se(t);return(this.isNegative()||e.isNeg())&&Ci("unbound-bitwise-result","and"),Jr(Se(this).and(e))}or(t){const e=Se(t);return(this.isNegative()||e.isNeg())&&Ci("unbound-bitwise-result","or"),Jr(Se(this).or(e))}xor(t){const e=Se(t);return(this.isNegative()||e.isNeg())&&Ci("unbound-bitwise-result","xor"),Jr(Se(this).xor(e))}mask(t){return(this.isNegative()||t<0)&&Ci("negative-width","mask"),Jr(Se(this).maskn(t))}shl(t){return(this.isNegative()||t<0)&&Ci("negative-width","shl"),Jr(Se(this).shln(t))}shr(t){return(this.isNegative()||t<0)&&Ci("negative-width","shr"),Jr(Se(this).shrn(t))}eq(t){return Se(this).eq(Se(t))}lt(t){return Se(this).lt(Se(t))}lte(t){return Se(this).lte(Se(t))}gt(t){return Se(this).gt(Se(t))}gte(t){return Se(this).gte(Se(t))}isNegative(){return this._hex[0]==="-"}isZero(){return Se(this).isZero()}toNumber(){try{return Se(this).toNumber()}catch{Ci("overflow","toNumber",this.toString())}return null}toBigInt(){try{return BigInt(this.toString())}catch{}return Xn.throwError("this platform does not support BigInt",br.errors.UNSUPPORTED_OPERATION,{value:this.toString()})}toString(){return arguments.length>0&&(arguments[0]===10?Fp||(Fp=!0,Xn.warn("BigNumber.toString does not accept any parameters; base-10 is assumed")):arguments[0]===16?Xn.throwError("BigNumber.toString does not accept any parameters; use bigNumber.toHexString()",br.errors.UNEXPECTED_ARGUMENT,{}):Xn.throwError("BigNumber.toString does not accept parameters",br.errors.UNEXPECTED_ARGUMENT,{})),Se(this).toString(10)}toHexString(){return this._hex}toJSON(t){return{type:"BigNumber",hex:this.toHexString()}}static from(t){if(t instanceof Xi)return t;if(typeof t=="string")return t.match(/^-?0x[0-9a-f]+$/i)?new Xi(ou,Ra(t)):t.match(/^-?[0-9]+$/)?new Xi(ou,Ra(new hf(t))):Xn.throwArgumentError("invalid BigNumber string","value",t);if(typeof t=="number")return t%1&&Ci("underflow","BigNumber.from",t),(t>=zp||t<=-zp)&&Ci("overflow","BigNumber.from",t),Xi.from(String(t));const e=t;if(typeof e=="bigint")return Xi.from(e.toString());if(Fo(e))return Xi.from(Gr(e));if(e)if(e.toHexString){const i=e.toHexString();if(typeof i=="string")return Xi.from(i)}else{let i=e._hex;if(i==null&&e.type==="BigNumber"&&(i=e.hex),typeof i=="string"&&(mi(i)||i[0]==="-"&&mi(i.substring(1))))return Xi.from(i)}return Xn.throwArgumentError("invalid BigNumber value","value",t)}static isBigNumber(t){return!!(t&&t._isBigNumber)}};function Ra(r){if(typeof r!="string")return Ra(r.toString(16));if(r[0]==="-")return r=r.substring(1),r[0]==="-"&&Xn.throwArgumentError("invalid hex","value",r),r=Ra(r),r==="0x00"?r:"-"+r;if(r.substring(0,2)!=="0x"&&(r="0x"+r),r==="0x")return"0x00";for(r.length%2&&(r="0x0"+r.substring(2));r.length>4&&r.substring(0,4)==="0x00";)r="0x"+r.substring(4);return r}function Jr(r){return kr.from(Ra(r))}function Se(r){const t=kr.from(r).toHexString();return t[0]==="-"?new hf("-"+t.substring(3),16):new hf(t.substring(2),16)}function Ci(r,t,e){const i={fault:r,operation:t};return e!=null&&(i.value=e),Xn.throwError(r,br.errors.NUMERIC_FAULT,i)}function N9(r){return new hf(r,36).toString(16)}const Tr=new br(pm),Ia={},gm=kr.from(0),mm=kr.from(-1);function vm(r,t,e,i){const s={fault:t,operation:e};return i!==void 0&&(s.value=i),Tr.throwError(r,br.errors.NUMERIC_FAULT,s)}let Sa="0";for(;Sa.length<256;)Sa+=Sa;function v0(r){if(typeof r!="number")try{r=kr.from(r).toNumber()}catch{}return typeof r=="number"&&r>=0&&r<=256&&!(r%1)?"1"+Sa.substring(0,r):Tr.throwArgumentError("invalid decimal size","decimals",r)}function au(r,t){t==null&&(t=0);const e=v0(t);r=kr.from(r);const i=r.lt(gm);i&&(r=r.mul(mm));let s=r.mod(e).toString();for(;s.length<e.length-1;)s="0"+s;s=s.match(/^([0-9]*[1-9]|0)(0*)/)[1];const o=r.div(e).toString();return e.length===1?r=o:r=o+"."+s,i&&(r="-"+r),r}function Vn(r,t){t==null&&(t=0);const e=v0(t);(typeof r!="string"||!r.match(/^-?[0-9.]+$/))&&Tr.throwArgumentError("invalid decimal value","value",r);const i=r.substring(0,1)==="-";i&&(r=r.substring(1)),r==="."&&Tr.throwArgumentError("missing value","value",r);const s=r.split(".");s.length>2&&Tr.throwArgumentError("too many decimal points","value",r);let o=s[0],u=s[1];for(o||(o="0"),u||(u="0");u[u.length-1]==="0";)u=u.substring(0,u.length-1);for(u.length>e.length-1&&vm("fractional component exceeds decimals","underflow","parseFixed"),u===""&&(u="0");u.length<e.length-1;)u+="0";const g=kr.from(o),w=kr.from(u);let A=g.mul(e).add(w);return i&&(A=A.mul(mm)),A}let hu=class Lu{constructor(t,e,i,s){t!==Ia&&Tr.throwError("cannot use FixedFormat constructor; use FixedFormat.from",br.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.signed=e,this.width=i,this.decimals=s,this.name=(e?"":"u")+"fixed"+String(i)+"x"+String(s),this._multiplier=v0(s),Object.freeze(this)}static from(t){if(t instanceof Lu)return t;typeof t=="number"&&(t=`fixed128x${t}`);let e=!0,i=128,s=18;if(typeof t=="string"){if(t!=="fixed")if(t==="ufixed")e=!1;else{const o=t.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);o||Tr.throwArgumentError("invalid fixed format","format",t),e=o[1]!=="u",i=parseInt(o[2]),s=parseInt(o[3])}}else if(t){const o=(u,g,w)=>t[u]==null?w:(typeof t[u]!==g&&Tr.throwArgumentError("invalid fixed format ("+u+" not "+g+")","format."+u,t[u]),t[u]);e=o("signed","boolean",e),i=o("width","number",i),s=o("decimals","number",s)}return i%8&&Tr.throwArgumentError("invalid fixed format width (not byte aligned)","format.width",i),s>80&&Tr.throwArgumentError("invalid fixed format (decimals too large)","format.decimals",s),new Lu(Ia,e,i,s)}},bm=class Or{constructor(t,e,i,s){t!==Ia&&Tr.throwError("cannot use FixedNumber constructor; use FixedNumber.from",br.errors.UNSUPPORTED_OPERATION,{operation:"new FixedFormat"}),this.format=s,this._hex=e,this._value=i,this._isFixedNumber=!0,Object.freeze(this)}_checkFormat(t){this.format.name!==t.format.name&&Tr.throwArgumentError("incompatible format; use fixedNumber.toFormat","other",t)}addUnsafe(t){this._checkFormat(t);const e=Vn(this._value,this.format.decimals),i=Vn(t._value,t.format.decimals);return Or.fromValue(e.add(i),this.format.decimals,this.format)}subUnsafe(t){this._checkFormat(t);const e=Vn(this._value,this.format.decimals),i=Vn(t._value,t.format.decimals);return Or.fromValue(e.sub(i),this.format.decimals,this.format)}mulUnsafe(t){this._checkFormat(t);const e=Vn(this._value,this.format.decimals),i=Vn(t._value,t.format.decimals);return Or.fromValue(e.mul(i).div(this.format._multiplier),this.format.decimals,this.format)}divUnsafe(t){this._checkFormat(t);const e=Vn(this._value,this.format.decimals),i=Vn(t._value,t.format.decimals);return Or.fromValue(e.mul(this.format._multiplier).div(i),this.format.decimals,this.format)}floor(){const t=this.toString().split(".");t.length===1&&t.push("0");let e=Or.from(t[0],this.format);const i=!t[1].match(/^(0*)$/);return this.isNegative()&&i&&(e=e.subUnsafe(Lp.toFormat(e.format))),e}ceiling(){const t=this.toString().split(".");t.length===1&&t.push("0");let e=Or.from(t[0],this.format);const i=!t[1].match(/^(0*)$/);return!this.isNegative()&&i&&(e=e.addUnsafe(Lp.toFormat(e.format))),e}round(t){t==null&&(t=0);const e=this.toString().split(".");if(e.length===1&&e.push("0"),(t<0||t>80||t%1)&&Tr.throwArgumentError("invalid decimal count","decimals",t),e[1].length<=t)return this;const i=Or.from("1"+Sa.substring(0,t),this.format),s=R9.toFormat(this.format);return this.mulUnsafe(i).addUnsafe(s).floor().divUnsafe(i)}isZero(){return this._value==="0.0"||this._value==="0"}isNegative(){return this._value[0]==="-"}toString(){return this._value}toHexString(t){if(t==null)return this._hex;t%8&&Tr.throwArgumentError("invalid byte width","width",t);const e=kr.from(this._hex).fromTwos(this.format.width).toTwos(t).toHexString();return Pn(e,t/8)}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(t){return Or.fromString(this._value,t)}static fromValue(t,e,i){return i==null&&e!=null&&!P9(e)&&(i=e,e=null),e==null&&(e=0),i==null&&(i="fixed"),Or.fromString(au(t,e),hu.from(i))}static fromString(t,e){e==null&&(e="fixed");const i=hu.from(e),s=Vn(t,i.decimals);!i.signed&&s.lt(gm)&&vm("unsigned value cannot be negative","overflow","value",t);let o=null;i.signed?o=s.toTwos(i.width).toHexString():(o=s.toHexString(),o=Pn(o,i.width/8));const u=au(s,i.decimals);return new Or(Ia,o,u,i)}static fromBytes(t,e){e==null&&(e="fixed");const i=hu.from(e);if(Ge(t).length>i.width/8)throw new Error("overflow");let s=kr.from(t);i.signed&&(s=s.fromTwos(i.width));const o=s.toTwos((i.signed?0:1)+i.width).toHexString(),u=au(s,i.decimals);return new Or(Ia,o,u,i)}static from(t,e){if(typeof t=="string")return Or.fromString(t,e);if(Fo(t))return Or.fromBytes(t,e);try{return Or.fromValue(t,0,e)}catch(i){if(i.code!==br.errors.INVALID_ARGUMENT)throw i}return Tr.throwArgumentError("invalid FixedNumber value","value",t)}static isFixedNumber(t){return!!(t&&t._isFixedNumber)}};const Lp=bm.from(1),R9=bm.from("0.5"),C9="strings/5.7.0",O9=new br(C9);var ff;(function(r){r.current="",r.NFC="NFC",r.NFD="NFD",r.NFKC="NFKC",r.NFKD="NFKD"})(ff||(ff={}));var $p;(function(r){r.UNEXPECTED_CONTINUE="unexpected continuation byte",r.BAD_PREFIX="bad codepoint prefix",r.OVERRUN="string overrun",r.MISSING_CONTINUE="missing continuation byte",r.OUT_OF_RANGE="out of UTF-8 range",r.UTF16_SURROGATE="UTF-16 surrogate",r.OVERLONG="overlong representation"})($p||($p={}));function fu(r,t=ff.current){t!=ff.current&&(O9.checkNormalize(),r=r.normalize(t));let e=[];for(let i=0;i<r.length;i++){const s=r.charCodeAt(i);if(s<128)e.push(s);else if(s<2048)e.push(s>>6|192),e.push(s&63|128);else if((s&64512)==55296){i++;const o=r.charCodeAt(i);if(i>=r.length||(o&64512)!==56320)throw new Error("invalid utf-8 string");const u=65536+((s&1023)<<10)+(o&1023);e.push(u>>18|240),e.push(u>>12&63|128),e.push(u>>6&63|128),e.push(u&63|128)}else e.push(s>>12|224),e.push(s>>6&63|128),e.push(s&63|128)}return Ge(e)}function B9(r){if(r.length%4!==0)throw new Error("bad data");let t=[];for(let e=0;e<r.length;e+=4)t.push(parseInt(r.substring(e,e+4),16));return t}function cu(r,t){t||(t=function(s){return[parseInt(s,16)]});let e=0,i={};return r.split(",").forEach(s=>{let o=s.split(":");e+=parseInt(o[0],16),i[e]=t(o[1])}),i}function jp(r){let t=0;return r.split(",").map(e=>{let i=e.split("-");i.length===1?i[1]="0":i[1]===""&&(i[1]="1");let s=t+parseInt(i[0],16);return t=parseInt(i[1],16),{l:s,h:t}})}jp("221,13-1b,5f-,40-10,51-f,11-3,3-3,2-2,2-4,8,2,15,2d,28-8,88,48,27-,3-5,11-20,27-,8,28,3-5,12,18,b-a,1c-4,6-16,2-d,2-2,2,1b-4,17-9,8f-,10,f,1f-2,1c-34,33-14e,4,36-,13-,6-2,1a-f,4,9-,3-,17,8,2-2,5-,2,8-,3-,4-8,2-3,3,6-,16-6,2-,7-3,3-,17,8,3,3,3-,2,6-3,3-,4-a,5,2-6,10-b,4,8,2,4,17,8,3,6-,b,4,4-,2-e,2-4,b-10,4,9-,3-,17,8,3-,5-,9-2,3-,4-7,3-3,3,4-3,c-10,3,7-2,4,5-2,3,2,3-2,3-2,4-2,9,4-3,6-2,4,5-8,2-e,d-d,4,9,4,18,b,6-3,8,4,5-6,3-8,3-3,b-11,3,9,4,18,b,6-3,8,4,5-6,3-6,2,3-3,b-11,3,9,4,18,11-3,7-,4,5-8,2-7,3-3,b-11,3,13-2,19,a,2-,8-2,2-3,7,2,9-11,4-b,3b-3,1e-24,3,2-,3,2-,2-5,5,8,4,2,2-,3,e,4-,6,2,7-,b-,3-21,49,23-5,1c-3,9,25,10-,2-2f,23,6,3,8-2,5-5,1b-45,27-9,2a-,2-3,5b-4,45-4,53-5,8,40,2,5-,8,2,5-,28,2,5-,20,2,5-,8,2,5-,8,8,18,20,2,5-,8,28,14-5,1d-22,56-b,277-8,1e-2,52-e,e,8-a,18-8,15-b,e,4,3-b,5e-2,b-15,10,b-5,59-7,2b-555,9d-3,5b-5,17-,7-,27-,7-,9,2,2,2,20-,36,10,f-,7,14-,4,a,54-3,2-6,6-5,9-,1c-10,13-1d,1c-14,3c-,10-6,32-b,240-30,28-18,c-14,a0,115-,3,66-,b-76,5,5-,1d,24,2,5-2,2,8-,35-2,19,f-10,1d-3,311-37f,1b,5a-b,d7-19,d-3,41,57-,68-4,29-3,5f,29-37,2e-2,25-c,2c-2,4e-3,30,78-3,64-,20,19b7-49,51a7-59,48e-2,38-738,2ba5-5b,222f-,3c-94,8-b,6-4,1b,6,2,3,3,6d-20,16e-f,41-,37-7,2e-2,11-f,5-b,18-,b,14,5-3,6,88-,2,bf-2,7-,7-,7-,4-2,8,8-9,8-2ff,20,5-b,1c-b4,27-,27-cbb1,f7-9,28-2,b5-221,56,48,3-,2-,3-,5,d,2,5,3,42,5-,9,8,1d,5,6,2-2,8,153-3,123-3,33-27fd,a6da-5128,21f-5df,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3-fffd,3,2-1d,61-ff7d"),"ad,34f,1806,180b,180c,180d,200b,200c,200d,2060,feff".split(",").map(r=>parseInt(r,16)),cu("b5:3bc,c3:ff,7:73,2:253,5:254,3:256,1:257,5:259,1:25b,3:260,1:263,2:269,1:268,5:26f,1:272,2:275,7:280,3:283,5:288,3:28a,1:28b,5:292,3f:195,1:1bf,29:19e,125:3b9,8b:3b2,1:3b8,1:3c5,3:3c6,1:3c0,1a:3ba,1:3c1,1:3c3,2:3b8,1:3b5,1bc9:3b9,1c:1f76,1:1f77,f:1f7a,1:1f7b,d:1f78,1:1f79,1:1f7c,1:1f7d,107:63,5:25b,4:68,1:68,1:68,3:69,1:69,1:6c,3:6e,4:70,1:71,1:72,1:72,1:72,7:7a,2:3c9,2:7a,2:6b,1:e5,1:62,1:63,3:65,1:66,2:6d,b:3b3,1:3c0,6:64,1b574:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3,20:3b8,1a:3c3"),cu("179:1,2:1,2:1,5:1,2:1,a:4f,a:1,8:1,2:1,2:1,3:1,5:1,3:1,4:1,2:1,3:1,4:1,8:2,1:1,2:2,1:1,2:2,27:2,195:26,2:25,1:25,1:25,2:40,2:3f,1:3f,33:1,11:-6,1:-9,1ac7:-3a,6d:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,b:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,c:-8,2:-8,2:-8,2:-8,9:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,1:-8,49:-8,1:-8,1:-4a,1:-4a,d:-56,1:-56,1:-56,1:-56,d:-8,1:-8,f:-8,1:-8,3:-7"),cu("df:00730073,51:00690307,19:02BC006E,a7:006A030C,18a:002003B9,16:03B903080301,20:03C503080301,1d7:05650582,190f:00680331,1:00740308,1:0077030A,1:0079030A,1:006102BE,b6:03C50313,2:03C503130300,2:03C503130301,2:03C503130342,2a:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F0003B9,1:1F0103B9,1:1F0203B9,1:1F0303B9,1:1F0403B9,1:1F0503B9,1:1F0603B9,1:1F0703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F2003B9,1:1F2103B9,1:1F2203B9,1:1F2303B9,1:1F2403B9,1:1F2503B9,1:1F2603B9,1:1F2703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,1:1F6003B9,1:1F6103B9,1:1F6203B9,1:1F6303B9,1:1F6403B9,1:1F6503B9,1:1F6603B9,1:1F6703B9,3:1F7003B9,1:03B103B9,1:03AC03B9,2:03B10342,1:03B1034203B9,5:03B103B9,6:1F7403B9,1:03B703B9,1:03AE03B9,2:03B70342,1:03B7034203B9,5:03B703B9,6:03B903080300,1:03B903080301,3:03B90342,1:03B903080342,b:03C503080300,1:03C503080301,1:03C10313,2:03C50342,1:03C503080342,b:1F7C03B9,1:03C903B9,1:03CE03B9,2:03C90342,1:03C9034203B9,5:03C903B9,ac:00720073,5b:00B00063,6:00B00066,d:006E006F,a:0073006D,1:00740065006C,1:0074006D,124f:006800700061,2:00610075,2:006F0076,b:00700061,1:006E0061,1:03BC0061,1:006D0061,1:006B0061,1:006B0062,1:006D0062,1:00670062,3:00700066,1:006E0066,1:03BC0066,4:0068007A,1:006B0068007A,1:006D0068007A,1:00670068007A,1:00740068007A,15:00700061,1:006B00700061,1:006D00700061,1:006700700061,8:00700076,1:006E0076,1:03BC0076,1:006D0076,1:006B0076,1:006D0076,1:00700077,1:006E0077,1:03BC0077,1:006D0077,1:006B0077,1:006D0077,1:006B03C9,1:006D03C9,2:00620071,3:00632215006B0067,1:0063006F002E,1:00640062,1:00670079,2:00680070,2:006B006B,1:006B006D,9:00700068,2:00700070006D,1:00700072,2:00730076,1:00770062,c723:00660066,1:00660069,1:0066006C,1:006600660069,1:00660066006C,1:00730074,1:00730074,d:05740576,1:05740565,1:0574056B,1:057E0576,1:0574056D",B9),jp("80-20,2a0-,39c,32,f71,18e,7f2-f,19-7,30-4,7-5,f81-b,5,a800-20ff,4d1-1f,110,fa-6,d174-7,2e84-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,ffff-,2,1f-5f,ff7f-20001");function T9(r){r=atob(r);const t=[];for(let e=0;e<r.length;e++)t.push(r.charCodeAt(e));return Ge(t)}function ym(r,t){t==null&&(t=1);const e=[],i=e.forEach,s=function(o,u){i.call(o,function(g){u>0&&Array.isArray(g)?s(g,u-1):e.push(g)})};return s(r,t),e}function q9(r){const t={};for(let e=0;e<r.length;e++){const i=r[e];t[i[0]]=i[1]}return t}function D9(r){let t=0;function e(){return r[t++]<<8|r[t++]}let i=e(),s=1,o=[0,1];for(let et=1;et<i;et++)o.push(s+=e());let u=e(),g=t;t+=u;let w=0,A=0;function S(){return w==0&&(A=A<<8|r[t++],w=8),A>>--w&1}const x=31,N=Math.pow(2,x),R=N>>>1,O=R>>1,z=N-1;let L=0;for(let et=0;et<x;et++)L=L<<1|S();let H=[],rt=0,ht=N;for(;;){let et=Math.floor(((L-rt+1)*s-1)/ht),at=0,ft=i;for(;ft-at>1;){let se=at+ft>>>1;et<o[se]?ft=se:at=se}if(at==0)break;H.push(at);let ct=rt+Math.floor(ht*o[at]/s),mt=rt+Math.floor(ht*o[at+1]/s)-1;for(;!((ct^mt)&R);)L=L<<1&z|S(),ct=ct<<1&z,mt=mt<<1&z|1;for(;ct&~mt&O;)L=L&R|L<<1&z>>>1|S(),ct=ct<<1^R,mt=(mt^R)<<1|R|1;rt=ct,ht=1+mt-ct}let Z=i-4;return H.map(et=>{switch(et-Z){case 3:return Z+65792+(r[g++]<<16|r[g++]<<8|r[g++]);case 2:return Z+256+(r[g++]<<8|r[g++]);case 1:return Z+r[g++];default:return et-1}})}function k9(r){let t=0;return()=>r[t++]}function U9(r){return k9(D9(r))}function z9(r){return r&1?~r>>1:r>>1}function F9(r,t){let e=Array(r);for(let i=0;i<r;i++)e[i]=1+t();return e}function Hp(r,t){let e=Array(r);for(let i=0,s=-1;i<r;i++)e[i]=s+=1+t();return e}function L9(r,t){let e=Array(r);for(let i=0,s=0;i<r;i++)e[i]=s+=z9(t());return e}function cf(r,t){let e=Hp(r(),r),i=r(),s=Hp(i,r),o=F9(i,r);for(let u=0;u<i;u++)for(let g=0;g<o[u];g++)e.push(s[u]+g);return t?e.map(u=>t[u]):e}function $9(r){let t=[];for(;;){let e=r();if(e==0)break;t.push(H9(e,r))}for(;;){let e=r()-1;if(e<0)break;t.push(K9(e,r))}return q9(ym(t))}function j9(r){let t=[];for(;;){let e=r();if(e==0)break;t.push(e)}return t}function wm(r,t,e){let i=Array(r).fill(void 0).map(()=>[]);for(let s=0;s<t;s++)L9(r,e).forEach((o,u)=>i[u].push(o));return i}function H9(r,t){let e=1+t(),i=t(),s=j9(t),o=wm(s.length,1+r,t);return ym(o.map((u,g)=>{const w=u[0],A=u.slice(1);return Array(s[g]).fill(void 0).map((S,x)=>{let N=x*i;return[w+x*e,A.map(R=>R+N)]})}))}function K9(r,t){let e=1+t();return wm(e,1+r,t).map(i=>[i[0],i.slice(1)])}function Q9(r){let t=cf(r).sort((i,s)=>i-s);return e();function e(){let i=[];for(;;){let A=cf(r,t);if(A.length==0)break;i.push({set:new Set(A),node:e()})}i.sort((A,S)=>S.set.size-A.set.size);let s=r(),o=s%3;s=s/3|0;let u=!!(s&1);s>>=1;let g=s==1,w=s==2;return{branches:i,valid:o,fe0f:u,save:g,check:w}}}function J9(){return U9(T9("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"))}const qh=J9();new Set(cf(qh)),new Set(cf(qh)),$9(qh),Q9(qh);const V9=new Uint8Array(32);V9.fill(0);const G9=`Ethereum Signed Message:
`;function Am(r){return typeof r=="string"&&(r=fu(r)),m0(_9([fu(G9),fu(String(r.length)),r]))}const Y9="address/5.7.0",ba=new br(Y9);function Kp(r){mi(r,20)||ba.throwArgumentError("invalid address","address",r),r=r.toLowerCase();const t=r.substring(2).split(""),e=new Uint8Array(40);for(let s=0;s<40;s++)e[s]=t[s].charCodeAt(0);const i=Ge(m0(e));for(let s=0;s<40;s+=2)i[s>>1]>>4>=8&&(t[s]=t[s].toUpperCase()),(i[s>>1]&15)>=8&&(t[s+1]=t[s+1].toUpperCase());return"0x"+t.join("")}const W9=9007199254740991;function X9(r){return Math.log10?Math.log10(r):Math.log(r)/Math.LN10}const b0={};for(let r=0;r<10;r++)b0[String(r)]=String(r);for(let r=0;r<26;r++)b0[String.fromCharCode(65+r)]=String(10+r);const Qp=Math.floor(X9(W9));function Z9(r){r=r.toUpperCase(),r=r.substring(4)+r.substring(0,2)+"00";let t=r.split("").map(i=>b0[i]).join("");for(;t.length>=Qp;){let i=t.substring(0,Qp);t=parseInt(i,10)%97+t.substring(i.length)}let e=String(98-parseInt(t,10)%97);for(;e.length<2;)e="0"+e;return e}function tA(r){let t=null;if(typeof r!="string"&&ba.throwArgumentError("invalid address","address",r),r.match(/^(0x)?[0-9a-fA-F]{40}$/))r.substring(0,2)!=="0x"&&(r="0x"+r),t=Kp(r),r.match(/([A-F].*[a-f])|([a-f].*[A-F])/)&&t!==r&&ba.throwArgumentError("bad address checksum","address",r);else if(r.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){for(r.substring(2,4)!==Z9(r)&&ba.throwArgumentError("bad icap checksum","address",r),t=N9(r.substring(4));t.length<40;)t="0"+t;t=Kp("0x"+t)}else ba.throwArgumentError("invalid address","address",r);return t}function fa(r,t,e){Object.defineProperty(r,t,{enumerable:!0,value:e,writable:!1})}const eA=new Uint8Array(32);eA.fill(0),kr.from(-1);const rA=kr.from(0),iA=kr.from(1);kr.from("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),Pn(iA.toHexString(),32),Pn(rA.toHexString(),32);var bn={},Pe={},La=_m;function _m(r,t){if(!r)throw new Error(t||"Assertion failed")}_m.equal=function(r,t,e){if(r!=t)throw new Error(e||"Assertion failed: "+r+" != "+t)};var $u={exports:{}};typeof Object.create=="function"?$u.exports=function(r,t){t&&(r.super_=t,r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}))}:$u.exports=function(r,t){if(t){r.super_=t;var e=function(){};e.prototype=t.prototype,r.prototype=new e,r.prototype.constructor=r}};var nA=La,sA=$u.exports;Pe.inherits=sA;function oA(r,t){return(r.charCodeAt(t)&64512)!==55296||t<0||t+1>=r.length?!1:(r.charCodeAt(t+1)&64512)===56320}function aA(r,t){if(Array.isArray(r))return r.slice();if(!r)return[];var e=[];if(typeof r=="string")if(t){if(t==="hex")for(r=r.replace(/[^a-z0-9]+/ig,""),r.length%2!==0&&(r="0"+r),s=0;s<r.length;s+=2)e.push(parseInt(r[s]+r[s+1],16))}else for(var i=0,s=0;s<r.length;s++){var o=r.charCodeAt(s);o<128?e[i++]=o:o<2048?(e[i++]=o>>6|192,e[i++]=o&63|128):oA(r,s)?(o=65536+((o&1023)<<10)+(r.charCodeAt(++s)&1023),e[i++]=o>>18|240,e[i++]=o>>12&63|128,e[i++]=o>>6&63|128,e[i++]=o&63|128):(e[i++]=o>>12|224,e[i++]=o>>6&63|128,e[i++]=o&63|128)}else for(s=0;s<r.length;s++)e[s]=r[s]|0;return e}Pe.toArray=aA;function hA(r){for(var t="",e=0;e<r.length;e++)t+=Em(r[e].toString(16));return t}Pe.toHex=hA;function Mm(r){var t=r>>>24|r>>>8&65280|r<<8&16711680|(r&255)<<24;return t>>>0}Pe.htonl=Mm;function fA(r,t){for(var e="",i=0;i<r.length;i++){var s=r[i];t==="little"&&(s=Mm(s)),e+=Im(s.toString(16))}return e}Pe.toHex32=fA;function Em(r){return r.length===1?"0"+r:r}Pe.zero2=Em;function Im(r){return r.length===7?"0"+r:r.length===6?"00"+r:r.length===5?"000"+r:r.length===4?"0000"+r:r.length===3?"00000"+r:r.length===2?"000000"+r:r.length===1?"0000000"+r:r}Pe.zero8=Im;function cA(r,t,e,i){var s=e-t;nA(s%4===0);for(var o=new Array(s/4),u=0,g=t;u<o.length;u++,g+=4){var w;i==="big"?w=r[g]<<24|r[g+1]<<16|r[g+2]<<8|r[g+3]:w=r[g+3]<<24|r[g+2]<<16|r[g+1]<<8|r[g],o[u]=w>>>0}return o}Pe.join32=cA;function uA(r,t){for(var e=new Array(r.length*4),i=0,s=0;i<r.length;i++,s+=4){var o=r[i];t==="big"?(e[s]=o>>>24,e[s+1]=o>>>16&255,e[s+2]=o>>>8&255,e[s+3]=o&255):(e[s+3]=o>>>24,e[s+2]=o>>>16&255,e[s+1]=o>>>8&255,e[s]=o&255)}return e}Pe.split32=uA;function dA(r,t){return r>>>t|r<<32-t}Pe.rotr32=dA;function lA(r,t){return r<<t|r>>>32-t}Pe.rotl32=lA;function pA(r,t){return r+t>>>0}Pe.sum32=pA;function gA(r,t,e){return r+t+e>>>0}Pe.sum32_3=gA;function mA(r,t,e,i){return r+t+e+i>>>0}Pe.sum32_4=mA;function vA(r,t,e,i,s){return r+t+e+i+s>>>0}Pe.sum32_5=vA;function bA(r,t,e,i){var s=r[t],o=r[t+1],u=i+o>>>0,g=(u<i?1:0)+e+s;r[t]=g>>>0,r[t+1]=u}Pe.sum64=bA;function yA(r,t,e,i){var s=t+i>>>0,o=(s<t?1:0)+r+e;return o>>>0}Pe.sum64_hi=yA;function wA(r,t,e,i){var s=t+i;return s>>>0}Pe.sum64_lo=wA;function AA(r,t,e,i,s,o,u,g){var w=0,A=t;A=A+i>>>0,w+=A<t?1:0,A=A+o>>>0,w+=A<o?1:0,A=A+g>>>0,w+=A<g?1:0;var S=r+e+s+u+w;return S>>>0}Pe.sum64_4_hi=AA;function _A(r,t,e,i,s,o,u,g){var w=t+i+o+g;return w>>>0}Pe.sum64_4_lo=_A;function MA(r,t,e,i,s,o,u,g,w,A){var S=0,x=t;x=x+i>>>0,S+=x<t?1:0,x=x+o>>>0,S+=x<o?1:0,x=x+g>>>0,S+=x<g?1:0,x=x+A>>>0,S+=x<A?1:0;var N=r+e+s+u+w+S;return N>>>0}Pe.sum64_5_hi=MA;function EA(r,t,e,i,s,o,u,g,w,A){var S=t+i+o+g+A;return S>>>0}Pe.sum64_5_lo=EA;function IA(r,t,e){var i=t<<32-e|r>>>e;return i>>>0}Pe.rotr64_hi=IA;function SA(r,t,e){var i=r<<32-e|t>>>e;return i>>>0}Pe.rotr64_lo=SA;function xA(r,t,e){return r>>>e}Pe.shr64_hi=xA;function PA(r,t,e){var i=r<<32-e|t>>>e;return i>>>0}Pe.shr64_lo=PA;var Lo={},Jp=Pe,NA=La;function Dh(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}Lo.BlockHash=Dh,Dh.prototype.update=function(r,t){if(r=Jp.toArray(r,t),this.pending?this.pending=this.pending.concat(r):this.pending=r,this.pendingTotal+=r.length,this.pending.length>=this._delta8){r=this.pending;var e=r.length%this._delta8;this.pending=r.slice(r.length-e,r.length),this.pending.length===0&&(this.pending=null),r=Jp.join32(r,0,r.length-e,this.endian);for(var i=0;i<r.length;i+=this._delta32)this._update(r,i,i+this._delta32)}return this},Dh.prototype.digest=function(r){return this.update(this._pad()),NA(this.pending===null),this._digest(r)},Dh.prototype._pad=function(){var r=this.pendingTotal,t=this._delta8,e=t-(r+this.padLength)%t,i=new Array(e+this.padLength);i[0]=128;for(var s=1;s<e;s++)i[s]=0;if(r<<=3,this.endian==="big"){for(var o=8;o<this.padLength;o++)i[s++]=0;i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=r>>>24&255,i[s++]=r>>>16&255,i[s++]=r>>>8&255,i[s++]=r&255}else for(i[s++]=r&255,i[s++]=r>>>8&255,i[s++]=r>>>16&255,i[s++]=r>>>24&255,i[s++]=0,i[s++]=0,i[s++]=0,i[s++]=0,o=8;o<this.padLength;o++)i[s++]=0;return i};var vo={},qn={},RA=Pe,Nn=RA.rotr32;function CA(r,t,e,i){if(r===0)return Sm(t,e,i);if(r===1||r===3)return Pm(t,e,i);if(r===2)return xm(t,e,i)}qn.ft_1=CA;function Sm(r,t,e){return r&t^~r&e}qn.ch32=Sm;function xm(r,t,e){return r&t^r&e^t&e}qn.maj32=xm;function Pm(r,t,e){return r^t^e}qn.p32=Pm;function OA(r){return Nn(r,2)^Nn(r,13)^Nn(r,22)}qn.s0_256=OA;function BA(r){return Nn(r,6)^Nn(r,11)^Nn(r,25)}qn.s1_256=BA;function TA(r){return Nn(r,7)^Nn(r,18)^r>>>3}qn.g0_256=TA;function qA(r){return Nn(r,17)^Nn(r,19)^r>>>10}qn.g1_256=qA;var Co=Pe,DA=Lo,kA=qn,uu=Co.rotl32,ca=Co.sum32,UA=Co.sum32_5,zA=kA.ft_1,Nm=DA.BlockHash,FA=[1518500249,1859775393,2400959708,3395469782];function Mn(){if(!(this instanceof Mn))return new Mn;Nm.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}Co.inherits(Mn,Nm);var LA=Mn;Mn.blockSize=512,Mn.outSize=160,Mn.hmacStrength=80,Mn.padLength=64,Mn.prototype._update=function(r,t){for(var e=this.W,i=0;i<16;i++)e[i]=r[t+i];for(;i<e.length;i++)e[i]=uu(e[i-3]^e[i-8]^e[i-14]^e[i-16],1);var s=this.h[0],o=this.h[1],u=this.h[2],g=this.h[3],w=this.h[4];for(i=0;i<e.length;i++){var A=~~(i/20),S=UA(uu(s,5),zA(A,o,u,g),w,e[i],FA[A]);w=g,g=u,u=uu(o,30),o=s,s=S}this.h[0]=ca(this.h[0],s),this.h[1]=ca(this.h[1],o),this.h[2]=ca(this.h[2],u),this.h[3]=ca(this.h[3],g),this.h[4]=ca(this.h[4],w)},Mn.prototype._digest=function(r){return r==="hex"?Co.toHex32(this.h,"big"):Co.split32(this.h,"big")};var Oo=Pe,$A=Lo,$o=qn,jA=La,Vi=Oo.sum32,HA=Oo.sum32_4,KA=Oo.sum32_5,QA=$o.ch32,JA=$o.maj32,VA=$o.s0_256,GA=$o.s1_256,YA=$o.g0_256,WA=$o.g1_256,Rm=$A.BlockHash,XA=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function En(){if(!(this instanceof En))return new En;Rm.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=XA,this.W=new Array(64)}Oo.inherits(En,Rm);var Cm=En;En.blockSize=512,En.outSize=256,En.hmacStrength=192,En.padLength=64,En.prototype._update=function(r,t){for(var e=this.W,i=0;i<16;i++)e[i]=r[t+i];for(;i<e.length;i++)e[i]=HA(WA(e[i-2]),e[i-7],YA(e[i-15]),e[i-16]);var s=this.h[0],o=this.h[1],u=this.h[2],g=this.h[3],w=this.h[4],A=this.h[5],S=this.h[6],x=this.h[7];for(jA(this.k.length===e.length),i=0;i<e.length;i++){var N=KA(x,GA(w),QA(w,A,S),this.k[i],e[i]),R=Vi(VA(s),JA(s,o,u));x=S,S=A,A=w,w=Vi(g,N),g=u,u=o,o=s,s=Vi(N,R)}this.h[0]=Vi(this.h[0],s),this.h[1]=Vi(this.h[1],o),this.h[2]=Vi(this.h[2],u),this.h[3]=Vi(this.h[3],g),this.h[4]=Vi(this.h[4],w),this.h[5]=Vi(this.h[5],A),this.h[6]=Vi(this.h[6],S),this.h[7]=Vi(this.h[7],x)},En.prototype._digest=function(r){return r==="hex"?Oo.toHex32(this.h,"big"):Oo.split32(this.h,"big")};var ju=Pe,Om=Cm;function rs(){if(!(this instanceof rs))return new rs;Om.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}ju.inherits(rs,Om);var ZA=rs;rs.blockSize=512,rs.outSize=224,rs.hmacStrength=192,rs.padLength=64,rs.prototype._digest=function(r){return r==="hex"?ju.toHex32(this.h.slice(0,7),"big"):ju.split32(this.h.slice(0,7),"big")};var ei=Pe,t_=Lo,e_=La,Rn=ei.rotr64_hi,Cn=ei.rotr64_lo,Bm=ei.shr64_hi,Tm=ei.shr64_lo,bs=ei.sum64,du=ei.sum64_hi,lu=ei.sum64_lo,r_=ei.sum64_4_hi,i_=ei.sum64_4_lo,n_=ei.sum64_5_hi,s_=ei.sum64_5_lo,qm=t_.BlockHash,o_=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function rn(){if(!(this instanceof rn))return new rn;qm.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=o_,this.W=new Array(160)}ei.inherits(rn,qm);var Dm=rn;rn.blockSize=1024,rn.outSize=512,rn.hmacStrength=192,rn.padLength=128,rn.prototype._prepareBlock=function(r,t){for(var e=this.W,i=0;i<32;i++)e[i]=r[t+i];for(;i<e.length;i+=2){var s=v_(e[i-4],e[i-3]),o=b_(e[i-4],e[i-3]),u=e[i-14],g=e[i-13],w=g_(e[i-30],e[i-29]),A=m_(e[i-30],e[i-29]),S=e[i-32],x=e[i-31];e[i]=r_(s,o,u,g,w,A,S,x),e[i+1]=i_(s,o,u,g,w,A,S,x)}},rn.prototype._update=function(r,t){this._prepareBlock(r,t);var e=this.W,i=this.h[0],s=this.h[1],o=this.h[2],u=this.h[3],g=this.h[4],w=this.h[5],A=this.h[6],S=this.h[7],x=this.h[8],N=this.h[9],R=this.h[10],O=this.h[11],z=this.h[12],L=this.h[13],H=this.h[14],rt=this.h[15];e_(this.k.length===e.length);for(var ht=0;ht<e.length;ht+=2){var Z=H,et=rt,at=l_(x,N),ft=p_(x,N),ct=a_(x,N,R,O,z),mt=h_(x,N,R,O,z,L),se=this.k[ht],T=this.k[ht+1],y=e[ht],a=e[ht+1],f=n_(Z,et,at,ft,ct,mt,se,T,y,a),d=s_(Z,et,at,ft,ct,mt,se,T,y,a);Z=u_(i,s),et=d_(i,s),at=f_(i,s,o,u,g),ft=c_(i,s,o,u,g,w);var v=du(Z,et,at,ft),b=lu(Z,et,at,ft);H=z,rt=L,z=R,L=O,R=x,O=N,x=du(A,S,f,d),N=lu(S,S,f,d),A=g,S=w,g=o,w=u,o=i,u=s,i=du(f,d,v,b),s=lu(f,d,v,b)}bs(this.h,0,i,s),bs(this.h,2,o,u),bs(this.h,4,g,w),bs(this.h,6,A,S),bs(this.h,8,x,N),bs(this.h,10,R,O),bs(this.h,12,z,L),bs(this.h,14,H,rt)},rn.prototype._digest=function(r){return r==="hex"?ei.toHex32(this.h,"big"):ei.split32(this.h,"big")};function a_(r,t,e,i,s){var o=r&e^~r&s;return o<0&&(o+=4294967296),o}function h_(r,t,e,i,s,o){var u=t&i^~t&o;return u<0&&(u+=4294967296),u}function f_(r,t,e,i,s){var o=r&e^r&s^e&s;return o<0&&(o+=4294967296),o}function c_(r,t,e,i,s,o){var u=t&i^t&o^i&o;return u<0&&(u+=4294967296),u}function u_(r,t){var e=Rn(r,t,28),i=Rn(t,r,2),s=Rn(t,r,7),o=e^i^s;return o<0&&(o+=4294967296),o}function d_(r,t){var e=Cn(r,t,28),i=Cn(t,r,2),s=Cn(t,r,7),o=e^i^s;return o<0&&(o+=4294967296),o}function l_(r,t){var e=Rn(r,t,14),i=Rn(r,t,18),s=Rn(t,r,9),o=e^i^s;return o<0&&(o+=4294967296),o}function p_(r,t){var e=Cn(r,t,14),i=Cn(r,t,18),s=Cn(t,r,9),o=e^i^s;return o<0&&(o+=4294967296),o}function g_(r,t){var e=Rn(r,t,1),i=Rn(r,t,8),s=Bm(r,t,7),o=e^i^s;return o<0&&(o+=4294967296),o}function m_(r,t){var e=Cn(r,t,1),i=Cn(r,t,8),s=Tm(r,t,7),o=e^i^s;return o<0&&(o+=4294967296),o}function v_(r,t){var e=Rn(r,t,19),i=Rn(t,r,29),s=Bm(r,t,6),o=e^i^s;return o<0&&(o+=4294967296),o}function b_(r,t){var e=Cn(r,t,19),i=Cn(t,r,29),s=Tm(r,t,6),o=e^i^s;return o<0&&(o+=4294967296),o}var Hu=Pe,km=Dm;function is(){if(!(this instanceof is))return new is;km.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}Hu.inherits(is,km);var y_=is;is.blockSize=1024,is.outSize=384,is.hmacStrength=192,is.padLength=128,is.prototype._digest=function(r){return r==="hex"?Hu.toHex32(this.h.slice(0,12),"big"):Hu.split32(this.h.slice(0,12),"big")},vo.sha1=LA,vo.sha224=ZA,vo.sha256=Cm,vo.sha384=y_,vo.sha512=Dm;var Um={},Hs=Pe,w_=Lo,kh=Hs.rotl32,Vp=Hs.sum32,ua=Hs.sum32_3,Gp=Hs.sum32_4,zm=w_.BlockHash;function yn(){if(!(this instanceof yn))return new yn;zm.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}Hs.inherits(yn,zm),Um.ripemd160=yn,yn.blockSize=512,yn.outSize=160,yn.hmacStrength=192,yn.padLength=64,yn.prototype._update=function(r,t){for(var e=this.h[0],i=this.h[1],s=this.h[2],o=this.h[3],u=this.h[4],g=e,w=i,A=s,S=o,x=u,N=0;N<80;N++){var R=Vp(kh(Gp(e,Yp(N,i,s,o),r[M_[N]+t],A_(N)),I_[N]),u);e=u,u=o,o=kh(s,10),s=i,i=R,R=Vp(kh(Gp(g,Yp(79-N,w,A,S),r[E_[N]+t],__(N)),S_[N]),x),g=x,x=S,S=kh(A,10),A=w,w=R}R=ua(this.h[1],s,S),this.h[1]=ua(this.h[2],o,x),this.h[2]=ua(this.h[3],u,g),this.h[3]=ua(this.h[4],e,w),this.h[4]=ua(this.h[0],i,A),this.h[0]=R},yn.prototype._digest=function(r){return r==="hex"?Hs.toHex32(this.h,"little"):Hs.split32(this.h,"little")};function Yp(r,t,e,i){return r<=15?t^e^i:r<=31?t&e|~t&i:r<=47?(t|~e)^i:r<=63?t&i|e&~i:t^(e|~i)}function A_(r){return r<=15?0:r<=31?1518500249:r<=47?1859775393:r<=63?2400959708:2840853838}function __(r){return r<=15?1352829926:r<=31?1548603684:r<=47?1836072691:r<=63?2053994217:0}var M_=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],E_=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],I_=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],S_=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],x_=Pe,P_=La;function So(r,t,e){if(!(this instanceof So))return new So(r,t,e);this.Hash=r,this.blockSize=r.blockSize/8,this.outSize=r.outSize/8,this.inner=null,this.outer=null,this._init(x_.toArray(t,e))}var N_=So;So.prototype._init=function(r){r.length>this.blockSize&&(r=new this.Hash().update(r).digest()),P_(r.length<=this.blockSize);for(var t=r.length;t<this.blockSize;t++)r.push(0);for(t=0;t<r.length;t++)r[t]^=54;for(this.inner=new this.Hash().update(r),t=0;t<r.length;t++)r[t]^=106;this.outer=new this.Hash().update(r)},So.prototype.update=function(r,t){return this.inner.update(r,t),this},So.prototype.digest=function(r){return this.outer.update(this.inner.digest()),this.outer.digest(r)},function(r){var t=r;t.utils=Pe,t.common=Lo,t.sha=vo,t.ripemd=Um,t.hmac=N_,t.sha1=t.sha.sha1,t.sha256=t.sha.sha256,t.sha224=t.sha.sha224,t.sha384=t.sha.sha384,t.sha512=t.sha.sha512,t.ripemd160=t.ripemd.ripemd160}(bn);function jo(r,t,e){return e={path:t,exports:{},require:function(i,s){return R_(i,s??e.path)}},r(e,e.exports),e.exports}function R_(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var y0=Fm;function Fm(r,t){if(!r)throw new Error(t||"Assertion failed")}Fm.equal=function(r,t,e){if(r!=t)throw new Error(e||"Assertion failed: "+r+" != "+t)};var on=jo(function(r,t){var e=t;function i(u,g){if(Array.isArray(u))return u.slice();if(!u)return[];var w=[];if(typeof u!="string"){for(var A=0;A<u.length;A++)w[A]=u[A]|0;return w}if(g==="hex"){u=u.replace(/[^a-z0-9]+/ig,""),u.length%2!==0&&(u="0"+u);for(var A=0;A<u.length;A+=2)w.push(parseInt(u[A]+u[A+1],16))}else for(var A=0;A<u.length;A++){var S=u.charCodeAt(A),x=S>>8,N=S&255;x?w.push(x,N):w.push(N)}return w}e.toArray=i;function s(u){return u.length===1?"0"+u:u}e.zero2=s;function o(u){for(var g="",w=0;w<u.length;w++)g+=s(u[w].toString(16));return g}e.toHex=o,e.encode=function(u,g){return g==="hex"?o(u):u}}),bi=jo(function(r,t){var e=t;e.assert=y0,e.toArray=on.toArray,e.zero2=on.zero2,e.toHex=on.toHex,e.encode=on.encode;function i(w,A,S){var x=new Array(Math.max(w.bitLength(),S)+1);x.fill(0);for(var N=1<<A+1,R=w.clone(),O=0;O<x.length;O++){var z,L=R.andln(N-1);R.isOdd()?(L>(N>>1)-1?z=(N>>1)-L:z=L,R.isubn(z)):z=0,x[O]=z,R.iushrn(1)}return x}e.getNAF=i;function s(w,A){var S=[[],[]];w=w.clone(),A=A.clone();for(var x=0,N=0,R;w.cmpn(-x)>0||A.cmpn(-N)>0;){var O=w.andln(3)+x&3,z=A.andln(3)+N&3;O===3&&(O=-1),z===3&&(z=-1);var L;O&1?(R=w.andln(7)+x&7,(R===3||R===5)&&z===2?L=-O:L=O):L=0,S[0].push(L);var H;z&1?(R=A.andln(7)+N&7,(R===3||R===5)&&O===2?H=-z:H=z):H=0,S[1].push(H),2*x===L+1&&(x=1-x),2*N===H+1&&(N=1-N),w.iushrn(1),A.iushrn(1)}return S}e.getJSF=s;function o(w,A,S){var x="_"+A;w.prototype[A]=function(){return this[x]!==void 0?this[x]:this[x]=S.call(this)}}e.cachedProperty=o;function u(w){return typeof w=="string"?e.toArray(w,"hex"):w}e.parseBytes=u;function g(w){return new ie(w,"hex","le")}e.intFromLE=g}),Uh=bi.getNAF,C_=bi.getJSF,uf=bi.assert;function Ms(r,t){this.type=r,this.p=new ie(t.p,16),this.red=t.prime?ie.red(t.prime):ie.mont(this.p),this.zero=new ie(0).toRed(this.red),this.one=new ie(1).toRed(this.red),this.two=new ie(2).toRed(this.red),this.n=t.n&&new ie(t.n,16),this.g=t.g&&this.pointFromJSON(t.g,t.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var e=this.n&&this.p.div(this.n);!e||e.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}var Gs=Ms;Ms.prototype.point=function(){throw new Error("Not implemented")},Ms.prototype.validate=function(){throw new Error("Not implemented")},Ms.prototype._fixedNafMul=function(r,t){uf(r.precomputed);var e=r._getDoubles(),i=Uh(t,1,this._bitLength),s=(1<<e.step+1)-(e.step%2===0?2:1);s/=3;var o=[],u,g;for(u=0;u<i.length;u+=e.step){g=0;for(var w=u+e.step-1;w>=u;w--)g=(g<<1)+i[w];o.push(g)}for(var A=this.jpoint(null,null,null),S=this.jpoint(null,null,null),x=s;x>0;x--){for(u=0;u<o.length;u++)g=o[u],g===x?S=S.mixedAdd(e.points[u]):g===-x&&(S=S.mixedAdd(e.points[u].neg()));A=A.add(S)}return A.toP()},Ms.prototype._wnafMul=function(r,t){var e=4,i=r._getNAFPoints(e);e=i.wnd;for(var s=i.points,o=Uh(t,e,this._bitLength),u=this.jpoint(null,null,null),g=o.length-1;g>=0;g--){for(var w=0;g>=0&&o[g]===0;g--)w++;if(g>=0&&w++,u=u.dblp(w),g<0)break;var A=o[g];uf(A!==0),r.type==="affine"?A>0?u=u.mixedAdd(s[A-1>>1]):u=u.mixedAdd(s[-A-1>>1].neg()):A>0?u=u.add(s[A-1>>1]):u=u.add(s[-A-1>>1].neg())}return r.type==="affine"?u.toP():u},Ms.prototype._wnafMulAdd=function(r,t,e,i,s){var o=this._wnafT1,u=this._wnafT2,g=this._wnafT3,w=0,A,S,x;for(A=0;A<i;A++){x=t[A];var N=x._getNAFPoints(r);o[A]=N.wnd,u[A]=N.points}for(A=i-1;A>=1;A-=2){var R=A-1,O=A;if(o[R]!==1||o[O]!==1){g[R]=Uh(e[R],o[R],this._bitLength),g[O]=Uh(e[O],o[O],this._bitLength),w=Math.max(g[R].length,w),w=Math.max(g[O].length,w);continue}var z=[t[R],null,null,t[O]];t[R].y.cmp(t[O].y)===0?(z[1]=t[R].add(t[O]),z[2]=t[R].toJ().mixedAdd(t[O].neg())):t[R].y.cmp(t[O].y.redNeg())===0?(z[1]=t[R].toJ().mixedAdd(t[O]),z[2]=t[R].add(t[O].neg())):(z[1]=t[R].toJ().mixedAdd(t[O]),z[2]=t[R].toJ().mixedAdd(t[O].neg()));var L=[-3,-1,-5,-7,0,7,5,1,3],H=C_(e[R],e[O]);for(w=Math.max(H[0].length,w),g[R]=new Array(w),g[O]=new Array(w),S=0;S<w;S++){var rt=H[0][S]|0,ht=H[1][S]|0;g[R][S]=L[(rt+1)*3+(ht+1)],g[O][S]=0,u[R]=z}}var Z=this.jpoint(null,null,null),et=this._wnafT4;for(A=w;A>=0;A--){for(var at=0;A>=0;){var ft=!0;for(S=0;S<i;S++)et[S]=g[S][A]|0,et[S]!==0&&(ft=!1);if(!ft)break;at++,A--}if(A>=0&&at++,Z=Z.dblp(at),A<0)break;for(S=0;S<i;S++){var ct=et[S];ct!==0&&(ct>0?x=u[S][ct-1>>1]:ct<0&&(x=u[S][-ct-1>>1].neg()),x.type==="affine"?Z=Z.mixedAdd(x):Z=Z.add(x))}}for(A=0;A<i;A++)u[A]=null;return s?Z:Z.toP()};function Oi(r,t){this.curve=r,this.type=t,this.precomputed=null}Ms.BasePoint=Oi,Oi.prototype.eq=function(){throw new Error("Not implemented")},Oi.prototype.validate=function(){return this.curve.validate(this)},Ms.prototype.decodePoint=function(r,t){r=bi.toArray(r,t);var e=this.p.byteLength();if((r[0]===4||r[0]===6||r[0]===7)&&r.length-1===2*e){r[0]===6?uf(r[r.length-1]%2===0):r[0]===7&&uf(r[r.length-1]%2===1);var i=this.point(r.slice(1,1+e),r.slice(1+e,1+2*e));return i}else if((r[0]===2||r[0]===3)&&r.length-1===e)return this.pointFromX(r.slice(1,1+e),r[0]===3);throw new Error("Unknown point format")},Oi.prototype.encodeCompressed=function(r){return this.encode(r,!0)},Oi.prototype._encode=function(r){var t=this.curve.p.byteLength(),e=this.getX().toArray("be",t);return r?[this.getY().isEven()?2:3].concat(e):[4].concat(e,this.getY().toArray("be",t))},Oi.prototype.encode=function(r,t){return bi.encode(this._encode(t),r)},Oi.prototype.precompute=function(r){if(this.precomputed)return this;var t={doubles:null,naf:null,beta:null};return t.naf=this._getNAFPoints(8),t.doubles=this._getDoubles(4,r),t.beta=this._getBeta(),this.precomputed=t,this},Oi.prototype._hasDoubles=function(r){if(!this.precomputed)return!1;var t=this.precomputed.doubles;return t?t.points.length>=Math.ceil((r.bitLength()+1)/t.step):!1},Oi.prototype._getDoubles=function(r,t){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var e=[this],i=this,s=0;s<t;s+=r){for(var o=0;o<r;o++)i=i.dbl();e.push(i)}return{step:r,points:e}},Oi.prototype._getNAFPoints=function(r){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var t=[this],e=(1<<r)-1,i=e===1?null:this.dbl(),s=1;s<e;s++)t[s]=t[s-1].add(i);return{wnd:r,points:t}},Oi.prototype._getBeta=function(){return null},Oi.prototype.dblp=function(r){for(var t=this,e=0;e<r;e++)t=t.dbl();return t};var w0=jo(function(r){typeof Object.create=="function"?r.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:r.exports=function(t,e){if(e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}}}),O_=bi.assert;function Ui(r){Gs.call(this,"short",r),this.a=new ie(r.a,16).toRed(this.red),this.b=new ie(r.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=this.a.fromRed().cmpn(0)===0,this.threeA=this.a.fromRed().sub(this.p).cmpn(-3)===0,this.endo=this._getEndomorphism(r),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}w0(Ui,Gs);var B_=Ui;Ui.prototype._getEndomorphism=function(r){if(!(!this.zeroA||!this.g||!this.n||this.p.modn(3)!==1)){var t,e;if(r.beta)t=new ie(r.beta,16).toRed(this.red);else{var i=this._getEndoRoots(this.p);t=i[0].cmp(i[1])<0?i[0]:i[1],t=t.toRed(this.red)}if(r.lambda)e=new ie(r.lambda,16);else{var s=this._getEndoRoots(this.n);this.g.mul(s[0]).x.cmp(this.g.x.redMul(t))===0?e=s[0]:(e=s[1],O_(this.g.mul(e).x.cmp(this.g.x.redMul(t))===0))}var o;return r.basis?o=r.basis.map(function(u){return{a:new ie(u.a,16),b:new ie(u.b,16)}}):o=this._getEndoBasis(e),{beta:t,lambda:e,basis:o}}},Ui.prototype._getEndoRoots=function(r){var t=r===this.p?this.red:ie.mont(r),e=new ie(2).toRed(t).redInvm(),i=e.redNeg(),s=new ie(3).toRed(t).redNeg().redSqrt().redMul(e),o=i.redAdd(s).fromRed(),u=i.redSub(s).fromRed();return[o,u]},Ui.prototype._getEndoBasis=function(r){for(var t=this.n.ushrn(Math.floor(this.n.bitLength()/2)),e=r,i=this.n.clone(),s=new ie(1),o=new ie(0),u=new ie(0),g=new ie(1),w,A,S,x,N,R,O,z=0,L,H;e.cmpn(0)!==0;){var rt=i.div(e);L=i.sub(rt.mul(e)),H=u.sub(rt.mul(s));var ht=g.sub(rt.mul(o));if(!S&&L.cmp(t)<0)w=O.neg(),A=s,S=L.neg(),x=H;else if(S&&++z===2)break;O=L,i=e,e=L,u=s,s=H,g=o,o=ht}N=L.neg(),R=H;var Z=S.sqr().add(x.sqr()),et=N.sqr().add(R.sqr());return et.cmp(Z)>=0&&(N=w,R=A),S.negative&&(S=S.neg(),x=x.neg()),N.negative&&(N=N.neg(),R=R.neg()),[{a:S,b:x},{a:N,b:R}]},Ui.prototype._endoSplit=function(r){var t=this.endo.basis,e=t[0],i=t[1],s=i.b.mul(r).divRound(this.n),o=e.b.neg().mul(r).divRound(this.n),u=s.mul(e.a),g=o.mul(i.a),w=s.mul(e.b),A=o.mul(i.b),S=r.sub(u).sub(g),x=w.add(A).neg();return{k1:S,k2:x}},Ui.prototype.pointFromX=function(r,t){r=new ie(r,16),r.red||(r=r.toRed(this.red));var e=r.redSqr().redMul(r).redIAdd(r.redMul(this.a)).redIAdd(this.b),i=e.redSqrt();if(i.redSqr().redSub(e).cmp(this.zero)!==0)throw new Error("invalid point");var s=i.fromRed().isOdd();return(t&&!s||!t&&s)&&(i=i.redNeg()),this.point(r,i)},Ui.prototype.validate=function(r){if(r.inf)return!0;var t=r.x,e=r.y,i=this.a.redMul(t),s=t.redSqr().redMul(t).redIAdd(i).redIAdd(this.b);return e.redSqr().redISub(s).cmpn(0)===0},Ui.prototype._endoWnafMulAdd=function(r,t,e){for(var i=this._endoWnafT1,s=this._endoWnafT2,o=0;o<r.length;o++){var u=this._endoSplit(t[o]),g=r[o],w=g._getBeta();u.k1.negative&&(u.k1.ineg(),g=g.neg(!0)),u.k2.negative&&(u.k2.ineg(),w=w.neg(!0)),i[o*2]=g,i[o*2+1]=w,s[o*2]=u.k1,s[o*2+1]=u.k2}for(var A=this._wnafMulAdd(1,i,s,o*2,e),S=0;S<o*2;S++)i[S]=null,s[S]=null;return A};function hr(r,t,e,i){Gs.BasePoint.call(this,r,"affine"),t===null&&e===null?(this.x=null,this.y=null,this.inf=!0):(this.x=new ie(t,16),this.y=new ie(e,16),i&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}w0(hr,Gs.BasePoint),Ui.prototype.point=function(r,t,e){return new hr(this,r,t,e)},Ui.prototype.pointFromJSON=function(r,t){return hr.fromJSON(this,r,t)},hr.prototype._getBeta=function(){if(this.curve.endo){var r=this.precomputed;if(r&&r.beta)return r.beta;var t=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(r){var e=this.curve,i=function(s){return e.point(s.x.redMul(e.endo.beta),s.y)};r.beta=t,t.precomputed={beta:null,naf:r.naf&&{wnd:r.naf.wnd,points:r.naf.points.map(i)},doubles:r.doubles&&{step:r.doubles.step,points:r.doubles.points.map(i)}}}return t}},hr.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},hr.fromJSON=function(r,t,e){typeof t=="string"&&(t=JSON.parse(t));var i=r.point(t[0],t[1],e);if(!t[2])return i;function s(u){return r.point(u[0],u[1],e)}var o=t[2];return i.precomputed={beta:null,doubles:o.doubles&&{step:o.doubles.step,points:[i].concat(o.doubles.points.map(s))},naf:o.naf&&{wnd:o.naf.wnd,points:[i].concat(o.naf.points.map(s))}},i},hr.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},hr.prototype.isInfinity=function(){return this.inf},hr.prototype.add=function(r){if(this.inf)return r;if(r.inf)return this;if(this.eq(r))return this.dbl();if(this.neg().eq(r))return this.curve.point(null,null);if(this.x.cmp(r.x)===0)return this.curve.point(null,null);var t=this.y.redSub(r.y);t.cmpn(0)!==0&&(t=t.redMul(this.x.redSub(r.x).redInvm()));var e=t.redSqr().redISub(this.x).redISub(r.x),i=t.redMul(this.x.redSub(e)).redISub(this.y);return this.curve.point(e,i)},hr.prototype.dbl=function(){if(this.inf)return this;var r=this.y.redAdd(this.y);if(r.cmpn(0)===0)return this.curve.point(null,null);var t=this.curve.a,e=this.x.redSqr(),i=r.redInvm(),s=e.redAdd(e).redIAdd(e).redIAdd(t).redMul(i),o=s.redSqr().redISub(this.x.redAdd(this.x)),u=s.redMul(this.x.redSub(o)).redISub(this.y);return this.curve.point(o,u)},hr.prototype.getX=function(){return this.x.fromRed()},hr.prototype.getY=function(){return this.y.fromRed()},hr.prototype.mul=function(r){return r=new ie(r,16),this.isInfinity()?this:this._hasDoubles(r)?this.curve._fixedNafMul(this,r):this.curve.endo?this.curve._endoWnafMulAdd([this],[r]):this.curve._wnafMul(this,r)},hr.prototype.mulAdd=function(r,t,e){var i=[this,t],s=[r,e];return this.curve.endo?this.curve._endoWnafMulAdd(i,s):this.curve._wnafMulAdd(1,i,s,2)},hr.prototype.jmulAdd=function(r,t,e){var i=[this,t],s=[r,e];return this.curve.endo?this.curve._endoWnafMulAdd(i,s,!0):this.curve._wnafMulAdd(1,i,s,2,!0)},hr.prototype.eq=function(r){return this===r||this.inf===r.inf&&(this.inf||this.x.cmp(r.x)===0&&this.y.cmp(r.y)===0)},hr.prototype.neg=function(r){if(this.inf)return this;var t=this.curve.point(this.x,this.y.redNeg());if(r&&this.precomputed){var e=this.precomputed,i=function(s){return s.neg()};t.precomputed={naf:e.naf&&{wnd:e.naf.wnd,points:e.naf.points.map(i)},doubles:e.doubles&&{step:e.doubles.step,points:e.doubles.points.map(i)}}}return t},hr.prototype.toJ=function(){if(this.inf)return this.curve.jpoint(null,null,null);var r=this.curve.jpoint(this.x,this.y,this.curve.one);return r};function gr(r,t,e,i){Gs.BasePoint.call(this,r,"jacobian"),t===null&&e===null&&i===null?(this.x=this.curve.one,this.y=this.curve.one,this.z=new ie(0)):(this.x=new ie(t,16),this.y=new ie(e,16),this.z=new ie(i,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}w0(gr,Gs.BasePoint),Ui.prototype.jpoint=function(r,t,e){return new gr(this,r,t,e)},gr.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var r=this.z.redInvm(),t=r.redSqr(),e=this.x.redMul(t),i=this.y.redMul(t).redMul(r);return this.curve.point(e,i)},gr.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},gr.prototype.add=function(r){if(this.isInfinity())return r;if(r.isInfinity())return this;var t=r.z.redSqr(),e=this.z.redSqr(),i=this.x.redMul(t),s=r.x.redMul(e),o=this.y.redMul(t.redMul(r.z)),u=r.y.redMul(e.redMul(this.z)),g=i.redSub(s),w=o.redSub(u);if(g.cmpn(0)===0)return w.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var A=g.redSqr(),S=A.redMul(g),x=i.redMul(A),N=w.redSqr().redIAdd(S).redISub(x).redISub(x),R=w.redMul(x.redISub(N)).redISub(o.redMul(S)),O=this.z.redMul(r.z).redMul(g);return this.curve.jpoint(N,R,O)},gr.prototype.mixedAdd=function(r){if(this.isInfinity())return r.toJ();if(r.isInfinity())return this;var t=this.z.redSqr(),e=this.x,i=r.x.redMul(t),s=this.y,o=r.y.redMul(t).redMul(this.z),u=e.redSub(i),g=s.redSub(o);if(u.cmpn(0)===0)return g.cmpn(0)!==0?this.curve.jpoint(null,null,null):this.dbl();var w=u.redSqr(),A=w.redMul(u),S=e.redMul(w),x=g.redSqr().redIAdd(A).redISub(S).redISub(S),N=g.redMul(S.redISub(x)).redISub(s.redMul(A)),R=this.z.redMul(u);return this.curve.jpoint(x,N,R)},gr.prototype.dblp=function(r){if(r===0)return this;if(this.isInfinity())return this;if(!r)return this.dbl();var t;if(this.curve.zeroA||this.curve.threeA){var e=this;for(t=0;t<r;t++)e=e.dbl();return e}var i=this.curve.a,s=this.curve.tinv,o=this.x,u=this.y,g=this.z,w=g.redSqr().redSqr(),A=u.redAdd(u);for(t=0;t<r;t++){var S=o.redSqr(),x=A.redSqr(),N=x.redSqr(),R=S.redAdd(S).redIAdd(S).redIAdd(i.redMul(w)),O=o.redMul(x),z=R.redSqr().redISub(O.redAdd(O)),L=O.redISub(z),H=R.redMul(L);H=H.redIAdd(H).redISub(N);var rt=A.redMul(g);t+1<r&&(w=w.redMul(N)),o=z,g=rt,A=H}return this.curve.jpoint(o,A.redMul(s),g)},gr.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},gr.prototype._zeroDbl=function(){var r,t,e;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),u=this.x.redAdd(s).redSqr().redISub(i).redISub(o);u=u.redIAdd(u);var g=i.redAdd(i).redIAdd(i),w=g.redSqr().redISub(u).redISub(u),A=o.redIAdd(o);A=A.redIAdd(A),A=A.redIAdd(A),r=w,t=g.redMul(u.redISub(w)).redISub(A),e=this.y.redAdd(this.y)}else{var S=this.x.redSqr(),x=this.y.redSqr(),N=x.redSqr(),R=this.x.redAdd(x).redSqr().redISub(S).redISub(N);R=R.redIAdd(R);var O=S.redAdd(S).redIAdd(S),z=O.redSqr(),L=N.redIAdd(N);L=L.redIAdd(L),L=L.redIAdd(L),r=z.redISub(R).redISub(R),t=O.redMul(R.redISub(r)).redISub(L),e=this.y.redMul(this.z),e=e.redIAdd(e)}return this.curve.jpoint(r,t,e)},gr.prototype._threeDbl=function(){var r,t,e;if(this.zOne){var i=this.x.redSqr(),s=this.y.redSqr(),o=s.redSqr(),u=this.x.redAdd(s).redSqr().redISub(i).redISub(o);u=u.redIAdd(u);var g=i.redAdd(i).redIAdd(i).redIAdd(this.curve.a),w=g.redSqr().redISub(u).redISub(u);r=w;var A=o.redIAdd(o);A=A.redIAdd(A),A=A.redIAdd(A),t=g.redMul(u.redISub(w)).redISub(A),e=this.y.redAdd(this.y)}else{var S=this.z.redSqr(),x=this.y.redSqr(),N=this.x.redMul(x),R=this.x.redSub(S).redMul(this.x.redAdd(S));R=R.redAdd(R).redIAdd(R);var O=N.redIAdd(N);O=O.redIAdd(O);var z=O.redAdd(O);r=R.redSqr().redISub(z),e=this.y.redAdd(this.z).redSqr().redISub(x).redISub(S);var L=x.redSqr();L=L.redIAdd(L),L=L.redIAdd(L),L=L.redIAdd(L),t=R.redMul(O.redISub(r)).redISub(L)}return this.curve.jpoint(r,t,e)},gr.prototype._dbl=function(){var r=this.curve.a,t=this.x,e=this.y,i=this.z,s=i.redSqr().redSqr(),o=t.redSqr(),u=e.redSqr(),g=o.redAdd(o).redIAdd(o).redIAdd(r.redMul(s)),w=t.redAdd(t);w=w.redIAdd(w);var A=w.redMul(u),S=g.redSqr().redISub(A.redAdd(A)),x=A.redISub(S),N=u.redSqr();N=N.redIAdd(N),N=N.redIAdd(N),N=N.redIAdd(N);var R=g.redMul(x).redISub(N),O=e.redAdd(e).redMul(i);return this.curve.jpoint(S,R,O)},gr.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var r=this.x.redSqr(),t=this.y.redSqr(),e=this.z.redSqr(),i=t.redSqr(),s=r.redAdd(r).redIAdd(r),o=s.redSqr(),u=this.x.redAdd(t).redSqr().redISub(r).redISub(i);u=u.redIAdd(u),u=u.redAdd(u).redIAdd(u),u=u.redISub(o);var g=u.redSqr(),w=i.redIAdd(i);w=w.redIAdd(w),w=w.redIAdd(w),w=w.redIAdd(w);var A=s.redIAdd(u).redSqr().redISub(o).redISub(g).redISub(w),S=t.redMul(A);S=S.redIAdd(S),S=S.redIAdd(S);var x=this.x.redMul(g).redISub(S);x=x.redIAdd(x),x=x.redIAdd(x);var N=this.y.redMul(A.redMul(w.redISub(A)).redISub(u.redMul(g)));N=N.redIAdd(N),N=N.redIAdd(N),N=N.redIAdd(N);var R=this.z.redAdd(u).redSqr().redISub(e).redISub(g);return this.curve.jpoint(x,N,R)},gr.prototype.mul=function(r,t){return r=new ie(r,t),this.curve._wnafMul(this,r)},gr.prototype.eq=function(r){if(r.type==="affine")return this.eq(r.toJ());if(this===r)return!0;var t=this.z.redSqr(),e=r.z.redSqr();if(this.x.redMul(e).redISub(r.x.redMul(t)).cmpn(0)!==0)return!1;var i=t.redMul(this.z),s=e.redMul(r.z);return this.y.redMul(s).redISub(r.y.redMul(i)).cmpn(0)===0},gr.prototype.eqXToP=function(r){var t=this.z.redSqr(),e=r.toRed(this.curve.red).redMul(t);if(this.x.cmp(e)===0)return!0;for(var i=r.clone(),s=this.curve.redN.redMul(t);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(e.redIAdd(s),this.x.cmp(e)===0)return!0}},gr.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},gr.prototype.isInfinity=function(){return this.z.cmpn(0)===0};var Gh=jo(function(r,t){var e=t;e.base=Gs,e.short=B_,e.mont=null,e.edwards=null}),Yh=jo(function(r,t){var e=t,i=bi.assert;function s(g){g.type==="short"?this.curve=new Gh.short(g):g.type==="edwards"?this.curve=new Gh.edwards(g):this.curve=new Gh.mont(g),this.g=this.curve.g,this.n=this.curve.n,this.hash=g.hash,i(this.g.validate(),"Invalid curve"),i(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}e.PresetCurve=s;function o(g,w){Object.defineProperty(e,g,{configurable:!0,enumerable:!0,get:function(){var A=new s(w);return Object.defineProperty(e,g,{configurable:!0,enumerable:!0,value:A}),A}})}o("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:bn.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),o("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:bn.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),o("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:bn.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),o("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:bn.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),o("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:bn.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),o("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:bn.sha256,gRed:!1,g:["9"]}),o("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:bn.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});var u;try{u=null.crash()}catch{u=void 0}o("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:bn.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",u]})});function Es(r){if(!(this instanceof Es))return new Es(r);this.hash=r.hash,this.predResist=!!r.predResist,this.outLen=this.hash.outSize,this.minEntropy=r.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var t=on.toArray(r.entropy,r.entropyEnc||"hex"),e=on.toArray(r.nonce,r.nonceEnc||"hex"),i=on.toArray(r.pers,r.persEnc||"hex");y0(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(t,e,i)}var Wp=Es;Es.prototype._init=function(r,t,e){var i=r.concat(t).concat(e);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var s=0;s<this.V.length;s++)this.K[s]=0,this.V[s]=1;this._update(i),this._reseed=1,this.reseedInterval=281474976710656},Es.prototype._hmac=function(){return new bn.hmac(this.hash,this.K)},Es.prototype._update=function(r){var t=this._hmac().update(this.V).update([0]);r&&(t=t.update(r)),this.K=t.digest(),this.V=this._hmac().update(this.V).digest(),r&&(this.K=this._hmac().update(this.V).update([1]).update(r).digest(),this.V=this._hmac().update(this.V).digest())},Es.prototype.reseed=function(r,t,e,i){typeof t!="string"&&(i=e,e=t,t=null),r=on.toArray(r,t),e=on.toArray(e,i),y0(r.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(r.concat(e||[])),this._reseed=1},Es.prototype.generate=function(r,t,e,i){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");typeof t!="string"&&(i=e,e=t,t=null),e&&(e=on.toArray(e,i||"hex"),this._update(e));for(var s=[];s.length<r;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,r);return this._update(e),this._reseed++,on.encode(o,t)};var pu=bi.assert;function Sr(r,t){this.ec=r,this.priv=null,this.pub=null,t.priv&&this._importPrivate(t.priv,t.privEnc),t.pub&&this._importPublic(t.pub,t.pubEnc)}var gu=Sr;Sr.fromPublic=function(r,t,e){return t instanceof Sr?t:new Sr(r,{pub:t,pubEnc:e})},Sr.fromPrivate=function(r,t,e){return t instanceof Sr?t:new Sr(r,{priv:t,privEnc:e})},Sr.prototype.validate=function(){var r=this.getPublic();return r.isInfinity()?{result:!1,reason:"Invalid public key"}:r.validate()?r.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},Sr.prototype.getPublic=function(r,t){return typeof r=="string"&&(t=r,r=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),t?this.pub.encode(t,r):this.pub},Sr.prototype.getPrivate=function(r){return r==="hex"?this.priv.toString(16,2):this.priv},Sr.prototype._importPrivate=function(r,t){this.priv=new ie(r,t||16),this.priv=this.priv.umod(this.ec.curve.n)},Sr.prototype._importPublic=function(r,t){if(r.x||r.y){this.ec.curve.type==="mont"?pu(r.x,"Need x coordinate"):(this.ec.curve.type==="short"||this.ec.curve.type==="edwards")&&pu(r.x&&r.y,"Need both x and y coordinate"),this.pub=this.ec.curve.point(r.x,r.y);return}this.pub=this.ec.curve.decodePoint(r,t)},Sr.prototype.derive=function(r){return r.validate()||pu(r.validate(),"public point not validated"),r.mul(this.priv).getX()},Sr.prototype.sign=function(r,t,e){return this.ec.sign(r,this,t,e)},Sr.prototype.verify=function(r,t){return this.ec.verify(r,t,this)},Sr.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"};var T_=bi.assert;function Pf(r,t){if(r instanceof Pf)return r;this._importDER(r,t)||(T_(r.r&&r.s,"Signature without r or s"),this.r=new ie(r.r,16),this.s=new ie(r.s,16),r.recoveryParam===void 0?this.recoveryParam=null:this.recoveryParam=r.recoveryParam)}var zh=Pf;function q_(){this.place=0}function mu(r,t){var e=r[t.place++];if(!(e&128))return e;var i=e&15;if(i===0||i>4)return!1;for(var s=0,o=0,u=t.place;o<i;o++,u++)s<<=8,s|=r[u],s>>>=0;return s<=127?!1:(t.place=u,s)}function Xp(r){for(var t=0,e=r.length-1;!r[t]&&!(r[t+1]&128)&&t<e;)t++;return t===0?r:r.slice(t)}Pf.prototype._importDER=function(r,t){r=bi.toArray(r,t);var e=new q_;if(r[e.place++]!==48)return!1;var i=mu(r,e);if(i===!1||i+e.place!==r.length||r[e.place++]!==2)return!1;var s=mu(r,e);if(s===!1)return!1;var o=r.slice(e.place,s+e.place);if(e.place+=s,r[e.place++]!==2)return!1;var u=mu(r,e);if(u===!1||r.length!==u+e.place)return!1;var g=r.slice(e.place,u+e.place);if(o[0]===0)if(o[1]&128)o=o.slice(1);else return!1;if(g[0]===0)if(g[1]&128)g=g.slice(1);else return!1;return this.r=new ie(o),this.s=new ie(g),this.recoveryParam=null,!0};function vu(r,t){if(t<128){r.push(t);return}var e=1+(Math.log(t)/Math.LN2>>>3);for(r.push(e|128);--e;)r.push(t>>>(e<<3)&255);r.push(t)}Pf.prototype.toDER=function(r){var t=this.r.toArray(),e=this.s.toArray();for(t[0]&128&&(t=[0].concat(t)),e[0]&128&&(e=[0].concat(e)),t=Xp(t),e=Xp(e);!e[0]&&!(e[1]&128);)e=e.slice(1);var i=[2];vu(i,t.length),i=i.concat(t),i.push(2),vu(i,e.length);var s=i.concat(e),o=[48];return vu(o,s.length),o=o.concat(s),bi.encode(o,r)};var D_=function(){throw new Error("unsupported")},Lm=bi.assert;function Di(r){if(!(this instanceof Di))return new Di(r);typeof r=="string"&&(Lm(Object.prototype.hasOwnProperty.call(Yh,r),"Unknown curve "+r),r=Yh[r]),r instanceof Yh.PresetCurve&&(r={curve:r}),this.curve=r.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=r.curve.g,this.g.precompute(r.curve.n.bitLength()+1),this.hash=r.hash||r.curve.hash}var k_=Di;Di.prototype.keyPair=function(r){return new gu(this,r)},Di.prototype.keyFromPrivate=function(r,t){return gu.fromPrivate(this,r,t)},Di.prototype.keyFromPublic=function(r,t){return gu.fromPublic(this,r,t)},Di.prototype.genKeyPair=function(r){r||(r={});for(var t=new Wp({hash:this.hash,pers:r.pers,persEnc:r.persEnc||"utf8",entropy:r.entropy||D_(this.hash.hmacStrength),entropyEnc:r.entropy&&r.entropyEnc||"utf8",nonce:this.n.toArray()}),e=this.n.byteLength(),i=this.n.sub(new ie(2));;){var s=new ie(t.generate(e));if(!(s.cmp(i)>0))return s.iaddn(1),this.keyFromPrivate(s)}},Di.prototype._truncateToN=function(r,t){var e=r.byteLength()*8-this.n.bitLength();return e>0&&(r=r.ushrn(e)),!t&&r.cmp(this.n)>=0?r.sub(this.n):r},Di.prototype.sign=function(r,t,e,i){typeof e=="object"&&(i=e,e=null),i||(i={}),t=this.keyFromPrivate(t,e),r=this._truncateToN(new ie(r,16));for(var s=this.n.byteLength(),o=t.getPrivate().toArray("be",s),u=r.toArray("be",s),g=new Wp({hash:this.hash,entropy:o,nonce:u,pers:i.pers,persEnc:i.persEnc||"utf8"}),w=this.n.sub(new ie(1)),A=0;;A++){var S=i.k?i.k(A):new ie(g.generate(this.n.byteLength()));if(S=this._truncateToN(S,!0),!(S.cmpn(1)<=0||S.cmp(w)>=0)){var x=this.g.mul(S);if(!x.isInfinity()){var N=x.getX(),R=N.umod(this.n);if(R.cmpn(0)!==0){var O=S.invm(this.n).mul(R.mul(t.getPrivate()).iadd(r));if(O=O.umod(this.n),O.cmpn(0)!==0){var z=(x.getY().isOdd()?1:0)|(N.cmp(R)!==0?2:0);return i.canonical&&O.cmp(this.nh)>0&&(O=this.n.sub(O),z^=1),new zh({r:R,s:O,recoveryParam:z})}}}}}},Di.prototype.verify=function(r,t,e,i){r=this._truncateToN(new ie(r,16)),e=this.keyFromPublic(e,i),t=new zh(t,"hex");var s=t.r,o=t.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0||o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var u=o.invm(this.n),g=u.mul(r).umod(this.n),w=u.mul(s).umod(this.n),A;return this.curve._maxwellTrick?(A=this.g.jmulAdd(g,e.getPublic(),w),A.isInfinity()?!1:A.eqXToP(s)):(A=this.g.mulAdd(g,e.getPublic(),w),A.isInfinity()?!1:A.getX().umod(this.n).cmp(s)===0)},Di.prototype.recoverPubKey=function(r,t,e,i){Lm((3&e)===e,"The recovery param is more than two bits"),t=new zh(t,i);var s=this.n,o=new ie(r),u=t.r,g=t.s,w=e&1,A=e>>1;if(u.cmp(this.curve.p.umod(this.curve.n))>=0&&A)throw new Error("Unable to find sencond key candinate");A?u=this.curve.pointFromX(u.add(this.curve.n),w):u=this.curve.pointFromX(u,w);var S=t.r.invm(s),x=s.sub(o).mul(S).umod(s),N=g.mul(S).umod(s);return this.g.mulAdd(x,u,N)},Di.prototype.getKeyRecoveryParam=function(r,t,e,i){if(t=new zh(t,i),t.recoveryParam!==null)return t.recoveryParam;for(var s=0;s<4;s++){var o;try{o=this.recoverPubKey(r,t,s)}catch{continue}if(o.eq(e))return s}throw new Error("Unable to find valid recovery factor")};var U_=jo(function(r,t){var e=t;e.version="6.5.4",e.utils=bi,e.rand=function(){throw new Error("unsupported")},e.curve=Gh,e.curves=Yh,e.ec=k_,e.eddsa=null}),z_=U_.ec;const F_="signing-key/5.7.0",Ku=new br(F_);let bu=null;function ws(){return bu||(bu=new z_("secp256k1")),bu}class L_{constructor(t){fa(this,"curve","secp256k1"),fa(this,"privateKey",Gr(t)),E9(this.privateKey)!==32&&Ku.throwArgumentError("invalid private key","privateKey","[[ REDACTED ]]");const e=ws().keyFromPrivate(Ge(this.privateKey));fa(this,"publicKey","0x"+e.getPublic(!1,"hex")),fa(this,"compressedPublicKey","0x"+e.getPublic(!0,"hex")),fa(this,"_isSigningKey",!0)}_addPoint(t){const e=ws().keyFromPublic(Ge(this.publicKey)),i=ws().keyFromPublic(Ge(t));return"0x"+e.pub.add(i.pub).encodeCompressed("hex")}signDigest(t){const e=ws().keyFromPrivate(Ge(this.privateKey)),i=Ge(t);i.length!==32&&Ku.throwArgumentError("bad digest length","digest",t);const s=e.sign(i,{canonical:!0});return dm({recoveryParam:s.recoveryParam,r:Pn("0x"+s.r.toString(16),32),s:Pn("0x"+s.s.toString(16),32)})}computeSharedSecret(t){const e=ws().keyFromPrivate(Ge(this.privateKey)),i=ws().keyFromPublic(Ge($m(t)));return Pn("0x"+e.derive(i.getPublic()).toString(16),32)}static isSigningKey(t){return!!(t&&t._isSigningKey)}}function $_(r,t){const e=dm(t),i={r:Ge(e.r),s:Ge(e.s)};return"0x"+ws().recoverPubKey(Ge(r),i,e.recoveryParam).encode("hex",!1)}function $m(r,t){const e=Ge(r);return e.length===32?new L_(e).publicKey:e.length===33?"0x"+ws().keyFromPublic(e).getPublic(!1,"hex"):e.length===65?Gr(e):Ku.throwArgumentError("invalid public or private key","key","[REDACTED]")}var Zp;(function(r){r[r.legacy=0]="legacy",r[r.eip2930=1]="eip2930",r[r.eip1559=2]="eip1559"})(Zp||(Zp={}));function j_(r){const t=$m(r);return tA(Up(m0(Up(t,1)),12))}function H_(r,t){return j_($_(Ge(r),t))}const K_="https://rpc.walletconnect.com/v1";async function Q_(r,t,e,i,s,o){switch(e.t){case"eip191":return J_(r,t,e.s);case"eip1271":return await V_(r,t,e.s,i,s,o);default:throw new Error(`verifySignature failed: Attempted to verify CacaoSignature with unknown type: ${e.t}`)}}function J_(r,t,e){return H_(Am(t),e).toLowerCase()===r.toLowerCase()}async function V_(r,t,e,i,s,o){try{const u="0x1626ba7e",g="0000000000000000000000000000000000000000000000000000000000000040",w="0000000000000000000000000000000000000000000000000000000000000041",A=e.substring(2),S=Am(t).substring(2),x=u+S+g+w+A,N=await fetch(`${o||K_}/?chainId=${i}&projectId=${s}`,{method:"POST",body:JSON.stringify({id:G_(),jsonrpc:"2.0",method:"eth_call",params:[{to:r,data:x},"latest"]})}),{result:R}=await N.json();return R?R.slice(0,u.length).toLowerCase()===u.toLowerCase():!1}catch(u){return console.error("isValidEip1271Signature: ",u),!1}}function G_(){return Date.now()+Math.floor(Math.random()*1e3)}var Y_=Object.defineProperty,W_=Object.defineProperties,X_=Object.getOwnPropertyDescriptors,t1=Object.getOwnPropertySymbols,Z_=Object.prototype.hasOwnProperty,tM=Object.prototype.propertyIsEnumerable,e1=(r,t,e)=>t in r?Y_(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,eM=(r,t)=>{for(var e in t||(t={}))Z_.call(t,e)&&e1(r,e,t[e]);if(t1)for(var e of t1(t))tM.call(t,e)&&e1(r,e,t[e]);return r},rM=(r,t)=>W_(r,X_(t));const iM="did:pkh:",A0=r=>r==null?void 0:r.split(":"),jm=r=>{const t=r&&A0(r);if(t)return r.includes(iM)?t[3]:t[1]},r1=r=>{const t=r&&A0(r);if(t)return t[2]+":"+t[3]},df=r=>{const t=r&&A0(r);if(t)return t.pop()};async function i1(r){const{cacao:t,projectId:e}=r,{s:i,p:s}=t,o=Hm(s,s.iss),u=df(s.iss);return await Q_(u,o,i,jm(s.iss),e)}const Hm=(r,t)=>{const e=`${r.domain} wants you to sign in with your Ethereum account:`,i=df(t);if(!r.aud&&!r.uri)throw new Error("Either `aud` or `uri` is required to construct the message");let s=r.statement||void 0;const o=`URI: ${r.aud||r.uri}`,u=`Version: ${r.version}`,g=`Chain ID: ${jm(t)}`,w=`Nonce: ${r.nonce}`,A=`Issued At: ${r.iat}`,S=r.exp?`Expiration Time: ${r.exp}`:void 0,x=r.nbf?`Not Before: ${r.nbf}`:void 0,N=r.requestId?`Request ID: ${r.requestId}`:void 0,R=r.resources?`Resources:${r.resources.map(z=>`
- ${z}`).join("")}`:void 0,O=Wh(r.resources);if(O){const z=Ca(O);s=dM(s,z)}return[e,i,"",s,"",o,u,g,w,A,S,x,N,R].filter(z=>z!=null).join(`
`)};function nM(r){return Buffer.from(JSON.stringify(r)).toString("base64")}function sM(r){return JSON.parse(Buffer.from(r,"base64").toString("utf-8"))}function Ks(r){if(!r)throw new Error("No recap provided, value is undefined");if(!r.att)throw new Error("No `att` property found");const t=Object.keys(r.att);if(!(t!=null&&t.length))throw new Error("No resources found in `att` property");t.forEach(e=>{const i=r.att[e];if(Array.isArray(i))throw new Error(`Resource must be an object: ${e}`);if(typeof i!="object")throw new Error(`Resource must be an object: ${e}`);if(!Object.keys(i).length)throw new Error(`Resource object is empty: ${e}`);Object.keys(i).forEach(s=>{const o=i[s];if(!Array.isArray(o))throw new Error(`Ability limits ${s} must be an array of objects, found: ${o}`);if(!o.length)throw new Error(`Value of ${s} is empty array, must be an array with objects`);o.forEach(u=>{if(typeof u!="object")throw new Error(`Ability limits (${s}) must be an array of objects, found: ${u}`)})})})}function oM(r,t,e,i={}){return e==null||e.sort((s,o)=>s.localeCompare(o)),{att:{[r]:aM(t,e,i)}}}function aM(r,t,e={}){t=t==null?void 0:t.sort((s,o)=>s.localeCompare(o));const i=t.map(s=>({[`${r}/${s}`]:[e]}));return Object.assign({},...i)}function Km(r){return Ks(r),`urn:recap:${nM(r).replace(/=/g,"")}`}function Ca(r){const t=sM(r.replace("urn:recap:",""));return Ks(t),t}function hM(r,t,e){const i=oM(r,t,e);return Km(i)}function fM(r){return r&&r.includes("urn:recap:")}function cM(r,t){const e=Ca(r),i=Ca(t),s=uM(e,i);return Km(s)}function uM(r,t){Ks(r),Ks(t);const e=Object.keys(r.att).concat(Object.keys(t.att)).sort((s,o)=>s.localeCompare(o)),i={att:{}};return e.forEach(s=>{var o,u;Object.keys(((o=r.att)==null?void 0:o[s])||{}).concat(Object.keys(((u=t.att)==null?void 0:u[s])||{})).sort((g,w)=>g.localeCompare(w)).forEach(g=>{var w,A;i.att[s]=rM(eM({},i.att[s]),{[g]:((w=r.att[s])==null?void 0:w[g])||((A=t.att[s])==null?void 0:A[g])})})}),i}function dM(r="",t){Ks(t);const e="I further authorize the stated URI to perform the following actions on my behalf: ";if(r.includes(e))return r;const i=[];let s=0;Object.keys(t.att).forEach(g=>{const w=Object.keys(t.att[g]).map(x=>({ability:x.split("/")[0],action:x.split("/")[1]}));w.sort((x,N)=>x.action.localeCompare(N.action));const A={};w.forEach(x=>{A[x.ability]||(A[x.ability]=[]),A[x.ability].push(x.action)});const S=Object.keys(A).map(x=>(s++,`(${s}) '${x}': '${A[x].join("', '")}' for '${g}'.`));i.push(S.join(", ").replace(".,","."))});const o=i.join(" "),u=`${e}${o}`;return`${r?r+" ":""}${u}`}function n1(r){var t;const e=Ca(r);Ks(e);const i=(t=e.att)==null?void 0:t.eip155;return i?Object.keys(i).map(s=>s.split("/")[1]):[]}function s1(r){const t=Ca(r);Ks(t);const e=[];return Object.values(t.att).forEach(i=>{Object.values(i).forEach(s=>{var o;(o=s==null?void 0:s[0])!=null&&o.chains&&e.push(s[0].chains)})}),[...new Set(e.flat())]}function Wh(r){if(!r)return;const t=r==null?void 0:r[r.length-1];return fM(t)?t:void 0}var lM=Object.defineProperty,pM=Object.defineProperties,gM=Object.getOwnPropertyDescriptors,o1=Object.getOwnPropertySymbols,mM=Object.prototype.hasOwnProperty,vM=Object.prototype.propertyIsEnumerable,a1=(r,t,e)=>t in r?lM(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,bM=(r,t)=>{for(var e in t||(t={}))mM.call(t,e)&&a1(r,e,t[e]);if(o1)for(var e of o1(t))vM.call(t,e)&&a1(r,e,t[e]);return r},yM=(r,t)=>pM(r,gM(t));const Qm="base10",qr="base16",Qu="base64pad",_0="utf8",Jm=0,ss=1,wM=0,h1=1,Ju=12,M0=32;function AM(){const r=pg.generateKeyPair();return{privateKey:zi(r.secretKey,qr),publicKey:zi(r.publicKey,qr)}}function Vu(){const r=gg.randomBytes(M0);return zi(r,qr)}function _M(r,t){const e=pg.sharedKey(nn(r,qr),nn(t,qr),!0),i=new I4(mf.SHA256,e).expand(M0);return zi(i,qr)}function Xh(r){const t=mf.hash(nn(r,qr));return zi(t,qr)}function Zn(r){const t=mf.hash(nn(r,_0));return zi(t,qr)}function MM(r){return nn(`${r}`,Qm)}function $a(r){return Number(zi(r,Qm))}function EM(r){const t=MM(typeof r.type<"u"?r.type:Jm);if($a(t)===ss&&typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");const e=typeof r.senderPublicKey<"u"?nn(r.senderPublicKey,qr):void 0,i=typeof r.iv<"u"?nn(r.iv,qr):gg.randomBytes(Ju),s=new mg.ChaCha20Poly1305(nn(r.symKey,qr)).seal(i,nn(r.message,_0));return SM({type:t,sealed:s,iv:i,senderPublicKey:e})}function IM(r){const t=new mg.ChaCha20Poly1305(nn(r.symKey,qr)),{sealed:e,iv:i}=lf(r.encoded),s=t.open(i,e);if(s===null)throw new Error("Failed to decrypt");return zi(s,_0)}function SM(r){if($a(r.type)===ss){if(typeof r.senderPublicKey>"u")throw new Error("Missing sender public key for type 1 envelope");return zi(tp([r.type,r.senderPublicKey,r.iv,r.sealed]),Qu)}return zi(tp([r.type,r.iv,r.sealed]),Qu)}function lf(r){const t=nn(r,Qu),e=t.slice(wM,h1),i=h1;if($a(e)===ss){const g=i+M0,w=g+Ju,A=t.slice(i,g),S=t.slice(g,w),x=t.slice(w);return{type:e,sealed:x,iv:S,senderPublicKey:A}}const s=i+Ju,o=t.slice(i,s),u=t.slice(s);return{type:e,sealed:u,iv:o}}function xM(r,t){const e=lf(r);return Vm({type:$a(e.type),senderPublicKey:typeof e.senderPublicKey<"u"?zi(e.senderPublicKey,qr):void 0,receiverPublicKey:t==null?void 0:t.receiverPublicKey})}function Vm(r){const t=(r==null?void 0:r.type)||Jm;if(t===ss){if(typeof(r==null?void 0:r.senderPublicKey)>"u")throw new Error("missing sender public key");if(typeof(r==null?void 0:r.receiverPublicKey)>"u")throw new Error("missing receiver public key")}return{type:t,senderPublicKey:r==null?void 0:r.senderPublicKey,receiverPublicKey:r==null?void 0:r.receiverPublicKey}}function f1(r){return r.type===ss&&typeof r.senderPublicKey=="string"&&typeof r.receiverPublicKey=="string"}function PM(r){return new bg.ec("p256").keyFromPublic({x:Buffer.from(r.x,"base64").toString("hex"),y:Buffer.from(r.y,"base64").toString("hex")},"hex")}function NM(r){let t=r.replace(/-/g,"+").replace(/_/g,"/");const e=t.length%4;return e>0&&(t+="=".repeat(4-e)),t}function RM(r){return Buffer.from(NM(r),"base64")}function CM(r,t){const[e,i,s]=r.split("."),o=RM(s);if(o.length!==64)throw new Error("Invalid signature length");const u=o.slice(0,32).toString("hex"),g=o.slice(32,64).toString("hex"),w=`${e}.${i}`,A=new mf.SHA256().update(Buffer.from(w)).digest(),S=PM(t),x=Buffer.from(A).toString("hex"),N=S.verify(x,{r:u,s:g});if(!N)throw new Error("Invalid signature");const R=Ru(r);return yM(bM({},R.payload),{isVerified:N})}const OM="irn";function Gu(r){return(r==null?void 0:r.relay)||{protocol:OM}}function ya(r){const t=S4[r];if(typeof t>"u")throw new Error(`Relay Protocol not supported: ${r}`);return t}var BM=Object.defineProperty,TM=Object.defineProperties,qM=Object.getOwnPropertyDescriptors,c1=Object.getOwnPropertySymbols,DM=Object.prototype.hasOwnProperty,kM=Object.prototype.propertyIsEnumerable,u1=(r,t,e)=>t in r?BM(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,d1=(r,t)=>{for(var e in t||(t={}))DM.call(t,e)&&u1(r,e,t[e]);if(c1)for(var e of c1(t))kM.call(t,e)&&u1(r,e,t[e]);return r},UM=(r,t)=>TM(r,qM(t));function zM(r,t="-"){const e={},i="relay"+t;return Object.keys(r).forEach(s=>{if(s.startsWith(i)){const o=s.replace(i,""),u=r[s];e[o]=u}}),e}function l1(r){r=r.includes("wc://")?r.replace("wc://",""):r,r=r.includes("wc:")?r.replace("wc:",""):r;const t=r.indexOf(":"),e=r.indexOf("?")!==-1?r.indexOf("?"):void 0,i=r.substring(0,t),s=r.substring(t+1,e).split("@"),o=typeof e<"u"?r.substring(e):"",u=tf.parse(o),g=typeof u.methods=="string"?u.methods.split(","):void 0;return{protocol:i,topic:FM(s[0]),version:parseInt(s[1],10),symKey:u.symKey,relay:zM(u),methods:g,expiryTimestamp:u.expiryTimestamp?parseInt(u.expiryTimestamp,10):void 0}}function FM(r){return r.startsWith("//")?r.substring(2):r}function LM(r,t="-"){const e="relay",i={};return Object.keys(r).forEach(s=>{const o=e+t+s;r[s]&&(i[o]=r[s])}),i}function $M(r){return`${r.protocol}:${r.topic}@${r.version}?`+tf.stringify(d1(UM(d1({symKey:r.symKey},LM(r.relay)),{expiryTimestamp:r.expiryTimestamp}),r.methods?{methods:r.methods.join(",")}:{}))}function Ho(r){const t=[];return r.forEach(e=>{const[i,s]=e.split(":");t.push(`${i}:${s}`)}),t}function jM(r){const t=[];return Object.values(r).forEach(e=>{t.push(...Ho(e.accounts))}),t}function HM(r,t){const e=[];return Object.values(r).forEach(i=>{Ho(i.accounts).includes(t)&&e.push(...i.methods)}),e}function KM(r,t){const e=[];return Object.values(r).forEach(i=>{Ho(i.accounts).includes(t)&&e.push(...i.events)}),e}function E0(r){return r.includes(":")}function wa(r){return E0(r)?r.split(":")[0]:r}function QM(r){const t={};return r==null||r.forEach(e=>{const[i,s]=e.split(":");t[i]||(t[i]={accounts:[],chains:[],events:[]}),t[i].accounts.push(e),t[i].chains.push(`${i}:${s}`)}),t}function p1(r,t){t=t.map(i=>i.replace("did:pkh:",""));const e=QM(t);for(const[i,s]of Object.entries(e))s.methods?s.methods=Jh(s.methods,r):s.methods=r,s.events=["chainChanged","accountsChanged"];return e}const JM={INVALID_METHOD:{message:"Invalid method.",code:1001},INVALID_EVENT:{message:"Invalid event.",code:1002},INVALID_UPDATE_REQUEST:{message:"Invalid update request.",code:1003},INVALID_EXTEND_REQUEST:{message:"Invalid extend request.",code:1004},INVALID_SESSION_SETTLE_REQUEST:{message:"Invalid session settle request.",code:1005},UNAUTHORIZED_METHOD:{message:"Unauthorized method.",code:3001},UNAUTHORIZED_EVENT:{message:"Unauthorized event.",code:3002},UNAUTHORIZED_UPDATE_REQUEST:{message:"Unauthorized update request.",code:3003},UNAUTHORIZED_EXTEND_REQUEST:{message:"Unauthorized extend request.",code:3004},USER_REJECTED:{message:"User rejected.",code:5e3},USER_REJECTED_CHAINS:{message:"User rejected chains.",code:5001},USER_REJECTED_METHODS:{message:"User rejected methods.",code:5002},USER_REJECTED_EVENTS:{message:"User rejected events.",code:5003},UNSUPPORTED_CHAINS:{message:"Unsupported chains.",code:5100},UNSUPPORTED_METHODS:{message:"Unsupported methods.",code:5101},UNSUPPORTED_EVENTS:{message:"Unsupported events.",code:5102},UNSUPPORTED_ACCOUNTS:{message:"Unsupported accounts.",code:5103},UNSUPPORTED_NAMESPACE_KEY:{message:"Unsupported namespace key.",code:5104},USER_DISCONNECTED:{message:"User disconnected.",code:6e3},SESSION_SETTLEMENT_FAILED:{message:"Session settlement failed.",code:7e3},WC_METHOD_UNSUPPORTED:{message:"Unsupported wc_ method.",code:10001}},VM={NOT_INITIALIZED:{message:"Not initialized.",code:1},NO_MATCHING_KEY:{message:"No matching key.",code:2},RESTORE_WILL_OVERRIDE:{message:"Restore will override.",code:3},RESUBSCRIBED:{message:"Resubscribed.",code:4},MISSING_OR_INVALID:{message:"Missing or invalid.",code:5},EXPIRED:{message:"Expired.",code:6},UNKNOWN_TYPE:{message:"Unknown type.",code:7},MISMATCHED_TOPIC:{message:"Mismatched topic.",code:8},NON_CONFORMING_NAMESPACES:{message:"Non conforming namespaces.",code:9}};function ut(r,t){const{message:e,code:i}=VM[r];return{message:t?`${e} ${t}`:e,code:i}}function Te(r,t){const{message:e,code:i}=JM[r];return{message:t?`${e} ${t}`:e,code:i}}function Qs(r,t){return!!Array.isArray(r)}function Oa(r){return Object.getPrototypeOf(r)===Object.prototype&&Object.keys(r).length}function Yr(r){return typeof r>"u"}function tr(r,t){return t&&Yr(r)?!0:typeof r=="string"&&!!r.trim().length}function I0(r,t){return typeof r=="number"&&!isNaN(r)}function GM(r,t){const{requiredNamespaces:e}=t,i=Object.keys(r.namespaces),s=Object.keys(e);let o=!0;return Ls(s,i)?(i.forEach(u=>{const{accounts:g,methods:w,events:A}=r.namespaces[u],S=Ho(g),x=e[u];(!Ls(nm(u,x),S)||!Ls(x.methods,w)||!Ls(x.events,A))&&(o=!1)}),o):!1}function pf(r){return tr(r,!1)&&r.includes(":")?r.split(":").length===2:!1}function YM(r){if(tr(r,!1)&&r.includes(":")){const t=r.split(":");if(t.length===3){const e=t[0]+":"+t[1];return!!t[2]&&pf(e)}}return!1}function WM(r){if(tr(r,!1))try{return typeof new URL(r)<"u"}catch{return!1}return!1}function XM(r){var t;return(t=r==null?void 0:r.proposer)==null?void 0:t.publicKey}function ZM(r){return r==null?void 0:r.topic}function tE(r,t){let e=null;return tr(r==null?void 0:r.publicKey,!1)||(e=ut("MISSING_OR_INVALID",`${t} controller public key should be a string`)),e}function g1(r){let t=!0;return Qs(r)?r.length&&(t=r.every(e=>tr(e,!1))):t=!1,t}function eE(r,t,e){let i=null;return Qs(t)&&t.length?t.forEach(s=>{i||pf(s)||(i=Te("UNSUPPORTED_CHAINS",`${e}, chain ${s} should be a string and conform to "namespace:chainId" format`))}):pf(r)||(i=Te("UNSUPPORTED_CHAINS",`${e}, chains must be defined as "namespace:chainId" e.g. "eip155:1": {...} in the namespace key OR as an array of CAIP-2 chainIds e.g. eip155: { chains: ["eip155:1", "eip155:5"] }`)),i}function rE(r,t,e){let i=null;return Object.entries(r).forEach(([s,o])=>{if(i)return;const u=eE(s,nm(s,o),`${t} ${e}`);u&&(i=u)}),i}function iE(r,t){let e=null;return Qs(r)?r.forEach(i=>{e||YM(i)||(e=Te("UNSUPPORTED_ACCOUNTS",`${t}, account ${i} should be a string and conform to "namespace:chainId:address" format`))}):e=Te("UNSUPPORTED_ACCOUNTS",`${t}, accounts should be an array of strings conforming to "namespace:chainId:address" format`),e}function nE(r,t){let e=null;return Object.values(r).forEach(i=>{if(e)return;const s=iE(i==null?void 0:i.accounts,`${t} namespace`);s&&(e=s)}),e}function sE(r,t){let e=null;return g1(r==null?void 0:r.methods)?g1(r==null?void 0:r.events)||(e=Te("UNSUPPORTED_EVENTS",`${t}, events should be an array of strings or empty array for no events`)):e=Te("UNSUPPORTED_METHODS",`${t}, methods should be an array of strings or empty array for no methods`),e}function Gm(r,t){let e=null;return Object.values(r).forEach(i=>{if(e)return;const s=sE(i,`${t}, namespace`);s&&(e=s)}),e}function oE(r,t,e){let i=null;if(r&&Oa(r)){const s=Gm(r,t);s&&(i=s);const o=rE(r,t,e);o&&(i=o)}else i=ut("MISSING_OR_INVALID",`${t}, ${e} should be an object with data`);return i}function yu(r,t){let e=null;if(r&&Oa(r)){const i=Gm(r,t);i&&(e=i);const s=nE(r,t);s&&(e=s)}else e=ut("MISSING_OR_INVALID",`${t}, namespaces should be an object with data`);return e}function Ym(r){return tr(r.protocol,!0)}function aE(r,t){let e=!1;return r?r&&Qs(r)&&r.length&&r.forEach(i=>{e=Ym(i)}):e=!0,e}function hE(r){return typeof r=="number"}function Vr(r){return typeof r<"u"&&typeof r!==null}function fE(r){return!(!r||typeof r!="object"||!r.code||!I0(r.code)||!r.message||!tr(r.message,!1))}function cE(r){return!(Yr(r)||!tr(r.method,!1))}function uE(r){return!(Yr(r)||Yr(r.result)&&Yr(r.error)||!I0(r.id)||!tr(r.jsonrpc,!1))}function dE(r){return!(Yr(r)||!tr(r.name,!1))}function m1(r,t){return!(!pf(t)||!jM(r).includes(t))}function lE(r,t,e){return tr(e,!1)?HM(r,t).includes(e):!1}function pE(r,t,e){return tr(e,!1)?KM(r,t).includes(e):!1}function v1(r,t,e){let i=null;const s=gE(r),o=mE(t),u=Object.keys(s),g=Object.keys(o),w=b1(Object.keys(r)),A=b1(Object.keys(t)),S=w.filter(x=>!A.includes(x));return S.length&&(i=ut("NON_CONFORMING_NAMESPACES",`${e} namespaces keys don't satisfy requiredNamespaces.
      Required: ${S.toString()}
      Received: ${Object.keys(t).toString()}`)),Ls(u,g)||(i=ut("NON_CONFORMING_NAMESPACES",`${e} namespaces chains don't satisfy required namespaces.
      Required: ${u.toString()}
      Approved: ${g.toString()}`)),Object.keys(t).forEach(x=>{if(!x.includes(":")||i)return;const N=Ho(t[x].accounts);N.includes(x)||(i=ut("NON_CONFORMING_NAMESPACES",`${e} namespaces accounts don't satisfy namespace accounts for ${x}
        Required: ${x}
        Approved: ${N.toString()}`))}),u.forEach(x=>{i||(Ls(s[x].methods,o[x].methods)?Ls(s[x].events,o[x].events)||(i=ut("NON_CONFORMING_NAMESPACES",`${e} namespaces events don't satisfy namespace events for ${x}`)):i=ut("NON_CONFORMING_NAMESPACES",`${e} namespaces methods don't satisfy namespace methods for ${x}`))}),i}function gE(r){const t={};return Object.keys(r).forEach(e=>{var i;e.includes(":")?t[e]=r[e]:(i=r[e].chains)==null||i.forEach(s=>{t[s]={methods:r[e].methods,events:r[e].events}})}),t}function b1(r){return[...new Set(r.map(t=>t.includes(":")?t.split(":")[0]:t))]}function mE(r){const t={};return Object.keys(r).forEach(e=>{if(e.includes(":"))t[e]=r[e];else{const i=Ho(r[e].accounts);i==null||i.forEach(s=>{t[s]={accounts:r[e].accounts.filter(o=>o.includes(`${s}:`)),methods:r[e].methods,events:r[e].events}})}}),t}function vE(r,t){return I0(r)&&r<=t.max&&r>=t.min}function y1(){const r=Fa();return new Promise(t=>{switch(r){case gi.browser:t(bE());break;case gi.reactNative:t(yE());break;case gi.node:t(wE());break;default:t(!0)}})}function bE(){return za()&&(navigator==null?void 0:navigator.onLine)}async function yE(){if(Ua()&&typeof global<"u"&&global!=null&&global.NetInfo){const r=await(global==null?void 0:global.NetInfo.fetch());return r==null?void 0:r.isConnected}return!0}function wE(){return!0}function AE(r){switch(Fa()){case gi.browser:_E(r);break;case gi.reactNative:ME(r);break}}function _E(r){!Ua()&&za()&&(window.addEventListener("online",()=>r(!0)),window.addEventListener("offline",()=>r(!1)))}function ME(r){Ua()&&typeof global<"u"&&global!=null&&global.NetInfo&&(global==null||global.NetInfo.addEventListener(t=>r(t==null?void 0:t.isConnected)))}const wu={};class da{static get(t){return wu[t]}static set(t,e){wu[t]=e}static delete(t){delete wu[t]}}var EE={};function IE(r,t){if(r.length>=255)throw new TypeError("Alphabet too long");for(var e=new Uint8Array(256),i=0;i<e.length;i++)e[i]=255;for(var s=0;s<r.length;s++){var o=r.charAt(s),u=o.charCodeAt(0);if(e[u]!==255)throw new TypeError(o+" is ambiguous");e[u]=s}var g=r.length,w=r.charAt(0),A=Math.log(g)/Math.log(256),S=Math.log(256)/Math.log(g);function x(O){if(O instanceof Uint8Array||(ArrayBuffer.isView(O)?O=new Uint8Array(O.buffer,O.byteOffset,O.byteLength):Array.isArray(O)&&(O=Uint8Array.from(O))),!(O instanceof Uint8Array))throw new TypeError("Expected Uint8Array");if(O.length===0)return"";for(var z=0,L=0,H=0,rt=O.length;H!==rt&&O[H]===0;)H++,z++;for(var ht=(rt-H)*S+1>>>0,Z=new Uint8Array(ht);H!==rt;){for(var et=O[H],at=0,ft=ht-1;(et!==0||at<L)&&ft!==-1;ft--,at++)et+=256*Z[ft]>>>0,Z[ft]=et%g>>>0,et=et/g>>>0;if(et!==0)throw new Error("Non-zero carry");L=at,H++}for(var ct=ht-L;ct!==ht&&Z[ct]===0;)ct++;for(var mt=w.repeat(z);ct<ht;++ct)mt+=r.charAt(Z[ct]);return mt}function N(O){if(typeof O!="string")throw new TypeError("Expected String");if(O.length===0)return new Uint8Array;var z=0;if(O[z]!==" "){for(var L=0,H=0;O[z]===w;)L++,z++;for(var rt=(O.length-z)*A+1>>>0,ht=new Uint8Array(rt);O[z];){var Z=e[O.charCodeAt(z)];if(Z===255)return;for(var et=0,at=rt-1;(Z!==0||et<H)&&at!==-1;at--,et++)Z+=g*ht[at]>>>0,ht[at]=Z%256>>>0,Z=Z/256>>>0;if(Z!==0)throw new Error("Non-zero carry");H=et,z++}if(O[z]!==" "){for(var ft=rt-H;ft!==rt&&ht[ft]===0;)ft++;for(var ct=new Uint8Array(L+(rt-ft)),mt=L;ft!==rt;)ct[mt++]=ht[ft++];return ct}}}function R(O){var z=N(O);if(z)return z;throw new Error(`Non-${t} character`)}return{encode:x,decodeUnsafe:N,decode:R}}var SE=IE,xE=SE;const Wm=r=>{if(r instanceof Uint8Array&&r.constructor.name==="Uint8Array")return r;if(r instanceof ArrayBuffer)return new Uint8Array(r);if(ArrayBuffer.isView(r))return new Uint8Array(r.buffer,r.byteOffset,r.byteLength);throw new Error("Unknown type, must be binary type")},PE=r=>new TextEncoder().encode(r),NE=r=>new TextDecoder().decode(r);class RE{constructor(t,e,i){this.name=t,this.prefix=e,this.baseEncode=i}encode(t){if(t instanceof Uint8Array)return`${this.prefix}${this.baseEncode(t)}`;throw Error("Unknown type, must be binary type")}}class CE{constructor(t,e,i){if(this.name=t,this.prefix=e,e.codePointAt(0)===void 0)throw new Error("Invalid prefix character");this.prefixCodePoint=e.codePointAt(0),this.baseDecode=i}decode(t){if(typeof t=="string"){if(t.codePointAt(0)!==this.prefixCodePoint)throw Error(`Unable to decode multibase string ${JSON.stringify(t)}, ${this.name} decoder only supports inputs prefixed with ${this.prefix}`);return this.baseDecode(t.slice(this.prefix.length))}else throw Error("Can only multibase decode strings")}or(t){return Xm(this,t)}}class OE{constructor(t){this.decoders=t}or(t){return Xm(this,t)}decode(t){const e=t[0],i=this.decoders[e];if(i)return i.decode(t);throw RangeError(`Unable to decode multibase string ${JSON.stringify(t)}, only inputs prefixed with ${Object.keys(this.decoders)} are supported`)}}const Xm=(r,t)=>new OE({...r.decoders||{[r.prefix]:r},...t.decoders||{[t.prefix]:t}});class BE{constructor(t,e,i,s){this.name=t,this.prefix=e,this.baseEncode=i,this.baseDecode=s,this.encoder=new RE(t,e,i),this.decoder=new CE(t,e,s)}encode(t){return this.encoder.encode(t)}decode(t){return this.decoder.decode(t)}}const Nf=({name:r,prefix:t,encode:e,decode:i})=>new BE(r,t,e,i),ja=({prefix:r,name:t,alphabet:e})=>{const{encode:i,decode:s}=xE(e,t);return Nf({prefix:r,name:t,encode:i,decode:o=>Wm(s(o))})},TE=(r,t,e,i)=>{const s={};for(let S=0;S<t.length;++S)s[t[S]]=S;let o=r.length;for(;r[o-1]==="=";)--o;const u=new Uint8Array(o*e/8|0);let g=0,w=0,A=0;for(let S=0;S<o;++S){const x=s[r[S]];if(x===void 0)throw new SyntaxError(`Non-${i} character`);w=w<<e|x,g+=e,g>=8&&(g-=8,u[A++]=255&w>>g)}if(g>=e||255&w<<8-g)throw new SyntaxError("Unexpected end of data");return u},qE=(r,t,e)=>{const i=t[t.length-1]==="=",s=(1<<e)-1;let o="",u=0,g=0;for(let w=0;w<r.length;++w)for(g=g<<8|r[w],u+=8;u>e;)u-=e,o+=t[s&g>>u];if(u&&(o+=t[s&g<<e-u]),i)for(;o.length*e&7;)o+="=";return o},wr=({name:r,prefix:t,bitsPerChar:e,alphabet:i})=>Nf({prefix:t,name:r,encode(s){return qE(s,i,e)},decode(s){return TE(s,i,e,r)}}),DE=Nf({prefix:"\0",name:"identity",encode:r=>NE(r),decode:r=>PE(r)});var kE=Object.freeze({__proto__:null,identity:DE});const UE=wr({prefix:"0",name:"base2",alphabet:"01",bitsPerChar:1});var zE=Object.freeze({__proto__:null,base2:UE});const FE=wr({prefix:"7",name:"base8",alphabet:"01234567",bitsPerChar:3});var LE=Object.freeze({__proto__:null,base8:FE});const $E=ja({prefix:"9",name:"base10",alphabet:"0123456789"});var jE=Object.freeze({__proto__:null,base10:$E});const HE=wr({prefix:"f",name:"base16",alphabet:"0123456789abcdef",bitsPerChar:4}),KE=wr({prefix:"F",name:"base16upper",alphabet:"0123456789ABCDEF",bitsPerChar:4});var QE=Object.freeze({__proto__:null,base16:HE,base16upper:KE});const JE=wr({prefix:"b",name:"base32",alphabet:"abcdefghijklmnopqrstuvwxyz234567",bitsPerChar:5}),VE=wr({prefix:"B",name:"base32upper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",bitsPerChar:5}),GE=wr({prefix:"c",name:"base32pad",alphabet:"abcdefghijklmnopqrstuvwxyz234567=",bitsPerChar:5}),YE=wr({prefix:"C",name:"base32padupper",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZ234567=",bitsPerChar:5}),WE=wr({prefix:"v",name:"base32hex",alphabet:"0123456789abcdefghijklmnopqrstuv",bitsPerChar:5}),XE=wr({prefix:"V",name:"base32hexupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV",bitsPerChar:5}),ZE=wr({prefix:"t",name:"base32hexpad",alphabet:"0123456789abcdefghijklmnopqrstuv=",bitsPerChar:5}),tI=wr({prefix:"T",name:"base32hexpadupper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUV=",bitsPerChar:5}),eI=wr({prefix:"h",name:"base32z",alphabet:"ybndrfg8ejkmcpqxot1uwisza345h769",bitsPerChar:5});var rI=Object.freeze({__proto__:null,base32:JE,base32upper:VE,base32pad:GE,base32padupper:YE,base32hex:WE,base32hexupper:XE,base32hexpad:ZE,base32hexpadupper:tI,base32z:eI});const iI=ja({prefix:"k",name:"base36",alphabet:"0123456789abcdefghijklmnopqrstuvwxyz"}),nI=ja({prefix:"K",name:"base36upper",alphabet:"0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ"});var sI=Object.freeze({__proto__:null,base36:iI,base36upper:nI});const oI=ja({name:"base58btc",prefix:"z",alphabet:"123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"}),aI=ja({name:"base58flickr",prefix:"Z",alphabet:"123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"});var hI=Object.freeze({__proto__:null,base58btc:oI,base58flickr:aI});const fI=wr({prefix:"m",name:"base64",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bitsPerChar:6}),cI=wr({prefix:"M",name:"base64pad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",bitsPerChar:6}),uI=wr({prefix:"u",name:"base64url",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_",bitsPerChar:6}),dI=wr({prefix:"U",name:"base64urlpad",alphabet:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_=",bitsPerChar:6});var lI=Object.freeze({__proto__:null,base64:fI,base64pad:cI,base64url:uI,base64urlpad:dI});const Zm=Array.from("🚀🪐☄🛰🌌🌑🌒🌓🌔🌕🌖🌗🌘🌍🌏🌎🐉☀💻🖥💾💿😂❤😍🤣😊🙏💕😭😘👍😅👏😁🔥🥰💔💖💙😢🤔😆🙄💪😉☺👌🤗💜😔😎😇🌹🤦🎉💞✌✨🤷😱😌🌸🙌😋💗💚😏💛🙂💓🤩😄😀🖤😃💯🙈👇🎶😒🤭❣😜💋👀😪😑💥🙋😞😩😡🤪👊🥳😥🤤👉💃😳✋😚😝😴🌟😬🙃🍀🌷😻😓⭐✅🥺🌈😈🤘💦✔😣🏃💐☹🎊💘😠☝😕🌺🎂🌻😐🖕💝🙊😹🗣💫💀👑🎵🤞😛🔴😤🌼😫⚽🤙☕🏆🤫👈😮🙆🍻🍃🐶💁😲🌿🧡🎁⚡🌞🎈❌✊👋😰🤨😶🤝🚶💰🍓💢🤟🙁🚨💨🤬✈🎀🍺🤓😙💟🌱😖👶🥴▶➡❓💎💸⬇😨🌚🦋😷🕺⚠🙅😟😵👎🤲🤠🤧📌🔵💅🧐🐾🍒😗🤑🌊🤯🐷☎💧😯💆👆🎤🙇🍑❄🌴💣🐸💌📍🥀🤢👅💡💩👐📸👻🤐🤮🎼🥵🚩🍎🍊👼💍📣🥂"),pI=Zm.reduce((r,t,e)=>(r[e]=t,r),[]),gI=Zm.reduce((r,t,e)=>(r[t.codePointAt(0)]=e,r),[]);function mI(r){return r.reduce((t,e)=>(t+=pI[e],t),"")}function vI(r){const t=[];for(const e of r){const i=gI[e.codePointAt(0)];if(i===void 0)throw new Error(`Non-base256emoji character: ${e}`);t.push(i)}return new Uint8Array(t)}const bI=Nf({prefix:"🚀",name:"base256emoji",encode:mI,decode:vI});var yI=Object.freeze({__proto__:null,base256emoji:bI}),wI=t2,w1=128,AI=127,_I=~AI,MI=Math.pow(2,31);function t2(r,t,e){t=t||[],e=e||0;for(var i=e;r>=MI;)t[e++]=r&255|w1,r/=128;for(;r&_I;)t[e++]=r&255|w1,r>>>=7;return t[e]=r|0,t2.bytes=e-i+1,t}var EI=Yu,II=128,A1=127;function Yu(r,i){var e=0,i=i||0,s=0,o=i,u,g=r.length;do{if(o>=g)throw Yu.bytes=0,new RangeError("Could not decode varint");u=r[o++],e+=s<28?(u&A1)<<s:(u&A1)*Math.pow(2,s),s+=7}while(u>=II);return Yu.bytes=o-i,e}var SI=Math.pow(2,7),xI=Math.pow(2,14),PI=Math.pow(2,21),NI=Math.pow(2,28),RI=Math.pow(2,35),CI=Math.pow(2,42),OI=Math.pow(2,49),BI=Math.pow(2,56),TI=Math.pow(2,63),qI=function(r){return r<SI?1:r<xI?2:r<PI?3:r<NI?4:r<RI?5:r<CI?6:r<OI?7:r<BI?8:r<TI?9:10},DI={encode:wI,decode:EI,encodingLength:qI},e2=DI;const _1=(r,t,e=0)=>(e2.encode(r,t,e),t),M1=r=>e2.encodingLength(r),Wu=(r,t)=>{const e=t.byteLength,i=M1(r),s=i+M1(e),o=new Uint8Array(s+e);return _1(r,o,0),_1(e,o,i),o.set(t,s),new kI(r,e,t,o)};class kI{constructor(t,e,i,s){this.code=t,this.size=e,this.digest=i,this.bytes=s}}const r2=({name:r,code:t,encode:e})=>new UI(r,t,e);class UI{constructor(t,e,i){this.name=t,this.code=e,this.encode=i}digest(t){if(t instanceof Uint8Array){const e=this.encode(t);return e instanceof Uint8Array?Wu(this.code,e):e.then(i=>Wu(this.code,i))}else throw Error("Unknown type, must be binary type")}}const i2=r=>async t=>new Uint8Array(await crypto.subtle.digest(r,t)),zI=r2({name:"sha2-256",code:18,encode:i2("SHA-256")}),FI=r2({name:"sha2-512",code:19,encode:i2("SHA-512")});var LI=Object.freeze({__proto__:null,sha256:zI,sha512:FI});const n2=0,$I="identity",s2=Wm,jI=r=>Wu(n2,s2(r)),HI={code:n2,name:$I,encode:s2,digest:jI};var KI=Object.freeze({__proto__:null,identity:HI});new TextEncoder,new TextDecoder;const E1={...kE,...zE,...LE,...jE,...QE,...rI,...sI,...hI,...lI,...yI};({...LI,...KI});function QI(r=0){return globalThis.Buffer!=null&&globalThis.Buffer.allocUnsafe!=null?globalThis.Buffer.allocUnsafe(r):new Uint8Array(r)}function o2(r,t,e,i){return{name:r,prefix:t,encoder:{name:r,prefix:t,encode:e},decoder:{decode:i}}}const I1=o2("utf8","u",r=>"u"+new TextDecoder("utf8").decode(r),r=>new TextEncoder().encode(r.substring(1))),Au=o2("ascii","a",r=>{let t="a";for(let e=0;e<r.length;e++)t+=String.fromCharCode(r[e]);return t},r=>{r=r.substring(1);const t=QI(r.length);for(let e=0;e<r.length;e++)t[e]=r.charCodeAt(e);return t}),JI={utf8:I1,"utf-8":I1,hex:E1.base16,latin1:Au,ascii:Au,binary:Au,...E1};function VI(r,t="utf8"){const e=JI[t];if(!e)throw new Error(`Unsupported encoding "${t}"`);return(t==="utf8"||t==="utf-8")&&globalThis.Buffer!=null&&globalThis.Buffer.from!=null?globalThis.Buffer.from(r,"utf8"):e.decoder.decode(`${e.prefix}${r}`)}const a2="wc",h2=2,S0="core",On=`${a2}@2:${S0}:`,GI={name:S0,logger:"error"},YI={database:":memory:"},WI="crypto",S1="client_ed25519_seed",XI=Ct.ONE_DAY,ZI="keychain",tS="0.3",eS="messages",rS="0.3",iS=Ct.SIX_HOURS,nS="publisher",f2="irn",sS="error",c2="wss://relay.walletconnect.org",oS="relayer",Wr={message:"relayer_message",message_ack:"relayer_message_ack",connect:"relayer_connect",disconnect:"relayer_disconnect",error:"relayer_error",connection_stalled:"relayer_connection_stalled",transport_closed:"relayer_transport_closed",publish:"relayer_publish"},aS="_subscription",Bi={payload:"payload",connect:"connect",disconnect:"disconnect",error:"error"},hS=.1,u2="2.15.2",fS=1e4,cS="0.3",uS="WALLETCONNECT_CLIENT_ID",wn={created:"subscription_created",deleted:"subscription_deleted",expired:"subscription_expired",disabled:"subscription_disabled",sync:"subscription_sync",resubscribed:"subscription_resubscribed"},dS="subscription",lS="0.3",pS=Ct.FIVE_SECONDS*1e3,gS="pairing",mS="0.3",la={wc_pairingDelete:{req:{ttl:Ct.ONE_DAY,prompt:!1,tag:1e3},res:{ttl:Ct.ONE_DAY,prompt:!1,tag:1001}},wc_pairingPing:{req:{ttl:Ct.THIRTY_SECONDS,prompt:!1,tag:1002},res:{ttl:Ct.THIRTY_SECONDS,prompt:!1,tag:1003}},unregistered_method:{req:{ttl:Ct.ONE_DAY,prompt:!1,tag:0},res:{ttl:Ct.ONE_DAY,prompt:!1,tag:0}}},_o={create:"pairing_create",expire:"pairing_expire",delete:"pairing_delete",ping:"pairing_ping"},Gi={created:"history_created",updated:"history_updated",deleted:"history_deleted",sync:"history_sync"},vS="history",bS="0.3",yS="expirer",Ti={created:"expirer_created",deleted:"expirer_deleted",expired:"expirer_expired",sync:"expirer_sync"},wS="0.3",AS="verify-api",_S="https://verify.walletconnect.com",d2="https://verify.walletconnect.org",xa=d2,MS=`${xa}/v3`,ES=[_S,d2],IS="echo",SS="https://echo.walletconnect.com",pn={pairing_started:"pairing_started",pairing_uri_validation_success:"pairing_uri_validation_success",pairing_uri_not_expired:"pairing_uri_not_expired",store_new_pairing:"store_new_pairing",subscribing_pairing_topic:"subscribing_pairing_topic",subscribe_pairing_topic_success:"subscribe_pairing_topic_success",existing_pairing:"existing_pairing",pairing_not_expired:"pairing_not_expired",emit_inactive_pairing:"emit_inactive_pairing",emit_session_proposal:"emit_session_proposal",subscribing_to_pairing_topic:"subscribing_to_pairing_topic"},Yn={no_wss_connection:"no_wss_connection",no_internet_connection:"no_internet_connection",malformed_pairing_uri:"malformed_pairing_uri",active_pairing_already_exists:"active_pairing_already_exists",subscribe_pairing_topic_failure:"subscribe_pairing_topic_failure",pairing_expired:"pairing_expired",proposal_expired:"proposal_expired",proposal_listener_not_found:"proposal_listener_not_found"},Yi={session_approve_started:"session_approve_started",proposal_not_expired:"proposal_not_expired",session_namespaces_validation_success:"session_namespaces_validation_success",create_session_topic:"create_session_topic",subscribing_session_topic:"subscribing_session_topic",subscribe_session_topic_success:"subscribe_session_topic_success",publishing_session_approve:"publishing_session_approve",session_approve_publish_success:"session_approve_publish_success",store_session:"store_session",publishing_session_settle:"publishing_session_settle",session_settle_publish_success:"session_settle_publish_success"},ks={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",proposal_expired:"proposal_expired",subscribe_session_topic_failure:"subscribe_session_topic_failure",session_approve_publish_failure:"session_approve_publish_failure",session_settle_publish_failure:"session_settle_publish_failure",session_approve_namespace_validation_failure:"session_approve_namespace_validation_failure",proposal_not_found:"proposal_not_found"},Us={authenticated_session_approve_started:"authenticated_session_approve_started",authenticated_session_not_expired:"authenticated_session_not_expired",chains_caip2_compliant:"chains_caip2_compliant",chains_evm_compliant:"chains_evm_compliant",create_authenticated_session_topic:"create_authenticated_session_topic",cacaos_verified:"cacaos_verified",store_authenticated_session:"store_authenticated_session",subscribing_authenticated_session_topic:"subscribing_authenticated_session_topic",subscribe_authenticated_session_topic_success:"subscribe_authenticated_session_topic_success",publishing_authenticated_session_approve:"publishing_authenticated_session_approve",authenticated_session_approve_publish_success:"authenticated_session_approve_publish_success"},pa={no_internet_connection:"no_internet_connection",no_wss_connection:"no_wss_connection",missing_session_authenticate_request:"missing_session_authenticate_request",session_authenticate_request_expired:"session_authenticate_request_expired",chains_caip2_compliant_failure:"chains_caip2_compliant_failure",chains_evm_compliant_failure:"chains_evm_compliant_failure",invalid_cacao:"invalid_cacao",subscribe_authenticated_session_topic_failure:"subscribe_authenticated_session_topic_failure",authenticated_session_approve_publish_failure:"authenticated_session_approve_publish_failure",authenticated_session_pending_request_not_found:"authenticated_session_pending_request_not_found"},xS=.1,PS="event-client",NS=86400,RS="https://pulse.walletconnect.com/batch";class CS{constructor(t,e){this.core=t,this.logger=e,this.keychain=new Map,this.name=ZI,this.version=tS,this.initialized=!1,this.storagePrefix=On,this.init=async()=>{if(!this.initialized){const i=await this.getKeyChain();typeof i<"u"&&(this.keychain=i),this.initialized=!0}},this.has=i=>(this.isInitialized(),this.keychain.has(i)),this.set=async(i,s)=>{this.isInitialized(),this.keychain.set(i,s),await this.persist()},this.get=i=>{this.isInitialized();const s=this.keychain.get(i);if(typeof s>"u"){const{message:o}=ut("NO_MATCHING_KEY",`${this.name}: ${i}`);throw new Error(o)}return s},this.del=async i=>{this.isInitialized(),this.keychain.delete(i),await this.persist()},this.core=t,this.logger=Ur(e,this.name)}get context(){return yi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setKeyChain(t){await this.core.storage.setItem(this.storageKey,sm(t))}async getKeyChain(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?om(t):void 0}async persist(){await this.setKeyChain(this.keychain)}isInitialized(){if(!this.initialized){const{message:t}=ut("NOT_INITIALIZED",this.name);throw new Error(t)}}}class OS{constructor(t,e,i){this.core=t,this.logger=e,this.name=WI,this.randomSessionIdentifier=Vu(),this.initialized=!1,this.init=async()=>{this.initialized||(await this.keychain.init(),this.initialized=!0)},this.hasKeys=s=>(this.isInitialized(),this.keychain.has(s)),this.getClientId=async()=>{this.isInitialized();const s=await this.getClientSeed(),o=ep(s);return B4(o.publicKey)},this.generateKeyPair=()=>{this.isInitialized();const s=AM();return this.setPrivateKey(s.publicKey,s.privateKey)},this.signJWT=async s=>{this.isInitialized();const o=await this.getClientSeed(),u=ep(o),g=this.randomSessionIdentifier;return await T4(g,s,XI,u)},this.generateSharedKey=(s,o,u)=>{this.isInitialized();const g=this.getPrivateKey(s),w=_M(g,o);return this.setSymKey(w,u)},this.setSymKey=async(s,o)=>{this.isInitialized();const u=o||Xh(s);return await this.keychain.set(u,s),u},this.deleteKeyPair=async s=>{this.isInitialized(),await this.keychain.del(s)},this.deleteSymKey=async s=>{this.isInitialized(),await this.keychain.del(s)},this.encode=async(s,o,u)=>{this.isInitialized();const g=Vm(u),w=Cu(o);if(f1(g)){const N=g.senderPublicKey,R=g.receiverPublicKey;s=await this.generateSharedKey(N,R)}const A=this.getSymKey(s),{type:S,senderPublicKey:x}=g;return EM({type:S,symKey:A,message:w,senderPublicKey:x})},this.decode=async(s,o,u)=>{this.isInitialized();const g=xM(o,u);if(f1(g)){const w=g.receiverPublicKey,A=g.senderPublicKey;s=await this.generateSharedKey(w,A)}try{const w=this.getSymKey(s),A=IM({symKey:w,encoded:o});return vg(A)}catch(w){this.logger.error(`Failed to decode message from topic: '${s}', clientId: '${await this.getClientId()}'`),this.logger.error(w)}},this.getPayloadType=s=>{const o=lf(s);return $a(o.type)},this.getPayloadSenderPublicKey=s=>{const o=lf(s);return o.senderPublicKey?zi(o.senderPublicKey,qr):void 0},this.core=t,this.logger=Ur(e,this.name),this.keychain=i||new CS(this.core,this.logger)}get context(){return yi(this.logger)}async setPrivateKey(t,e){return await this.keychain.set(t,e),t}getPrivateKey(t){return this.keychain.get(t)}async getClientSeed(){let t="";try{t=this.keychain.get(S1)}catch{t=Vu(),await this.keychain.set(S1,t)}return VI(t,"base16")}getSymKey(t){return this.keychain.get(t)}isInitialized(){if(!this.initialized){const{message:t}=ut("NOT_INITIALIZED",this.name);throw new Error(t)}}}class BS extends L7{constructor(t,e){super(t,e),this.logger=t,this.core=e,this.messages=new Map,this.name=eS,this.version=rS,this.initialized=!1,this.storagePrefix=On,this.init=async()=>{if(!this.initialized){this.logger.trace("Initialized");try{const i=await this.getRelayerMessages();typeof i<"u"&&(this.messages=i),this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",size:this.messages.size})}catch(i){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(i)}finally{this.initialized=!0}}},this.set=async(i,s)=>{this.isInitialized();const o=Zn(s);let u=this.messages.get(i);return typeof u>"u"&&(u={}),typeof u[o]<"u"||(u[o]=s,this.messages.set(i,u),await this.persist()),o},this.get=i=>{this.isInitialized();let s=this.messages.get(i);return typeof s>"u"&&(s={}),s},this.has=(i,s)=>{this.isInitialized();const o=this.get(i),u=Zn(s);return typeof o[u]<"u"},this.del=async i=>{this.isInitialized(),this.messages.delete(i),await this.persist()},this.logger=Ur(t,this.name),this.core=e}get context(){return yi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}async setRelayerMessages(t){await this.core.storage.setItem(this.storageKey,sm(t))}async getRelayerMessages(){const t=await this.core.storage.getItem(this.storageKey);return typeof t<"u"?om(t):void 0}async persist(){await this.setRelayerMessages(this.messages)}isInitialized(){if(!this.initialized){const{message:t}=ut("NOT_INITIALIZED",this.name);throw new Error(t)}}}class TS extends $7{constructor(t,e){super(t,e),this.relayer=t,this.logger=e,this.events=new os.EventEmitter,this.name=nS,this.queue=new Map,this.publishTimeout=Ct.toMiliseconds(Ct.ONE_MINUTE),this.failedPublishTimeout=Ct.toMiliseconds(Ct.ONE_SECOND),this.needsTransportRestart=!1,this.publish=async(i,s,o)=>{var u;this.logger.debug("Publishing Payload"),this.logger.trace({type:"method",method:"publish",params:{topic:i,message:s,opts:o}});const g=(o==null?void 0:o.ttl)||iS,w=Gu(o),A=(o==null?void 0:o.prompt)||!1,S=(o==null?void 0:o.tag)||0,x=(o==null?void 0:o.id)||wo().toString(),N={topic:i,message:s,opts:{ttl:g,relay:w,prompt:A,tag:S,id:x,attestation:o==null?void 0:o.attestation}},R=`Failed to publish payload, please try again. id:${x} tag:${S}`,O=Date.now();let z,L=1;try{for(;z===void 0;){if(Date.now()-O>this.publishTimeout)throw new Error(R);this.logger.trace({id:x,attempts:L},`publisher.publish - attempt ${L}`),z=await await Eo(this.rpcPublish(i,s,g,w,A,S,x,o==null?void 0:o.attestation).catch(H=>this.logger.warn(H)),this.publishTimeout,R),L++,z||await new Promise(H=>setTimeout(H,this.failedPublishTimeout))}this.relayer.events.emit(Wr.publish,N),this.logger.debug("Successfully Published Payload"),this.logger.trace({type:"method",method:"publish",params:{id:x,topic:i,message:s,opts:o}})}catch(H){if(this.logger.debug("Failed to Publish Payload"),this.logger.error(H),(u=o==null?void 0:o.internal)!=null&&u.throwOnFailedPublish)throw H;this.queue.set(x,N)}},this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.relayer=t,this.logger=Ur(e,this.name),this.registerEventListeners()}get context(){return yi(this.logger)}rpcPublish(t,e,i,s,o,u,g,w){var A,S,x,N;const R={method:ya(s.protocol).publish,params:{topic:t,message:e,ttl:i,prompt:o,tag:u,attestation:w},id:g};return Yr((A=R.params)==null?void 0:A.prompt)&&((S=R.params)==null||delete S.prompt),Yr((x=R.params)==null?void 0:x.tag)&&((N=R.params)==null||delete N.tag),this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"message",direction:"outgoing",request:R}),this.relayer.request(R)}removeRequestFromQueue(t){this.queue.delete(t)}checkQueue(){this.queue.forEach(async t=>{const{topic:e,message:i,opts:s}=t;await this.publish(e,i,s)})}registerEventListeners(){this.relayer.core.heartbeat.on(Ba.pulse,()=>{if(this.needsTransportRestart){this.needsTransportRestart=!1,this.relayer.events.emit(Wr.connection_stalled);return}this.checkQueue()}),this.relayer.on(Wr.message_ack,t=>{this.removeRequestFromQueue(t.id.toString())})}}class qS{constructor(){this.map=new Map,this.set=(t,e)=>{const i=this.get(t);this.exists(t,e)||this.map.set(t,[...i,e])},this.get=t=>this.map.get(t)||[],this.exists=(t,e)=>this.get(t).includes(e),this.delete=(t,e)=>{if(typeof e>"u"){this.map.delete(t);return}if(!this.map.has(t))return;const i=this.get(t);if(!this.exists(t,e))return;const s=i.filter(o=>o!==e);if(!s.length){this.map.delete(t);return}this.map.set(t,s)},this.clear=()=>{this.map.clear()}}get topics(){return Array.from(this.map.keys())}}var DS=Object.defineProperty,kS=Object.defineProperties,US=Object.getOwnPropertyDescriptors,x1=Object.getOwnPropertySymbols,zS=Object.prototype.hasOwnProperty,FS=Object.prototype.propertyIsEnumerable,P1=(r,t,e)=>t in r?DS(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,ga=(r,t)=>{for(var e in t||(t={}))zS.call(t,e)&&P1(r,e,t[e]);if(x1)for(var e of x1(t))FS.call(t,e)&&P1(r,e,t[e]);return r},_u=(r,t)=>kS(r,US(t));class LS extends K7{constructor(t,e){super(t,e),this.relayer=t,this.logger=e,this.subscriptions=new Map,this.topicMap=new qS,this.events=new os.EventEmitter,this.name=dS,this.version=lS,this.pending=new Map,this.cached=[],this.initialized=!1,this.pendingSubscriptionWatchLabel="pending_sub_watch_label",this.pollingInterval=20,this.storagePrefix=On,this.subscribeTimeout=Ct.toMiliseconds(Ct.ONE_MINUTE),this.restartInProgress=!1,this.batchSubscribeTopicsLimit=500,this.pendingBatchMessages=[],this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),this.registerEventListeners(),this.clientId=await this.relayer.core.crypto.getClientId())},this.subscribe=async(i,s)=>{await this.restartToComplete(),this.isInitialized(),this.logger.debug("Subscribing Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:s}});try{const o=Gu(s),u={topic:i,relay:o};this.pending.set(i,u);const g=await this.rpcSubscribe(i,o);return typeof g=="string"&&(this.onSubscribe(g,u),this.logger.debug("Successfully Subscribed Topic"),this.logger.trace({type:"method",method:"subscribe",params:{topic:i,opts:s}})),g}catch(o){throw this.logger.debug("Failed to Subscribe Topic"),this.logger.error(o),o}},this.unsubscribe=async(i,s)=>{await this.restartToComplete(),this.isInitialized(),typeof(s==null?void 0:s.id)<"u"?await this.unsubscribeById(i,s.id,s):await this.unsubscribeByTopic(i,s)},this.isSubscribed=async i=>{if(this.topics.includes(i))return!0;const s=`${this.pendingSubscriptionWatchLabel}_${i}`;return await new Promise((o,u)=>{const g=new Ct.Watch;g.start(s);const w=setInterval(()=>{!this.pending.has(i)&&this.topics.includes(i)&&(clearInterval(w),g.stop(s),o(!0)),g.elapsed(s)>=pS&&(clearInterval(w),g.stop(s),u(new Error("Subscription resolution timeout")))},this.pollingInterval)}).catch(()=>!1)},this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.start=async()=>{await this.onConnect()},this.stop=async()=>{await this.onDisconnect()},this.restart=async()=>{this.restartInProgress=!0,await this.restore(),await this.reset(),this.restartInProgress=!1},this.relayer=t,this.logger=Ur(e,this.name),this.clientId=""}get context(){return yi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.relayer.core.customStoragePrefix+"//"+this.name}get length(){return this.subscriptions.size}get ids(){return Array.from(this.subscriptions.keys())}get values(){return Array.from(this.subscriptions.values())}get topics(){return this.topicMap.topics}hasSubscription(t,e){let i=!1;try{i=this.getSubscription(t).topic===e}catch{}return i}onEnable(){this.cached=[],this.initialized=!0}onDisable(){this.cached=this.values,this.subscriptions.clear(),this.topicMap.clear()}async unsubscribeByTopic(t,e){const i=this.topicMap.get(t);await Promise.all(i.map(async s=>await this.unsubscribeById(t,s,e)))}async unsubscribeById(t,e,i){this.logger.debug("Unsubscribing Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:e,opts:i}});try{const s=Gu(i);await this.rpcUnsubscribe(t,e,s);const o=Te("USER_DISCONNECTED",`${this.name}, ${t}`);await this.onUnsubscribe(t,e,o),this.logger.debug("Successfully Unsubscribed Topic"),this.logger.trace({type:"method",method:"unsubscribe",params:{topic:t,id:e,opts:i}})}catch(s){throw this.logger.debug("Failed to Unsubscribe Topic"),this.logger.error(s),s}}async rpcSubscribe(t,e){const i={method:ya(e.protocol).subscribe,params:{topic:t}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{return await await Eo(this.relayer.request(i).catch(s=>this.logger.warn(s)),this.subscribeTimeout)?Zn(t+this.clientId):null}catch{this.logger.debug("Outgoing Relay Subscribe Payload stalled"),this.relayer.events.emit(Wr.connection_stalled)}return null}async rpcBatchSubscribe(t){if(!t.length)return;const e=t[0].relay,i={method:ya(e.protocol).batchSubscribe,params:{topics:t.map(s=>s.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});try{return await await Eo(this.relayer.request(i).catch(s=>this.logger.warn(s)),this.subscribeTimeout)}catch{this.relayer.events.emit(Wr.connection_stalled)}}async rpcBatchFetchMessages(t){if(!t.length)return;const e=t[0].relay,i={method:ya(e.protocol).batchFetchMessages,params:{topics:t.map(o=>o.topic)}};this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:i});let s;try{s=await await Eo(this.relayer.request(i).catch(o=>this.logger.warn(o)),this.subscribeTimeout)}catch{this.relayer.events.emit(Wr.connection_stalled)}return s}rpcUnsubscribe(t,e,i){const s={method:ya(i.protocol).unsubscribe,params:{topic:t,id:e}};return this.logger.debug("Outgoing Relay Payload"),this.logger.trace({type:"payload",direction:"outgoing",request:s}),this.relayer.request(s)}onSubscribe(t,e){this.setSubscription(t,_u(ga({},e),{id:t})),this.pending.delete(e.topic)}onBatchSubscribe(t){t.length&&t.forEach(e=>{this.setSubscription(e.id,ga({},e)),this.pending.delete(e.topic)})}async onUnsubscribe(t,e,i){this.events.removeAllListeners(e),this.hasSubscription(e,t)&&this.deleteSubscription(e,i),await this.relayer.messages.del(t)}async setRelayerSubscriptions(t){await this.relayer.core.storage.setItem(this.storageKey,t)}async getRelayerSubscriptions(){return await this.relayer.core.storage.getItem(this.storageKey)}setSubscription(t,e){this.logger.debug("Setting subscription"),this.logger.trace({type:"method",method:"setSubscription",id:t,subscription:e}),this.addSubscription(t,e)}addSubscription(t,e){this.subscriptions.set(t,ga({},e)),this.topicMap.set(e.topic,t),this.events.emit(wn.created,e)}getSubscription(t){this.logger.debug("Getting subscription"),this.logger.trace({type:"method",method:"getSubscription",id:t});const e=this.subscriptions.get(t);if(!e){const{message:i}=ut("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(i)}return e}deleteSubscription(t,e){this.logger.debug("Deleting subscription"),this.logger.trace({type:"method",method:"deleteSubscription",id:t,reason:e});const i=this.getSubscription(t);this.subscriptions.delete(t),this.topicMap.delete(i.topic,t),this.events.emit(wn.deleted,_u(ga({},i),{reason:e}))}async persist(){await this.setRelayerSubscriptions(this.values),this.events.emit(wn.sync)}async reset(){if(this.cached.length){const t=Math.ceil(this.cached.length/this.batchSubscribeTopicsLimit);for(let e=0;e<t;e++){const i=this.cached.splice(0,this.batchSubscribeTopicsLimit);await this.batchFetchMessages(i),await this.batchSubscribe(i)}}this.events.emit(wn.resubscribed)}async restore(){try{const t=await this.getRelayerSubscriptions();if(typeof t>"u"||!t.length)return;if(this.subscriptions.size){const{message:e}=ut("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),this.logger.error(`${this.name}: ${JSON.stringify(this.values)}`),new Error(e)}this.cached=t,this.logger.debug(`Successfully Restored subscriptions for ${this.name}`),this.logger.trace({type:"method",method:"restore",subscriptions:this.values})}catch(t){this.logger.debug(`Failed to Restore subscriptions for ${this.name}`),this.logger.error(t)}}async batchSubscribe(t){if(!t.length)return;const e=await this.rpcBatchSubscribe(t);Qs(e)&&this.onBatchSubscribe(e.map((i,s)=>_u(ga({},t[s]),{id:i})))}async batchFetchMessages(t){if(!t.length)return;this.logger.trace(`Fetching batch messages for ${t.length} subscriptions`);const e=await this.rpcBatchFetchMessages(t);e&&e.messages&&(this.pendingBatchMessages=this.pendingBatchMessages.concat(e.messages))}async onConnect(){await this.restart(),this.onEnable()}onDisconnect(){this.onDisable()}async checkPending(){if(!this.initialized||!this.relayer.connected)return;const t=[];this.pending.forEach(e=>{t.push(e)}),await this.batchSubscribe(t),this.pendingBatchMessages.length&&(await this.relayer.handleBatchMessageEvents(this.pendingBatchMessages),this.pendingBatchMessages=[])}registerEventListeners(){this.relayer.core.heartbeat.on(Ba.pulse,async()=>{await this.checkPending()}),this.events.on(wn.created,async t=>{const e=wn.created;this.logger.info(`Emitting ${e}`),this.logger.debug({type:"event",event:e,data:t}),await this.persist()}),this.events.on(wn.deleted,async t=>{const e=wn.deleted;this.logger.info(`Emitting ${e}`),this.logger.debug({type:"event",event:e,data:t}),await this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=ut("NOT_INITIALIZED",this.name);throw new Error(t)}}async restartToComplete(){this.restartInProgress&&await new Promise(t=>{const e=setInterval(()=>{this.restartInProgress||(clearInterval(e),t())},this.pollingInterval)})}}var $S=Object.defineProperty,N1=Object.getOwnPropertySymbols,jS=Object.prototype.hasOwnProperty,HS=Object.prototype.propertyIsEnumerable,R1=(r,t,e)=>t in r?$S(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,KS=(r,t)=>{for(var e in t||(t={}))jS.call(t,e)&&R1(r,e,t[e]);if(N1)for(var e of N1(t))HS.call(t,e)&&R1(r,e,t[e]);return r};class QS extends j7{constructor(t){super(t),this.protocol="wc",this.version=2,this.events=new os.EventEmitter,this.name=oS,this.transportExplicitlyClosed=!1,this.initialized=!1,this.connectionAttemptInProgress=!1,this.connectionStatusPollingInterval=20,this.staleConnectionErrors=["socket hang up","stalled","interrupted"],this.hasExperiencedNetworkDisruption=!1,this.requestsInFlight=new Map,this.heartBeatTimeout=Ct.toMiliseconds(Ct.THIRTY_SECONDS+Ct.ONE_SECOND),this.request=async e=>{var i,s;this.logger.debug("Publishing Request Payload");const o=e.id||wo().toString();await this.toEstablishConnection();try{const u=this.provider.request(e);this.requestsInFlight.set(o,{promise:u,request:e}),this.logger.trace({id:o,method:e.method,topic:(i=e.params)==null?void 0:i.topic},"relayer.request - attempt to publish...");const g=await new Promise(async(w,A)=>{const S=()=>{A(new Error(`relayer.request - publish interrupted, id: ${o}`))};this.provider.on(Bi.disconnect,S);const x=await u;this.provider.off(Bi.disconnect,S),w(x)});return this.logger.trace({id:o,method:e.method,topic:(s=e.params)==null?void 0:s.topic},"relayer.request - published"),g}catch(u){throw this.logger.debug(`Failed to Publish Request: ${o}`),u}finally{this.requestsInFlight.delete(o)}},this.resetPingTimeout=()=>{if(Na())try{clearTimeout(this.pingTimeout),this.pingTimeout=setTimeout(()=>{var e,i,s;(s=(i=(e=this.provider)==null?void 0:e.connection)==null?void 0:i.socket)==null||s.terminate()},this.heartBeatTimeout)}catch(e){this.logger.warn(e)}},this.onPayloadHandler=e=>{this.onProviderPayload(e),this.resetPingTimeout()},this.onConnectHandler=()=>{this.logger.trace("relayer connected"),this.startPingTimeout(),this.events.emit(Wr.connect)},this.onDisconnectHandler=()=>{this.logger.trace("relayer disconnected"),this.onProviderDisconnect()},this.onProviderErrorHandler=e=>{this.logger.error(e),this.events.emit(Wr.error,e),this.logger.info("Fatal socket error received, closing transport"),this.transportClose()},this.registerProviderListeners=()=>{this.provider.on(Bi.payload,this.onPayloadHandler),this.provider.on(Bi.connect,this.onConnectHandler),this.provider.on(Bi.disconnect,this.onDisconnectHandler),this.provider.on(Bi.error,this.onProviderErrorHandler)},this.core=t.core,this.logger=typeof t.logger<"u"&&typeof t.logger!="string"?Ur(t.logger,this.name):i0(vf({level:t.logger||sS})),this.messages=new BS(this.logger,t.core),this.subscriber=new LS(this,this.logger),this.publisher=new TS(this,this.logger),this.relayUrl=(t==null?void 0:t.relayUrl)||c2,this.projectId=t.projectId,this.bundleId=n9(),this.provider={}}async init(){this.logger.trace("Initialized"),this.registerEventListeners(),await Promise.all([this.messages.init(),this.subscriber.init()]),await this.transportOpen(),this.initialized=!0,setTimeout(async()=>{this.subscriber.topics.length===0&&this.subscriber.pending.size===0&&(this.logger.info("No topics subscribed to after init, closing transport"),await this.transportClose(),this.transportExplicitlyClosed=!1)},fS)}get context(){return yi(this.logger)}get connected(){var t,e,i;return((i=(e=(t=this.provider)==null?void 0:t.connection)==null?void 0:e.socket)==null?void 0:i.readyState)===1}get connecting(){var t,e,i;return((i=(e=(t=this.provider)==null?void 0:t.connection)==null?void 0:e.socket)==null?void 0:i.readyState)===0}async publish(t,e,i){this.isInitialized(),await this.publisher.publish(t,e,i),await this.recordMessageEvent({topic:t,message:e,publishedAt:Date.now()})}async subscribe(t,e){var i;this.isInitialized();let s=((i=this.subscriber.topicMap.get(t))==null?void 0:i[0])||"",o;const u=g=>{g.topic===t&&(this.subscriber.off(wn.created,u),o())};return await Promise.all([new Promise(g=>{o=g,this.subscriber.on(wn.created,u)}),new Promise(async g=>{s=await this.subscriber.subscribe(t,e)||s,g()})]),s}async unsubscribe(t,e){this.isInitialized(),await this.subscriber.unsubscribe(t,e)}on(t,e){this.events.on(t,e)}once(t,e){this.events.once(t,e)}off(t,e){this.events.off(t,e)}removeListener(t,e){this.events.removeListener(t,e)}async transportDisconnect(){if(!this.hasExperiencedNetworkDisruption&&this.connected&&this.requestsInFlight.size>0)try{await Promise.all(Array.from(this.requestsInFlight.values()).map(t=>t.promise))}catch(t){this.logger.warn(t)}this.hasExperiencedNetworkDisruption||this.connected?await Eo(this.provider.disconnect(),2e3,"provider.disconnect()").catch(()=>this.onProviderDisconnect()):this.onProviderDisconnect()}async transportClose(){this.transportExplicitlyClosed=!0,await this.transportDisconnect()}async transportOpen(t){await this.confirmOnlineStateOrThrow(),t&&t!==this.relayUrl&&(this.relayUrl=t,await this.transportDisconnect()),await this.createProvider(),this.connectionAttemptInProgress=!0,this.transportExplicitlyClosed=!1;try{await new Promise(async(e,i)=>{const s=()=>{this.provider.off(Bi.disconnect,s),i(new Error("Connection interrupted while trying to subscribe"))};this.provider.on(Bi.disconnect,s),await Eo(this.provider.connect(),Ct.toMiliseconds(Ct.ONE_MINUTE),`Socket stalled when trying to connect to ${this.relayUrl}`).catch(o=>{i(o)}).finally(()=>{clearTimeout(this.reconnectTimeout),this.reconnectTimeout=void 0}),this.subscriber.start().catch(o=>{this.logger.error(o),this.onDisconnectHandler()}),this.hasExperiencedNetworkDisruption=!1,e()})}catch(e){this.logger.error(e);const i=e;if(this.hasExperiencedNetworkDisruption=!0,!this.isConnectionStalled(i.message))throw e}finally{this.connectionAttemptInProgress=!1}}async restartTransport(t){this.connectionAttemptInProgress||(this.relayUrl=t||this.relayUrl,await this.confirmOnlineStateOrThrow(),await this.transportClose(),await this.transportOpen())}async confirmOnlineStateOrThrow(){if(!await y1())throw new Error("No internet connection detected. Please restart your network and try again.")}async handleBatchMessageEvents(t){if((t==null?void 0:t.length)===0){this.logger.trace("Batch message events is empty. Ignoring...");return}const e=t.sort((i,s)=>i.publishedAt-s.publishedAt);this.logger.trace(`Batch of ${e.length} message events sorted`);for(const i of e)try{await this.onMessageEvent(i)}catch(s){this.logger.warn(s)}this.logger.trace(`Batch of ${e.length} message events processed`)}startPingTimeout(){var t,e,i,s,o;if(Na())try{(e=(t=this.provider)==null?void 0:t.connection)!=null&&e.socket&&((o=(s=(i=this.provider)==null?void 0:i.connection)==null?void 0:s.socket)==null||o.once("ping",()=>{this.resetPingTimeout()})),this.resetPingTimeout()}catch(u){this.logger.warn(u)}}isConnectionStalled(t){return this.staleConnectionErrors.some(e=>t.includes(e))}async createProvider(){this.provider.connection&&this.unregisterProviderListeners();const t=await this.core.crypto.signJWT(this.relayUrl);this.provider=new hn(new q4(c9({sdkVersion:u2,protocol:this.protocol,version:this.version,relayUrl:this.relayUrl,projectId:this.projectId,auth:t,useOnCloseEvent:!0,bundleId:this.bundleId}))),this.registerProviderListeners()}async recordMessageEvent(t){const{topic:e,message:i}=t;await this.messages.set(e,i)}async shouldIgnoreMessageEvent(t){const{topic:e,message:i}=t;if(!i||i.length===0)return this.logger.debug(`Ignoring invalid/empty message: ${i}`),!0;if(!await this.subscriber.isSubscribed(e))return this.logger.debug(`Ignoring message for non-subscribed topic ${e}`),!0;const s=this.messages.has(e,i);return s&&this.logger.debug(`Ignoring duplicate message: ${i}`),s}async onProviderPayload(t){if(this.logger.debug("Incoming Relay Payload"),this.logger.trace({type:"payload",direction:"incoming",payload:t}),n0(t)){if(!t.method.endsWith(aS))return;const e=t.params,{topic:i,message:s,publishedAt:o,attestation:u}=e.data,g={topic:i,message:s,publishedAt:o,attestation:u};this.logger.debug("Emitting Relayer Payload"),this.logger.trace(KS({type:"event",event:e.id},g)),this.events.emit(e.id,g),await this.acknowledgePayload(t),await this.onMessageEvent(g)}else s0(t)&&this.events.emit(Wr.message_ack,t)}async onMessageEvent(t){await this.shouldIgnoreMessageEvent(t)||(this.events.emit(Wr.message,t),await this.recordMessageEvent(t))}async acknowledgePayload(t){const e=bf(t.id,!0);await this.provider.connection.send(e)}unregisterProviderListeners(){this.provider.off(Bi.payload,this.onPayloadHandler),this.provider.off(Bi.connect,this.onConnectHandler),this.provider.off(Bi.disconnect,this.onDisconnectHandler),this.provider.off(Bi.error,this.onProviderErrorHandler),clearTimeout(this.pingTimeout)}async registerEventListeners(){let t=await y1();AE(async e=>{t!==e&&(t=e,e?await this.restartTransport().catch(i=>this.logger.error(i)):(this.hasExperiencedNetworkDisruption=!0,await this.transportDisconnect(),this.transportExplicitlyClosed=!1))})}async onProviderDisconnect(){await this.subscriber.stop(),this.requestsInFlight.clear(),clearTimeout(this.pingTimeout),this.events.emit(Wr.disconnect),this.connectionAttemptInProgress=!1,!this.transportExplicitlyClosed&&(this.reconnectTimeout||(this.reconnectTimeout=setTimeout(async()=>{await this.transportOpen().catch(t=>this.logger.error(t))},Ct.toMiliseconds(hS))))}isInitialized(){if(!this.initialized){const{message:t}=ut("NOT_INITIALIZED",this.name);throw new Error(t)}}async toEstablishConnection(){await this.confirmOnlineStateOrThrow(),!this.connected&&(this.connectionAttemptInProgress&&await new Promise(t=>{const e=setInterval(()=>{this.connected&&(clearInterval(e),t())},this.connectionStatusPollingInterval)}),await this.transportOpen())}}var JS=Object.defineProperty,C1=Object.getOwnPropertySymbols,VS=Object.prototype.hasOwnProperty,GS=Object.prototype.propertyIsEnumerable,O1=(r,t,e)=>t in r?JS(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,B1=(r,t)=>{for(var e in t||(t={}))VS.call(t,e)&&O1(r,e,t[e]);if(C1)for(var e of C1(t))GS.call(t,e)&&O1(r,e,t[e]);return r};class Ys extends H7{constructor(t,e,i,s=On,o=void 0){super(t,e,i,s),this.core=t,this.logger=e,this.name=i,this.map=new Map,this.version=cS,this.cached=[],this.initialized=!1,this.storagePrefix=On,this.recentlyDeleted=[],this.recentlyDeletedLimit=200,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(u=>{this.getKey&&u!==null&&!Yr(u)?this.map.set(this.getKey(u),u):XM(u)?this.map.set(u.id,u):ZM(u)&&this.map.set(u.topic,u)}),this.cached=[],this.initialized=!0)},this.set=async(u,g)=>{this.isInitialized(),this.map.has(u)?await this.update(u,g):(this.logger.debug("Setting value"),this.logger.trace({type:"method",method:"set",key:u,value:g}),this.map.set(u,g),await this.persist())},this.get=u=>(this.isInitialized(),this.logger.debug("Getting value"),this.logger.trace({type:"method",method:"get",key:u}),this.getData(u)),this.getAll=u=>(this.isInitialized(),u?this.values.filter(g=>Object.keys(u).every(w=>N4(g[w],u[w]))):this.values),this.update=async(u,g)=>{this.isInitialized(),this.logger.debug("Updating value"),this.logger.trace({type:"method",method:"update",key:u,update:g});const w=B1(B1({},this.getData(u)),g);this.map.set(u,w),await this.persist()},this.delete=async(u,g)=>{this.isInitialized(),this.map.has(u)&&(this.logger.debug("Deleting value"),this.logger.trace({type:"method",method:"delete",key:u,reason:g}),this.map.delete(u),this.addToRecentlyDeleted(u),await this.persist())},this.logger=Ur(e,this.name),this.storagePrefix=s,this.getKey=o}get context(){return yi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.map.size}get keys(){return Array.from(this.map.keys())}get values(){return Array.from(this.map.values())}addToRecentlyDeleted(t){this.recentlyDeleted.push(t),this.recentlyDeleted.length>=this.recentlyDeletedLimit&&this.recentlyDeleted.splice(0,this.recentlyDeletedLimit/2)}async setDataStore(t){await this.core.storage.setItem(this.storageKey,t)}async getDataStore(){return await this.core.storage.getItem(this.storageKey)}getData(t){const e=this.map.get(t);if(!e){if(this.recentlyDeleted.includes(t)){const{message:s}=ut("MISSING_OR_INVALID",`Record was recently deleted - ${this.name}: ${t}`);throw this.logger.error(s),new Error(s)}const{message:i}=ut("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.error(i),new Error(i)}return e}async persist(){await this.setDataStore(this.values)}async restore(){try{const t=await this.getDataStore();if(typeof t>"u"||!t.length)return;if(this.map.size){const{message:e}=ut("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=t,this.logger.debug(`Successfully Restored value for ${this.name}`),this.logger.trace({type:"method",method:"restore",value:this.values})}catch(t){this.logger.debug(`Failed to Restore value for ${this.name}`),this.logger.error(t)}}isInitialized(){if(!this.initialized){const{message:t}=ut("NOT_INITIALIZED",this.name);throw new Error(t)}}}class YS{constructor(t,e){this.core=t,this.logger=e,this.name=gS,this.version=mS,this.events=new o0,this.initialized=!1,this.storagePrefix=On,this.ignoredPayloadTypes=[ss],this.registeredMethods=[],this.init=async()=>{this.initialized||(await this.pairings.init(),await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.initialized=!0,this.logger.trace("Initialized"))},this.register=({methods:i})=>{this.isInitialized(),this.registeredMethods=[...new Set([...this.registeredMethods,...i])]},this.create=async i=>{this.isInitialized();const s=Vu(),o=await this.core.crypto.setSymKey(s),u=vr(Ct.FIVE_MINUTES),g={protocol:f2},w={topic:o,expiry:u,relay:g,active:!1},A=$M({protocol:this.core.protocol,version:this.core.version,topic:o,symKey:s,relay:g,expiryTimestamp:u,methods:i==null?void 0:i.methods});return this.core.expirer.set(o,u),await this.pairings.set(o,w),await this.core.relayer.subscribe(o),{topic:o,uri:A}},this.pair=async i=>{this.isInitialized();const s=this.core.eventClient.createEvent({properties:{topic:i==null?void 0:i.uri,trace:[pn.pairing_started]}});this.isValidPair(i,s);const{topic:o,symKey:u,relay:g,expiryTimestamp:w,methods:A}=l1(i.uri);s.props.properties.topic=o,s.addTrace(pn.pairing_uri_validation_success),s.addTrace(pn.pairing_uri_not_expired);let S;if(this.pairings.keys.includes(o)){if(S=this.pairings.get(o),s.addTrace(pn.existing_pairing),S.active)throw s.setError(Yn.active_pairing_already_exists),new Error(`Pairing already exists: ${o}. Please try again with a new connection URI.`);s.addTrace(pn.pairing_not_expired)}const x=w||vr(Ct.FIVE_MINUTES),N={topic:o,relay:g,expiry:x,active:!1,methods:A};this.core.expirer.set(o,x),await this.pairings.set(o,N),s.addTrace(pn.store_new_pairing),i.activatePairing&&await this.activate({topic:o}),this.events.emit(_o.create,N),s.addTrace(pn.emit_inactive_pairing),this.core.crypto.keychain.has(o)||await this.core.crypto.setSymKey(u,o),s.addTrace(pn.subscribing_pairing_topic);try{await this.core.relayer.confirmOnlineStateOrThrow()}catch{s.setError(Yn.no_internet_connection)}try{await this.core.relayer.subscribe(o,{relay:g})}catch(R){throw s.setError(Yn.subscribe_pairing_topic_failure),R}return s.addTrace(pn.subscribe_pairing_topic_success),N},this.activate=async({topic:i})=>{this.isInitialized();const s=vr(Ct.THIRTY_DAYS);this.core.expirer.set(i,s),await this.pairings.update(i,{active:!0,expiry:s})},this.ping=async i=>{this.isInitialized(),await this.isValidPing(i);const{topic:s}=i;if(this.pairings.keys.includes(s)){const o=await this.sendRequest(s,"wc_pairingPing",{}),{done:u,resolve:g,reject:w}=Fs();this.events.once(Me("pairing_ping",o),({error:A})=>{A?w(A):g()}),await u()}},this.updateExpiry=async({topic:i,expiry:s})=>{this.isInitialized(),await this.pairings.update(i,{expiry:s})},this.updateMetadata=async({topic:i,metadata:s})=>{this.isInitialized(),await this.pairings.update(i,{peerMetadata:s})},this.getPairings=()=>(this.isInitialized(),this.pairings.values),this.disconnect=async i=>{this.isInitialized(),await this.isValidDisconnect(i);const{topic:s}=i;this.pairings.keys.includes(s)&&(await this.sendRequest(s,"wc_pairingDelete",Te("USER_DISCONNECTED")),await this.deletePairing(s))},this.sendRequest=async(i,s,o)=>{const u=Aa(s,o),g=await this.core.crypto.encode(i,u),w=la[s].req;return this.core.history.set(i,u),this.core.relayer.publish(i,g,w),u.id},this.sendResult=async(i,s,o)=>{const u=bf(i,o),g=await this.core.crypto.encode(s,u),w=await this.core.history.get(s,i),A=la[w.request.method].res;await this.core.relayer.publish(s,g,A),await this.core.history.resolve(u)},this.sendError=async(i,s,o)=>{const u=a0(i,o),g=await this.core.crypto.encode(s,u),w=await this.core.history.get(s,i),A=la[w.request.method]?la[w.request.method].res:la.unregistered_method.res;await this.core.relayer.publish(s,g,A),await this.core.history.resolve(u)},this.deletePairing=async(i,s)=>{await this.core.relayer.unsubscribe(i),await Promise.all([this.pairings.delete(i,Te("USER_DISCONNECTED")),this.core.crypto.deleteSymKey(i),s?Promise.resolve():this.core.expirer.del(i)])},this.cleanup=async()=>{const i=this.pairings.getAll().filter(s=>ys(s.expiry));await Promise.all(i.map(s=>this.deletePairing(s.topic)))},this.onRelayEventRequest=i=>{const{topic:s,payload:o}=i;switch(o.method){case"wc_pairingPing":return this.onPairingPingRequest(s,o);case"wc_pairingDelete":return this.onPairingDeleteRequest(s,o);default:return this.onUnknownRpcMethodRequest(s,o)}},this.onRelayEventResponse=async i=>{const{topic:s,payload:o}=i,u=(await this.core.history.get(s,o.id)).request.method;switch(u){case"wc_pairingPing":return this.onPairingPingResponse(s,o);default:return this.onUnknownRpcMethodResponse(u)}},this.onPairingPingRequest=async(i,s)=>{const{id:o}=s;try{this.isValidPing({topic:i}),await this.sendResult(o,i,!0),this.events.emit(_o.ping,{id:o,topic:i})}catch(u){await this.sendError(o,i,u),this.logger.error(u)}},this.onPairingPingResponse=(i,s)=>{const{id:o}=s;setTimeout(()=>{Gn(s)?this.events.emit(Me("pairing_ping",o),{}):gn(s)&&this.events.emit(Me("pairing_ping",o),{error:s.error})},500)},this.onPairingDeleteRequest=async(i,s)=>{const{id:o}=s;try{this.isValidDisconnect({topic:i}),await this.deletePairing(i),this.events.emit(_o.delete,{id:o,topic:i})}catch(u){await this.sendError(o,i,u),this.logger.error(u)}},this.onUnknownRpcMethodRequest=async(i,s)=>{const{id:o,method:u}=s;try{if(this.registeredMethods.includes(u))return;const g=Te("WC_METHOD_UNSUPPORTED",u);await this.sendError(o,i,g),this.logger.error(g)}catch(g){await this.sendError(o,i,g),this.logger.error(g)}},this.onUnknownRpcMethodResponse=i=>{this.registeredMethods.includes(i)||this.logger.error(Te("WC_METHOD_UNSUPPORTED",i))},this.isValidPair=(i,s)=>{var o;if(!Vr(i)){const{message:g}=ut("MISSING_OR_INVALID",`pair() params: ${i}`);throw s.setError(Yn.malformed_pairing_uri),new Error(g)}if(!WM(i.uri)){const{message:g}=ut("MISSING_OR_INVALID",`pair() uri: ${i.uri}`);throw s.setError(Yn.malformed_pairing_uri),new Error(g)}const u=l1(i==null?void 0:i.uri);if(!((o=u==null?void 0:u.relay)!=null&&o.protocol)){const{message:g}=ut("MISSING_OR_INVALID","pair() uri#relay-protocol");throw s.setError(Yn.malformed_pairing_uri),new Error(g)}if(!(u!=null&&u.symKey)){const{message:g}=ut("MISSING_OR_INVALID","pair() uri#symKey");throw s.setError(Yn.malformed_pairing_uri),new Error(g)}if(u!=null&&u.expiryTimestamp&&Ct.toMiliseconds(u==null?void 0:u.expiryTimestamp)<Date.now()){s.setError(Yn.pairing_expired);const{message:g}=ut("EXPIRED","pair() URI has expired. Please try again with a new connection URI.");throw new Error(g)}},this.isValidPing=async i=>{if(!Vr(i)){const{message:o}=ut("MISSING_OR_INVALID",`ping() params: ${i}`);throw new Error(o)}const{topic:s}=i;await this.isValidPairingTopic(s)},this.isValidDisconnect=async i=>{if(!Vr(i)){const{message:o}=ut("MISSING_OR_INVALID",`disconnect() params: ${i}`);throw new Error(o)}const{topic:s}=i;await this.isValidPairingTopic(s)},this.isValidPairingTopic=async i=>{if(!tr(i,!1)){const{message:s}=ut("MISSING_OR_INVALID",`pairing topic should be a string: ${i}`);throw new Error(s)}if(!this.pairings.keys.includes(i)){const{message:s}=ut("NO_MATCHING_KEY",`pairing topic doesn't exist: ${i}`);throw new Error(s)}if(ys(this.pairings.get(i).expiry)){await this.deletePairing(i);const{message:s}=ut("EXPIRED",`pairing topic: ${i}`);throw new Error(s)}},this.core=t,this.logger=Ur(e,this.name),this.pairings=new Ys(this.core,this.logger,this.name,this.storagePrefix)}get context(){return yi(this.logger)}isInitialized(){if(!this.initialized){const{message:t}=ut("NOT_INITIALIZED",this.name);throw new Error(t)}}registerRelayerEvents(){this.core.relayer.on(Wr.message,async t=>{const{topic:e,message:i}=t;if(!this.pairings.keys.includes(e)||this.ignoredPayloadTypes.includes(this.core.crypto.getPayloadType(i)))return;const s=await this.core.crypto.decode(e,i);try{n0(s)?(this.core.history.set(e,s),this.onRelayEventRequest({topic:e,payload:s})):s0(s)&&(await this.core.history.resolve(s),await this.onRelayEventResponse({topic:e,payload:s}),this.core.history.delete(e,s.id))}catch(o){this.logger.error(o)}})}registerExpirerEvents(){this.core.expirer.on(Ti.expired,async t=>{const{topic:e}=hm(t.target);e&&this.pairings.keys.includes(e)&&(await this.deletePairing(e,!0),this.events.emit(_o.expire,{topic:e}))})}}class WS extends F7{constructor(t,e){super(t,e),this.core=t,this.logger=e,this.records=new Map,this.events=new os.EventEmitter,this.name=vS,this.version=bS,this.cached=[],this.initialized=!1,this.storagePrefix=On,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.records.set(i.id,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.set=(i,s,o)=>{if(this.isInitialized(),this.logger.debug("Setting JSON-RPC request history record"),this.logger.trace({type:"method",method:"set",topic:i,request:s,chainId:o}),this.records.has(s.id))return;const u={id:s.id,topic:i,request:{method:s.method,params:s.params||null},chainId:o,expiry:vr(Ct.THIRTY_DAYS)};this.records.set(u.id,u),this.persist(),this.events.emit(Gi.created,u)},this.resolve=async i=>{if(this.isInitialized(),this.logger.debug("Updating JSON-RPC response history record"),this.logger.trace({type:"method",method:"update",response:i}),!this.records.has(i.id))return;const s=await this.getRecord(i.id);typeof s.response>"u"&&(s.response=gn(i)?{error:i.error}:{result:i.result},this.records.set(s.id,s),this.persist(),this.events.emit(Gi.updated,s))},this.get=async(i,s)=>(this.isInitialized(),this.logger.debug("Getting record"),this.logger.trace({type:"method",method:"get",topic:i,id:s}),await this.getRecord(s)),this.delete=(i,s)=>{this.isInitialized(),this.logger.debug("Deleting record"),this.logger.trace({type:"method",method:"delete",id:s}),this.values.forEach(o=>{if(o.topic===i){if(typeof s<"u"&&o.id!==s)return;this.records.delete(o.id),this.events.emit(Gi.deleted,o)}}),this.persist()},this.exists=async(i,s)=>(this.isInitialized(),this.records.has(s)?(await this.getRecord(s)).topic===i:!1),this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.logger=Ur(e,this.name)}get context(){return yi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get size(){return this.records.size}get keys(){return Array.from(this.records.keys())}get values(){return Array.from(this.records.values())}get pending(){const t=[];return this.values.forEach(e=>{if(typeof e.response<"u")return;const i={topic:e.topic,request:Aa(e.request.method,e.request.params,e.id),chainId:e.chainId};return t.push(i)}),t}async setJsonRpcRecords(t){await this.core.storage.setItem(this.storageKey,t)}async getJsonRpcRecords(){return await this.core.storage.getItem(this.storageKey)}getRecord(t){this.isInitialized();const e=this.records.get(t);if(!e){const{message:i}=ut("NO_MATCHING_KEY",`${this.name}: ${t}`);throw new Error(i)}return e}async persist(){await this.setJsonRpcRecords(this.values),this.events.emit(Gi.sync)}async restore(){try{const t=await this.getJsonRpcRecords();if(typeof t>"u"||!t.length)return;if(this.records.size){const{message:e}=ut("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=t,this.logger.debug(`Successfully Restored records for ${this.name}`),this.logger.trace({type:"method",method:"restore",records:this.values})}catch(t){this.logger.debug(`Failed to Restore records for ${this.name}`),this.logger.error(t)}}registerEventListeners(){this.events.on(Gi.created,t=>{const e=Gi.created;this.logger.info(`Emitting ${e}`),this.logger.debug({type:"event",event:e,record:t})}),this.events.on(Gi.updated,t=>{const e=Gi.updated;this.logger.info(`Emitting ${e}`),this.logger.debug({type:"event",event:e,record:t})}),this.events.on(Gi.deleted,t=>{const e=Gi.deleted;this.logger.info(`Emitting ${e}`),this.logger.debug({type:"event",event:e,record:t})}),this.core.heartbeat.on(Ba.pulse,()=>{this.cleanup()})}cleanup(){try{this.isInitialized();let t=!1;this.records.forEach(e=>{Ct.toMiliseconds(e.expiry||0)-Date.now()<=0&&(this.logger.info(`Deleting expired history log: ${e.id}`),this.records.delete(e.id),this.events.emit(Gi.deleted,e,!1),t=!0)}),t&&this.persist()}catch(t){this.logger.warn(t)}}isInitialized(){if(!this.initialized){const{message:t}=ut("NOT_INITIALIZED",this.name);throw new Error(t)}}}class XS extends Q7{constructor(t,e){super(t,e),this.core=t,this.logger=e,this.expirations=new Map,this.events=new os.EventEmitter,this.name=yS,this.version=wS,this.cached=[],this.initialized=!1,this.storagePrefix=On,this.init=async()=>{this.initialized||(this.logger.trace("Initialized"),await this.restore(),this.cached.forEach(i=>this.expirations.set(i.target,i)),this.cached=[],this.registerEventListeners(),this.initialized=!0)},this.has=i=>{try{const s=this.formatTarget(i);return typeof this.getExpiration(s)<"u"}catch{return!1}},this.set=(i,s)=>{this.isInitialized();const o=this.formatTarget(i),u={target:o,expiry:s};this.expirations.set(o,u),this.checkExpiry(o,u),this.events.emit(Ti.created,{target:o,expiration:u})},this.get=i=>{this.isInitialized();const s=this.formatTarget(i);return this.getExpiration(s)},this.del=i=>{if(this.isInitialized(),this.has(i)){const s=this.formatTarget(i),o=this.getExpiration(s);this.expirations.delete(s),this.events.emit(Ti.deleted,{target:s,expiration:o})}},this.on=(i,s)=>{this.events.on(i,s)},this.once=(i,s)=>{this.events.once(i,s)},this.off=(i,s)=>{this.events.off(i,s)},this.removeListener=(i,s)=>{this.events.removeListener(i,s)},this.logger=Ur(e,this.name)}get context(){return yi(this.logger)}get storageKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//"+this.name}get length(){return this.expirations.size}get keys(){return Array.from(this.expirations.keys())}get values(){return Array.from(this.expirations.values())}formatTarget(t){if(typeof t=="string")return u9(t);if(typeof t=="number")return d9(t);const{message:e}=ut("UNKNOWN_TYPE",`Target type: ${typeof t}`);throw new Error(e)}async setExpirations(t){await this.core.storage.setItem(this.storageKey,t)}async getExpirations(){return await this.core.storage.getItem(this.storageKey)}async persist(){await this.setExpirations(this.values),this.events.emit(Ti.sync)}async restore(){try{const t=await this.getExpirations();if(typeof t>"u"||!t.length)return;if(this.expirations.size){const{message:e}=ut("RESTORE_WILL_OVERRIDE",this.name);throw this.logger.error(e),new Error(e)}this.cached=t,this.logger.debug(`Successfully Restored expirations for ${this.name}`),this.logger.trace({type:"method",method:"restore",expirations:this.values})}catch(t){this.logger.debug(`Failed to Restore expirations for ${this.name}`),this.logger.error(t)}}getExpiration(t){const e=this.expirations.get(t);if(!e){const{message:i}=ut("NO_MATCHING_KEY",`${this.name}: ${t}`);throw this.logger.warn(i),new Error(i)}return e}checkExpiry(t,e){const{expiry:i}=e;Ct.toMiliseconds(i)-Date.now()<=0&&this.expire(t,e)}expire(t,e){this.expirations.delete(t),this.events.emit(Ti.expired,{target:t,expiration:e})}checkExpirations(){this.core.relayer.connected&&this.expirations.forEach((t,e)=>this.checkExpiry(e,t))}registerEventListeners(){this.core.heartbeat.on(Ba.pulse,()=>this.checkExpirations()),this.events.on(Ti.created,t=>{const e=Ti.created;this.logger.info(`Emitting ${e}`),this.logger.debug({type:"event",event:e,data:t}),this.persist()}),this.events.on(Ti.expired,t=>{const e=Ti.expired;this.logger.info(`Emitting ${e}`),this.logger.debug({type:"event",event:e,data:t}),this.persist()}),this.events.on(Ti.deleted,t=>{const e=Ti.deleted;this.logger.info(`Emitting ${e}`),this.logger.debug({type:"event",event:e,data:t}),this.persist()})}isInitialized(){if(!this.initialized){const{message:t}=ut("NOT_INITIALIZED",this.name);throw new Error(t)}}}var ze={};Object.defineProperty(ze,"__esModule",{value:!0}),ze.getLocalStorage=ze.getLocalStorageOrThrow=ze.getCrypto=ze.getCryptoOrThrow=ze.getLocation=ze.getLocationOrThrow=ze.getNavigator=ze.getNavigatorOrThrow=l2=ze.getDocument=ze.getDocumentOrThrow=ze.getFromWindowOrThrow=ze.getFromWindow=void 0;function Ws(r){let t;return typeof window<"u"&&typeof window[r]<"u"&&(t=window[r]),t}ze.getFromWindow=Ws;function Ko(r){const t=Ws(r);if(!t)throw new Error(`${r} is not defined in Window`);return t}ze.getFromWindowOrThrow=Ko;function ZS(){return Ko("document")}ze.getDocumentOrThrow=ZS;function tx(){return Ws("document")}var l2=ze.getDocument=tx;function ex(){return Ko("navigator")}ze.getNavigatorOrThrow=ex;function rx(){return Ws("navigator")}ze.getNavigator=rx;function ix(){return Ko("location")}ze.getLocationOrThrow=ix;function nx(){return Ws("location")}ze.getLocation=nx;function sx(){return Ko("crypto")}ze.getCryptoOrThrow=sx;function ox(){return Ws("crypto")}ze.getCrypto=ox;function ax(){return Ko("localStorage")}ze.getLocalStorageOrThrow=ax;function hx(){return Ws("localStorage")}ze.getLocalStorage=hx;class fx extends J7{constructor(t,e,i){super(t,e,i),this.core=t,this.logger=e,this.store=i,this.name=AS,this.verifyUrlV3=MS,this.storagePrefix=On,this.version=h2,this.init=async()=>{var s;this.isDevEnv||(this.publicKey=await this.store.getItem(this.storeKey),this.publicKey&&Ct.toMiliseconds((s=this.publicKey)==null?void 0:s.expiresAt)<Date.now()&&(this.logger.debug("verify v2 public key expired"),await this.removePublicKey()),this.publicKey||await this.fetchAndPersistPublicKey())},this.register=async s=>{if(!za()||this.isDevEnv)return;const o=window.location.origin,{id:u,decryptedId:g}=s,w=`${this.verifyUrlV3}/attestation?projectId=${this.core.projectId}&origin=${o}&id=${u}&decryptedId=${g}`;try{const A=l2(),S=this.startAbortTimer(Ct.ONE_SECOND*5),x=await new Promise((N,R)=>{const O=()=>{window.removeEventListener("message",L),A.body.removeChild(z),R("attestation aborted")};this.abortController.signal.addEventListener("abort",O);const z=A.createElement("iframe");z.src=w,z.style.display="none",z.addEventListener("error",O,{signal:this.abortController.signal});const L=H=>{if(!H.data)return;const rt=JSON.parse(H.data);if(rt.type==="verify_attestation"){if(Ru(rt.attestation).payload.id!==u)return;clearInterval(S),A.body.removeChild(z),this.abortController.signal.removeEventListener("abort",O),window.removeEventListener("message",L),N(rt.attestation===null?"":rt.attestation)}};A.body.appendChild(z),window.addEventListener("message",L,{signal:this.abortController.signal})});return this.logger.debug("jwt attestation",x),x}catch(A){this.logger.warn(A)}return""},this.resolve=async s=>{if(this.isDevEnv)return"";const{attestationId:o,hash:u,encryptedId:g}=s;if(o===""){this.logger.debug("resolve: attestationId is empty, skipping");return}if(o){if(Ru(o).payload.id!==g)return;const A=await this.isValidJwtAttestation(o);if(A)return A}if(!u)return;const w=this.getVerifyUrl(s==null?void 0:s.verifyUrl);return this.fetchAttestation(u,w)},this.fetchAttestation=async(s,o)=>{this.logger.debug(`resolving attestation: ${s} from url: ${o}`);const u=this.startAbortTimer(Ct.ONE_SECOND*5),g=await fetch(`${o}/attestation/${s}?v2Supported=true`,{signal:this.abortController.signal});return clearTimeout(u),g.status===200?await g.json():void 0},this.getVerifyUrl=s=>{let o=s||xa;return ES.includes(o)||(this.logger.info(`verify url: ${o}, not included in trusted list, assigning default: ${xa}`),o=xa),o},this.fetchPublicKey=async()=>{try{this.logger.debug(`fetching public key from: ${this.verifyUrlV3}`);const s=this.startAbortTimer(Ct.FIVE_SECONDS),o=await fetch(`${this.verifyUrlV3}/public-key`,{signal:this.abortController.signal});return clearTimeout(s),await o.json()}catch(s){this.logger.warn(s)}},this.persistPublicKey=async s=>{this.logger.debug("persisting public key to local storage",s),await this.store.setItem(this.storeKey,s),this.publicKey=s},this.removePublicKey=async()=>{this.logger.debug("removing verify v2 public key from storage"),await this.store.removeItem(this.storeKey),this.publicKey=void 0},this.isValidJwtAttestation=async s=>{const o=await this.getPublicKey();try{if(o)return this.validateAttestation(s,o)}catch(g){this.logger.error(g),this.logger.warn("error validating attestation")}const u=await this.fetchAndPersistPublicKey();try{if(u)return this.validateAttestation(s,u)}catch(g){this.logger.error(g),this.logger.warn("error validating attestation")}},this.getPublicKey=async()=>this.publicKey?this.publicKey:await this.fetchAndPersistPublicKey(),this.fetchAndPersistPublicKey=async()=>{if(this.fetchPromise)return await this.fetchPromise,this.publicKey;this.fetchPromise=new Promise(async o=>{const u=await this.fetchPublicKey();u&&(await this.persistPublicKey(u),o(u))});const s=await this.fetchPromise;return this.fetchPromise=void 0,s},this.validateAttestation=(s,o)=>{const u=CM(s,o.publicKey),g={hasExpired:Ct.toMiliseconds(u.exp)<Date.now(),payload:u};if(g.hasExpired)throw this.logger.warn("resolve: jwt attestation expired"),new Error("JWT attestation expired");return{origin:g.payload.origin,isScam:g.payload.isScam}},this.logger=Ur(e,this.name),this.abortController=new AbortController,this.isDevEnv=Na()&&EE.IS_VITEST,this.init()}get storeKey(){return this.storagePrefix+this.version+this.core.customStoragePrefix+"//verify:public:key"}get context(){return yi(this.logger)}startAbortTimer(t){return this.abortController=new AbortController,setTimeout(()=>this.abortController.abort(),Ct.toMiliseconds(t))}}class cx extends V7{constructor(t,e){super(t,e),this.projectId=t,this.logger=e,this.context=IS,this.registerDeviceToken=async i=>{const{clientId:s,token:o,notificationType:u,enableEncrypted:g=!1}=i,w=`${SS}/${this.projectId}/clients`;await fetch(w,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_id:s,type:u,token:o,always_raw:g})})},this.logger=Ur(e,this.context)}}var ux=Object.defineProperty,T1=Object.getOwnPropertySymbols,dx=Object.prototype.hasOwnProperty,lx=Object.prototype.propertyIsEnumerable,q1=(r,t,e)=>t in r?ux(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,ma=(r,t)=>{for(var e in t||(t={}))dx.call(t,e)&&q1(r,e,t[e]);if(T1)for(var e of T1(t))lx.call(t,e)&&q1(r,e,t[e]);return r};class px extends G7{constructor(t,e,i=!0){super(t,e,i),this.core=t,this.logger=e,this.context=PS,this.storagePrefix=On,this.storageVersion=xS,this.events=new Map,this.shouldPersist=!1,this.createEvent=s=>{const{event:o="ERROR",type:u="",properties:{topic:g,trace:w}}=s,A=g9(),S=this.core.projectId||"",x=Date.now(),N=ma({eventId:A,bundleId:S,timestamp:x,props:{event:o,type:u,properties:{topic:g,trace:w}}},this.setMethods(A));return this.telemetryEnabled&&(this.events.set(A,N),this.shouldPersist=!0),N},this.getEvent=s=>{const{eventId:o,topic:u}=s;if(o)return this.events.get(o);const g=Array.from(this.events.values()).find(w=>w.props.properties.topic===u);if(g)return ma(ma({},g),this.setMethods(g.eventId))},this.deleteEvent=s=>{const{eventId:o}=s;this.events.delete(o),this.shouldPersist=!0},this.setEventListeners=()=>{this.core.heartbeat.on(Ba.pulse,async()=>{this.shouldPersist&&await this.persist(),this.events.forEach(s=>{Ct.fromMiliseconds(Date.now())-Ct.fromMiliseconds(s.timestamp)>NS&&(this.events.delete(s.eventId),this.shouldPersist=!0)})})},this.setMethods=s=>({addTrace:o=>this.addTrace(s,o),setError:o=>this.setError(s,o)}),this.addTrace=(s,o)=>{const u=this.events.get(s);u&&(u.props.properties.trace.push(o),this.events.set(s,u),this.shouldPersist=!0)},this.setError=(s,o)=>{const u=this.events.get(s);u&&(u.props.type=o,u.timestamp=Date.now(),this.events.set(s,u),this.shouldPersist=!0)},this.persist=async()=>{await this.core.storage.setItem(this.storageKey,Array.from(this.events.values())),this.shouldPersist=!1},this.restore=async()=>{try{const s=await this.core.storage.getItem(this.storageKey)||[];if(!s.length)return;s.forEach(o=>{this.events.set(o.eventId,ma(ma({},o),this.setMethods(o.eventId)))})}catch(s){this.logger.warn(s)}},this.submit=async()=>{if(!this.telemetryEnabled||this.events.size===0)return;const s=[];for(const[o,u]of this.events)u.props.type&&s.push(u);if(s.length!==0)try{if((await fetch(`${RS}?projectId=${this.core.projectId}&st=events_sdk&sv=js-${u2}`,{method:"POST",body:JSON.stringify(s)})).ok)for(const o of s)this.events.delete(o.eventId),this.shouldPersist=!0}catch(o){this.logger.warn(o)}},this.logger=Ur(e,this.context),i?this.restore().then(async()=>{await this.submit(),this.setEventListeners()}):this.persist()}get storageKey(){return this.storagePrefix+this.storageVersion+this.core.customStoragePrefix+"//"+this.context}}var gx=Object.defineProperty,D1=Object.getOwnPropertySymbols,mx=Object.prototype.hasOwnProperty,vx=Object.prototype.propertyIsEnumerable,k1=(r,t,e)=>t in r?gx(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,U1=(r,t)=>{for(var e in t||(t={}))mx.call(t,e)&&k1(r,e,t[e]);if(D1)for(var e of D1(t))vx.call(t,e)&&k1(r,e,t[e]);return r};class x0 extends z7{constructor(t){var e;super(t),this.protocol=a2,this.version=h2,this.name=S0,this.events=new os.EventEmitter,this.initialized=!1,this.on=(u,g)=>this.events.on(u,g),this.once=(u,g)=>this.events.once(u,g),this.off=(u,g)=>this.events.off(u,g),this.removeListener=(u,g)=>this.events.removeListener(u,g),this.projectId=t==null?void 0:t.projectId,this.relayUrl=(t==null?void 0:t.relayUrl)||c2,this.customStoragePrefix=t!=null&&t.customStoragePrefix?`:${t.customStoragePrefix}`:"";const i=vf({level:typeof(t==null?void 0:t.logger)=="string"&&t.logger?t.logger:GI.logger}),{logger:s,chunkLoggerController:o}=R4({opts:i,maxSizeInBytes:t==null?void 0:t.maxLogBlobSizeInBytes,loggerOverride:t==null?void 0:t.logger});this.logChunkController=o,(e=this.logChunkController)!=null&&e.downloadLogsBlobInBrowser&&(window.downloadLogsBlobInBrowser=async()=>{var u,g;(u=this.logChunkController)!=null&&u.downloadLogsBlobInBrowser&&((g=this.logChunkController)==null||g.downloadLogsBlobInBrowser({clientId:await this.crypto.getClientId()}))}),this.logger=Ur(s,this.name),this.heartbeat=new C4,this.crypto=new OS(this,this.logger,t==null?void 0:t.keychain),this.history=new WS(this,this.logger),this.expirer=new XS(this,this.logger),this.storage=t!=null&&t.storage?t.storage:new O4(U1(U1({},YI),t==null?void 0:t.storageOptions)),this.relayer=new QS({core:this,logger:this.logger,relayUrl:this.relayUrl,projectId:this.projectId}),this.pairing=new YS(this,this.logger),this.verify=new fx(this,this.logger,this.storage),this.echoClient=new cx(this.projectId||"",this.logger),this.eventClient=new px(this,this.logger,t==null?void 0:t.telemetryEnabled)}static async init(t){const e=new x0(t);await e.initialize();const i=await e.crypto.getClientId();return await e.storage.setItem(uS,i),e}get context(){return yi(this.logger)}async start(){this.initialized||await this.initialize()}async getLogsBlob(){var t;return(t=this.logChunkController)==null?void 0:t.logsToBlob({clientId:await this.crypto.getClientId()})}async initialize(){this.logger.trace("Initialized");try{await this.crypto.init(),await this.history.init(),await this.expirer.init(),await this.relayer.init(),await this.heartbeat.init(),await this.pairing.init(),this.initialized=!0,this.logger.info("Core Initialization Success")}catch(t){throw this.logger.warn(`Core Initialization Failure at epoch ${Date.now()}`,t),this.logger.error(t.message),t}}}const bx=x0,p2="wc",g2=2,m2="client",P0=`${p2}@${g2}:${m2}:`,Mu={name:m2,logger:"error",controller:!1,relayUrl:"wss://relay.walletconnect.com"},z1="WALLETCONNECT_DEEPLINK_CHOICE",yx="proposal",v2="Proposal expired",wx="session",go=Ct.SEVEN_DAYS,Ax="engine",mr={wc_sessionPropose:{req:{ttl:Ct.FIVE_MINUTES,prompt:!0,tag:1100},res:{ttl:Ct.FIVE_MINUTES,prompt:!1,tag:1101},reject:{ttl:Ct.FIVE_MINUTES,prompt:!1,tag:1120},autoReject:{ttl:Ct.FIVE_MINUTES,prompt:!1,tag:1121}},wc_sessionSettle:{req:{ttl:Ct.FIVE_MINUTES,prompt:!1,tag:1102},res:{ttl:Ct.FIVE_MINUTES,prompt:!1,tag:1103}},wc_sessionUpdate:{req:{ttl:Ct.ONE_DAY,prompt:!1,tag:1104},res:{ttl:Ct.ONE_DAY,prompt:!1,tag:1105}},wc_sessionExtend:{req:{ttl:Ct.ONE_DAY,prompt:!1,tag:1106},res:{ttl:Ct.ONE_DAY,prompt:!1,tag:1107}},wc_sessionRequest:{req:{ttl:Ct.FIVE_MINUTES,prompt:!0,tag:1108},res:{ttl:Ct.FIVE_MINUTES,prompt:!1,tag:1109}},wc_sessionEvent:{req:{ttl:Ct.FIVE_MINUTES,prompt:!0,tag:1110},res:{ttl:Ct.FIVE_MINUTES,prompt:!1,tag:1111}},wc_sessionDelete:{req:{ttl:Ct.ONE_DAY,prompt:!1,tag:1112},res:{ttl:Ct.ONE_DAY,prompt:!1,tag:1113}},wc_sessionPing:{req:{ttl:Ct.ONE_DAY,prompt:!1,tag:1114},res:{ttl:Ct.ONE_DAY,prompt:!1,tag:1115}},wc_sessionAuthenticate:{req:{ttl:Ct.ONE_HOUR,prompt:!0,tag:1116},res:{ttl:Ct.ONE_HOUR,prompt:!1,tag:1117},reject:{ttl:Ct.FIVE_MINUTES,prompt:!1,tag:1118},autoReject:{ttl:Ct.FIVE_MINUTES,prompt:!1,tag:1119}}},Eu={min:Ct.FIVE_MINUTES,max:Ct.SEVEN_DAYS},ln={idle:"IDLE",active:"ACTIVE"},_x="request",Mx=["wc_sessionPropose","wc_sessionRequest","wc_authRequest","wc_sessionAuthenticate"],Ex="wc",Ix="auth",Sx="authKeys",xx="pairingTopics",Px="requests",Rf=`${Ex}@${1.5}:${Ix}:`,Zh=`${Rf}:PUB_KEY`;var Nx=Object.defineProperty,Rx=Object.defineProperties,Cx=Object.getOwnPropertyDescriptors,F1=Object.getOwnPropertySymbols,Ox=Object.prototype.hasOwnProperty,Bx=Object.prototype.propertyIsEnumerable,L1=(r,t,e)=>t in r?Nx(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,ir=(r,t)=>{for(var e in t||(t={}))Ox.call(t,e)&&L1(r,e,t[e]);if(F1)for(var e of F1(t))Bx.call(t,e)&&L1(r,e,t[e]);return r},zs=(r,t)=>Rx(r,Cx(t));class Tx extends W7{constructor(t){super(t),this.name=Ax,this.events=new o0,this.initialized=!1,this.requestQueue={state:ln.idle,queue:[]},this.sessionRequestQueue={state:ln.idle,queue:[]},this.requestQueueDelay=Ct.ONE_SECOND,this.expectedPairingMethodMap=new Map,this.recentlyDeletedMap=new Map,this.recentlyDeletedLimit=200,this.relayMessageCache=[],this.init=async()=>{this.initialized||(await this.cleanup(),this.registerRelayerEvents(),this.registerExpirerEvents(),this.registerPairingEvents(),this.client.core.pairing.register({methods:Object.keys(mr)}),this.initialized=!0,setTimeout(()=>{this.sessionRequestQueue.queue=this.getPendingSessionRequests(),this.processSessionRequestQueue()},Ct.toMiliseconds(this.requestQueueDelay)))},this.connect=async e=>{await this.isInitialized();const i=zs(ir({},e),{requiredNamespaces:e.requiredNamespaces||{},optionalNamespaces:e.optionalNamespaces||{}});await this.isValidConnect(i);const{pairingTopic:s,requiredNamespaces:o,optionalNamespaces:u,sessionProperties:g,relays:w}=i;let A=s,S,x=!1;try{A&&(x=this.client.core.pairing.pairings.get(A).active)}catch(Z){throw this.client.logger.error(`connect() -> pairing.get(${A}) failed`),Z}if(!A||!x){const{topic:Z,uri:et}=await this.client.core.pairing.create();A=Z,S=et}if(!A){const{message:Z}=ut("NO_MATCHING_KEY",`connect() pairing topic: ${A}`);throw new Error(Z)}const N=await this.client.core.crypto.generateKeyPair(),R=mr.wc_sessionPropose.req.ttl||Ct.FIVE_MINUTES,O=vr(R),z=ir({requiredNamespaces:o,optionalNamespaces:u,relays:w??[{protocol:f2}],proposer:{publicKey:N,metadata:this.client.metadata},expiryTimestamp:O,pairingTopic:A},g&&{sessionProperties:g}),{reject:L,resolve:H,done:rt}=Fs(R,v2);this.events.once(Me("session_connect"),async({error:Z,session:et})=>{if(Z)L(Z);else if(et){et.self.publicKey=N;const at=zs(ir({},et),{pairingTopic:z.pairingTopic,requiredNamespaces:z.requiredNamespaces,optionalNamespaces:z.optionalNamespaces});await this.client.session.set(et.topic,at),await this.setExpiry(et.topic,et.expiry),A&&await this.client.core.pairing.updateMetadata({topic:A,metadata:et.peer.metadata}),this.cleanupDuplicatePairings(at),H(at)}});const ht=await this.sendRequest({topic:A,method:"wc_sessionPropose",params:z,throwOnFailedPublish:!0});return await this.setProposal(ht,ir({id:ht},z)),{uri:S,approval:rt}},this.pair=async e=>{await this.isInitialized();try{return await this.client.core.pairing.pair(e)}catch(i){throw this.client.logger.error("pair() failed"),i}},this.approve=async e=>{var i,s,o;const u=this.client.core.eventClient.createEvent({properties:{topic:(i=e==null?void 0:e.id)==null?void 0:i.toString(),trace:[Yi.session_approve_started]}});try{await this.isInitialized()}catch(ft){throw u.setError(ks.no_internet_connection),ft}try{await this.isValidProposalId(e==null?void 0:e.id)}catch(ft){throw this.client.logger.error(`approve() -> proposal.get(${e==null?void 0:e.id}) failed`),u.setError(ks.proposal_not_found),ft}try{await this.isValidApprove(e)}catch(ft){throw this.client.logger.error("approve() -> isValidApprove() failed"),u.setError(ks.session_approve_namespace_validation_failure),ft}const{id:g,relayProtocol:w,namespaces:A,sessionProperties:S,sessionConfig:x}=e,N=this.client.proposal.get(g);this.client.core.eventClient.deleteEvent({eventId:u.eventId});const{pairingTopic:R,proposer:O,requiredNamespaces:z,optionalNamespaces:L}=N;let H=(s=this.client.core.eventClient)==null?void 0:s.getEvent({topic:R});H||(H=(o=this.client.core.eventClient)==null?void 0:o.createEvent({type:Yi.session_approve_started,properties:{topic:R,trace:[Yi.session_approve_started,Yi.session_namespaces_validation_success]}}));const rt=await this.client.core.crypto.generateKeyPair(),ht=O.publicKey,Z=await this.client.core.crypto.generateSharedKey(rt,ht),et=ir(ir({relay:{protocol:w??"irn"},namespaces:A,controller:{publicKey:rt,metadata:this.client.metadata},expiry:vr(go)},S&&{sessionProperties:S}),x&&{sessionConfig:x});H.addTrace(Yi.subscribing_session_topic);try{await this.client.core.relayer.subscribe(Z)}catch(ft){throw H.setError(ks.subscribe_session_topic_failure),ft}H.addTrace(Yi.subscribe_session_topic_success);const at=zs(ir({},et),{topic:Z,requiredNamespaces:z,optionalNamespaces:L,pairingTopic:R,acknowledged:!1,self:et.controller,peer:{publicKey:O.publicKey,metadata:O.metadata},controller:rt});await this.client.session.set(Z,at),H.addTrace(Yi.store_session);try{H.addTrace(Yi.publishing_session_settle),await this.sendRequest({topic:Z,method:"wc_sessionSettle",params:et,throwOnFailedPublish:!0}).catch(ft=>{throw H==null||H.setError(ks.session_settle_publish_failure),ft}),H.addTrace(Yi.session_settle_publish_success),H.addTrace(Yi.publishing_session_approve),await this.sendResult({id:g,topic:R,result:{relay:{protocol:w??"irn"},responderPublicKey:rt},throwOnFailedPublish:!0}).catch(ft=>{throw H==null||H.setError(ks.session_approve_publish_failure),ft}),H.addTrace(Yi.session_approve_publish_success)}catch(ft){throw this.client.logger.error(ft),this.client.session.delete(Z,Te("USER_DISCONNECTED")),await this.client.core.relayer.unsubscribe(Z),ft}return this.client.core.eventClient.deleteEvent({eventId:H.eventId}),await this.client.core.pairing.updateMetadata({topic:R,metadata:O.metadata}),await this.client.proposal.delete(g,Te("USER_DISCONNECTED")),await this.client.core.pairing.activate({topic:R}),await this.setExpiry(Z,vr(go)),{topic:Z,acknowledged:()=>Promise.resolve(this.client.session.get(Z))}},this.reject=async e=>{await this.isInitialized();try{await this.isValidReject(e)}catch(u){throw this.client.logger.error("reject() -> isValidReject() failed"),u}const{id:i,reason:s}=e;let o;try{o=this.client.proposal.get(i).pairingTopic}catch(u){throw this.client.logger.error(`reject() -> proposal.get(${i}) failed`),u}o&&(await this.sendError({id:i,topic:o,error:s,rpcOpts:mr.wc_sessionPropose.reject}),await this.client.proposal.delete(i,Te("USER_DISCONNECTED")))},this.update=async e=>{await this.isInitialized();try{await this.isValidUpdate(e)}catch(x){throw this.client.logger.error("update() -> isValidUpdate() failed"),x}const{topic:i,namespaces:s}=e,{done:o,resolve:u,reject:g}=Fs(),w=po(),A=wo().toString(),S=this.client.session.get(i).namespaces;return this.events.once(Me("session_update",w),({error:x})=>{x?g(x):u()}),await this.client.session.update(i,{namespaces:s}),await this.sendRequest({topic:i,method:"wc_sessionUpdate",params:{namespaces:s},throwOnFailedPublish:!0,clientRpcId:w,relayRpcId:A}).catch(x=>{this.client.logger.error(x),this.client.session.update(i,{namespaces:S}),g(x)}),{acknowledged:o}},this.extend=async e=>{await this.isInitialized();try{await this.isValidExtend(e)}catch(w){throw this.client.logger.error("extend() -> isValidExtend() failed"),w}const{topic:i}=e,s=po(),{done:o,resolve:u,reject:g}=Fs();return this.events.once(Me("session_extend",s),({error:w})=>{w?g(w):u()}),await this.setExpiry(i,vr(go)),this.sendRequest({topic:i,method:"wc_sessionExtend",params:{},clientRpcId:s,throwOnFailedPublish:!0}).catch(w=>{g(w)}),{acknowledged:o}},this.request=async e=>{await this.isInitialized();try{await this.isValidRequest(e)}catch(R){throw this.client.logger.error("request() -> isValidRequest() failed"),R}const{chainId:i,request:s,topic:o,expiry:u=mr.wc_sessionRequest.req.ttl}=e,g=this.client.session.get(o),w=po(),A=wo().toString(),{done:S,resolve:x,reject:N}=Fs(u,"Request expired. Please try again.");return this.events.once(Me("session_request",w),({error:R,result:O})=>{R?N(R):x(O)}),await Promise.all([new Promise(async R=>{await this.sendRequest({clientRpcId:w,relayRpcId:A,topic:o,method:"wc_sessionRequest",params:{request:zs(ir({},s),{expiryTimestamp:vr(u)}),chainId:i},expiry:u,throwOnFailedPublish:!0}).catch(O=>N(O)),this.client.events.emit("session_request_sent",{topic:o,request:s,chainId:i,id:w}),R()}),new Promise(async R=>{var O;if(!((O=g.sessionConfig)!=null&&O.disableDeepLink)){const z=await p9(this.client.core.storage,z1);l9({id:w,topic:o,wcDeepLink:z})}R()}),S()]).then(R=>R[2])},this.respond=async e=>{await this.isInitialized(),await this.isValidRespond(e);const{topic:i,response:s}=e,{id:o}=s;Gn(s)?await this.sendResult({id:o,topic:i,result:s.result,throwOnFailedPublish:!0}):gn(s)&&await this.sendError({id:o,topic:i,error:s.error}),this.cleanupAfterResponse(e)},this.ping=async e=>{await this.isInitialized();try{await this.isValidPing(e)}catch(s){throw this.client.logger.error("ping() -> isValidPing() failed"),s}const{topic:i}=e;if(this.client.session.keys.includes(i)){const s=po(),o=wo().toString(),{done:u,resolve:g,reject:w}=Fs();this.events.once(Me("session_ping",s),({error:A})=>{A?w(A):g()}),await Promise.all([this.sendRequest({topic:i,method:"wc_sessionPing",params:{},throwOnFailedPublish:!0,clientRpcId:s,relayRpcId:o}),u()])}else this.client.core.pairing.pairings.keys.includes(i)&&await this.client.core.pairing.ping({topic:i})},this.emit=async e=>{await this.isInitialized(),await this.isValidEmit(e);const{topic:i,event:s,chainId:o}=e,u=wo().toString();await this.sendRequest({topic:i,method:"wc_sessionEvent",params:{event:s,chainId:o},throwOnFailedPublish:!0,relayRpcId:u})},this.disconnect=async e=>{await this.isInitialized(),await this.isValidDisconnect(e);const{topic:i}=e;if(this.client.session.keys.includes(i))await this.sendRequest({topic:i,method:"wc_sessionDelete",params:Te("USER_DISCONNECTED"),throwOnFailedPublish:!0}),await this.deleteSession({topic:i,emitEvent:!1});else if(this.client.core.pairing.pairings.keys.includes(i))await this.client.core.pairing.disconnect({topic:i});else{const{message:s}=ut("MISMATCHED_TOPIC",`Session or pairing topic not found: ${i}`);throw new Error(s)}},this.find=e=>(this.isInitialized(),this.client.session.getAll().filter(i=>GM(i,e))),this.getPendingSessionRequests=()=>this.client.pendingRequest.getAll(),this.authenticate=async e=>{this.isInitialized(),this.isValidAuthenticate(e);const{chains:i,statement:s="",uri:o,domain:u,nonce:g,type:w,exp:A,nbf:S,methods:x=[],expiry:N}=e,R=[...e.resources||[]],{topic:O,uri:z}=await this.client.core.pairing.create({methods:["wc_sessionAuthenticate"]});this.client.logger.info({message:"Generated new pairing",pairing:{topic:O,uri:z}});const L=await this.client.core.crypto.generateKeyPair(),H=Xh(L);if(await Promise.all([this.client.auth.authKeys.set(Zh,{responseTopic:H,publicKey:L}),this.client.auth.pairingTopics.set(H,{topic:H,pairingTopic:O})]),await this.client.core.relayer.subscribe(H),this.client.logger.info(`sending request to new pairing topic: ${O}`),x.length>0){const{namespace:a}=Ea(i[0]);let f=hM(a,"request",x);Wh(R)&&(f=cM(f,R.pop())),R.push(f)}const rt=N&&N>mr.wc_sessionAuthenticate.req.ttl?N:mr.wc_sessionAuthenticate.req.ttl,ht={authPayload:{type:w??"caip122",chains:i,statement:s,aud:o,domain:u,version:"1",nonce:g,iat:new Date().toISOString(),exp:A,nbf:S,resources:R},requester:{publicKey:L,metadata:this.client.metadata},expiryTimestamp:vr(rt)},Z={eip155:{chains:i,methods:[...new Set(["personal_sign",...x])],events:["chainChanged","accountsChanged"]}},et={requiredNamespaces:{},optionalNamespaces:Z,relays:[{protocol:"irn"}],pairingTopic:O,proposer:{publicKey:L,metadata:this.client.metadata},expiryTimestamp:vr(mr.wc_sessionPropose.req.ttl)},{done:at,resolve:ft,reject:ct}=Fs(rt,"Request expired"),mt=async({error:a,session:f})=>{if(this.events.off(Me("session_request",T),se),a)ct(a);else if(f){f.self.publicKey=L,await this.client.session.set(f.topic,f),await this.setExpiry(f.topic,f.expiry),O&&await this.client.core.pairing.updateMetadata({topic:O,metadata:f.peer.metadata});const d=this.client.session.get(f.topic);await this.deleteProposal(y),ft({session:d})}},se=async a=>{if(await this.deletePendingAuthRequest(T,{message:"fulfilled",code:0}),a.error){const l=Te("WC_METHOD_UNSUPPORTED","wc_sessionAuthenticate");return a.error.code===l.code?void 0:(this.events.off(Me("session_connect"),mt),ct(a.error.message))}await this.deleteProposal(y),this.events.off(Me("session_connect"),mt);const{cacaos:f,responder:d}=a.result,v=[],b=[];for(const l of f){await i1({cacao:l,projectId:this.client.core.projectId})||(this.client.logger.error(l,"Signature verification failed"),ct(Te("SESSION_SETTLEMENT_FAILED","Signature verification failed")));const{p:c}=l,M=Wh(c.resources),J=[r1(c.iss)],K=df(c.iss);if(M){const m=n1(M),D=s1(M);v.push(...m),J.push(...D)}for(const m of J)b.push(`${m}:${K}`)}const I=await this.client.core.crypto.generateSharedKey(L,d.publicKey);let _;v.length>0&&(_={topic:I,acknowledged:!0,self:{publicKey:L,metadata:this.client.metadata},peer:d,controller:d.publicKey,expiry:vr(go),requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:O,namespaces:p1([...new Set(v)],[...new Set(b)])},await this.client.core.relayer.subscribe(I),await this.client.session.set(I,_),O&&await this.client.core.pairing.updateMetadata({topic:O,metadata:d.metadata}),_=this.client.session.get(I)),ft({auths:f,session:_})},T=po(),y=po();this.events.once(Me("session_connect"),mt),this.events.once(Me("session_request",T),se);try{await Promise.all([this.sendRequest({topic:O,method:"wc_sessionAuthenticate",params:ht,expiry:e.expiry,throwOnFailedPublish:!0,clientRpcId:T}),this.sendRequest({topic:O,method:"wc_sessionPropose",params:et,expiry:mr.wc_sessionPropose.req.ttl,throwOnFailedPublish:!0,clientRpcId:y})])}catch(a){throw this.events.off(Me("session_connect"),mt),this.events.off(Me("session_request",T),se),a}return await this.setProposal(y,ir({id:y},et)),await this.setAuthRequest(T,{request:zs(ir({},ht),{verifyContext:{}}),pairingTopic:O}),{uri:z,response:at}},this.approveSessionAuthenticate=async e=>{const{id:i,auths:s}=e,o=this.client.core.eventClient.createEvent({properties:{topic:i.toString(),trace:[Us.authenticated_session_approve_started]}});try{this.isInitialized()}catch(z){throw o.setError(pa.no_internet_connection),z}const u=this.getPendingAuthRequest(i);if(!u)throw o.setError(pa.authenticated_session_pending_request_not_found),new Error(`Could not find pending auth request with id ${i}`);const g=u.requester.publicKey,w=await this.client.core.crypto.generateKeyPair(),A=Xh(g),S={type:ss,receiverPublicKey:g,senderPublicKey:w},x=[],N=[];for(const z of s){if(!await i1({cacao:z,projectId:this.client.core.projectId})){o.setError(pa.invalid_cacao);const Z=Te("SESSION_SETTLEMENT_FAILED","Signature verification failed");throw await this.sendError({id:i,topic:A,error:Z,encodeOpts:S}),new Error(Z.message)}o.addTrace(Us.cacaos_verified);const{p:L}=z,H=Wh(L.resources),rt=[r1(L.iss)],ht=df(L.iss);if(H){const Z=n1(H),et=s1(H);x.push(...Z),rt.push(...et)}for(const Z of rt)N.push(`${Z}:${ht}`)}const R=await this.client.core.crypto.generateSharedKey(w,g);o.addTrace(Us.create_authenticated_session_topic);let O;if((x==null?void 0:x.length)>0){O={topic:R,acknowledged:!0,self:{publicKey:w,metadata:this.client.metadata},peer:{publicKey:g,metadata:u.requester.metadata},controller:g,expiry:vr(go),authentication:s,requiredNamespaces:{},optionalNamespaces:{},relay:{protocol:"irn"},pairingTopic:u.pairingTopic,namespaces:p1([...new Set(x)],[...new Set(N)])},o.addTrace(Us.subscribing_authenticated_session_topic);try{await this.client.core.relayer.subscribe(R)}catch(z){throw o.setError(pa.subscribe_authenticated_session_topic_failure),z}o.addTrace(Us.subscribe_authenticated_session_topic_success),await this.client.session.set(R,O),o.addTrace(Us.store_authenticated_session),await this.client.core.pairing.updateMetadata({topic:u.pairingTopic,metadata:u.requester.metadata})}o.addTrace(Us.publishing_authenticated_session_approve);try{await this.sendResult({topic:A,id:i,result:{cacaos:s,responder:{publicKey:w,metadata:this.client.metadata}},encodeOpts:S,throwOnFailedPublish:!0})}catch(z){throw o.setError(pa.authenticated_session_approve_publish_failure),z}return await this.client.auth.requests.delete(i,{message:"fulfilled",code:0}),await this.client.core.pairing.activate({topic:u.pairingTopic}),this.client.core.eventClient.deleteEvent({eventId:o.eventId}),{session:O}},this.rejectSessionAuthenticate=async e=>{await this.isInitialized();const{id:i,reason:s}=e,o=this.getPendingAuthRequest(i);if(!o)throw new Error(`Could not find pending auth request with id ${i}`);const u=o.requester.publicKey,g=await this.client.core.crypto.generateKeyPair(),w=Xh(u),A={type:ss,receiverPublicKey:u,senderPublicKey:g};await this.sendError({id:i,topic:w,error:s,encodeOpts:A,rpcOpts:mr.wc_sessionAuthenticate.reject}),await this.client.auth.requests.delete(i,{message:"rejected",code:0}),await this.client.proposal.delete(i,Te("USER_DISCONNECTED"))},this.formatAuthMessage=e=>{this.isInitialized();const{request:i,iss:s}=e;return Hm(i,s)},this.processRelayMessageCache=()=>{setTimeout(async()=>{if(this.relayMessageCache.length!==0)for(;this.relayMessageCache.length>0;)try{const e=this.relayMessageCache.shift();e&&await this.onRelayMessage(e)}catch(e){this.client.logger.error(e)}},50)},this.cleanupDuplicatePairings=async e=>{if(e.pairingTopic)try{const i=this.client.core.pairing.pairings.get(e.pairingTopic),s=this.client.core.pairing.pairings.getAll().filter(o=>{var u,g;return((u=o.peerMetadata)==null?void 0:u.url)&&((g=o.peerMetadata)==null?void 0:g.url)===e.peer.metadata.url&&o.topic&&o.topic!==i.topic});if(s.length===0)return;this.client.logger.info(`Cleaning up ${s.length} duplicate pairing(s)`),await Promise.all(s.map(o=>this.client.core.pairing.disconnect({topic:o.topic}))),this.client.logger.info("Duplicate pairings clean up finished")}catch(i){this.client.logger.error(i)}},this.deleteSession=async e=>{var i;const{topic:s,expirerHasDeleted:o=!1,emitEvent:u=!0,id:g=0}=e,{self:w}=this.client.session.get(s);await this.client.core.relayer.unsubscribe(s),await this.client.session.delete(s,Te("USER_DISCONNECTED")),this.addToRecentlyDeleted(s,"session"),this.client.core.crypto.keychain.has(w.publicKey)&&await this.client.core.crypto.deleteKeyPair(w.publicKey),this.client.core.crypto.keychain.has(s)&&await this.client.core.crypto.deleteSymKey(s),o||this.client.core.expirer.del(s),this.client.core.storage.removeItem(z1).catch(A=>this.client.logger.warn(A)),this.getPendingSessionRequests().forEach(A=>{A.topic===s&&this.deletePendingSessionRequest(A.id,Te("USER_DISCONNECTED"))}),s===((i=this.sessionRequestQueue.queue[0])==null?void 0:i.topic)&&(this.sessionRequestQueue.state=ln.idle),u&&this.client.events.emit("session_delete",{id:g,topic:s})},this.deleteProposal=async(e,i)=>{if(i)try{const s=this.client.proposal.get(e),o=this.client.core.eventClient.getEvent({topic:s.pairingTopic});o==null||o.setError(ks.proposal_expired)}catch{}await Promise.all([this.client.proposal.delete(e,Te("USER_DISCONNECTED")),i?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"proposal")},this.deletePendingSessionRequest=async(e,i,s=!1)=>{await Promise.all([this.client.pendingRequest.delete(e,i),s?Promise.resolve():this.client.core.expirer.del(e)]),this.addToRecentlyDeleted(e,"request"),this.sessionRequestQueue.queue=this.sessionRequestQueue.queue.filter(o=>o.id!==e),s&&(this.sessionRequestQueue.state=ln.idle,this.client.events.emit("session_request_expire",{id:e}))},this.deletePendingAuthRequest=async(e,i,s=!1)=>{await Promise.all([this.client.auth.requests.delete(e,i),s?Promise.resolve():this.client.core.expirer.del(e)])},this.setExpiry=async(e,i)=>{this.client.session.keys.includes(e)&&(this.client.core.expirer.set(e,i),await this.client.session.update(e,{expiry:i}))},this.setProposal=async(e,i)=>{this.client.core.expirer.set(e,vr(mr.wc_sessionPropose.req.ttl)),await this.client.proposal.set(e,i)},this.setAuthRequest=async(e,i)=>{const{request:s,pairingTopic:o}=i;this.client.core.expirer.set(e,s.expiryTimestamp),await this.client.auth.requests.set(e,{authPayload:s.authPayload,requester:s.requester,expiryTimestamp:s.expiryTimestamp,id:e,pairingTopic:o,verifyContext:s.verifyContext})},this.setPendingSessionRequest=async e=>{const{id:i,topic:s,params:o,verifyContext:u}=e,g=o.request.expiryTimestamp||vr(mr.wc_sessionRequest.req.ttl);this.client.core.expirer.set(i,g),await this.client.pendingRequest.set(i,{id:i,topic:s,params:o,verifyContext:u})},this.sendRequest=async e=>{const{topic:i,method:s,params:o,expiry:u,relayRpcId:g,clientRpcId:w,throwOnFailedPublish:A}=e,S=Aa(s,o,w);let x;try{x=await this.client.core.crypto.encode(i,S)}catch(O){throw await this.cleanup(),this.client.logger.error(`sendRequest() -> core.crypto.encode() for topic ${i} failed`),O}let N;if(Mx.includes(s)){const O=Zn(JSON.stringify(S)),z=Zn(x);N=await this.client.core.verify.register({id:z,decryptedId:O})}const R=mr[s].req;return R.attestation=N,u&&(R.ttl=u),g&&(R.id=g),this.client.core.history.set(i,S),A?(R.internal=zs(ir({},R.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(i,x,R)):this.client.core.relayer.publish(i,x,R).catch(O=>this.client.logger.error(O)),S.id},this.sendResult=async e=>{const{id:i,topic:s,result:o,throwOnFailedPublish:u,encodeOpts:g}=e,w=bf(i,o);let A;try{A=await this.client.core.crypto.encode(s,w,g)}catch(N){throw await this.cleanup(),this.client.logger.error(`sendResult() -> core.crypto.encode() for topic ${s} failed`),N}let S;try{S=await this.client.core.history.get(s,i)}catch(N){throw this.client.logger.error(`sendResult() -> history.get(${s}, ${i}) failed`),N}const x=mr[S.request.method].res;u?(x.internal=zs(ir({},x.internal),{throwOnFailedPublish:!0}),await this.client.core.relayer.publish(s,A,x)):this.client.core.relayer.publish(s,A,x).catch(N=>this.client.logger.error(N)),await this.client.core.history.resolve(w)},this.sendError=async e=>{const{id:i,topic:s,error:o,encodeOpts:u,rpcOpts:g}=e,w=a0(i,o);let A;try{A=await this.client.core.crypto.encode(s,w,u)}catch(N){throw await this.cleanup(),this.client.logger.error(`sendError() -> core.crypto.encode() for topic ${s} failed`),N}let S;try{S=await this.client.core.history.get(s,i)}catch(N){throw this.client.logger.error(`sendError() -> history.get(${s}, ${i}) failed`),N}const x=g||mr[S.request.method].res;this.client.core.relayer.publish(s,A,x),await this.client.core.history.resolve(w)},this.cleanup=async()=>{const e=[],i=[];this.client.session.getAll().forEach(s=>{let o=!1;ys(s.expiry)&&(o=!0),this.client.core.crypto.keychain.has(s.topic)||(o=!0),o&&e.push(s.topic)}),this.client.proposal.getAll().forEach(s=>{ys(s.expiryTimestamp)&&i.push(s.id)}),await Promise.all([...e.map(s=>this.deleteSession({topic:s})),...i.map(s=>this.deleteProposal(s))])},this.onRelayEventRequest=async e=>{this.requestQueue.queue.push(e),await this.processRequestsQueue()},this.processRequestsQueue=async()=>{if(this.requestQueue.state===ln.active){this.client.logger.info("Request queue already active, skipping...");return}for(this.client.logger.info(`Request queue starting with ${this.requestQueue.queue.length} requests`);this.requestQueue.queue.length>0;){this.requestQueue.state=ln.active;const e=this.requestQueue.queue.shift();if(e)try{await this.processRequest(e)}catch(i){this.client.logger.warn(i)}}this.requestQueue.state=ln.idle},this.processRequest=async e=>{const{topic:i,payload:s,attestation:o,encryptedId:u}=e,g=s.method;if(!this.shouldIgnorePairingRequest({topic:i,requestMethod:g}))switch(g){case"wc_sessionPropose":return await this.onSessionProposeRequest({topic:i,payload:s,attestation:o,encryptedId:u});case"wc_sessionSettle":return await this.onSessionSettleRequest(i,s);case"wc_sessionUpdate":return await this.onSessionUpdateRequest(i,s);case"wc_sessionExtend":return await this.onSessionExtendRequest(i,s);case"wc_sessionPing":return await this.onSessionPingRequest(i,s);case"wc_sessionDelete":return await this.onSessionDeleteRequest(i,s);case"wc_sessionRequest":return await this.onSessionRequest({topic:i,payload:s,attestation:o,encryptedId:u});case"wc_sessionEvent":return await this.onSessionEventRequest(i,s);case"wc_sessionAuthenticate":return await this.onSessionAuthenticateRequest({topic:i,payload:s,attestation:o,encryptedId:u});default:return this.client.logger.info(`Unsupported request method ${g}`)}},this.onRelayEventResponse=async e=>{const{topic:i,payload:s}=e,o=(await this.client.core.history.get(i,s.id)).request.method;switch(o){case"wc_sessionPropose":return this.onSessionProposeResponse(i,s);case"wc_sessionSettle":return this.onSessionSettleResponse(i,s);case"wc_sessionUpdate":return this.onSessionUpdateResponse(i,s);case"wc_sessionExtend":return this.onSessionExtendResponse(i,s);case"wc_sessionPing":return this.onSessionPingResponse(i,s);case"wc_sessionRequest":return this.onSessionRequestResponse(i,s);case"wc_sessionAuthenticate":return this.onSessionAuthenticateResponse(i,s);default:return this.client.logger.info(`Unsupported response method ${o}`)}},this.onRelayEventUnknownPayload=e=>{const{topic:i}=e,{message:s}=ut("MISSING_OR_INVALID",`Decoded payload on topic ${i} is not identifiable as a JSON-RPC request or a response.`);throw new Error(s)},this.shouldIgnorePairingRequest=e=>{const{topic:i,requestMethod:s}=e,o=this.expectedPairingMethodMap.get(i);return!o||o.includes(s)?!1:!!(o.includes("wc_sessionAuthenticate")&&this.client.events.listenerCount("session_authenticate")>0)},this.onSessionProposeRequest=async e=>{const{topic:i,payload:s,attestation:o,encryptedId:u}=e,{params:g,id:w}=s;try{const A=this.client.core.eventClient.getEvent({topic:i});this.isValidConnect(ir({},s.params));const S=g.expiryTimestamp||vr(mr.wc_sessionPropose.req.ttl),x=ir({id:w,pairingTopic:i,expiryTimestamp:S},g);await this.setProposal(w,x);const N=await this.getVerifyContext({attestationId:o,hash:Zn(JSON.stringify(s)),encryptedId:u,metadata:x.proposer.metadata});this.client.events.listenerCount("session_proposal")===0&&(console.warn("No listener for session_proposal event"),A==null||A.setError(Yn.proposal_listener_not_found)),A==null||A.addTrace(pn.emit_session_proposal),this.client.events.emit("session_proposal",{id:w,params:x,verifyContext:N})}catch(A){await this.sendError({id:w,topic:i,error:A,rpcOpts:mr.wc_sessionPropose.autoReject}),this.client.logger.error(A)}},this.onSessionProposeResponse=async(e,i)=>{const{id:s}=i;if(Gn(i)){const{result:o}=i;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",result:o});const u=this.client.proposal.get(s);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",proposal:u});const g=u.proposer.publicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",selfPublicKey:g});const w=o.responderPublicKey;this.client.logger.trace({type:"method",method:"onSessionProposeResponse",peerPublicKey:w});const A=await this.client.core.crypto.generateSharedKey(g,w);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",sessionTopic:A});const S=await this.client.core.relayer.subscribe(A);this.client.logger.trace({type:"method",method:"onSessionProposeResponse",subscriptionId:S}),await this.client.core.pairing.activate({topic:e})}else if(gn(i)){await this.client.proposal.delete(s,Te("USER_DISCONNECTED"));const o=Me("session_connect");if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners, 954`);this.events.emit(Me("session_connect"),{error:i.error})}},this.onSessionSettleRequest=async(e,i)=>{const{id:s,params:o}=i;try{this.isValidSessionSettleRequest(o);const{relay:u,controller:g,expiry:w,namespaces:A,sessionProperties:S,sessionConfig:x}=i.params,N=ir(ir({topic:e,relay:u,expiry:w,namespaces:A,acknowledged:!0,pairingTopic:"",requiredNamespaces:{},optionalNamespaces:{},controller:g.publicKey,self:{publicKey:"",metadata:this.client.metadata},peer:{publicKey:g.publicKey,metadata:g.metadata}},S&&{sessionProperties:S}),x&&{sessionConfig:x}),R=Me("session_connect");if(this.events.listenerCount(R)===0)throw new Error(`emitting ${R} without any listeners 997`);this.events.emit(Me("session_connect"),{session:N}),await this.sendResult({id:i.id,topic:e,result:!0,throwOnFailedPublish:!0})}catch(u){await this.sendError({id:s,topic:e,error:u}),this.client.logger.error(u)}},this.onSessionSettleResponse=async(e,i)=>{const{id:s}=i;Gn(i)?(await this.client.session.update(e,{acknowledged:!0}),this.events.emit(Me("session_approve",s),{})):gn(i)&&(await this.client.session.delete(e,Te("USER_DISCONNECTED")),this.events.emit(Me("session_approve",s),{error:i.error}))},this.onSessionUpdateRequest=async(e,i)=>{const{params:s,id:o}=i;try{const u=`${e}_session_update`,g=da.get(u);if(g&&this.isRequestOutOfSync(g,o)){this.client.logger.info(`Discarding out of sync request - ${o}`),this.sendError({id:o,topic:e,error:Te("INVALID_UPDATE_REQUEST")});return}this.isValidUpdate(ir({topic:e},s));try{da.set(u,o),await this.client.session.update(e,{namespaces:s.namespaces}),await this.sendResult({id:o,topic:e,result:!0,throwOnFailedPublish:!0})}catch(w){throw da.delete(u),w}this.client.events.emit("session_update",{id:o,topic:e,params:s})}catch(u){await this.sendError({id:o,topic:e,error:u}),this.client.logger.error(u)}},this.isRequestOutOfSync=(e,i)=>parseInt(i.toString().slice(0,-3))<=parseInt(e.toString().slice(0,-3)),this.onSessionUpdateResponse=(e,i)=>{const{id:s}=i,o=Me("session_update",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners`);Gn(i)?this.events.emit(Me("session_update",s),{}):gn(i)&&this.events.emit(Me("session_update",s),{error:i.error})},this.onSessionExtendRequest=async(e,i)=>{const{id:s}=i;try{this.isValidExtend({topic:e}),await this.setExpiry(e,vr(go)),await this.sendResult({id:s,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_extend",{id:s,topic:e})}catch(o){await this.sendError({id:s,topic:e,error:o}),this.client.logger.error(o)}},this.onSessionExtendResponse=(e,i)=>{const{id:s}=i,o=Me("session_extend",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners`);Gn(i)?this.events.emit(Me("session_extend",s),{}):gn(i)&&this.events.emit(Me("session_extend",s),{error:i.error})},this.onSessionPingRequest=async(e,i)=>{const{id:s}=i;try{this.isValidPing({topic:e}),await this.sendResult({id:s,topic:e,result:!0,throwOnFailedPublish:!0}),this.client.events.emit("session_ping",{id:s,topic:e})}catch(o){await this.sendError({id:s,topic:e,error:o}),this.client.logger.error(o)}},this.onSessionPingResponse=(e,i)=>{const{id:s}=i,o=Me("session_ping",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners`);setTimeout(()=>{Gn(i)?this.events.emit(Me("session_ping",s),{}):gn(i)&&this.events.emit(Me("session_ping",s),{error:i.error})},500)},this.onSessionDeleteRequest=async(e,i)=>{const{id:s}=i;try{this.isValidDisconnect({topic:e,reason:i.params}),await Promise.all([new Promise(o=>{this.client.core.relayer.once(Wr.publish,async()=>{o(await this.deleteSession({topic:e,id:s}))})}),this.sendResult({id:s,topic:e,result:!0,throwOnFailedPublish:!0}),this.cleanupPendingSentRequestsForTopic({topic:e,error:Te("USER_DISCONNECTED")})])}catch(o){this.client.logger.error(o)}},this.onSessionRequest=async e=>{var i;const{topic:s,payload:o,attestation:u,encryptedId:g}=e,{id:w,params:A}=o;try{await this.isValidRequest(ir({topic:s},A));const S=this.client.session.get(s),x=await this.getVerifyContext({attestationId:u,hash:Zn(JSON.stringify(Aa("wc_sessionRequest",A,w))),encryptedId:g,metadata:S.peer.metadata}),N={id:w,topic:s,params:A,verifyContext:x};await this.setPendingSessionRequest(N),(i=this.client.signConfig)!=null&&i.disableRequestQueue?this.emitSessionRequest(N):(this.addSessionRequestToSessionRequestQueue(N),this.processSessionRequestQueue())}catch(S){await this.sendError({id:w,topic:s,error:S}),this.client.logger.error(S)}},this.onSessionRequestResponse=(e,i)=>{const{id:s}=i,o=Me("session_request",s);if(this.events.listenerCount(o)===0)throw new Error(`emitting ${o} without any listeners`);Gn(i)?this.events.emit(Me("session_request",s),{result:i.result}):gn(i)&&this.events.emit(Me("session_request",s),{error:i.error})},this.onSessionEventRequest=async(e,i)=>{const{id:s,params:o}=i;try{const u=`${e}_session_event_${o.event.name}`,g=da.get(u);if(g&&this.isRequestOutOfSync(g,s)){this.client.logger.info(`Discarding out of sync request - ${s}`);return}this.isValidEmit(ir({topic:e},o)),this.client.events.emit("session_event",{id:s,topic:e,params:o}),da.set(u,s)}catch(u){await this.sendError({id:s,topic:e,error:u}),this.client.logger.error(u)}},this.onSessionAuthenticateResponse=(e,i)=>{const{id:s}=i;this.client.logger.trace({type:"method",method:"onSessionAuthenticateResponse",topic:e,payload:i}),Gn(i)?this.events.emit(Me("session_request",s),{result:i.result}):gn(i)&&this.events.emit(Me("session_request",s),{error:i.error})},this.onSessionAuthenticateRequest=async e=>{const{topic:i,payload:s,attestation:o,encryptedId:u}=e;try{const{requester:g,authPayload:w,expiryTimestamp:A}=s.params,S=await this.getVerifyContext({attestationId:o,hash:Zn(JSON.stringify(s)),encryptedId:u,metadata:this.client.metadata}),x={requester:g,pairingTopic:i,id:s.id,authPayload:w,verifyContext:S,expiryTimestamp:A};await this.setAuthRequest(s.id,{request:x,pairingTopic:i}),this.client.events.emit("session_authenticate",{topic:i,params:s.params,id:s.id,verifyContext:S})}catch(g){this.client.logger.error(g);const w=s.params.requester.publicKey,A=await this.client.core.crypto.generateKeyPair(),S={type:ss,receiverPublicKey:w,senderPublicKey:A};await this.sendError({id:s.id,topic:i,error:g,encodeOpts:S,rpcOpts:mr.wc_sessionAuthenticate.autoReject})}},this.addSessionRequestToSessionRequestQueue=e=>{this.sessionRequestQueue.queue.push(e)},this.cleanupAfterResponse=e=>{this.deletePendingSessionRequest(e.response.id,{message:"fulfilled",code:0}),setTimeout(()=>{this.sessionRequestQueue.state=ln.idle,this.processSessionRequestQueue()},Ct.toMiliseconds(this.requestQueueDelay))},this.cleanupPendingSentRequestsForTopic=({topic:e,error:i})=>{const s=this.client.core.history.pending;s.length>0&&s.filter(o=>o.topic===e&&o.request.method==="wc_sessionRequest").forEach(o=>{const u=o.request.id,g=Me("session_request",u);if(this.events.listenerCount(g)===0)throw new Error(`emitting ${g} without any listeners`);this.events.emit(Me("session_request",o.request.id),{error:i})})},this.processSessionRequestQueue=()=>{if(this.sessionRequestQueue.state===ln.active){this.client.logger.info("session request queue is already active.");return}const e=this.sessionRequestQueue.queue[0];if(!e){this.client.logger.info("session request queue is empty.");return}try{this.sessionRequestQueue.state=ln.active,this.emitSessionRequest(e)}catch(i){this.client.logger.error(i)}},this.emitSessionRequest=e=>{this.client.events.emit("session_request",e)},this.onPairingCreated=e=>{if(e.methods&&this.expectedPairingMethodMap.set(e.topic,e.methods),e.active)return;const i=this.client.proposal.getAll().find(s=>s.pairingTopic===e.topic);i&&this.onSessionProposeRequest({topic:e.topic,payload:Aa("wc_sessionPropose",{requiredNamespaces:i.requiredNamespaces,optionalNamespaces:i.optionalNamespaces,relays:i.relays,proposer:i.proposer,sessionProperties:i.sessionProperties},i.id)})},this.isValidConnect=async e=>{if(!Vr(e)){const{message:w}=ut("MISSING_OR_INVALID",`connect() params: ${JSON.stringify(e)}`);throw new Error(w)}const{pairingTopic:i,requiredNamespaces:s,optionalNamespaces:o,sessionProperties:u,relays:g}=e;if(Yr(i)||await this.isValidPairingTopic(i),!aE(g)){const{message:w}=ut("MISSING_OR_INVALID",`connect() relays: ${g}`);throw new Error(w)}!Yr(s)&&Oa(s)!==0&&this.validateNamespaces(s,"requiredNamespaces"),!Yr(o)&&Oa(o)!==0&&this.validateNamespaces(o,"optionalNamespaces"),Yr(u)||this.validateSessionProps(u,"sessionProperties")},this.validateNamespaces=(e,i)=>{const s=oE(e,"connect()",i);if(s)throw new Error(s.message)},this.isValidApprove=async e=>{if(!Vr(e))throw new Error(ut("MISSING_OR_INVALID",`approve() params: ${e}`).message);const{id:i,namespaces:s,relayProtocol:o,sessionProperties:u}=e;this.checkRecentlyDeleted(i),await this.isValidProposalId(i);const g=this.client.proposal.get(i),w=yu(s,"approve()");if(w)throw new Error(w.message);const A=v1(g.requiredNamespaces,s,"approve()");if(A)throw new Error(A.message);if(!tr(o,!0)){const{message:S}=ut("MISSING_OR_INVALID",`approve() relayProtocol: ${o}`);throw new Error(S)}Yr(u)||this.validateSessionProps(u,"sessionProperties")},this.isValidReject=async e=>{if(!Vr(e)){const{message:o}=ut("MISSING_OR_INVALID",`reject() params: ${e}`);throw new Error(o)}const{id:i,reason:s}=e;if(this.checkRecentlyDeleted(i),await this.isValidProposalId(i),!fE(s)){const{message:o}=ut("MISSING_OR_INVALID",`reject() reason: ${JSON.stringify(s)}`);throw new Error(o)}},this.isValidSessionSettleRequest=e=>{if(!Vr(e)){const{message:A}=ut("MISSING_OR_INVALID",`onSessionSettleRequest() params: ${e}`);throw new Error(A)}const{relay:i,controller:s,namespaces:o,expiry:u}=e;if(!Ym(i)){const{message:A}=ut("MISSING_OR_INVALID","onSessionSettleRequest() relay protocol should be a string");throw new Error(A)}const g=tE(s,"onSessionSettleRequest()");if(g)throw new Error(g.message);const w=yu(o,"onSessionSettleRequest()");if(w)throw new Error(w.message);if(ys(u)){const{message:A}=ut("EXPIRED","onSessionSettleRequest()");throw new Error(A)}},this.isValidUpdate=async e=>{if(!Vr(e)){const{message:w}=ut("MISSING_OR_INVALID",`update() params: ${e}`);throw new Error(w)}const{topic:i,namespaces:s}=e;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i);const o=this.client.session.get(i),u=yu(s,"update()");if(u)throw new Error(u.message);const g=v1(o.requiredNamespaces,s,"update()");if(g)throw new Error(g.message)},this.isValidExtend=async e=>{if(!Vr(e)){const{message:s}=ut("MISSING_OR_INVALID",`extend() params: ${e}`);throw new Error(s)}const{topic:i}=e;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i)},this.isValidRequest=async e=>{if(!Vr(e)){const{message:w}=ut("MISSING_OR_INVALID",`request() params: ${e}`);throw new Error(w)}const{topic:i,request:s,chainId:o,expiry:u}=e;this.checkRecentlyDeleted(i),await this.isValidSessionTopic(i);const{namespaces:g}=this.client.session.get(i);if(!m1(g,o)){const{message:w}=ut("MISSING_OR_INVALID",`request() chainId: ${o}`);throw new Error(w)}if(!cE(s)){const{message:w}=ut("MISSING_OR_INVALID",`request() ${JSON.stringify(s)}`);throw new Error(w)}if(!lE(g,o,s.method)){const{message:w}=ut("MISSING_OR_INVALID",`request() method: ${s.method}`);throw new Error(w)}if(u&&!vE(u,Eu)){const{message:w}=ut("MISSING_OR_INVALID",`request() expiry: ${u}. Expiry must be a number (in seconds) between ${Eu.min} and ${Eu.max}`);throw new Error(w)}},this.isValidRespond=async e=>{var i;if(!Vr(e)){const{message:u}=ut("MISSING_OR_INVALID",`respond() params: ${e}`);throw new Error(u)}const{topic:s,response:o}=e;try{await this.isValidSessionTopic(s)}catch(u){throw(i=e==null?void 0:e.response)!=null&&i.id&&this.cleanupAfterResponse(e),u}if(!uE(o)){const{message:u}=ut("MISSING_OR_INVALID",`respond() response: ${JSON.stringify(o)}`);throw new Error(u)}},this.isValidPing=async e=>{if(!Vr(e)){const{message:s}=ut("MISSING_OR_INVALID",`ping() params: ${e}`);throw new Error(s)}const{topic:i}=e;await this.isValidSessionOrPairingTopic(i)},this.isValidEmit=async e=>{if(!Vr(e)){const{message:g}=ut("MISSING_OR_INVALID",`emit() params: ${e}`);throw new Error(g)}const{topic:i,event:s,chainId:o}=e;await this.isValidSessionTopic(i);const{namespaces:u}=this.client.session.get(i);if(!m1(u,o)){const{message:g}=ut("MISSING_OR_INVALID",`emit() chainId: ${o}`);throw new Error(g)}if(!dE(s)){const{message:g}=ut("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(g)}if(!pE(u,o,s.name)){const{message:g}=ut("MISSING_OR_INVALID",`emit() event: ${JSON.stringify(s)}`);throw new Error(g)}},this.isValidDisconnect=async e=>{if(!Vr(e)){const{message:s}=ut("MISSING_OR_INVALID",`disconnect() params: ${e}`);throw new Error(s)}const{topic:i}=e;await this.isValidSessionOrPairingTopic(i)},this.isValidAuthenticate=e=>{const{chains:i,uri:s,domain:o,nonce:u}=e;if(!Array.isArray(i)||i.length===0)throw new Error("chains is required and must be a non-empty array");if(!tr(s,!1))throw new Error("uri is required parameter");if(!tr(o,!1))throw new Error("domain is required parameter");if(!tr(u,!1))throw new Error("nonce is required parameter");if([...new Set(i.map(w=>Ea(w).namespace))].length>1)throw new Error("Multi-namespace requests are not supported. Please request single namespace only.");const{namespace:g}=Ea(i[0]);if(g!=="eip155")throw new Error("Only eip155 namespace is supported for authenticated sessions. Please use .connect() for non-eip155 chains.")},this.getVerifyContext=async e=>{const{attestationId:i,hash:s,encryptedId:o,metadata:u}=e,g={verified:{verifyUrl:u.verifyUrl||xa,validation:"UNKNOWN",origin:u.url||""}};try{const w=await this.client.core.verify.resolve({attestationId:i,hash:s,encryptedId:o,verifyUrl:u.verifyUrl});w&&(g.verified.origin=w.origin,g.verified.isScam=w.isScam,g.verified.validation=w.origin===new URL(u.url).origin?"VALID":"INVALID")}catch(w){this.client.logger.warn(w)}return this.client.logger.debug(`Verify context: ${JSON.stringify(g)}`),g},this.validateSessionProps=(e,i)=>{Object.values(e).forEach(s=>{if(!tr(s,!1)){const{message:o}=ut("MISSING_OR_INVALID",`${i} must be in Record<string, string> format. Received: ${JSON.stringify(s)}`);throw new Error(o)}})},this.getPendingAuthRequest=e=>{const i=this.client.auth.requests.get(e);return typeof i=="object"?i:void 0},this.addToRecentlyDeleted=(e,i)=>{if(this.recentlyDeletedMap.set(e,i),this.recentlyDeletedMap.size>=this.recentlyDeletedLimit){let s=0;const o=this.recentlyDeletedLimit/2;for(const u of this.recentlyDeletedMap.keys()){if(s++>=o)break;this.recentlyDeletedMap.delete(u)}}},this.checkRecentlyDeleted=e=>{const i=this.recentlyDeletedMap.get(e);if(i){const{message:s}=ut("MISSING_OR_INVALID",`Record was recently deleted - ${i}: ${e}`);throw new Error(s)}}}async isInitialized(){if(!this.initialized){const{message:t}=ut("NOT_INITIALIZED",this.name);throw new Error(t)}await this.client.core.relayer.confirmOnlineStateOrThrow()}registerRelayerEvents(){this.client.core.relayer.on(Wr.message,t=>{!this.initialized||this.relayMessageCache.length>0?this.relayMessageCache.push(t):this.onRelayMessage(t)})}async onRelayMessage(t){const{topic:e,message:i,attestation:s}=t,{publicKey:o}=this.client.auth.authKeys.keys.includes(Zh)?this.client.auth.authKeys.get(Zh):{responseTopic:void 0,publicKey:void 0},u=await this.client.core.crypto.decode(e,i,{receiverPublicKey:o});try{n0(u)?(this.client.core.history.set(e,u),this.onRelayEventRequest({topic:e,payload:u,attestation:s,encryptedId:Zn(i)})):s0(u)?(await this.client.core.history.resolve(u),await this.onRelayEventResponse({topic:e,payload:u}),this.client.core.history.delete(e,u.id)):this.onRelayEventUnknownPayload({topic:e,payload:u})}catch(g){this.client.logger.error(g)}}registerExpirerEvents(){this.client.core.expirer.on(Ti.expired,async t=>{const{topic:e,id:i}=hm(t.target);if(i&&this.client.pendingRequest.keys.includes(i))return await this.deletePendingSessionRequest(i,ut("EXPIRED"),!0);if(i&&this.client.auth.requests.keys.includes(i))return await this.deletePendingAuthRequest(i,ut("EXPIRED"),!0);e?this.client.session.keys.includes(e)&&(await this.deleteSession({topic:e,expirerHasDeleted:!0}),this.client.events.emit("session_expire",{topic:e})):i&&(await this.deleteProposal(i,!0),this.client.events.emit("proposal_expire",{id:i}))})}registerPairingEvents(){this.client.core.pairing.events.on(_o.create,t=>this.onPairingCreated(t)),this.client.core.pairing.events.on(_o.delete,t=>{this.addToRecentlyDeleted(t.topic,"pairing")})}isValidPairingTopic(t){if(!tr(t,!1)){const{message:e}=ut("MISSING_OR_INVALID",`pairing topic should be a string: ${t}`);throw new Error(e)}if(!this.client.core.pairing.pairings.keys.includes(t)){const{message:e}=ut("NO_MATCHING_KEY",`pairing topic doesn't exist: ${t}`);throw new Error(e)}if(ys(this.client.core.pairing.pairings.get(t).expiry)){const{message:e}=ut("EXPIRED",`pairing topic: ${t}`);throw new Error(e)}}async isValidSessionTopic(t){if(!tr(t,!1)){const{message:e}=ut("MISSING_OR_INVALID",`session topic should be a string: ${t}`);throw new Error(e)}if(this.checkRecentlyDeleted(t),!this.client.session.keys.includes(t)){const{message:e}=ut("NO_MATCHING_KEY",`session topic doesn't exist: ${t}`);throw new Error(e)}if(ys(this.client.session.get(t).expiry)){await this.deleteSession({topic:t});const{message:e}=ut("EXPIRED",`session topic: ${t}`);throw new Error(e)}if(!this.client.core.crypto.keychain.has(t)){const{message:e}=ut("MISSING_OR_INVALID",`session topic does not exist in keychain: ${t}`);throw await this.deleteSession({topic:t}),new Error(e)}}async isValidSessionOrPairingTopic(t){if(this.checkRecentlyDeleted(t),this.client.session.keys.includes(t))await this.isValidSessionTopic(t);else if(this.client.core.pairing.pairings.keys.includes(t))this.isValidPairingTopic(t);else if(tr(t,!1)){const{message:e}=ut("NO_MATCHING_KEY",`session or pairing topic doesn't exist: ${t}`);throw new Error(e)}else{const{message:e}=ut("MISSING_OR_INVALID",`session or pairing topic should be a string: ${t}`);throw new Error(e)}}async isValidProposalId(t){if(!hE(t)){const{message:e}=ut("MISSING_OR_INVALID",`proposal id should be a number: ${t}`);throw new Error(e)}if(!this.client.proposal.keys.includes(t)){const{message:e}=ut("NO_MATCHING_KEY",`proposal id doesn't exist: ${t}`);throw new Error(e)}if(ys(this.client.proposal.get(t).expiryTimestamp)){await this.deleteProposal(t);const{message:e}=ut("EXPIRED",`proposal id: ${t}`);throw new Error(e)}}}class qx extends Ys{constructor(t,e){super(t,e,yx,P0),this.core=t,this.logger=e}}class Dx extends Ys{constructor(t,e){super(t,e,wx,P0),this.core=t,this.logger=e}}class kx extends Ys{constructor(t,e){super(t,e,_x,P0,i=>i.id),this.core=t,this.logger=e}}class Ux extends Ys{constructor(t,e){super(t,e,Sx,Rf,()=>Zh),this.core=t,this.logger=e}}class zx extends Ys{constructor(t,e){super(t,e,xx,Rf),this.core=t,this.logger=e}}class Fx extends Ys{constructor(t,e){super(t,e,Px,Rf,i=>i.id),this.core=t,this.logger=e}}class Lx{constructor(t,e){this.core=t,this.logger=e,this.authKeys=new Ux(this.core,this.logger),this.pairingTopics=new zx(this.core,this.logger),this.requests=new Fx(this.core,this.logger)}async init(){await this.authKeys.init(),await this.pairingTopics.init(),await this.requests.init()}}class N0 extends Y7{constructor(t){super(t),this.protocol=p2,this.version=g2,this.name=Mu.name,this.events=new os.EventEmitter,this.on=(i,s)=>this.events.on(i,s),this.once=(i,s)=>this.events.once(i,s),this.off=(i,s)=>this.events.off(i,s),this.removeListener=(i,s)=>this.events.removeListener(i,s),this.removeAllListeners=i=>this.events.removeAllListeners(i),this.connect=async i=>{try{return await this.engine.connect(i)}catch(s){throw this.logger.error(s.message),s}},this.pair=async i=>{try{return await this.engine.pair(i)}catch(s){throw this.logger.error(s.message),s}},this.approve=async i=>{try{return await this.engine.approve(i)}catch(s){throw this.logger.error(s.message),s}},this.reject=async i=>{try{return await this.engine.reject(i)}catch(s){throw this.logger.error(s.message),s}},this.update=async i=>{try{return await this.engine.update(i)}catch(s){throw this.logger.error(s.message),s}},this.extend=async i=>{try{return await this.engine.extend(i)}catch(s){throw this.logger.error(s.message),s}},this.request=async i=>{try{return await this.engine.request(i)}catch(s){throw this.logger.error(s.message),s}},this.respond=async i=>{try{return await this.engine.respond(i)}catch(s){throw this.logger.error(s.message),s}},this.ping=async i=>{try{return await this.engine.ping(i)}catch(s){throw this.logger.error(s.message),s}},this.emit=async i=>{try{return await this.engine.emit(i)}catch(s){throw this.logger.error(s.message),s}},this.disconnect=async i=>{try{return await this.engine.disconnect(i)}catch(s){throw this.logger.error(s.message),s}},this.find=i=>{try{return this.engine.find(i)}catch(s){throw this.logger.error(s.message),s}},this.getPendingSessionRequests=()=>{try{return this.engine.getPendingSessionRequests()}catch(i){throw this.logger.error(i.message),i}},this.authenticate=async i=>{try{return await this.engine.authenticate(i)}catch(s){throw this.logger.error(s.message),s}},this.formatAuthMessage=i=>{try{return this.engine.formatAuthMessage(i)}catch(s){throw this.logger.error(s.message),s}},this.approveSessionAuthenticate=async i=>{try{return await this.engine.approveSessionAuthenticate(i)}catch(s){throw this.logger.error(s.message),s}},this.rejectSessionAuthenticate=async i=>{try{return await this.engine.rejectSessionAuthenticate(i)}catch(s){throw this.logger.error(s.message),s}},this.name=(t==null?void 0:t.name)||Mu.name,this.metadata=(t==null?void 0:t.metadata)||o9(),this.signConfig=t==null?void 0:t.signConfig;const e=typeof(t==null?void 0:t.logger)<"u"&&typeof(t==null?void 0:t.logger)!="string"?t.logger:i0(vf({level:(t==null?void 0:t.logger)||Mu.logger}));this.core=(t==null?void 0:t.core)||new bx(t),this.logger=Ur(e,this.name),this.session=new Dx(this.core,this.logger),this.proposal=new qx(this.core,this.logger),this.pendingRequest=new kx(this.core,this.logger),this.engine=new Tx(this),this.auth=new Lx(this.core,this.logger)}static async init(t){const e=new N0(t);return await e.initialize(),e}get context(){return yi(this.logger)}get pairing(){return this.core.pairing.pairings}async initialize(){this.logger.trace("Initialized");try{await this.core.start(),await this.session.init(),await this.proposal.init(),await this.pendingRequest.init(),await this.engine.init(),await this.auth.init(),this.logger.info("SignClient Initialization Success"),this.engine.processRelayMessageCache()}catch(t){throw this.logger.info("SignClient Initialization Failure"),this.logger.error(t.message),t}}}var Xu={exports:{}};(function(r,t){var e=typeof self<"u"?self:fg,i=function(){function o(){this.fetch=!1,this.DOMException=e.DOMException}return o.prototype=e,new o}();(function(o){(function(u){var g={searchParams:"URLSearchParams"in o,iterable:"Symbol"in o&&"iterator"in Symbol,blob:"FileReader"in o&&"Blob"in o&&function(){try{return new Blob,!0}catch{return!1}}(),formData:"FormData"in o,arrayBuffer:"ArrayBuffer"in o};function w(f){return f&&DataView.prototype.isPrototypeOf(f)}if(g.arrayBuffer)var A=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],S=ArrayBuffer.isView||function(f){return f&&A.indexOf(Object.prototype.toString.call(f))>-1};function x(f){if(typeof f!="string"&&(f=String(f)),/[^a-z0-9\-#$%&'*+.^_`|~]/i.test(f))throw new TypeError("Invalid character in header field name");return f.toLowerCase()}function N(f){return typeof f!="string"&&(f=String(f)),f}function R(f){var d={next:function(){var v=f.shift();return{done:v===void 0,value:v}}};return g.iterable&&(d[Symbol.iterator]=function(){return d}),d}function O(f){this.map={},f instanceof O?f.forEach(function(d,v){this.append(v,d)},this):Array.isArray(f)?f.forEach(function(d){this.append(d[0],d[1])},this):f&&Object.getOwnPropertyNames(f).forEach(function(d){this.append(d,f[d])},this)}O.prototype.append=function(f,d){f=x(f),d=N(d);var v=this.map[f];this.map[f]=v?v+", "+d:d},O.prototype.delete=function(f){delete this.map[x(f)]},O.prototype.get=function(f){return f=x(f),this.has(f)?this.map[f]:null},O.prototype.has=function(f){return this.map.hasOwnProperty(x(f))},O.prototype.set=function(f,d){this.map[x(f)]=N(d)},O.prototype.forEach=function(f,d){for(var v in this.map)this.map.hasOwnProperty(v)&&f.call(d,this.map[v],v,this)},O.prototype.keys=function(){var f=[];return this.forEach(function(d,v){f.push(v)}),R(f)},O.prototype.values=function(){var f=[];return this.forEach(function(d){f.push(d)}),R(f)},O.prototype.entries=function(){var f=[];return this.forEach(function(d,v){f.push([v,d])}),R(f)},g.iterable&&(O.prototype[Symbol.iterator]=O.prototype.entries);function z(f){if(f.bodyUsed)return Promise.reject(new TypeError("Already read"));f.bodyUsed=!0}function L(f){return new Promise(function(d,v){f.onload=function(){d(f.result)},f.onerror=function(){v(f.error)}})}function H(f){var d=new FileReader,v=L(d);return d.readAsArrayBuffer(f),v}function rt(f){var d=new FileReader,v=L(d);return d.readAsText(f),v}function ht(f){for(var d=new Uint8Array(f),v=new Array(d.length),b=0;b<d.length;b++)v[b]=String.fromCharCode(d[b]);return v.join("")}function Z(f){if(f.slice)return f.slice(0);var d=new Uint8Array(f.byteLength);return d.set(new Uint8Array(f)),d.buffer}function et(){return this.bodyUsed=!1,this._initBody=function(f){this._bodyInit=f,f?typeof f=="string"?this._bodyText=f:g.blob&&Blob.prototype.isPrototypeOf(f)?this._bodyBlob=f:g.formData&&FormData.prototype.isPrototypeOf(f)?this._bodyFormData=f:g.searchParams&&URLSearchParams.prototype.isPrototypeOf(f)?this._bodyText=f.toString():g.arrayBuffer&&g.blob&&w(f)?(this._bodyArrayBuffer=Z(f.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):g.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(f)||S(f))?this._bodyArrayBuffer=Z(f):this._bodyText=f=Object.prototype.toString.call(f):this._bodyText="",this.headers.get("content-type")||(typeof f=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):g.searchParams&&URLSearchParams.prototype.isPrototypeOf(f)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},g.blob&&(this.blob=function(){var f=z(this);if(f)return f;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this._bodyArrayBuffer?z(this)||Promise.resolve(this._bodyArrayBuffer):this.blob().then(H)}),this.text=function(){var f=z(this);if(f)return f;if(this._bodyBlob)return rt(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(ht(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},g.formData&&(this.formData=function(){return this.text().then(mt)}),this.json=function(){return this.text().then(JSON.parse)},this}var at=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];function ft(f){var d=f.toUpperCase();return at.indexOf(d)>-1?d:f}function ct(f,d){d=d||{};var v=d.body;if(f instanceof ct){if(f.bodyUsed)throw new TypeError("Already read");this.url=f.url,this.credentials=f.credentials,d.headers||(this.headers=new O(f.headers)),this.method=f.method,this.mode=f.mode,this.signal=f.signal,!v&&f._bodyInit!=null&&(v=f._bodyInit,f.bodyUsed=!0)}else this.url=String(f);if(this.credentials=d.credentials||this.credentials||"same-origin",(d.headers||!this.headers)&&(this.headers=new O(d.headers)),this.method=ft(d.method||this.method||"GET"),this.mode=d.mode||this.mode||null,this.signal=d.signal||this.signal,this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&v)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(v)}ct.prototype.clone=function(){return new ct(this,{body:this._bodyInit})};function mt(f){var d=new FormData;return f.trim().split("&").forEach(function(v){if(v){var b=v.split("="),I=b.shift().replace(/\+/g," "),_=b.join("=").replace(/\+/g," ");d.append(decodeURIComponent(I),decodeURIComponent(_))}}),d}function se(f){var d=new O,v=f.replace(/\r?\n[\t ]+/g," ");return v.split(/\r?\n/).forEach(function(b){var I=b.split(":"),_=I.shift().trim();if(_){var l=I.join(":").trim();d.append(_,l)}}),d}et.call(ct.prototype);function T(f,d){d||(d={}),this.type="default",this.status=d.status===void 0?200:d.status,this.ok=this.status>=200&&this.status<300,this.statusText="statusText"in d?d.statusText:"OK",this.headers=new O(d.headers),this.url=d.url||"",this._initBody(f)}et.call(T.prototype),T.prototype.clone=function(){return new T(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new O(this.headers),url:this.url})},T.error=function(){var f=new T(null,{status:0,statusText:""});return f.type="error",f};var y=[301,302,303,307,308];T.redirect=function(f,d){if(y.indexOf(d)===-1)throw new RangeError("Invalid status code");return new T(null,{status:d,headers:{location:f}})},u.DOMException=o.DOMException;try{new u.DOMException}catch{u.DOMException=function(d,v){this.message=d,this.name=v;var b=Error(d);this.stack=b.stack},u.DOMException.prototype=Object.create(Error.prototype),u.DOMException.prototype.constructor=u.DOMException}function a(f,d){return new Promise(function(v,b){var I=new ct(f,d);if(I.signal&&I.signal.aborted)return b(new u.DOMException("Aborted","AbortError"));var _=new XMLHttpRequest;function l(){_.abort()}_.onload=function(){var c={status:_.status,statusText:_.statusText,headers:se(_.getAllResponseHeaders()||"")};c.url="responseURL"in _?_.responseURL:c.headers.get("X-Request-URL");var M="response"in _?_.response:_.responseText;v(new T(M,c))},_.onerror=function(){b(new TypeError("Network request failed"))},_.ontimeout=function(){b(new TypeError("Network request failed"))},_.onabort=function(){b(new u.DOMException("Aborted","AbortError"))},_.open(I.method,I.url,!0),I.credentials==="include"?_.withCredentials=!0:I.credentials==="omit"&&(_.withCredentials=!1),"responseType"in _&&g.blob&&(_.responseType="blob"),I.headers.forEach(function(c,M){_.setRequestHeader(M,c)}),I.signal&&(I.signal.addEventListener("abort",l),_.onreadystatechange=function(){_.readyState===4&&I.signal.removeEventListener("abort",l)}),_.send(typeof I._bodyInit>"u"?null:I._bodyInit)})}return a.polyfill=!0,o.fetch||(o.fetch=a,o.Headers=O,o.Request=ct,o.Response=T),u.Headers=O,u.Request=ct,u.Response=T,u.fetch=a,Object.defineProperty(u,"__esModule",{value:!0}),u})({})})(i),i.fetch.ponyfill=!0,delete i.fetch.polyfill;var s=i;t=s.fetch,t.default=s.fetch,t.fetch=s.fetch,t.Headers=s.Headers,t.Request=s.Request,t.Response=s.Response,r.exports=t})(Xu,Xu.exports);var $x=Xu.exports;const $1=D4($x);var jx=Object.defineProperty,Hx=Object.defineProperties,Kx=Object.getOwnPropertyDescriptors,j1=Object.getOwnPropertySymbols,Qx=Object.prototype.hasOwnProperty,Jx=Object.prototype.propertyIsEnumerable,H1=(r,t,e)=>t in r?jx(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,K1=(r,t)=>{for(var e in t||(t={}))Qx.call(t,e)&&H1(r,e,t[e]);if(j1)for(var e of j1(t))Jx.call(t,e)&&H1(r,e,t[e]);return r},Q1=(r,t)=>Hx(r,Kx(t));const Vx={Accept:"application/json","Content-Type":"application/json"},Gx="POST",J1={headers:Vx,method:Gx},V1=10;class Dn{constructor(t,e=!1){if(this.url=t,this.disableProviderPing=e,this.events=new os.EventEmitter,this.isAvailable=!1,this.registering=!1,!rp(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);this.url=t,this.disableProviderPing=e}get connected(){return this.isAvailable}get connecting(){return this.registering}on(t,e){this.events.on(t,e)}once(t,e){this.events.once(t,e)}off(t,e){this.events.off(t,e)}removeListener(t,e){this.events.removeListener(t,e)}async open(t=this.url){await this.register(t)}async close(){if(!this.isAvailable)throw new Error("Connection already closed");this.onClose()}async send(t){this.isAvailable||await this.register();try{const e=Cu(t),i=await(await $1(this.url,Q1(K1({},J1),{body:e}))).json();this.onPayload({data:i})}catch(e){this.onError(t.id,e)}}async register(t=this.url){if(!rp(t))throw new Error(`Provided URL is not compatible with HTTP connection: ${t}`);if(this.registering){const e=this.events.getMaxListeners();return(this.events.listenerCount("register_error")>=e||this.events.listenerCount("open")>=e)&&this.events.setMaxListeners(e+1),new Promise((i,s)=>{this.events.once("register_error",o=>{this.resetMaxListeners(),s(o)}),this.events.once("open",()=>{if(this.resetMaxListeners(),typeof this.isAvailable>"u")return s(new Error("HTTP connection is missing or invalid"));i()})})}this.url=t,this.registering=!0;try{if(!this.disableProviderPing){const e=Cu({id:1,jsonrpc:"2.0",method:"test",params:[]});await $1(t,Q1(K1({},J1),{body:e}))}this.onOpen()}catch(e){const i=this.parseError(e);throw this.events.emit("register_error",i),this.onClose(),i}}onOpen(){this.isAvailable=!0,this.registering=!1,this.events.emit("open")}onClose(){this.isAvailable=!1,this.registering=!1,this.events.emit("close")}onPayload(t){if(typeof t.data>"u")return;const e=typeof t.data=="string"?vg(t.data):t.data;this.events.emit("payload",e)}onError(t,e){const i=this.parseError(e),s=i.message||i.toString(),o=a0(t,s);this.events.emit("payload",o)}parseError(t,e=this.url){return k4(t,e,"HTTP")}resetMaxListeners(){this.events.getMaxListeners()>V1&&this.events.setMaxListeners(V1)}}const G1="error",Yx="wss://relay.walletconnect.com",Wx="wc",Xx="universal_provider",Y1=`${Wx}@2:${Xx}:`,Zx="https://rpc.walletconnect.com/v1/",bo="generic",fn={DEFAULT_CHAIN_CHANGED:"default_chain_changed"};var va=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Zu={exports:{}};/**
* @license
* Lodash <https://lodash.com/>
* Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
* Released under MIT license <https://lodash.com/license>
* Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
* Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
*/(function(r,t){(function(){var e,i="4.17.21",s=200,o="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",u="Expected a function",g="Invalid `variable` option passed into `_.template`",w="__lodash_hash_undefined__",A=500,S="__lodash_placeholder__",x=1,N=2,R=4,O=1,z=2,L=1,H=2,rt=4,ht=8,Z=16,et=32,at=64,ft=128,ct=256,mt=512,se=30,T="...",y=800,a=16,f=1,d=2,v=3,b=1/0,I=9007199254740991,_=17976931348623157e292,l=NaN,c=4294967295,M=c-1,J=c>>>1,K=[["ary",ft],["bind",L],["bindKey",H],["curry",ht],["curryRight",Z],["flip",mt],["partial",et],["partialRight",at],["rearg",ct]],m="[object Arguments]",D="[object Array]",q="[object AsyncFunction]",U="[object Boolean]",V="[object Date]",Q="[object DOMException]",Y="[object Error]",X="[object Function]",st="[object GeneratorFunction]",G="[object Map]",lt="[object Number]",At="[object Null]",Bt="[object Object]",de="[object Promise]",_t="[object Proxy]",Tt="[object RegExp]",Zt="[object Set]",pt="[object String]",Dt="[object Symbol]",ge="[object Undefined]",gt="[object WeakMap]",Ht="[object WeakSet]",ne="[object ArrayBuffer]",dt="[object DataView]",kt="[object Float32Array]",ae="[object Float64Array]",vt="[object Int8Array]",Ut="[object Int16Array]",he="[object Int32Array]",bt="[object Uint8Array]",zt="[object Uint8ClampedArray]",fe="[object Uint16Array]",yt="[object Uint32Array]",Kt=/\b__p \+= '';/g,me=/\b(__p \+=) '' \+/g,Mt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,$t=/&(?:amp|lt|gt|quot|#39);/g,le=/[&<>"']/g,Et=RegExp($t.source),Qt=RegExp(le.source),ve=/<%-([\s\S]+?)%>/g,It=/<%([\s\S]+?)%>/g,jt=/<%=([\s\S]+?)%>/g,be=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,St=/^\w*$/,Jt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,ce=/[\\^$.*+?()[\]{}|]/g,xt=RegExp(ce.source),Ft=/^\s+/,ye=/\s/,Pt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Vt=/\{\n\/\* \[wrapped with (.+)\] \*/,we=/,? & /,Nt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Gt=/[()=,{}\[\]\/\s]/,Ae=/\\(\\)?/g,Rt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Lt=/\w*$/,Le=/^[-+]0x[0-9a-f]+$/i,$e=/^0b[01]+$/i,je=/^\[object .+?Constructor\]$/,He=/^0o[0-7]+$/i,Ke=/^(?:0|[1-9]\d*)$/,Qe=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ar=/($^)/,ri=/['\n\r\u2028\u2029\\]/g,_r="\\ud800-\\udfff",ii="\\u0300-\\u036f",ni="\\ufe20-\\ufe2f",si="\\u20d0-\\u20ff",zr=ii+ni+si,Fr="\\u2700-\\u27bf",Lr="a-z\\xdf-\\xf6\\xf8-\\xff",oi="\\xac\\xb1\\xd7\\xf7",ai="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",hi="\\u2000-\\u206f",kn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",O0="A-Z\\xc0-\\xd6\\xd8-\\xde",B0="\\ufe0e\\ufe0f",T0=oi+ai+hi+kn,Cf="['’]",w2="["+_r+"]",q0="["+T0+"]",Ha="["+zr+"]",D0="\\d+",A2="["+Fr+"]",k0="["+Lr+"]",U0="[^"+_r+T0+D0+Fr+Lr+O0+"]",Of="\\ud83c[\\udffb-\\udfff]",_2="(?:"+Ha+"|"+Of+")",z0="[^"+_r+"]",Bf="(?:\\ud83c[\\udde6-\\uddff]){2}",Tf="[\\ud800-\\udbff][\\udc00-\\udfff]",Zs="["+O0+"]",F0="\\u200d",L0="(?:"+k0+"|"+U0+")",M2="(?:"+Zs+"|"+U0+")",$0="(?:"+Cf+"(?:d|ll|m|re|s|t|ve))?",j0="(?:"+Cf+"(?:D|LL|M|RE|S|T|VE))?",H0=_2+"?",K0="["+B0+"]?",E2="(?:"+F0+"(?:"+[z0,Bf,Tf].join("|")+")"+K0+H0+")*",I2="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",S2="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Q0=K0+H0+E2,x2="(?:"+[A2,Bf,Tf].join("|")+")"+Q0,P2="(?:"+[z0+Ha+"?",Ha,Bf,Tf,w2].join("|")+")",N2=RegExp(Cf,"g"),R2=RegExp(Ha,"g"),qf=RegExp(Of+"(?="+Of+")|"+P2+Q0,"g"),C2=RegExp([Zs+"?"+k0+"+"+$0+"(?="+[q0,Zs,"$"].join("|")+")",M2+"+"+j0+"(?="+[q0,Zs+L0,"$"].join("|")+")",Zs+"?"+L0+"+"+$0,Zs+"+"+j0,S2,I2,D0,x2].join("|"),"g"),O2=RegExp("["+F0+_r+zr+B0+"]"),B2=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,T2=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],q2=-1,Ue={};Ue[kt]=Ue[ae]=Ue[vt]=Ue[Ut]=Ue[he]=Ue[bt]=Ue[zt]=Ue[fe]=Ue[yt]=!0,Ue[m]=Ue[D]=Ue[ne]=Ue[U]=Ue[dt]=Ue[V]=Ue[Y]=Ue[X]=Ue[G]=Ue[lt]=Ue[Bt]=Ue[Tt]=Ue[Zt]=Ue[pt]=Ue[gt]=!1;var De={};De[m]=De[D]=De[ne]=De[dt]=De[U]=De[V]=De[kt]=De[ae]=De[vt]=De[Ut]=De[he]=De[G]=De[lt]=De[Bt]=De[Tt]=De[Zt]=De[pt]=De[Dt]=De[bt]=De[zt]=De[fe]=De[yt]=!0,De[Y]=De[X]=De[gt]=!1;var D2={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},k2={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},U2={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},z2={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},F2=parseFloat,L2=parseInt,J0=typeof va=="object"&&va&&va.Object===Object&&va,$2=typeof self=="object"&&self&&self.Object===Object&&self,dr=J0||$2||Function("return this")(),Df=t&&!t.nodeType&&t,xs=Df&&!0&&r&&!r.nodeType&&r,V0=xs&&xs.exports===Df,kf=V0&&J0.process,Ai=function(){try{var $=xs&&xs.require&&xs.require("util").types;return $||kf&&kf.binding&&kf.binding("util")}catch{}}(),G0=Ai&&Ai.isArrayBuffer,Y0=Ai&&Ai.isDate,W0=Ai&&Ai.isMap,X0=Ai&&Ai.isRegExp,Z0=Ai&&Ai.isSet,td=Ai&&Ai.isTypedArray;function fi($,tt,W){switch(W.length){case 0:return $.call(tt);case 1:return $.call(tt,W[0]);case 2:return $.call(tt,W[0],W[1]);case 3:return $.call(tt,W[0],W[1],W[2])}return $.apply(tt,W)}function j2($,tt,W,Ot){for(var te=-1,Re=$==null?0:$.length;++te<Re;){var er=$[te];tt(Ot,er,W(er),$)}return Ot}function _i($,tt){for(var W=-1,Ot=$==null?0:$.length;++W<Ot&&tt($[W],W,$)!==!1;);return $}function H2($,tt){for(var W=$==null?0:$.length;W--&&tt($[W],W,$)!==!1;);return $}function ed($,tt){for(var W=-1,Ot=$==null?0:$.length;++W<Ot;)if(!tt($[W],W,$))return!1;return!0}function hs($,tt){for(var W=-1,Ot=$==null?0:$.length,te=0,Re=[];++W<Ot;){var er=$[W];tt(er,W,$)&&(Re[te++]=er)}return Re}function Ka($,tt){var W=$==null?0:$.length;return!!W&&to($,tt,0)>-1}function Uf($,tt,W){for(var Ot=-1,te=$==null?0:$.length;++Ot<te;)if(W(tt,$[Ot]))return!0;return!1}function Fe($,tt){for(var W=-1,Ot=$==null?0:$.length,te=Array(Ot);++W<Ot;)te[W]=tt($[W],W,$);return te}function fs($,tt){for(var W=-1,Ot=tt.length,te=$.length;++W<Ot;)$[te+W]=tt[W];return $}function zf($,tt,W,Ot){var te=-1,Re=$==null?0:$.length;for(Ot&&Re&&(W=$[++te]);++te<Re;)W=tt(W,$[te],te,$);return W}function K2($,tt,W,Ot){var te=$==null?0:$.length;for(Ot&&te&&(W=$[--te]);te--;)W=tt(W,$[te],te,$);return W}function Ff($,tt){for(var W=-1,Ot=$==null?0:$.length;++W<Ot;)if(tt($[W],W,$))return!0;return!1}var Q2=Lf("length");function J2($){return $.split("")}function V2($){return $.match(Nt)||[]}function rd($,tt,W){var Ot;return W($,function(te,Re,er){if(tt(te,Re,er))return Ot=Re,!1}),Ot}function Qa($,tt,W,Ot){for(var te=$.length,Re=W+(Ot?1:-1);Ot?Re--:++Re<te;)if(tt($[Re],Re,$))return Re;return-1}function to($,tt,W){return tt===tt?ov($,tt,W):Qa($,id,W)}function G2($,tt,W,Ot){for(var te=W-1,Re=$.length;++te<Re;)if(Ot($[te],tt))return te;return-1}function id($){return $!==$}function nd($,tt){var W=$==null?0:$.length;return W?jf($,tt)/W:l}function Lf($){return function(tt){return tt==null?e:tt[$]}}function $f($){return function(tt){return $==null?e:$[tt]}}function sd($,tt,W,Ot,te){return te($,function(Re,er,qe){W=Ot?(Ot=!1,Re):tt(W,Re,er,qe)}),W}function Y2($,tt){var W=$.length;for($.sort(tt);W--;)$[W]=$[W].value;return $}function jf($,tt){for(var W,Ot=-1,te=$.length;++Ot<te;){var Re=tt($[Ot]);Re!==e&&(W=W===e?Re:W+Re)}return W}function Hf($,tt){for(var W=-1,Ot=Array($);++W<$;)Ot[W]=tt(W);return Ot}function W2($,tt){return Fe(tt,function(W){return[W,$[W]]})}function od($){return $&&$.slice(0,cd($)+1).replace(Ft,"")}function ci($){return function(tt){return $(tt)}}function Kf($,tt){return Fe(tt,function(W){return $[W]})}function Qo($,tt){return $.has(tt)}function ad($,tt){for(var W=-1,Ot=$.length;++W<Ot&&to(tt,$[W],0)>-1;);return W}function hd($,tt){for(var W=$.length;W--&&to(tt,$[W],0)>-1;);return W}function X2($,tt){for(var W=$.length,Ot=0;W--;)$[W]===tt&&++Ot;return Ot}var Z2=$f(D2),tv=$f(k2);function ev($){return"\\"+z2[$]}function rv($,tt){return $==null?e:$[tt]}function eo($){return O2.test($)}function iv($){return B2.test($)}function nv($){for(var tt,W=[];!(tt=$.next()).done;)W.push(tt.value);return W}function Qf($){var tt=-1,W=Array($.size);return $.forEach(function(Ot,te){W[++tt]=[te,Ot]}),W}function fd($,tt){return function(W){return $(tt(W))}}function cs($,tt){for(var W=-1,Ot=$.length,te=0,Re=[];++W<Ot;){var er=$[W];(er===tt||er===S)&&($[W]=S,Re[te++]=W)}return Re}function Ja($){var tt=-1,W=Array($.size);return $.forEach(function(Ot){W[++tt]=Ot}),W}function sv($){var tt=-1,W=Array($.size);return $.forEach(function(Ot){W[++tt]=[Ot,Ot]}),W}function ov($,tt,W){for(var Ot=W-1,te=$.length;++Ot<te;)if($[Ot]===tt)return Ot;return-1}function av($,tt,W){for(var Ot=W+1;Ot--;)if($[Ot]===tt)return Ot;return Ot}function ro($){return eo($)?fv($):Q2($)}function ji($){return eo($)?cv($):J2($)}function cd($){for(var tt=$.length;tt--&&ye.test($.charAt(tt)););return tt}var hv=$f(U2);function fv($){for(var tt=qf.lastIndex=0;qf.test($);)++tt;return tt}function cv($){return $.match(qf)||[]}function uv($){return $.match(C2)||[]}var dv=function $(tt){tt=tt==null?dr:io.defaults(dr.Object(),tt,io.pick(dr,T2));var W=tt.Array,Ot=tt.Date,te=tt.Error,Re=tt.Function,er=tt.Math,qe=tt.Object,Jf=tt.RegExp,lv=tt.String,Mi=tt.TypeError,Va=W.prototype,pv=Re.prototype,no=qe.prototype,Ga=tt["__core-js_shared__"],Ya=pv.toString,Be=no.hasOwnProperty,gv=0,ud=function(){var n=/[^.]+$/.exec(Ga&&Ga.keys&&Ga.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),Wa=no.toString,mv=Ya.call(qe),vv=dr._,bv=Jf("^"+Ya.call(Be).replace(ce,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Xa=V0?tt.Buffer:e,us=tt.Symbol,Za=tt.Uint8Array,dd=Xa?Xa.allocUnsafe:e,th=fd(qe.getPrototypeOf,qe),ld=qe.create,pd=no.propertyIsEnumerable,eh=Va.splice,gd=us?us.isConcatSpreadable:e,Jo=us?us.iterator:e,Ps=us?us.toStringTag:e,rh=function(){try{var n=Bs(qe,"defineProperty");return n({},"",{}),n}catch{}}(),yv=tt.clearTimeout!==dr.clearTimeout&&tt.clearTimeout,wv=Ot&&Ot.now!==dr.Date.now&&Ot.now,Av=tt.setTimeout!==dr.setTimeout&&tt.setTimeout,ih=er.ceil,nh=er.floor,Vf=qe.getOwnPropertySymbols,_v=Xa?Xa.isBuffer:e,md=tt.isFinite,Mv=Va.join,Ev=fd(qe.keys,qe),rr=er.max,Mr=er.min,Iv=Ot.now,Sv=tt.parseInt,vd=er.random,xv=Va.reverse,Gf=Bs(tt,"DataView"),Vo=Bs(tt,"Map"),Yf=Bs(tt,"Promise"),so=Bs(tt,"Set"),Go=Bs(tt,"WeakMap"),Yo=Bs(qe,"create"),sh=Go&&new Go,oo={},Pv=Ts(Gf),Nv=Ts(Vo),Rv=Ts(Yf),Cv=Ts(so),Ov=Ts(Go),oh=us?us.prototype:e,Wo=oh?oh.valueOf:e,bd=oh?oh.toString:e;function C(n){if(Ve(n)&&!ee(n)&&!(n instanceof Ee)){if(n instanceof Ei)return n;if(Be.call(n,"__wrapped__"))return yl(n)}return new Ei(n)}var ao=function(){function n(){}return function(h){if(!Je(h))return{};if(ld)return ld(h);n.prototype=h;var p=new n;return n.prototype=e,p}}();function ah(){}function Ei(n,h){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!h,this.__index__=0,this.__values__=e}C.templateSettings={escape:ve,evaluate:It,interpolate:jt,variable:"",imports:{_:C}},C.prototype=ah.prototype,C.prototype.constructor=C,Ei.prototype=ao(ah.prototype),Ei.prototype.constructor=Ei;function Ee(n){this.__wrapped__=n,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=c,this.__views__=[]}function Bv(){var n=new Ee(this.__wrapped__);return n.__actions__=$r(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=$r(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=$r(this.__views__),n}function Tv(){if(this.__filtered__){var n=new Ee(this);n.__dir__=-1,n.__filtered__=!0}else n=this.clone(),n.__dir__*=-1;return n}function qv(){var n=this.__wrapped__.value(),h=this.__dir__,p=ee(n),E=h<0,P=p?n.length:0,B=Jb(0,P,this.__views__),k=B.start,F=B.end,j=F-k,it=E?F:k-1,nt=this.__iteratees__,ot=nt.length,wt=0,qt=Mr(j,this.__takeCount__);if(!p||!E&&P==j&&qt==j)return $d(n,this.__actions__);var Wt=[];t:for(;j--&&wt<qt;){it+=h;for(var ue=-1,Xt=n[it];++ue<ot;){var _e=nt[ue],Ne=_e.iteratee,li=_e.type,Rr=Ne(Xt);if(li==d)Xt=Rr;else if(!Rr){if(li==f)continue t;break t}}Wt[wt++]=Xt}return Wt}Ee.prototype=ao(ah.prototype),Ee.prototype.constructor=Ee;function Ns(n){var h=-1,p=n==null?0:n.length;for(this.clear();++h<p;){var E=n[h];this.set(E[0],E[1])}}function Dv(){this.__data__=Yo?Yo(null):{},this.size=0}function kv(n){var h=this.has(n)&&delete this.__data__[n];return this.size-=h?1:0,h}function Uv(n){var h=this.__data__;if(Yo){var p=h[n];return p===w?e:p}return Be.call(h,n)?h[n]:e}function zv(n){var h=this.__data__;return Yo?h[n]!==e:Be.call(h,n)}function Fv(n,h){var p=this.__data__;return this.size+=this.has(n)?0:1,p[n]=Yo&&h===e?w:h,this}Ns.prototype.clear=Dv,Ns.prototype.delete=kv,Ns.prototype.get=Uv,Ns.prototype.has=zv,Ns.prototype.set=Fv;function Un(n){var h=-1,p=n==null?0:n.length;for(this.clear();++h<p;){var E=n[h];this.set(E[0],E[1])}}function Lv(){this.__data__=[],this.size=0}function $v(n){var h=this.__data__,p=hh(h,n);if(p<0)return!1;var E=h.length-1;return p==E?h.pop():eh.call(h,p,1),--this.size,!0}function jv(n){var h=this.__data__,p=hh(h,n);return p<0?e:h[p][1]}function Hv(n){return hh(this.__data__,n)>-1}function Kv(n,h){var p=this.__data__,E=hh(p,n);return E<0?(++this.size,p.push([n,h])):p[E][1]=h,this}Un.prototype.clear=Lv,Un.prototype.delete=$v,Un.prototype.get=jv,Un.prototype.has=Hv,Un.prototype.set=Kv;function zn(n){var h=-1,p=n==null?0:n.length;for(this.clear();++h<p;){var E=n[h];this.set(E[0],E[1])}}function Qv(){this.size=0,this.__data__={hash:new Ns,map:new(Vo||Un),string:new Ns}}function Jv(n){var h=wh(this,n).delete(n);return this.size-=h?1:0,h}function Vv(n){return wh(this,n).get(n)}function Gv(n){return wh(this,n).has(n)}function Yv(n,h){var p=wh(this,n),E=p.size;return p.set(n,h),this.size+=p.size==E?0:1,this}zn.prototype.clear=Qv,zn.prototype.delete=Jv,zn.prototype.get=Vv,zn.prototype.has=Gv,zn.prototype.set=Yv;function Rs(n){var h=-1,p=n==null?0:n.length;for(this.__data__=new zn;++h<p;)this.add(n[h])}function Wv(n){return this.__data__.set(n,w),this}function Xv(n){return this.__data__.has(n)}Rs.prototype.add=Rs.prototype.push=Wv,Rs.prototype.has=Xv;function Hi(n){var h=this.__data__=new Un(n);this.size=h.size}function Zv(){this.__data__=new Un,this.size=0}function tb(n){var h=this.__data__,p=h.delete(n);return this.size=h.size,p}function eb(n){return this.__data__.get(n)}function rb(n){return this.__data__.has(n)}function ib(n,h){var p=this.__data__;if(p instanceof Un){var E=p.__data__;if(!Vo||E.length<s-1)return E.push([n,h]),this.size=++p.size,this;p=this.__data__=new zn(E)}return p.set(n,h),this.size=p.size,this}Hi.prototype.clear=Zv,Hi.prototype.delete=tb,Hi.prototype.get=eb,Hi.prototype.has=rb,Hi.prototype.set=ib;function yd(n,h){var p=ee(n),E=!p&&qs(n),P=!p&&!E&&ms(n),B=!p&&!E&&!P&&uo(n),k=p||E||P||B,F=k?Hf(n.length,lv):[],j=F.length;for(var it in n)(h||Be.call(n,it))&&!(k&&(it=="length"||P&&(it=="offset"||it=="parent")||B&&(it=="buffer"||it=="byteLength"||it=="byteOffset")||jn(it,j)))&&F.push(it);return F}function wd(n){var h=n.length;return h?n[ac(0,h-1)]:e}function nb(n,h){return Ah($r(n),Cs(h,0,n.length))}function sb(n){return Ah($r(n))}function Wf(n,h,p){(p!==e&&!Ki(n[h],p)||p===e&&!(h in n))&&Fn(n,h,p)}function Xo(n,h,p){var E=n[h];(!(Be.call(n,h)&&Ki(E,p))||p===e&&!(h in n))&&Fn(n,h,p)}function hh(n,h){for(var p=n.length;p--;)if(Ki(n[p][0],h))return p;return-1}function ob(n,h,p,E){return ds(n,function(P,B,k){h(E,P,p(P),k)}),E}function Ad(n,h){return n&&un(h,or(h),n)}function ab(n,h){return n&&un(h,Hr(h),n)}function Fn(n,h,p){h=="__proto__"&&rh?rh(n,h,{configurable:!0,enumerable:!0,value:p,writable:!0}):n[h]=p}function Xf(n,h){for(var p=-1,E=h.length,P=W(E),B=n==null;++p<E;)P[p]=B?e:Oc(n,h[p]);return P}function Cs(n,h,p){return n===n&&(p!==e&&(n=n<=p?n:p),h!==e&&(n=n>=h?n:h)),n}function Ii(n,h,p,E,P,B){var k,F=h&x,j=h&N,it=h&R;if(p&&(k=P?p(n,E,P,B):p(n)),k!==e)return k;if(!Je(n))return n;var nt=ee(n);if(nt){if(k=Gb(n),!F)return $r(n,k)}else{var ot=Er(n),wt=ot==X||ot==st;if(ms(n))return Kd(n,F);if(ot==Bt||ot==m||wt&&!P){if(k=j||wt?{}:cl(n),!F)return j?Ub(n,ab(k,n)):kb(n,Ad(k,n))}else{if(!De[ot])return P?n:{};k=Yb(n,ot,F)}}B||(B=new Hi);var qt=B.get(n);if(qt)return qt;B.set(n,k),zl(n)?n.forEach(function(Xt){k.add(Ii(Xt,h,p,Xt,n,B))}):kl(n)&&n.forEach(function(Xt,_e){k.set(_e,Ii(Xt,h,p,_e,n,B))});var Wt=it?j?bc:vc:j?Hr:or,ue=nt?e:Wt(n);return _i(ue||n,function(Xt,_e){ue&&(_e=Xt,Xt=n[_e]),Xo(k,_e,Ii(Xt,h,p,_e,n,B))}),k}function hb(n){var h=or(n);return function(p){return _d(p,n,h)}}function _d(n,h,p){var E=p.length;if(n==null)return!E;for(n=qe(n);E--;){var P=p[E],B=h[P],k=n[P];if(k===e&&!(P in n)||!B(k))return!1}return!0}function Md(n,h,p){if(typeof n!="function")throw new Mi(u);return sa(function(){n.apply(e,p)},h)}function Zo(n,h,p,E){var P=-1,B=Ka,k=!0,F=n.length,j=[],it=h.length;if(!F)return j;p&&(h=Fe(h,ci(p))),E?(B=Uf,k=!1):h.length>=s&&(B=Qo,k=!1,h=new Rs(h));t:for(;++P<F;){var nt=n[P],ot=p==null?nt:p(nt);if(nt=E||nt!==0?nt:0,k&&ot===ot){for(var wt=it;wt--;)if(h[wt]===ot)continue t;j.push(nt)}else B(h,ot,E)||j.push(nt)}return j}var ds=Yd(cn),Ed=Yd(tc,!0);function fb(n,h){var p=!0;return ds(n,function(E,P,B){return p=!!h(E,P,B),p}),p}function fh(n,h,p){for(var E=-1,P=n.length;++E<P;){var B=n[E],k=h(B);if(k!=null&&(F===e?k===k&&!di(k):p(k,F)))var F=k,j=B}return j}function cb(n,h,p,E){var P=n.length;for(p=oe(p),p<0&&(p=-p>P?0:P+p),E=E===e||E>P?P:oe(E),E<0&&(E+=P),E=p>E?0:Ll(E);p<E;)n[p++]=h;return n}function Id(n,h){var p=[];return ds(n,function(E,P,B){h(E,P,B)&&p.push(E)}),p}function lr(n,h,p,E,P){var B=-1,k=n.length;for(p||(p=Xb),P||(P=[]);++B<k;){var F=n[B];h>0&&p(F)?h>1?lr(F,h-1,p,E,P):fs(P,F):E||(P[P.length]=F)}return P}var Zf=Wd(),Sd=Wd(!0);function cn(n,h){return n&&Zf(n,h,or)}function tc(n,h){return n&&Sd(n,h,or)}function ch(n,h){return hs(h,function(p){return Hn(n[p])})}function Os(n,h){h=ps(h,n);for(var p=0,E=h.length;n!=null&&p<E;)n=n[dn(h[p++])];return p&&p==E?n:e}function xd(n,h,p){var E=h(n);return ee(n)?E:fs(E,p(n))}function Pr(n){return n==null?n===e?ge:At:Ps&&Ps in qe(n)?Qb(n):s3(n)}function ec(n,h){return n>h}function ub(n,h){return n!=null&&Be.call(n,h)}function db(n,h){return n!=null&&h in qe(n)}function lb(n,h,p){return n>=Mr(h,p)&&n<rr(h,p)}function rc(n,h,p){for(var E=p?Uf:Ka,P=n[0].length,B=n.length,k=B,F=W(B),j=1/0,it=[];k--;){var nt=n[k];k&&h&&(nt=Fe(nt,ci(h))),j=Mr(nt.length,j),F[k]=!p&&(h||P>=120&&nt.length>=120)?new Rs(k&&nt):e}nt=n[0];var ot=-1,wt=F[0];t:for(;++ot<P&&it.length<j;){var qt=nt[ot],Wt=h?h(qt):qt;if(qt=p||qt!==0?qt:0,!(wt?Qo(wt,Wt):E(it,Wt,p))){for(k=B;--k;){var ue=F[k];if(!(ue?Qo(ue,Wt):E(n[k],Wt,p)))continue t}wt&&wt.push(Wt),it.push(qt)}}return it}function pb(n,h,p,E){return cn(n,function(P,B,k){h(E,p(P),B,k)}),E}function ta(n,h,p){h=ps(h,n),n=pl(n,h);var E=n==null?n:n[dn(xi(h))];return E==null?e:fi(E,n,p)}function Pd(n){return Ve(n)&&Pr(n)==m}function gb(n){return Ve(n)&&Pr(n)==ne}function mb(n){return Ve(n)&&Pr(n)==V}function ea(n,h,p,E,P){return n===h?!0:n==null||h==null||!Ve(n)&&!Ve(h)?n!==n&&h!==h:vb(n,h,p,E,ea,P)}function vb(n,h,p,E,P,B){var k=ee(n),F=ee(h),j=k?D:Er(n),it=F?D:Er(h);j=j==m?Bt:j,it=it==m?Bt:it;var nt=j==Bt,ot=it==Bt,wt=j==it;if(wt&&ms(n)){if(!ms(h))return!1;k=!0,nt=!1}if(wt&&!nt)return B||(B=new Hi),k||uo(n)?al(n,h,p,E,P,B):Hb(n,h,j,p,E,P,B);if(!(p&O)){var qt=nt&&Be.call(n,"__wrapped__"),Wt=ot&&Be.call(h,"__wrapped__");if(qt||Wt){var ue=qt?n.value():n,Xt=Wt?h.value():h;return B||(B=new Hi),P(ue,Xt,p,E,B)}}return wt?(B||(B=new Hi),Kb(n,h,p,E,P,B)):!1}function bb(n){return Ve(n)&&Er(n)==G}function ic(n,h,p,E){var P=p.length,B=P,k=!E;if(n==null)return!B;for(n=qe(n);P--;){var F=p[P];if(k&&F[2]?F[1]!==n[F[0]]:!(F[0]in n))return!1}for(;++P<B;){F=p[P];var j=F[0],it=n[j],nt=F[1];if(k&&F[2]){if(it===e&&!(j in n))return!1}else{var ot=new Hi;if(E)var wt=E(it,nt,j,n,h,ot);if(!(wt===e?ea(nt,it,O|z,E,ot):wt))return!1}}return!0}function Nd(n){if(!Je(n)||t3(n))return!1;var h=Hn(n)?bv:je;return h.test(Ts(n))}function yb(n){return Ve(n)&&Pr(n)==Tt}function wb(n){return Ve(n)&&Er(n)==Zt}function Ab(n){return Ve(n)&&xh(n.length)&&!!Ue[Pr(n)]}function Rd(n){return typeof n=="function"?n:n==null?Kr:typeof n=="object"?ee(n)?Bd(n[0],n[1]):Od(n):Xl(n)}function nc(n){if(!na(n))return Ev(n);var h=[];for(var p in qe(n))Be.call(n,p)&&p!="constructor"&&h.push(p);return h}function _b(n){if(!Je(n))return n3(n);var h=na(n),p=[];for(var E in n)E=="constructor"&&(h||!Be.call(n,E))||p.push(E);return p}function sc(n,h){return n<h}function Cd(n,h){var p=-1,E=jr(n)?W(n.length):[];return ds(n,function(P,B,k){E[++p]=h(P,B,k)}),E}function Od(n){var h=wc(n);return h.length==1&&h[0][2]?dl(h[0][0],h[0][1]):function(p){return p===n||ic(p,n,h)}}function Bd(n,h){return _c(n)&&ul(h)?dl(dn(n),h):function(p){var E=Oc(p,n);return E===e&&E===h?Bc(p,n):ea(h,E,O|z)}}function uh(n,h,p,E,P){n!==h&&Zf(h,function(B,k){if(P||(P=new Hi),Je(B))Mb(n,h,k,p,uh,E,P);else{var F=E?E(Ec(n,k),B,k+"",n,h,P):e;F===e&&(F=B),Wf(n,k,F)}},Hr)}function Mb(n,h,p,E,P,B,k){var F=Ec(n,p),j=Ec(h,p),it=k.get(j);if(it){Wf(n,p,it);return}var nt=B?B(F,j,p+"",n,h,k):e,ot=nt===e;if(ot){var wt=ee(j),qt=!wt&&ms(j),Wt=!wt&&!qt&&uo(j);nt=j,wt||qt||Wt?ee(F)?nt=F:We(F)?nt=$r(F):qt?(ot=!1,nt=Kd(j,!0)):Wt?(ot=!1,nt=Qd(j,!0)):nt=[]:oa(j)||qs(j)?(nt=F,qs(F)?nt=$l(F):(!Je(F)||Hn(F))&&(nt=cl(j))):ot=!1}ot&&(k.set(j,nt),P(nt,j,E,B,k),k.delete(j)),Wf(n,p,nt)}function Td(n,h){var p=n.length;if(p)return h+=h<0?p:0,jn(h,p)?n[h]:e}function qd(n,h,p){h.length?h=Fe(h,function(B){return ee(B)?function(k){return Os(k,B.length===1?B[0]:B)}:B}):h=[Kr];var E=-1;h=Fe(h,ci(Yt()));var P=Cd(n,function(B,k,F){var j=Fe(h,function(it){return it(B)});return{criteria:j,index:++E,value:B}});return Y2(P,function(B,k){return Db(B,k,p)})}function Eb(n,h){return Dd(n,h,function(p,E){return Bc(n,E)})}function Dd(n,h,p){for(var E=-1,P=h.length,B={};++E<P;){var k=h[E],F=Os(n,k);p(F,k)&&ra(B,ps(k,n),F)}return B}function Ib(n){return function(h){return Os(h,n)}}function oc(n,h,p,E){var P=E?G2:to,B=-1,k=h.length,F=n;for(n===h&&(h=$r(h)),p&&(F=Fe(n,ci(p)));++B<k;)for(var j=0,it=h[B],nt=p?p(it):it;(j=P(F,nt,j,E))>-1;)F!==n&&eh.call(F,j,1),eh.call(n,j,1);return n}function kd(n,h){for(var p=n?h.length:0,E=p-1;p--;){var P=h[p];if(p==E||P!==B){var B=P;jn(P)?eh.call(n,P,1):cc(n,P)}}return n}function ac(n,h){return n+nh(vd()*(h-n+1))}function Sb(n,h,p,E){for(var P=-1,B=rr(ih((h-n)/(p||1)),0),k=W(B);B--;)k[E?B:++P]=n,n+=p;return k}function hc(n,h){var p="";if(!n||h<1||h>I)return p;do h%2&&(p+=n),h=nh(h/2),h&&(n+=n);while(h);return p}function pe(n,h){return Ic(ll(n,h,Kr),n+"")}function xb(n){return wd(lo(n))}function Pb(n,h){var p=lo(n);return Ah(p,Cs(h,0,p.length))}function ra(n,h,p,E){if(!Je(n))return n;h=ps(h,n);for(var P=-1,B=h.length,k=B-1,F=n;F!=null&&++P<B;){var j=dn(h[P]),it=p;if(j==="__proto__"||j==="constructor"||j==="prototype")return n;if(P!=k){var nt=F[j];it=E?E(nt,j,F):e,it===e&&(it=Je(nt)?nt:jn(h[P+1])?[]:{})}Xo(F,j,it),F=F[j]}return n}var Ud=sh?function(n,h){return sh.set(n,h),n}:Kr,Nb=rh?function(n,h){return rh(n,"toString",{configurable:!0,enumerable:!1,value:qc(h),writable:!0})}:Kr;function Rb(n){return Ah(lo(n))}function Si(n,h,p){var E=-1,P=n.length;h<0&&(h=-h>P?0:P+h),p=p>P?P:p,p<0&&(p+=P),P=h>p?0:p-h>>>0,h>>>=0;for(var B=W(P);++E<P;)B[E]=n[E+h];return B}function Cb(n,h){var p;return ds(n,function(E,P,B){return p=h(E,P,B),!p}),!!p}function dh(n,h,p){var E=0,P=n==null?E:n.length;if(typeof h=="number"&&h===h&&P<=J){for(;E<P;){var B=E+P>>>1,k=n[B];k!==null&&!di(k)&&(p?k<=h:k<h)?E=B+1:P=B}return P}return fc(n,h,Kr,p)}function fc(n,h,p,E){var P=0,B=n==null?0:n.length;if(B===0)return 0;h=p(h);for(var k=h!==h,F=h===null,j=di(h),it=h===e;P<B;){var nt=nh((P+B)/2),ot=p(n[nt]),wt=ot!==e,qt=ot===null,Wt=ot===ot,ue=di(ot);if(k)var Xt=E||Wt;else it?Xt=Wt&&(E||wt):F?Xt=Wt&&wt&&(E||!qt):j?Xt=Wt&&wt&&!qt&&(E||!ue):qt||ue?Xt=!1:Xt=E?ot<=h:ot<h;Xt?P=nt+1:B=nt}return Mr(B,M)}function zd(n,h){for(var p=-1,E=n.length,P=0,B=[];++p<E;){var k=n[p],F=h?h(k):k;if(!p||!Ki(F,j)){var j=F;B[P++]=k===0?0:k}}return B}function Fd(n){return typeof n=="number"?n:di(n)?l:+n}function ui(n){if(typeof n=="string")return n;if(ee(n))return Fe(n,ui)+"";if(di(n))return bd?bd.call(n):"";var h=n+"";return h=="0"&&1/n==-b?"-0":h}function ls(n,h,p){var E=-1,P=Ka,B=n.length,k=!0,F=[],j=F;if(p)k=!1,P=Uf;else if(B>=s){var it=h?null:$b(n);if(it)return Ja(it);k=!1,P=Qo,j=new Rs}else j=h?[]:F;t:for(;++E<B;){var nt=n[E],ot=h?h(nt):nt;if(nt=p||nt!==0?nt:0,k&&ot===ot){for(var wt=j.length;wt--;)if(j[wt]===ot)continue t;h&&j.push(ot),F.push(nt)}else P(j,ot,p)||(j!==F&&j.push(ot),F.push(nt))}return F}function cc(n,h){return h=ps(h,n),n=pl(n,h),n==null||delete n[dn(xi(h))]}function Ld(n,h,p,E){return ra(n,h,p(Os(n,h)),E)}function lh(n,h,p,E){for(var P=n.length,B=E?P:-1;(E?B--:++B<P)&&h(n[B],B,n););return p?Si(n,E?0:B,E?B+1:P):Si(n,E?B+1:0,E?P:B)}function $d(n,h){var p=n;return p instanceof Ee&&(p=p.value()),zf(h,function(E,P){return P.func.apply(P.thisArg,fs([E],P.args))},p)}function uc(n,h,p){var E=n.length;if(E<2)return E?ls(n[0]):[];for(var P=-1,B=W(E);++P<E;)for(var k=n[P],F=-1;++F<E;)F!=P&&(B[P]=Zo(B[P]||k,n[F],h,p));return ls(lr(B,1),h,p)}function jd(n,h,p){for(var E=-1,P=n.length,B=h.length,k={};++E<P;){var F=E<B?h[E]:e;p(k,n[E],F)}return k}function dc(n){return We(n)?n:[]}function lc(n){return typeof n=="function"?n:Kr}function ps(n,h){return ee(n)?n:_c(n,h)?[n]:bl(Ce(n))}var Ob=pe;function gs(n,h,p){var E=n.length;return p=p===e?E:p,!h&&p>=E?n:Si(n,h,p)}var Hd=yv||function(n){return dr.clearTimeout(n)};function Kd(n,h){if(h)return n.slice();var p=n.length,E=dd?dd(p):new n.constructor(p);return n.copy(E),E}function pc(n){var h=new n.constructor(n.byteLength);return new Za(h).set(new Za(n)),h}function Bb(n,h){var p=h?pc(n.buffer):n.buffer;return new n.constructor(p,n.byteOffset,n.byteLength)}function Tb(n){var h=new n.constructor(n.source,Lt.exec(n));return h.lastIndex=n.lastIndex,h}function qb(n){return Wo?qe(Wo.call(n)):{}}function Qd(n,h){var p=h?pc(n.buffer):n.buffer;return new n.constructor(p,n.byteOffset,n.length)}function Jd(n,h){if(n!==h){var p=n!==e,E=n===null,P=n===n,B=di(n),k=h!==e,F=h===null,j=h===h,it=di(h);if(!F&&!it&&!B&&n>h||B&&k&&j&&!F&&!it||E&&k&&j||!p&&j||!P)return 1;if(!E&&!B&&!it&&n<h||it&&p&&P&&!E&&!B||F&&p&&P||!k&&P||!j)return-1}return 0}function Db(n,h,p){for(var E=-1,P=n.criteria,B=h.criteria,k=P.length,F=p.length;++E<k;){var j=Jd(P[E],B[E]);if(j){if(E>=F)return j;var it=p[E];return j*(it=="desc"?-1:1)}}return n.index-h.index}function Vd(n,h,p,E){for(var P=-1,B=n.length,k=p.length,F=-1,j=h.length,it=rr(B-k,0),nt=W(j+it),ot=!E;++F<j;)nt[F]=h[F];for(;++P<k;)(ot||P<B)&&(nt[p[P]]=n[P]);for(;it--;)nt[F++]=n[P++];return nt}function Gd(n,h,p,E){for(var P=-1,B=n.length,k=-1,F=p.length,j=-1,it=h.length,nt=rr(B-F,0),ot=W(nt+it),wt=!E;++P<nt;)ot[P]=n[P];for(var qt=P;++j<it;)ot[qt+j]=h[j];for(;++k<F;)(wt||P<B)&&(ot[qt+p[k]]=n[P++]);return ot}function $r(n,h){var p=-1,E=n.length;for(h||(h=W(E));++p<E;)h[p]=n[p];return h}function un(n,h,p,E){var P=!p;p||(p={});for(var B=-1,k=h.length;++B<k;){var F=h[B],j=E?E(p[F],n[F],F,p,n):e;j===e&&(j=n[F]),P?Fn(p,F,j):Xo(p,F,j)}return p}function kb(n,h){return un(n,Ac(n),h)}function Ub(n,h){return un(n,hl(n),h)}function ph(n,h){return function(p,E){var P=ee(p)?j2:ob,B=h?h():{};return P(p,n,Yt(E,2),B)}}function ho(n){return pe(function(h,p){var E=-1,P=p.length,B=P>1?p[P-1]:e,k=P>2?p[2]:e;for(B=n.length>3&&typeof B=="function"?(P--,B):e,k&&Nr(p[0],p[1],k)&&(B=P<3?e:B,P=1),h=qe(h);++E<P;){var F=p[E];F&&n(h,F,E,B)}return h})}function Yd(n,h){return function(p,E){if(p==null)return p;if(!jr(p))return n(p,E);for(var P=p.length,B=h?P:-1,k=qe(p);(h?B--:++B<P)&&E(k[B],B,k)!==!1;);return p}}function Wd(n){return function(h,p,E){for(var P=-1,B=qe(h),k=E(h),F=k.length;F--;){var j=k[n?F:++P];if(p(B[j],j,B)===!1)break}return h}}function zb(n,h,p){var E=h&L,P=ia(n);function B(){var k=this&&this!==dr&&this instanceof B?P:n;return k.apply(E?p:this,arguments)}return B}function Xd(n){return function(h){h=Ce(h);var p=eo(h)?ji(h):e,E=p?p[0]:h.charAt(0),P=p?gs(p,1).join(""):h.slice(1);return E[n]()+P}}function fo(n){return function(h){return zf(Yl(Gl(h).replace(N2,"")),n,"")}}function ia(n){return function(){var h=arguments;switch(h.length){case 0:return new n;case 1:return new n(h[0]);case 2:return new n(h[0],h[1]);case 3:return new n(h[0],h[1],h[2]);case 4:return new n(h[0],h[1],h[2],h[3]);case 5:return new n(h[0],h[1],h[2],h[3],h[4]);case 6:return new n(h[0],h[1],h[2],h[3],h[4],h[5]);case 7:return new n(h[0],h[1],h[2],h[3],h[4],h[5],h[6])}var p=ao(n.prototype),E=n.apply(p,h);return Je(E)?E:p}}function Fb(n,h,p){var E=ia(n);function P(){for(var B=arguments.length,k=W(B),F=B,j=co(P);F--;)k[F]=arguments[F];var it=B<3&&k[0]!==j&&k[B-1]!==j?[]:cs(k,j);if(B-=it.length,B<p)return il(n,h,gh,P.placeholder,e,k,it,e,e,p-B);var nt=this&&this!==dr&&this instanceof P?E:n;return fi(nt,this,k)}return P}function Zd(n){return function(h,p,E){var P=qe(h);if(!jr(h)){var B=Yt(p,3);h=or(h),p=function(F){return B(P[F],F,P)}}var k=n(h,p,E);return k>-1?P[B?h[k]:k]:e}}function tl(n){return $n(function(h){var p=h.length,E=p,P=Ei.prototype.thru;for(n&&h.reverse();E--;){var B=h[E];if(typeof B!="function")throw new Mi(u);if(P&&!k&&yh(B)=="wrapper")var k=new Ei([],!0)}for(E=k?E:p;++E<p;){B=h[E];var F=yh(B),j=F=="wrapper"?yc(B):e;j&&Mc(j[0])&&j[1]==(ft|ht|et|ct)&&!j[4].length&&j[9]==1?k=k[yh(j[0])].apply(k,j[3]):k=B.length==1&&Mc(B)?k[F]():k.thru(B)}return function(){var it=arguments,nt=it[0];if(k&&it.length==1&&ee(nt))return k.plant(nt).value();for(var ot=0,wt=p?h[ot].apply(this,it):nt;++ot<p;)wt=h[ot].call(this,wt);return wt}})}function gh(n,h,p,E,P,B,k,F,j,it){var nt=h&ft,ot=h&L,wt=h&H,qt=h&(ht|Z),Wt=h&mt,ue=wt?e:ia(n);function Xt(){for(var _e=arguments.length,Ne=W(_e),li=_e;li--;)Ne[li]=arguments[li];if(qt)var Rr=co(Xt),pi=X2(Ne,Rr);if(E&&(Ne=Vd(Ne,E,P,qt)),B&&(Ne=Gd(Ne,B,k,qt)),_e-=pi,qt&&_e<it){var Xe=cs(Ne,Rr);return il(n,h,gh,Xt.placeholder,p,Ne,Xe,F,j,it-_e)}var Qi=ot?p:this,Qn=wt?Qi[n]:n;return _e=Ne.length,F?Ne=o3(Ne,F):Wt&&_e>1&&Ne.reverse(),nt&&j<_e&&(Ne.length=j),this&&this!==dr&&this instanceof Xt&&(Qn=ue||ia(Qn)),Qn.apply(Qi,Ne)}return Xt}function el(n,h){return function(p,E){return pb(p,n,h(E),{})}}function mh(n,h){return function(p,E){var P;if(p===e&&E===e)return h;if(p!==e&&(P=p),E!==e){if(P===e)return E;typeof p=="string"||typeof E=="string"?(p=ui(p),E=ui(E)):(p=Fd(p),E=Fd(E)),P=n(p,E)}return P}}function gc(n){return $n(function(h){return h=Fe(h,ci(Yt())),pe(function(p){var E=this;return n(h,function(P){return fi(P,E,p)})})})}function vh(n,h){h=h===e?" ":ui(h);var p=h.length;if(p<2)return p?hc(h,n):h;var E=hc(h,ih(n/ro(h)));return eo(h)?gs(ji(E),0,n).join(""):E.slice(0,n)}function Lb(n,h,p,E){var P=h&L,B=ia(n);function k(){for(var F=-1,j=arguments.length,it=-1,nt=E.length,ot=W(nt+j),wt=this&&this!==dr&&this instanceof k?B:n;++it<nt;)ot[it]=E[it];for(;j--;)ot[it++]=arguments[++F];return fi(wt,P?p:this,ot)}return k}function rl(n){return function(h,p,E){return E&&typeof E!="number"&&Nr(h,p,E)&&(p=E=e),h=Kn(h),p===e?(p=h,h=0):p=Kn(p),E=E===e?h<p?1:-1:Kn(E),Sb(h,p,E,n)}}function bh(n){return function(h,p){return typeof h=="string"&&typeof p=="string"||(h=Pi(h),p=Pi(p)),n(h,p)}}function il(n,h,p,E,P,B,k,F,j,it){var nt=h&ht,ot=nt?k:e,wt=nt?e:k,qt=nt?B:e,Wt=nt?e:B;h|=nt?et:at,h&=~(nt?at:et),h&rt||(h&=~(L|H));var ue=[n,h,P,qt,ot,Wt,wt,F,j,it],Xt=p.apply(e,ue);return Mc(n)&&gl(Xt,ue),Xt.placeholder=E,ml(Xt,n,h)}function mc(n){var h=er[n];return function(p,E){if(p=Pi(p),E=E==null?0:Mr(oe(E),292),E&&md(p)){var P=(Ce(p)+"e").split("e"),B=h(P[0]+"e"+(+P[1]+E));return P=(Ce(B)+"e").split("e"),+(P[0]+"e"+(+P[1]-E))}return h(p)}}var $b=so&&1/Ja(new so([,-0]))[1]==b?function(n){return new so(n)}:Uc;function nl(n){return function(h){var p=Er(h);return p==G?Qf(h):p==Zt?sv(h):W2(h,n(h))}}function Ln(n,h,p,E,P,B,k,F){var j=h&H;if(!j&&typeof n!="function")throw new Mi(u);var it=E?E.length:0;if(it||(h&=~(et|at),E=P=e),k=k===e?k:rr(oe(k),0),F=F===e?F:oe(F),it-=P?P.length:0,h&at){var nt=E,ot=P;E=P=e}var wt=j?e:yc(n),qt=[n,h,p,E,P,nt,ot,B,k,F];if(wt&&i3(qt,wt),n=qt[0],h=qt[1],p=qt[2],E=qt[3],P=qt[4],F=qt[9]=qt[9]===e?j?0:n.length:rr(qt[9]-it,0),!F&&h&(ht|Z)&&(h&=~(ht|Z)),!h||h==L)var Wt=zb(n,h,p);else h==ht||h==Z?Wt=Fb(n,h,F):(h==et||h==(L|et))&&!P.length?Wt=Lb(n,h,p,E):Wt=gh.apply(e,qt);var ue=wt?Ud:gl;return ml(ue(Wt,qt),n,h)}function sl(n,h,p,E){return n===e||Ki(n,no[p])&&!Be.call(E,p)?h:n}function ol(n,h,p,E,P,B){return Je(n)&&Je(h)&&(B.set(h,n),uh(n,h,e,ol,B),B.delete(h)),n}function jb(n){return oa(n)?e:n}function al(n,h,p,E,P,B){var k=p&O,F=n.length,j=h.length;if(F!=j&&!(k&&j>F))return!1;var it=B.get(n),nt=B.get(h);if(it&&nt)return it==h&&nt==n;var ot=-1,wt=!0,qt=p&z?new Rs:e;for(B.set(n,h),B.set(h,n);++ot<F;){var Wt=n[ot],ue=h[ot];if(E)var Xt=k?E(ue,Wt,ot,h,n,B):E(Wt,ue,ot,n,h,B);if(Xt!==e){if(Xt)continue;wt=!1;break}if(qt){if(!Ff(h,function(_e,Ne){if(!Qo(qt,Ne)&&(Wt===_e||P(Wt,_e,p,E,B)))return qt.push(Ne)})){wt=!1;break}}else if(!(Wt===ue||P(Wt,ue,p,E,B))){wt=!1;break}}return B.delete(n),B.delete(h),wt}function Hb(n,h,p,E,P,B,k){switch(p){case dt:if(n.byteLength!=h.byteLength||n.byteOffset!=h.byteOffset)return!1;n=n.buffer,h=h.buffer;case ne:return!(n.byteLength!=h.byteLength||!B(new Za(n),new Za(h)));case U:case V:case lt:return Ki(+n,+h);case Y:return n.name==h.name&&n.message==h.message;case Tt:case pt:return n==h+"";case G:var F=Qf;case Zt:var j=E&O;if(F||(F=Ja),n.size!=h.size&&!j)return!1;var it=k.get(n);if(it)return it==h;E|=z,k.set(n,h);var nt=al(F(n),F(h),E,P,B,k);return k.delete(n),nt;case Dt:if(Wo)return Wo.call(n)==Wo.call(h)}return!1}function Kb(n,h,p,E,P,B){var k=p&O,F=vc(n),j=F.length,it=vc(h),nt=it.length;if(j!=nt&&!k)return!1;for(var ot=j;ot--;){var wt=F[ot];if(!(k?wt in h:Be.call(h,wt)))return!1}var qt=B.get(n),Wt=B.get(h);if(qt&&Wt)return qt==h&&Wt==n;var ue=!0;B.set(n,h),B.set(h,n);for(var Xt=k;++ot<j;){wt=F[ot];var _e=n[wt],Ne=h[wt];if(E)var li=k?E(Ne,_e,wt,h,n,B):E(_e,Ne,wt,n,h,B);if(!(li===e?_e===Ne||P(_e,Ne,p,E,B):li)){ue=!1;break}Xt||(Xt=wt=="constructor")}if(ue&&!Xt){var Rr=n.constructor,pi=h.constructor;Rr!=pi&&"constructor"in n&&"constructor"in h&&!(typeof Rr=="function"&&Rr instanceof Rr&&typeof pi=="function"&&pi instanceof pi)&&(ue=!1)}return B.delete(n),B.delete(h),ue}function $n(n){return Ic(ll(n,e,_l),n+"")}function vc(n){return xd(n,or,Ac)}function bc(n){return xd(n,Hr,hl)}var yc=sh?function(n){return sh.get(n)}:Uc;function yh(n){for(var h=n.name+"",p=oo[h],E=Be.call(oo,h)?p.length:0;E--;){var P=p[E],B=P.func;if(B==null||B==n)return P.name}return h}function co(n){var h=Be.call(C,"placeholder")?C:n;return h.placeholder}function Yt(){var n=C.iteratee||Dc;return n=n===Dc?Rd:n,arguments.length?n(arguments[0],arguments[1]):n}function wh(n,h){var p=n.__data__;return Zb(h)?p[typeof h=="string"?"string":"hash"]:p.map}function wc(n){for(var h=or(n),p=h.length;p--;){var E=h[p],P=n[E];h[p]=[E,P,ul(P)]}return h}function Bs(n,h){var p=rv(n,h);return Nd(p)?p:e}function Qb(n){var h=Be.call(n,Ps),p=n[Ps];try{n[Ps]=e;var E=!0}catch{}var P=Wa.call(n);return E&&(h?n[Ps]=p:delete n[Ps]),P}var Ac=Vf?function(n){return n==null?[]:(n=qe(n),hs(Vf(n),function(h){return pd.call(n,h)}))}:zc,hl=Vf?function(n){for(var h=[];n;)fs(h,Ac(n)),n=th(n);return h}:zc,Er=Pr;(Gf&&Er(new Gf(new ArrayBuffer(1)))!=dt||Vo&&Er(new Vo)!=G||Yf&&Er(Yf.resolve())!=de||so&&Er(new so)!=Zt||Go&&Er(new Go)!=gt)&&(Er=function(n){var h=Pr(n),p=h==Bt?n.constructor:e,E=p?Ts(p):"";if(E)switch(E){case Pv:return dt;case Nv:return G;case Rv:return de;case Cv:return Zt;case Ov:return gt}return h});function Jb(n,h,p){for(var E=-1,P=p.length;++E<P;){var B=p[E],k=B.size;switch(B.type){case"drop":n+=k;break;case"dropRight":h-=k;break;case"take":h=Mr(h,n+k);break;case"takeRight":n=rr(n,h-k);break}}return{start:n,end:h}}function Vb(n){var h=n.match(Vt);return h?h[1].split(we):[]}function fl(n,h,p){h=ps(h,n);for(var E=-1,P=h.length,B=!1;++E<P;){var k=dn(h[E]);if(!(B=n!=null&&p(n,k)))break;n=n[k]}return B||++E!=P?B:(P=n==null?0:n.length,!!P&&xh(P)&&jn(k,P)&&(ee(n)||qs(n)))}function Gb(n){var h=n.length,p=new n.constructor(h);return h&&typeof n[0]=="string"&&Be.call(n,"index")&&(p.index=n.index,p.input=n.input),p}function cl(n){return typeof n.constructor=="function"&&!na(n)?ao(th(n)):{}}function Yb(n,h,p){var E=n.constructor;switch(h){case ne:return pc(n);case U:case V:return new E(+n);case dt:return Bb(n,p);case kt:case ae:case vt:case Ut:case he:case bt:case zt:case fe:case yt:return Qd(n,p);case G:return new E;case lt:case pt:return new E(n);case Tt:return Tb(n);case Zt:return new E;case Dt:return qb(n)}}function Wb(n,h){var p=h.length;if(!p)return n;var E=p-1;return h[E]=(p>1?"& ":"")+h[E],h=h.join(p>2?", ":" "),n.replace(Pt,`{
/* [wrapped with `+h+`] */
`)}function Xb(n){return ee(n)||qs(n)||!!(gd&&n&&n[gd])}function jn(n,h){var p=typeof n;return h=h??I,!!h&&(p=="number"||p!="symbol"&&Ke.test(n))&&n>-1&&n%1==0&&n<h}function Nr(n,h,p){if(!Je(p))return!1;var E=typeof h;return(E=="number"?jr(p)&&jn(h,p.length):E=="string"&&h in p)?Ki(p[h],n):!1}function _c(n,h){if(ee(n))return!1;var p=typeof n;return p=="number"||p=="symbol"||p=="boolean"||n==null||di(n)?!0:St.test(n)||!be.test(n)||h!=null&&n in qe(h)}function Zb(n){var h=typeof n;return h=="string"||h=="number"||h=="symbol"||h=="boolean"?n!=="__proto__":n===null}function Mc(n){var h=yh(n),p=C[h];if(typeof p!="function"||!(h in Ee.prototype))return!1;if(n===p)return!0;var E=yc(p);return!!E&&n===E[0]}function t3(n){return!!ud&&ud in n}var e3=Ga?Hn:Fc;function na(n){var h=n&&n.constructor,p=typeof h=="function"&&h.prototype||no;return n===p}function ul(n){return n===n&&!Je(n)}function dl(n,h){return function(p){return p==null?!1:p[n]===h&&(h!==e||n in qe(p))}}function r3(n){var h=Ih(n,function(E){return p.size===A&&p.clear(),E}),p=h.cache;return h}function i3(n,h){var p=n[1],E=h[1],P=p|E,B=P<(L|H|ft),k=E==ft&&p==ht||E==ft&&p==ct&&n[7].length<=h[8]||E==(ft|ct)&&h[7].length<=h[8]&&p==ht;if(!(B||k))return n;E&L&&(n[2]=h[2],P|=p&L?0:rt);var F=h[3];if(F){var j=n[3];n[3]=j?Vd(j,F,h[4]):F,n[4]=j?cs(n[3],S):h[4]}return F=h[5],F&&(j=n[5],n[5]=j?Gd(j,F,h[6]):F,n[6]=j?cs(n[5],S):h[6]),F=h[7],F&&(n[7]=F),E&ft&&(n[8]=n[8]==null?h[8]:Mr(n[8],h[8])),n[9]==null&&(n[9]=h[9]),n[0]=h[0],n[1]=P,n}function n3(n){var h=[];if(n!=null)for(var p in qe(n))h.push(p);return h}function s3(n){return Wa.call(n)}function ll(n,h,p){return h=rr(h===e?n.length-1:h,0),function(){for(var E=arguments,P=-1,B=rr(E.length-h,0),k=W(B);++P<B;)k[P]=E[h+P];P=-1;for(var F=W(h+1);++P<h;)F[P]=E[P];return F[h]=p(k),fi(n,this,F)}}function pl(n,h){return h.length<2?n:Os(n,Si(h,0,-1))}function o3(n,h){for(var p=n.length,E=Mr(h.length,p),P=$r(n);E--;){var B=h[E];n[E]=jn(B,p)?P[B]:e}return n}function Ec(n,h){if(!(h==="constructor"&&typeof n[h]=="function")&&h!="__proto__")return n[h]}var gl=vl(Ud),sa=Av||function(n,h){return dr.setTimeout(n,h)},Ic=vl(Nb);function ml(n,h,p){var E=h+"";return Ic(n,Wb(E,a3(Vb(E),p)))}function vl(n){var h=0,p=0;return function(){var E=Iv(),P=a-(E-p);if(p=E,P>0){if(++h>=y)return arguments[0]}else h=0;return n.apply(e,arguments)}}function Ah(n,h){var p=-1,E=n.length,P=E-1;for(h=h===e?E:h;++p<h;){var B=ac(p,P),k=n[B];n[B]=n[p],n[p]=k}return n.length=h,n}var bl=r3(function(n){var h=[];return n.charCodeAt(0)===46&&h.push(""),n.replace(Jt,function(p,E,P,B){h.push(P?B.replace(Ae,"$1"):E||p)}),h});function dn(n){if(typeof n=="string"||di(n))return n;var h=n+"";return h=="0"&&1/n==-b?"-0":h}function Ts(n){if(n!=null){try{return Ya.call(n)}catch{}try{return n+""}catch{}}return""}function a3(n,h){return _i(K,function(p){var E="_."+p[0];h&p[1]&&!Ka(n,E)&&n.push(E)}),n.sort()}function yl(n){if(n instanceof Ee)return n.clone();var h=new Ei(n.__wrapped__,n.__chain__);return h.__actions__=$r(n.__actions__),h.__index__=n.__index__,h.__values__=n.__values__,h}function h3(n,h,p){(p?Nr(n,h,p):h===e)?h=1:h=rr(oe(h),0);var E=n==null?0:n.length;if(!E||h<1)return[];for(var P=0,B=0,k=W(ih(E/h));P<E;)k[B++]=Si(n,P,P+=h);return k}function f3(n){for(var h=-1,p=n==null?0:n.length,E=0,P=[];++h<p;){var B=n[h];B&&(P[E++]=B)}return P}function c3(){var n=arguments.length;if(!n)return[];for(var h=W(n-1),p=arguments[0],E=n;E--;)h[E-1]=arguments[E];return fs(ee(p)?$r(p):[p],lr(h,1))}var u3=pe(function(n,h){return We(n)?Zo(n,lr(h,1,We,!0)):[]}),d3=pe(function(n,h){var p=xi(h);return We(p)&&(p=e),We(n)?Zo(n,lr(h,1,We,!0),Yt(p,2)):[]}),l3=pe(function(n,h){var p=xi(h);return We(p)&&(p=e),We(n)?Zo(n,lr(h,1,We,!0),e,p):[]});function p3(n,h,p){var E=n==null?0:n.length;return E?(h=p||h===e?1:oe(h),Si(n,h<0?0:h,E)):[]}function g3(n,h,p){var E=n==null?0:n.length;return E?(h=p||h===e?1:oe(h),h=E-h,Si(n,0,h<0?0:h)):[]}function m3(n,h){return n&&n.length?lh(n,Yt(h,3),!0,!0):[]}function v3(n,h){return n&&n.length?lh(n,Yt(h,3),!0):[]}function b3(n,h,p,E){var P=n==null?0:n.length;return P?(p&&typeof p!="number"&&Nr(n,h,p)&&(p=0,E=P),cb(n,h,p,E)):[]}function wl(n,h,p){var E=n==null?0:n.length;if(!E)return-1;var P=p==null?0:oe(p);return P<0&&(P=rr(E+P,0)),Qa(n,Yt(h,3),P)}function Al(n,h,p){var E=n==null?0:n.length;if(!E)return-1;var P=E-1;return p!==e&&(P=oe(p),P=p<0?rr(E+P,0):Mr(P,E-1)),Qa(n,Yt(h,3),P,!0)}function _l(n){var h=n==null?0:n.length;return h?lr(n,1):[]}function y3(n){var h=n==null?0:n.length;return h?lr(n,b):[]}function w3(n,h){var p=n==null?0:n.length;return p?(h=h===e?1:oe(h),lr(n,h)):[]}function A3(n){for(var h=-1,p=n==null?0:n.length,E={};++h<p;){var P=n[h];E[P[0]]=P[1]}return E}function Ml(n){return n&&n.length?n[0]:e}function _3(n,h,p){var E=n==null?0:n.length;if(!E)return-1;var P=p==null?0:oe(p);return P<0&&(P=rr(E+P,0)),to(n,h,P)}function M3(n){var h=n==null?0:n.length;return h?Si(n,0,-1):[]}var E3=pe(function(n){var h=Fe(n,dc);return h.length&&h[0]===n[0]?rc(h):[]}),I3=pe(function(n){var h=xi(n),p=Fe(n,dc);return h===xi(p)?h=e:p.pop(),p.length&&p[0]===n[0]?rc(p,Yt(h,2)):[]}),S3=pe(function(n){var h=xi(n),p=Fe(n,dc);return h=typeof h=="function"?h:e,h&&p.pop(),p.length&&p[0]===n[0]?rc(p,e,h):[]});function x3(n,h){return n==null?"":Mv.call(n,h)}function xi(n){var h=n==null?0:n.length;return h?n[h-1]:e}function P3(n,h,p){var E=n==null?0:n.length;if(!E)return-1;var P=E;return p!==e&&(P=oe(p),P=P<0?rr(E+P,0):Mr(P,E-1)),h===h?av(n,h,P):Qa(n,id,P,!0)}function N3(n,h){return n&&n.length?Td(n,oe(h)):e}var R3=pe(El);function El(n,h){return n&&n.length&&h&&h.length?oc(n,h):n}function C3(n,h,p){return n&&n.length&&h&&h.length?oc(n,h,Yt(p,2)):n}function O3(n,h,p){return n&&n.length&&h&&h.length?oc(n,h,e,p):n}var B3=$n(function(n,h){var p=n==null?0:n.length,E=Xf(n,h);return kd(n,Fe(h,function(P){return jn(P,p)?+P:P}).sort(Jd)),E});function T3(n,h){var p=[];if(!(n&&n.length))return p;var E=-1,P=[],B=n.length;for(h=Yt(h,3);++E<B;){var k=n[E];h(k,E,n)&&(p.push(k),P.push(E))}return kd(n,P),p}function Sc(n){return n==null?n:xv.call(n)}function q3(n,h,p){var E=n==null?0:n.length;return E?(p&&typeof p!="number"&&Nr(n,h,p)?(h=0,p=E):(h=h==null?0:oe(h),p=p===e?E:oe(p)),Si(n,h,p)):[]}function D3(n,h){return dh(n,h)}function k3(n,h,p){return fc(n,h,Yt(p,2))}function U3(n,h){var p=n==null?0:n.length;if(p){var E=dh(n,h);if(E<p&&Ki(n[E],h))return E}return-1}function z3(n,h){return dh(n,h,!0)}function F3(n,h,p){return fc(n,h,Yt(p,2),!0)}function L3(n,h){var p=n==null?0:n.length;if(p){var E=dh(n,h,!0)-1;if(Ki(n[E],h))return E}return-1}function $3(n){return n&&n.length?zd(n):[]}function j3(n,h){return n&&n.length?zd(n,Yt(h,2)):[]}function H3(n){var h=n==null?0:n.length;return h?Si(n,1,h):[]}function K3(n,h,p){return n&&n.length?(h=p||h===e?1:oe(h),Si(n,0,h<0?0:h)):[]}function Q3(n,h,p){var E=n==null?0:n.length;return E?(h=p||h===e?1:oe(h),h=E-h,Si(n,h<0?0:h,E)):[]}function J3(n,h){return n&&n.length?lh(n,Yt(h,3),!1,!0):[]}function V3(n,h){return n&&n.length?lh(n,Yt(h,3)):[]}var G3=pe(function(n){return ls(lr(n,1,We,!0))}),Y3=pe(function(n){var h=xi(n);return We(h)&&(h=e),ls(lr(n,1,We,!0),Yt(h,2))}),W3=pe(function(n){var h=xi(n);return h=typeof h=="function"?h:e,ls(lr(n,1,We,!0),e,h)});function X3(n){return n&&n.length?ls(n):[]}function Z3(n,h){return n&&n.length?ls(n,Yt(h,2)):[]}function t6(n,h){return h=typeof h=="function"?h:e,n&&n.length?ls(n,e,h):[]}function xc(n){if(!(n&&n.length))return[];var h=0;return n=hs(n,function(p){if(We(p))return h=rr(p.length,h),!0}),Hf(h,function(p){return Fe(n,Lf(p))})}function Il(n,h){if(!(n&&n.length))return[];var p=xc(n);return h==null?p:Fe(p,function(E){return fi(h,e,E)})}var e6=pe(function(n,h){return We(n)?Zo(n,h):[]}),r6=pe(function(n){return uc(hs(n,We))}),i6=pe(function(n){var h=xi(n);return We(h)&&(h=e),uc(hs(n,We),Yt(h,2))}),n6=pe(function(n){var h=xi(n);return h=typeof h=="function"?h:e,uc(hs(n,We),e,h)}),s6=pe(xc);function o6(n,h){return jd(n||[],h||[],Xo)}function a6(n,h){return jd(n||[],h||[],ra)}var h6=pe(function(n){var h=n.length,p=h>1?n[h-1]:e;return p=typeof p=="function"?(n.pop(),p):e,Il(n,p)});function Sl(n){var h=C(n);return h.__chain__=!0,h}function f6(n,h){return h(n),n}function _h(n,h){return h(n)}var c6=$n(function(n){var h=n.length,p=h?n[0]:0,E=this.__wrapped__,P=function(B){return Xf(B,n)};return h>1||this.__actions__.length||!(E instanceof Ee)||!jn(p)?this.thru(P):(E=E.slice(p,+p+(h?1:0)),E.__actions__.push({func:_h,args:[P],thisArg:e}),new Ei(E,this.__chain__).thru(function(B){return h&&!B.length&&B.push(e),B}))});function u6(){return Sl(this)}function d6(){return new Ei(this.value(),this.__chain__)}function l6(){this.__values__===e&&(this.__values__=Fl(this.value()));var n=this.__index__>=this.__values__.length,h=n?e:this.__values__[this.__index__++];return{done:n,value:h}}function p6(){return this}function g6(n){for(var h,p=this;p instanceof ah;){var E=yl(p);E.__index__=0,E.__values__=e,h?P.__wrapped__=E:h=E;var P=E;p=p.__wrapped__}return P.__wrapped__=n,h}function m6(){var n=this.__wrapped__;if(n instanceof Ee){var h=n;return this.__actions__.length&&(h=new Ee(this)),h=h.reverse(),h.__actions__.push({func:_h,args:[Sc],thisArg:e}),new Ei(h,this.__chain__)}return this.thru(Sc)}function v6(){return $d(this.__wrapped__,this.__actions__)}var b6=ph(function(n,h,p){Be.call(n,p)?++n[p]:Fn(n,p,1)});function y6(n,h,p){var E=ee(n)?ed:fb;return p&&Nr(n,h,p)&&(h=e),E(n,Yt(h,3))}function w6(n,h){var p=ee(n)?hs:Id;return p(n,Yt(h,3))}var A6=Zd(wl),_6=Zd(Al);function M6(n,h){return lr(Mh(n,h),1)}function E6(n,h){return lr(Mh(n,h),b)}function I6(n,h,p){return p=p===e?1:oe(p),lr(Mh(n,h),p)}function xl(n,h){var p=ee(n)?_i:ds;return p(n,Yt(h,3))}function Pl(n,h){var p=ee(n)?H2:Ed;return p(n,Yt(h,3))}var S6=ph(function(n,h,p){Be.call(n,p)?n[p].push(h):Fn(n,p,[h])});function x6(n,h,p,E){n=jr(n)?n:lo(n),p=p&&!E?oe(p):0;var P=n.length;return p<0&&(p=rr(P+p,0)),Ph(n)?p<=P&&n.indexOf(h,p)>-1:!!P&&to(n,h,p)>-1}var P6=pe(function(n,h,p){var E=-1,P=typeof h=="function",B=jr(n)?W(n.length):[];return ds(n,function(k){B[++E]=P?fi(h,k,p):ta(k,h,p)}),B}),N6=ph(function(n,h,p){Fn(n,p,h)});function Mh(n,h){var p=ee(n)?Fe:Cd;return p(n,Yt(h,3))}function R6(n,h,p,E){return n==null?[]:(ee(h)||(h=h==null?[]:[h]),p=E?e:p,ee(p)||(p=p==null?[]:[p]),qd(n,h,p))}var C6=ph(function(n,h,p){n[p?0:1].push(h)},function(){return[[],[]]});function O6(n,h,p){var E=ee(n)?zf:sd,P=arguments.length<3;return E(n,Yt(h,4),p,P,ds)}function B6(n,h,p){var E=ee(n)?K2:sd,P=arguments.length<3;return E(n,Yt(h,4),p,P,Ed)}function T6(n,h){var p=ee(n)?hs:Id;return p(n,Sh(Yt(h,3)))}function q6(n){var h=ee(n)?wd:xb;return h(n)}function D6(n,h,p){(p?Nr(n,h,p):h===e)?h=1:h=oe(h);var E=ee(n)?nb:Pb;return E(n,h)}function k6(n){var h=ee(n)?sb:Rb;return h(n)}function U6(n){if(n==null)return 0;if(jr(n))return Ph(n)?ro(n):n.length;var h=Er(n);return h==G||h==Zt?n.size:nc(n).length}function z6(n,h,p){var E=ee(n)?Ff:Cb;return p&&Nr(n,h,p)&&(h=e),E(n,Yt(h,3))}var F6=pe(function(n,h){if(n==null)return[];var p=h.length;return p>1&&Nr(n,h[0],h[1])?h=[]:p>2&&Nr(h[0],h[1],h[2])&&(h=[h[0]]),qd(n,lr(h,1),[])}),Eh=wv||function(){return dr.Date.now()};function L6(n,h){if(typeof h!="function")throw new Mi(u);return n=oe(n),function(){if(--n<1)return h.apply(this,arguments)}}function Nl(n,h,p){return h=p?e:h,h=n&&h==null?n.length:h,Ln(n,ft,e,e,e,e,h)}function Rl(n,h){var p;if(typeof h!="function")throw new Mi(u);return n=oe(n),function(){return--n>0&&(p=h.apply(this,arguments)),n<=1&&(h=e),p}}var Pc=pe(function(n,h,p){var E=L;if(p.length){var P=cs(p,co(Pc));E|=et}return Ln(n,E,h,p,P)}),Cl=pe(function(n,h,p){var E=L|H;if(p.length){var P=cs(p,co(Cl));E|=et}return Ln(h,E,n,p,P)});function Ol(n,h,p){h=p?e:h;var E=Ln(n,ht,e,e,e,e,e,h);return E.placeholder=Ol.placeholder,E}function Bl(n,h,p){h=p?e:h;var E=Ln(n,Z,e,e,e,e,e,h);return E.placeholder=Bl.placeholder,E}function Tl(n,h,p){var E,P,B,k,F,j,it=0,nt=!1,ot=!1,wt=!0;if(typeof n!="function")throw new Mi(u);h=Pi(h)||0,Je(p)&&(nt=!!p.leading,ot="maxWait"in p,B=ot?rr(Pi(p.maxWait)||0,h):B,wt="trailing"in p?!!p.trailing:wt);function qt(Xe){var Qi=E,Qn=P;return E=P=e,it=Xe,k=n.apply(Qn,Qi),k}function Wt(Xe){return it=Xe,F=sa(_e,h),nt?qt(Xe):k}function ue(Xe){var Qi=Xe-j,Qn=Xe-it,Zl=h-Qi;return ot?Mr(Zl,B-Qn):Zl}function Xt(Xe){var Qi=Xe-j,Qn=Xe-it;return j===e||Qi>=h||Qi<0||ot&&Qn>=B}function _e(){var Xe=Eh();if(Xt(Xe))return Ne(Xe);F=sa(_e,ue(Xe))}function Ne(Xe){return F=e,wt&&E?qt(Xe):(E=P=e,k)}function li(){F!==e&&Hd(F),it=0,E=j=P=F=e}function Rr(){return F===e?k:Ne(Eh())}function pi(){var Xe=Eh(),Qi=Xt(Xe);if(E=arguments,P=this,j=Xe,Qi){if(F===e)return Wt(j);if(ot)return Hd(F),F=sa(_e,h),qt(j)}return F===e&&(F=sa(_e,h)),k}return pi.cancel=li,pi.flush=Rr,pi}var $6=pe(function(n,h){return Md(n,1,h)}),j6=pe(function(n,h,p){return Md(n,Pi(h)||0,p)});function H6(n){return Ln(n,mt)}function Ih(n,h){if(typeof n!="function"||h!=null&&typeof h!="function")throw new Mi(u);var p=function(){var E=arguments,P=h?h.apply(this,E):E[0],B=p.cache;if(B.has(P))return B.get(P);var k=n.apply(this,E);return p.cache=B.set(P,k)||B,k};return p.cache=new(Ih.Cache||zn),p}Ih.Cache=zn;function Sh(n){if(typeof n!="function")throw new Mi(u);return function(){var h=arguments;switch(h.length){case 0:return!n.call(this);case 1:return!n.call(this,h[0]);case 2:return!n.call(this,h[0],h[1]);case 3:return!n.call(this,h[0],h[1],h[2])}return!n.apply(this,h)}}function K6(n){return Rl(2,n)}var Q6=Ob(function(n,h){h=h.length==1&&ee(h[0])?Fe(h[0],ci(Yt())):Fe(lr(h,1),ci(Yt()));var p=h.length;return pe(function(E){for(var P=-1,B=Mr(E.length,p);++P<B;)E[P]=h[P].call(this,E[P]);return fi(n,this,E)})}),Nc=pe(function(n,h){var p=cs(h,co(Nc));return Ln(n,et,e,h,p)}),ql=pe(function(n,h){var p=cs(h,co(ql));return Ln(n,at,e,h,p)}),J6=$n(function(n,h){return Ln(n,ct,e,e,e,h)});function V6(n,h){if(typeof n!="function")throw new Mi(u);return h=h===e?h:oe(h),pe(n,h)}function G6(n,h){if(typeof n!="function")throw new Mi(u);return h=h==null?0:rr(oe(h),0),pe(function(p){var E=p[h],P=gs(p,0,h);return E&&fs(P,E),fi(n,this,P)})}function Y6(n,h,p){var E=!0,P=!0;if(typeof n!="function")throw new Mi(u);return Je(p)&&(E="leading"in p?!!p.leading:E,P="trailing"in p?!!p.trailing:P),Tl(n,h,{leading:E,maxWait:h,trailing:P})}function W6(n){return Nl(n,1)}function X6(n,h){return Nc(lc(h),n)}function Z6(){if(!arguments.length)return[];var n=arguments[0];return ee(n)?n:[n]}function ty(n){return Ii(n,R)}function ey(n,h){return h=typeof h=="function"?h:e,Ii(n,R,h)}function ry(n){return Ii(n,x|R)}function iy(n,h){return h=typeof h=="function"?h:e,Ii(n,x|R,h)}function ny(n,h){return h==null||_d(n,h,or(h))}function Ki(n,h){return n===h||n!==n&&h!==h}var sy=bh(ec),oy=bh(function(n,h){return n>=h}),qs=Pd(function(){return arguments}())?Pd:function(n){return Ve(n)&&Be.call(n,"callee")&&!pd.call(n,"callee")},ee=W.isArray,ay=G0?ci(G0):gb;function jr(n){return n!=null&&xh(n.length)&&!Hn(n)}function We(n){return Ve(n)&&jr(n)}function hy(n){return n===!0||n===!1||Ve(n)&&Pr(n)==U}var ms=_v||Fc,fy=Y0?ci(Y0):mb;function cy(n){return Ve(n)&&n.nodeType===1&&!oa(n)}function uy(n){if(n==null)return!0;if(jr(n)&&(ee(n)||typeof n=="string"||typeof n.splice=="function"||ms(n)||uo(n)||qs(n)))return!n.length;var h=Er(n);if(h==G||h==Zt)return!n.size;if(na(n))return!nc(n).length;for(var p in n)if(Be.call(n,p))return!1;return!0}function dy(n,h){return ea(n,h)}function ly(n,h,p){p=typeof p=="function"?p:e;var E=p?p(n,h):e;return E===e?ea(n,h,e,p):!!E}function Rc(n){if(!Ve(n))return!1;var h=Pr(n);return h==Y||h==Q||typeof n.message=="string"&&typeof n.name=="string"&&!oa(n)}function py(n){return typeof n=="number"&&md(n)}function Hn(n){if(!Je(n))return!1;var h=Pr(n);return h==X||h==st||h==q||h==_t}function Dl(n){return typeof n=="number"&&n==oe(n)}function xh(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=I}function Je(n){var h=typeof n;return n!=null&&(h=="object"||h=="function")}function Ve(n){return n!=null&&typeof n=="object"}var kl=W0?ci(W0):bb;function gy(n,h){return n===h||ic(n,h,wc(h))}function my(n,h,p){return p=typeof p=="function"?p:e,ic(n,h,wc(h),p)}function vy(n){return Ul(n)&&n!=+n}function by(n){if(e3(n))throw new te(o);return Nd(n)}function yy(n){return n===null}function wy(n){return n==null}function Ul(n){return typeof n=="number"||Ve(n)&&Pr(n)==lt}function oa(n){if(!Ve(n)||Pr(n)!=Bt)return!1;var h=th(n);if(h===null)return!0;var p=Be.call(h,"constructor")&&h.constructor;return typeof p=="function"&&p instanceof p&&Ya.call(p)==mv}var Cc=X0?ci(X0):yb;function Ay(n){return Dl(n)&&n>=-I&&n<=I}var zl=Z0?ci(Z0):wb;function Ph(n){return typeof n=="string"||!ee(n)&&Ve(n)&&Pr(n)==pt}function di(n){return typeof n=="symbol"||Ve(n)&&Pr(n)==Dt}var uo=td?ci(td):Ab;function _y(n){return n===e}function My(n){return Ve(n)&&Er(n)==gt}function Ey(n){return Ve(n)&&Pr(n)==Ht}var Iy=bh(sc),Sy=bh(function(n,h){return n<=h});function Fl(n){if(!n)return[];if(jr(n))return Ph(n)?ji(n):$r(n);if(Jo&&n[Jo])return nv(n[Jo]());var h=Er(n),p=h==G?Qf:h==Zt?Ja:lo;return p(n)}function Kn(n){if(!n)return n===0?n:0;if(n=Pi(n),n===b||n===-b){var h=n<0?-1:1;return h*_}return n===n?n:0}function oe(n){var h=Kn(n),p=h%1;return h===h?p?h-p:h:0}function Ll(n){return n?Cs(oe(n),0,c):0}function Pi(n){if(typeof n=="number")return n;if(di(n))return l;if(Je(n)){var h=typeof n.valueOf=="function"?n.valueOf():n;n=Je(h)?h+"":h}if(typeof n!="string")return n===0?n:+n;n=od(n);var p=$e.test(n);return p||He.test(n)?L2(n.slice(2),p?2:8):Le.test(n)?l:+n}function $l(n){return un(n,Hr(n))}function xy(n){return n?Cs(oe(n),-I,I):n===0?n:0}function Ce(n){return n==null?"":ui(n)}var Py=ho(function(n,h){if(na(h)||jr(h)){un(h,or(h),n);return}for(var p in h)Be.call(h,p)&&Xo(n,p,h[p])}),jl=ho(function(n,h){un(h,Hr(h),n)}),Nh=ho(function(n,h,p,E){un(h,Hr(h),n,E)}),Ny=ho(function(n,h,p,E){un(h,or(h),n,E)}),Ry=$n(Xf);function Cy(n,h){var p=ao(n);return h==null?p:Ad(p,h)}var Oy=pe(function(n,h){n=qe(n);var p=-1,E=h.length,P=E>2?h[2]:e;for(P&&Nr(h[0],h[1],P)&&(E=1);++p<E;)for(var B=h[p],k=Hr(B),F=-1,j=k.length;++F<j;){var it=k[F],nt=n[it];(nt===e||Ki(nt,no[it])&&!Be.call(n,it))&&(n[it]=B[it])}return n}),By=pe(function(n){return n.push(e,ol),fi(Hl,e,n)});function Ty(n,h){return rd(n,Yt(h,3),cn)}function qy(n,h){return rd(n,Yt(h,3),tc)}function Dy(n,h){return n==null?n:Zf(n,Yt(h,3),Hr)}function ky(n,h){return n==null?n:Sd(n,Yt(h,3),Hr)}function Uy(n,h){return n&&cn(n,Yt(h,3))}function zy(n,h){return n&&tc(n,Yt(h,3))}function Fy(n){return n==null?[]:ch(n,or(n))}function Ly(n){return n==null?[]:ch(n,Hr(n))}function Oc(n,h,p){var E=n==null?e:Os(n,h);return E===e?p:E}function $y(n,h){return n!=null&&fl(n,h,ub)}function Bc(n,h){return n!=null&&fl(n,h,db)}var jy=el(function(n,h,p){h!=null&&typeof h.toString!="function"&&(h=Wa.call(h)),n[h]=p},qc(Kr)),Hy=el(function(n,h,p){h!=null&&typeof h.toString!="function"&&(h=Wa.call(h)),Be.call(n,h)?n[h].push(p):n[h]=[p]},Yt),Ky=pe(ta);function or(n){return jr(n)?yd(n):nc(n)}function Hr(n){return jr(n)?yd(n,!0):_b(n)}function Qy(n,h){var p={};return h=Yt(h,3),cn(n,function(E,P,B){Fn(p,h(E,P,B),E)}),p}function Jy(n,h){var p={};return h=Yt(h,3),cn(n,function(E,P,B){Fn(p,P,h(E,P,B))}),p}var Vy=ho(function(n,h,p){uh(n,h,p)}),Hl=ho(function(n,h,p,E){uh(n,h,p,E)}),Gy=$n(function(n,h){var p={};if(n==null)return p;var E=!1;h=Fe(h,function(B){return B=ps(B,n),E||(E=B.length>1),B}),un(n,bc(n),p),E&&(p=Ii(p,x|N|R,jb));for(var P=h.length;P--;)cc(p,h[P]);return p});function Yy(n,h){return Kl(n,Sh(Yt(h)))}var Wy=$n(function(n,h){return n==null?{}:Eb(n,h)});function Kl(n,h){if(n==null)return{};var p=Fe(bc(n),function(E){return[E]});return h=Yt(h),Dd(n,p,function(E,P){return h(E,P[0])})}function Xy(n,h,p){h=ps(h,n);var E=-1,P=h.length;for(P||(P=1,n=e);++E<P;){var B=n==null?e:n[dn(h[E])];B===e&&(E=P,B=p),n=Hn(B)?B.call(n):B}return n}function Zy(n,h,p){return n==null?n:ra(n,h,p)}function t8(n,h,p,E){return E=typeof E=="function"?E:e,n==null?n:ra(n,h,p,E)}var Ql=nl(or),Jl=nl(Hr);function e8(n,h,p){var E=ee(n),P=E||ms(n)||uo(n);if(h=Yt(h,4),p==null){var B=n&&n.constructor;P?p=E?new B:[]:Je(n)?p=Hn(B)?ao(th(n)):{}:p={}}return(P?_i:cn)(n,function(k,F,j){return h(p,k,F,j)}),p}function r8(n,h){return n==null?!0:cc(n,h)}function i8(n,h,p){return n==null?n:Ld(n,h,lc(p))}function n8(n,h,p,E){return E=typeof E=="function"?E:e,n==null?n:Ld(n,h,lc(p),E)}function lo(n){return n==null?[]:Kf(n,or(n))}function s8(n){return n==null?[]:Kf(n,Hr(n))}function o8(n,h,p){return p===e&&(p=h,h=e),p!==e&&(p=Pi(p),p=p===p?p:0),h!==e&&(h=Pi(h),h=h===h?h:0),Cs(Pi(n),h,p)}function a8(n,h,p){return h=Kn(h),p===e?(p=h,h=0):p=Kn(p),n=Pi(n),lb(n,h,p)}function h8(n,h,p){if(p&&typeof p!="boolean"&&Nr(n,h,p)&&(h=p=e),p===e&&(typeof h=="boolean"?(p=h,h=e):typeof n=="boolean"&&(p=n,n=e)),n===e&&h===e?(n=0,h=1):(n=Kn(n),h===e?(h=n,n=0):h=Kn(h)),n>h){var E=n;n=h,h=E}if(p||n%1||h%1){var P=vd();return Mr(n+P*(h-n+F2("1e-"+((P+"").length-1))),h)}return ac(n,h)}var f8=fo(function(n,h,p){return h=h.toLowerCase(),n+(p?Vl(h):h)});function Vl(n){return Tc(Ce(n).toLowerCase())}function Gl(n){return n=Ce(n),n&&n.replace(Qe,Z2).replace(R2,"")}function c8(n,h,p){n=Ce(n),h=ui(h);var E=n.length;p=p===e?E:Cs(oe(p),0,E);var P=p;return p-=h.length,p>=0&&n.slice(p,P)==h}function u8(n){return n=Ce(n),n&&Qt.test(n)?n.replace(le,tv):n}function d8(n){return n=Ce(n),n&&xt.test(n)?n.replace(ce,"\\$&"):n}var l8=fo(function(n,h,p){return n+(p?"-":"")+h.toLowerCase()}),p8=fo(function(n,h,p){return n+(p?" ":"")+h.toLowerCase()}),g8=Xd("toLowerCase");function m8(n,h,p){n=Ce(n),h=oe(h);var E=h?ro(n):0;if(!h||E>=h)return n;var P=(h-E)/2;return vh(nh(P),p)+n+vh(ih(P),p)}function v8(n,h,p){n=Ce(n),h=oe(h);var E=h?ro(n):0;return h&&E<h?n+vh(h-E,p):n}function b8(n,h,p){n=Ce(n),h=oe(h);var E=h?ro(n):0;return h&&E<h?vh(h-E,p)+n:n}function y8(n,h,p){return p||h==null?h=0:h&&(h=+h),Sv(Ce(n).replace(Ft,""),h||0)}function w8(n,h,p){return(p?Nr(n,h,p):h===e)?h=1:h=oe(h),hc(Ce(n),h)}function A8(){var n=arguments,h=Ce(n[0]);return n.length<3?h:h.replace(n[1],n[2])}var _8=fo(function(n,h,p){return n+(p?"_":"")+h.toLowerCase()});function M8(n,h,p){return p&&typeof p!="number"&&Nr(n,h,p)&&(h=p=e),p=p===e?c:p>>>0,p?(n=Ce(n),n&&(typeof h=="string"||h!=null&&!Cc(h))&&(h=ui(h),!h&&eo(n))?gs(ji(n),0,p):n.split(h,p)):[]}var E8=fo(function(n,h,p){return n+(p?" ":"")+Tc(h)});function I8(n,h,p){return n=Ce(n),p=p==null?0:Cs(oe(p),0,n.length),h=ui(h),n.slice(p,p+h.length)==h}function S8(n,h,p){var E=C.templateSettings;p&&Nr(n,h,p)&&(h=e),n=Ce(n),h=Nh({},h,E,sl);var P=Nh({},h.imports,E.imports,sl),B=or(P),k=Kf(P,B),F,j,it=0,nt=h.interpolate||Ar,ot="__p += '",wt=Jf((h.escape||Ar).source+"|"+nt.source+"|"+(nt===jt?Rt:Ar).source+"|"+(h.evaluate||Ar).source+"|$","g"),qt="//# sourceURL="+(Be.call(h,"sourceURL")?(h.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++q2+"]")+`
`;n.replace(wt,function(Xt,_e,Ne,li,Rr,pi){return Ne||(Ne=li),ot+=n.slice(it,pi).replace(ri,ev),_e&&(F=!0,ot+=`' +
__e(`+_e+`) +
'`),Rr&&(j=!0,ot+=`';
`+Rr+`;
__p += '`),Ne&&(ot+=`' +
((__t = (`+Ne+`)) == null ? '' : __t) +
'`),it=pi+Xt.length,Xt}),ot+=`';
`;var Wt=Be.call(h,"variable")&&h.variable;if(!Wt)ot=`with (obj) {
`+ot+`
}
`;else if(Gt.test(Wt))throw new te(g);ot=(j?ot.replace(Kt,""):ot).replace(me,"$1").replace(Mt,"$1;"),ot="function("+(Wt||"obj")+`) {
`+(Wt?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(F?", __e = _.escape":"")+(j?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ot+`return __p
}`;var ue=Wl(function(){return Re(B,qt+"return "+ot).apply(e,k)});if(ue.source=ot,Rc(ue))throw ue;return ue}function x8(n){return Ce(n).toLowerCase()}function P8(n){return Ce(n).toUpperCase()}function N8(n,h,p){if(n=Ce(n),n&&(p||h===e))return od(n);if(!n||!(h=ui(h)))return n;var E=ji(n),P=ji(h),B=ad(E,P),k=hd(E,P)+1;return gs(E,B,k).join("")}function R8(n,h,p){if(n=Ce(n),n&&(p||h===e))return n.slice(0,cd(n)+1);if(!n||!(h=ui(h)))return n;var E=ji(n),P=hd(E,ji(h))+1;return gs(E,0,P).join("")}function C8(n,h,p){if(n=Ce(n),n&&(p||h===e))return n.replace(Ft,"");if(!n||!(h=ui(h)))return n;var E=ji(n),P=ad(E,ji(h));return gs(E,P).join("")}function O8(n,h){var p=se,E=T;if(Je(h)){var P="separator"in h?h.separator:P;p="length"in h?oe(h.length):p,E="omission"in h?ui(h.omission):E}n=Ce(n);var B=n.length;if(eo(n)){var k=ji(n);B=k.length}if(p>=B)return n;var F=p-ro(E);if(F<1)return E;var j=k?gs(k,0,F).join(""):n.slice(0,F);if(P===e)return j+E;if(k&&(F+=j.length-F),Cc(P)){if(n.slice(F).search(P)){var it,nt=j;for(P.global||(P=Jf(P.source,Ce(Lt.exec(P))+"g")),P.lastIndex=0;it=P.exec(nt);)var ot=it.index;j=j.slice(0,ot===e?F:ot)}}else if(n.indexOf(ui(P),F)!=F){var wt=j.lastIndexOf(P);wt>-1&&(j=j.slice(0,wt))}return j+E}function B8(n){return n=Ce(n),n&&Et.test(n)?n.replace($t,hv):n}var T8=fo(function(n,h,p){return n+(p?" ":"")+h.toUpperCase()}),Tc=Xd("toUpperCase");function Yl(n,h,p){return n=Ce(n),h=p?e:h,h===e?iv(n)?uv(n):V2(n):n.match(h)||[]}var Wl=pe(function(n,h){try{return fi(n,e,h)}catch(p){return Rc(p)?p:new te(p)}}),q8=$n(function(n,h){return _i(h,function(p){p=dn(p),Fn(n,p,Pc(n[p],n))}),n});function D8(n){var h=n==null?0:n.length,p=Yt();return n=h?Fe(n,function(E){if(typeof E[1]!="function")throw new Mi(u);return[p(E[0]),E[1]]}):[],pe(function(E){for(var P=-1;++P<h;){var B=n[P];if(fi(B[0],this,E))return fi(B[1],this,E)}})}function k8(n){return hb(Ii(n,x))}function qc(n){return function(){return n}}function U8(n,h){return n==null||n!==n?h:n}var z8=tl(),F8=tl(!0);function Kr(n){return n}function Dc(n){return Rd(typeof n=="function"?n:Ii(n,x))}function L8(n){return Od(Ii(n,x))}function $8(n,h){return Bd(n,Ii(h,x))}var j8=pe(function(n,h){return function(p){return ta(p,n,h)}}),H8=pe(function(n,h){return function(p){return ta(n,p,h)}});function kc(n,h,p){var E=or(h),P=ch(h,E);p==null&&!(Je(h)&&(P.length||!E.length))&&(p=h,h=n,n=this,P=ch(h,or(h)));var B=!(Je(p)&&"chain"in p)||!!p.chain,k=Hn(n);return _i(P,function(F){var j=h[F];n[F]=j,k&&(n.prototype[F]=function(){var it=this.__chain__;if(B||it){var nt=n(this.__wrapped__),ot=nt.__actions__=$r(this.__actions__);return ot.push({func:j,args:arguments,thisArg:n}),nt.__chain__=it,nt}return j.apply(n,fs([this.value()],arguments))})}),n}function K8(){return dr._===this&&(dr._=vv),this}function Uc(){}function Q8(n){return n=oe(n),pe(function(h){return Td(h,n)})}var J8=gc(Fe),V8=gc(ed),G8=gc(Ff);function Xl(n){return _c(n)?Lf(dn(n)):Ib(n)}function Y8(n){return function(h){return n==null?e:Os(n,h)}}var W8=rl(),X8=rl(!0);function zc(){return[]}function Fc(){return!1}function Z8(){return{}}function t4(){return""}function e4(){return!0}function r4(n,h){if(n=oe(n),n<1||n>I)return[];var p=c,E=Mr(n,c);h=Yt(h),n-=c;for(var P=Hf(E,h);++p<n;)h(p);return P}function i4(n){return ee(n)?Fe(n,dn):di(n)?[n]:$r(bl(Ce(n)))}function n4(n){var h=++gv;return Ce(n)+h}var s4=mh(function(n,h){return n+h},0),o4=mc("ceil"),a4=mh(function(n,h){return n/h},1),h4=mc("floor");function f4(n){return n&&n.length?fh(n,Kr,ec):e}function c4(n,h){return n&&n.length?fh(n,Yt(h,2),ec):e}function u4(n){return nd(n,Kr)}function d4(n,h){return nd(n,Yt(h,2))}function l4(n){return n&&n.length?fh(n,Kr,sc):e}function p4(n,h){return n&&n.length?fh(n,Yt(h,2),sc):e}var g4=mh(function(n,h){return n*h},1),m4=mc("round"),v4=mh(function(n,h){return n-h},0);function b4(n){return n&&n.length?jf(n,Kr):0}function y4(n,h){return n&&n.length?jf(n,Yt(h,2)):0}return C.after=L6,C.ary=Nl,C.assign=Py,C.assignIn=jl,C.assignInWith=Nh,C.assignWith=Ny,C.at=Ry,C.before=Rl,C.bind=Pc,C.bindAll=q8,C.bindKey=Cl,C.castArray=Z6,C.chain=Sl,C.chunk=h3,C.compact=f3,C.concat=c3,C.cond=D8,C.conforms=k8,C.constant=qc,C.countBy=b6,C.create=Cy,C.curry=Ol,C.curryRight=Bl,C.debounce=Tl,C.defaults=Oy,C.defaultsDeep=By,C.defer=$6,C.delay=j6,C.difference=u3,C.differenceBy=d3,C.differenceWith=l3,C.drop=p3,C.dropRight=g3,C.dropRightWhile=m3,C.dropWhile=v3,C.fill=b3,C.filter=w6,C.flatMap=M6,C.flatMapDeep=E6,C.flatMapDepth=I6,C.flatten=_l,C.flattenDeep=y3,C.flattenDepth=w3,C.flip=H6,C.flow=z8,C.flowRight=F8,C.fromPairs=A3,C.functions=Fy,C.functionsIn=Ly,C.groupBy=S6,C.initial=M3,C.intersection=E3,C.intersectionBy=I3,C.intersectionWith=S3,C.invert=jy,C.invertBy=Hy,C.invokeMap=P6,C.iteratee=Dc,C.keyBy=N6,C.keys=or,C.keysIn=Hr,C.map=Mh,C.mapKeys=Qy,C.mapValues=Jy,C.matches=L8,C.matchesProperty=$8,C.memoize=Ih,C.merge=Vy,C.mergeWith=Hl,C.method=j8,C.methodOf=H8,C.mixin=kc,C.negate=Sh,C.nthArg=Q8,C.omit=Gy,C.omitBy=Yy,C.once=K6,C.orderBy=R6,C.over=J8,C.overArgs=Q6,C.overEvery=V8,C.overSome=G8,C.partial=Nc,C.partialRight=ql,C.partition=C6,C.pick=Wy,C.pickBy=Kl,C.property=Xl,C.propertyOf=Y8,C.pull=R3,C.pullAll=El,C.pullAllBy=C3,C.pullAllWith=O3,C.pullAt=B3,C.range=W8,C.rangeRight=X8,C.rearg=J6,C.reject=T6,C.remove=T3,C.rest=V6,C.reverse=Sc,C.sampleSize=D6,C.set=Zy,C.setWith=t8,C.shuffle=k6,C.slice=q3,C.sortBy=F6,C.sortedUniq=$3,C.sortedUniqBy=j3,C.split=M8,C.spread=G6,C.tail=H3,C.take=K3,C.takeRight=Q3,C.takeRightWhile=J3,C.takeWhile=V3,C.tap=f6,C.throttle=Y6,C.thru=_h,C.toArray=Fl,C.toPairs=Ql,C.toPairsIn=Jl,C.toPath=i4,C.toPlainObject=$l,C.transform=e8,C.unary=W6,C.union=G3,C.unionBy=Y3,C.unionWith=W3,C.uniq=X3,C.uniqBy=Z3,C.uniqWith=t6,C.unset=r8,C.unzip=xc,C.unzipWith=Il,C.update=i8,C.updateWith=n8,C.values=lo,C.valuesIn=s8,C.without=e6,C.words=Yl,C.wrap=X6,C.xor=r6,C.xorBy=i6,C.xorWith=n6,C.zip=s6,C.zipObject=o6,C.zipObjectDeep=a6,C.zipWith=h6,C.entries=Ql,C.entriesIn=Jl,C.extend=jl,C.extendWith=Nh,kc(C,C),C.add=s4,C.attempt=Wl,C.camelCase=f8,C.capitalize=Vl,C.ceil=o4,C.clamp=o8,C.clone=ty,C.cloneDeep=ry,C.cloneDeepWith=iy,C.cloneWith=ey,C.conformsTo=ny,C.deburr=Gl,C.defaultTo=U8,C.divide=a4,C.endsWith=c8,C.eq=Ki,C.escape=u8,C.escapeRegExp=d8,C.every=y6,C.find=A6,C.findIndex=wl,C.findKey=Ty,C.findLast=_6,C.findLastIndex=Al,C.findLastKey=qy,C.floor=h4,C.forEach=xl,C.forEachRight=Pl,C.forIn=Dy,C.forInRight=ky,C.forOwn=Uy,C.forOwnRight=zy,C.get=Oc,C.gt=sy,C.gte=oy,C.has=$y,C.hasIn=Bc,C.head=Ml,C.identity=Kr,C.includes=x6,C.indexOf=_3,C.inRange=a8,C.invoke=Ky,C.isArguments=qs,C.isArray=ee,C.isArrayBuffer=ay,C.isArrayLike=jr,C.isArrayLikeObject=We,C.isBoolean=hy,C.isBuffer=ms,C.isDate=fy,C.isElement=cy,C.isEmpty=uy,C.isEqual=dy,C.isEqualWith=ly,C.isError=Rc,C.isFinite=py,C.isFunction=Hn,C.isInteger=Dl,C.isLength=xh,C.isMap=kl,C.isMatch=gy,C.isMatchWith=my,C.isNaN=vy,C.isNative=by,C.isNil=wy,C.isNull=yy,C.isNumber=Ul,C.isObject=Je,C.isObjectLike=Ve,C.isPlainObject=oa,C.isRegExp=Cc,C.isSafeInteger=Ay,C.isSet=zl,C.isString=Ph,C.isSymbol=di,C.isTypedArray=uo,C.isUndefined=_y,C.isWeakMap=My,C.isWeakSet=Ey,C.join=x3,C.kebabCase=l8,C.last=xi,C.lastIndexOf=P3,C.lowerCase=p8,C.lowerFirst=g8,C.lt=Iy,C.lte=Sy,C.max=f4,C.maxBy=c4,C.mean=u4,C.meanBy=d4,C.min=l4,C.minBy=p4,C.stubArray=zc,C.stubFalse=Fc,C.stubObject=Z8,C.stubString=t4,C.stubTrue=e4,C.multiply=g4,C.nth=N3,C.noConflict=K8,C.noop=Uc,C.now=Eh,C.pad=m8,C.padEnd=v8,C.padStart=b8,C.parseInt=y8,C.random=h8,C.reduce=O6,C.reduceRight=B6,C.repeat=w8,C.replace=A8,C.result=Xy,C.round=m4,C.runInContext=$,C.sample=q6,C.size=U6,C.snakeCase=_8,C.some=z6,C.sortedIndex=D3,C.sortedIndexBy=k3,C.sortedIndexOf=U3,C.sortedLastIndex=z3,C.sortedLastIndexBy=F3,C.sortedLastIndexOf=L3,C.startCase=E8,C.startsWith=I8,C.subtract=v4,C.sum=b4,C.sumBy=y4,C.template=S8,C.times=r4,C.toFinite=Kn,C.toInteger=oe,C.toLength=Ll,C.toLower=x8,C.toNumber=Pi,C.toSafeInteger=xy,C.toString=Ce,C.toUpper=P8,C.trim=N8,C.trimEnd=R8,C.trimStart=C8,C.truncate=O8,C.unescape=B8,C.uniqueId=n4,C.upperCase=T8,C.upperFirst=Tc,C.each=xl,C.eachRight=Pl,C.first=Ml,kc(C,function(){var n={};return cn(C,function(h,p){Be.call(C.prototype,p)||(n[p]=h)}),n}(),{chain:!1}),C.VERSION=i,_i(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){C[n].placeholder=C}),_i(["drop","take"],function(n,h){Ee.prototype[n]=function(p){p=p===e?1:rr(oe(p),0);var E=this.__filtered__&&!h?new Ee(this):this.clone();return E.__filtered__?E.__takeCount__=Mr(p,E.__takeCount__):E.__views__.push({size:Mr(p,c),type:n+(E.__dir__<0?"Right":"")}),E},Ee.prototype[n+"Right"]=function(p){return this.reverse()[n](p).reverse()}}),_i(["filter","map","takeWhile"],function(n,h){var p=h+1,E=p==f||p==v;Ee.prototype[n]=function(P){var B=this.clone();return B.__iteratees__.push({iteratee:Yt(P,3),type:p}),B.__filtered__=B.__filtered__||E,B}}),_i(["head","last"],function(n,h){var p="take"+(h?"Right":"");Ee.prototype[n]=function(){return this[p](1).value()[0]}}),_i(["initial","tail"],function(n,h){var p="drop"+(h?"":"Right");Ee.prototype[n]=function(){return this.__filtered__?new Ee(this):this[p](1)}}),Ee.prototype.compact=function(){return this.filter(Kr)},Ee.prototype.find=function(n){return this.filter(n).head()},Ee.prototype.findLast=function(n){return this.reverse().find(n)},Ee.prototype.invokeMap=pe(function(n,h){return typeof n=="function"?new Ee(this):this.map(function(p){return ta(p,n,h)})}),Ee.prototype.reject=function(n){return this.filter(Sh(Yt(n)))},Ee.prototype.slice=function(n,h){n=oe(n);var p=this;return p.__filtered__&&(n>0||h<0)?new Ee(p):(n<0?p=p.takeRight(-n):n&&(p=p.drop(n)),h!==e&&(h=oe(h),p=h<0?p.dropRight(-h):p.take(h-n)),p)},Ee.prototype.takeRightWhile=function(n){return this.reverse().takeWhile(n).reverse()},Ee.prototype.toArray=function(){return this.take(c)},cn(Ee.prototype,function(n,h){var p=/^(?:filter|find|map|reject)|While$/.test(h),E=/^(?:head|last)$/.test(h),P=C[E?"take"+(h=="last"?"Right":""):h],B=E||/^find/.test(h);P&&(C.prototype[h]=function(){var k=this.__wrapped__,F=E?[1]:arguments,j=k instanceof Ee,it=F[0],nt=j||ee(k),ot=function(_e){var Ne=P.apply(C,fs([_e],F));return E&&wt?Ne[0]:Ne};nt&&p&&typeof it=="function"&&it.length!=1&&(j=nt=!1);var wt=this.__chain__,qt=!!this.__actions__.length,Wt=B&&!wt,ue=j&&!qt;if(!B&&nt){k=ue?k:new Ee(this);var Xt=n.apply(k,F);return Xt.__actions__.push({func:_h,args:[ot],thisArg:e}),new Ei(Xt,wt)}return Wt&&ue?n.apply(this,F):(Xt=this.thru(ot),Wt?E?Xt.value()[0]:Xt.value():Xt)})}),_i(["pop","push","shift","sort","splice","unshift"],function(n){var h=Va[n],p=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",E=/^(?:pop|shift)$/.test(n);C.prototype[n]=function(){var P=arguments;if(E&&!this.__chain__){var B=this.value();return h.apply(ee(B)?B:[],P)}return this[p](function(k){return h.apply(ee(k)?k:[],P)})}}),cn(Ee.prototype,function(n,h){var p=C[h];if(p){var E=p.name+"";Be.call(oo,E)||(oo[E]=[]),oo[E].push({name:h,func:p})}}),oo[gh(e,H).name]=[{name:"wrapper",func:e}],Ee.prototype.clone=Bv,Ee.prototype.reverse=Tv,Ee.prototype.value=qv,C.prototype.at=c6,C.prototype.chain=u6,C.prototype.commit=d6,C.prototype.next=l6,C.prototype.plant=g6,C.prototype.reverse=m6,C.prototype.toJSON=C.prototype.valueOf=C.prototype.value=v6,C.prototype.first=C.prototype.head,Jo&&(C.prototype[Jo]=p6),C},io=dv();xs?((xs.exports=io)._=io,Df._=io):dr._=io}).call(va)})(Zu,Zu.exports);var tP=Object.defineProperty,eP=Object.defineProperties,rP=Object.getOwnPropertyDescriptors,W1=Object.getOwnPropertySymbols,iP=Object.prototype.hasOwnProperty,nP=Object.prototype.propertyIsEnumerable,X1=(r,t,e)=>t in r?tP(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,Fh=(r,t)=>{for(var e in t||(t={}))iP.call(t,e)&&X1(r,e,t[e]);if(W1)for(var e of W1(t))nP.call(t,e)&&X1(r,e,t[e]);return r},sP=(r,t)=>eP(r,rP(t));function an(r,t,e){var i;const s=Ea(r);return((i=t.rpcMap)==null?void 0:i[s.reference])||`${Zx}?chainId=${s.namespace}:${s.reference}&projectId=${e}`}function Xs(r){return r.includes(":")?r.split(":")[1]:r}function b2(r){return r.map(t=>`${t.split(":")[0]}:${t.split(":")[1]}`)}function oP(r,t){const e=Object.keys(t.namespaces).filter(s=>s.includes(r));if(!e.length)return[];const i=[];return e.forEach(s=>{const o=t.namespaces[s].accounts;i.push(...o)}),i}function Iu(r={},t={}){const e=Z1(r),i=Z1(t);return Zu.exports.merge(e,i)}function Z1(r){var t,e,i,s;const o={};if(!Oa(r))return o;for(const[u,g]of Object.entries(r)){const w=E0(u)?[u]:g.chains,A=g.methods||[],S=g.events||[],x=g.rpcMap||{},N=wa(u);o[N]=sP(Fh(Fh({},o[N]),g),{chains:Jh(w,(t=o[N])==null?void 0:t.chains),methods:Jh(A,(e=o[N])==null?void 0:e.methods),events:Jh(S,(i=o[N])==null?void 0:i.events),rpcMap:Fh(Fh({},x),(s=o[N])==null?void 0:s.rpcMap)})}return o}function aP(r){return r.includes(":")?r.split(":")[2]:r}function tg(r){const t={};for(const[e,i]of Object.entries(r)){const s=i.methods||[],o=i.events||[],u=i.accounts||[],g=E0(e)?[e]:i.chains?i.chains:b2(i.accounts);t[e]={chains:g,methods:s,events:o,accounts:u}}return t}function Su(r){return typeof r=="number"?r:r.includes("0x")?parseInt(r,16):(r=r.includes(":")?r.split(":")[1]:r,isNaN(Number(r))?r:Number(r))}const y2={},Oe=r=>y2[r],xu=(r,t)=>{y2[r]=t};class hP{constructor(t){this.name="polkadot",this.namespace=t.namespace,this.events=Oe("events"),this.client=Oe("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){this.httpProviders[t]||this.setHttpProvider(t,e),this.chainId=t,this.events.emit(fn.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(e=>{var i;const s=Xs(e);t[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[e])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){const i=this.createHttpProvider(t,e);i&&(this.httpProviders[t]=i)}createHttpProvider(t,e){const i=e||an(t,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new hn(new Dn(i,Oe("disableProviderPing")))}}var fP=Object.defineProperty,cP=Object.defineProperties,uP=Object.getOwnPropertyDescriptors,eg=Object.getOwnPropertySymbols,dP=Object.prototype.hasOwnProperty,lP=Object.prototype.propertyIsEnumerable,rg=(r,t,e)=>t in r?fP(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,ig=(r,t)=>{for(var e in t||(t={}))dP.call(t,e)&&rg(r,e,t[e]);if(eg)for(var e of eg(t))lP.call(t,e)&&rg(r,e,t[e]);return r},ng=(r,t)=>cP(r,uP(t));class pP{constructor(t){this.name="eip155",this.namespace=t.namespace,this.events=Oe("events"),this.client=Oe("client"),this.httpProviders=this.createHttpProviders(),this.chainId=parseInt(this.getDefaultChain())}async request(t){switch(t.request.method){case"eth_requestAccounts":return this.getAccounts();case"eth_accounts":return this.getAccounts();case"wallet_switchEthereumChain":return await this.handleSwitchChain(t);case"eth_chainId":return parseInt(this.getDefaultChain());case"wallet_getCapabilities":return await this.getCapabilities(t)}return this.namespace.methods.includes(t.request.method)?await this.client.request(t):this.getHttpProvider().request(t.request)}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}setDefaultChain(t,e){this.httpProviders[t]||this.setHttpProvider(parseInt(t),e),this.chainId=parseInt(t),this.events.emit(fn.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId.toString();if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}createHttpProvider(t,e){const i=e||an(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new hn(new Dn(i,Oe("disableProviderPing")))}setHttpProvider(t,e){const i=this.createHttpProvider(t,e);i&&(this.httpProviders[t]=i)}createHttpProviders(){const t={};return this.namespace.chains.forEach(e=>{var i;const s=parseInt(Xs(e));t[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[e])}),t}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}getHttpProvider(){const t=this.chainId,e=this.httpProviders[t];if(typeof e>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return e}async handleSwitchChain(t){var e,i;let s=t.request.params?(e=t.request.params[0])==null?void 0:e.chainId:"0x0";s=s.startsWith("0x")?s:`0x${s}`;const o=parseInt(s,16);if(this.isChainApproved(o))this.setDefaultChain(`${o}`);else if(this.namespace.methods.includes("wallet_switchEthereumChain"))await this.client.request({topic:t.topic,request:{method:t.request.method,params:[{chainId:s}]},chainId:(i=this.namespace.chains)==null?void 0:i[0]}),this.setDefaultChain(`${o}`);else throw new Error(`Failed to switch to chain 'eip155:${o}'. The chain is not approved or the wallet does not support 'wallet_switchEthereumChain' method.`);return null}isChainApproved(t){return this.namespace.chains.includes(`${this.name}:${t}`)}async getCapabilities(t){var e,i,s;const o=(i=(e=t.request)==null?void 0:e.params)==null?void 0:i[0];if(!o)throw new Error("Missing address parameter in `wallet_getCapabilities` request");const u=this.client.session.get(t.topic),g=((s=u==null?void 0:u.sessionProperties)==null?void 0:s.capabilities)||{};if(g!=null&&g[o])return g==null?void 0:g[o];const w=await this.client.request(t);try{await this.client.session.update(t.topic,{sessionProperties:ng(ig({},u.sessionProperties||{}),{capabilities:ng(ig({},g||{}),{[o]:w})})})}catch(A){console.warn("Failed to update session with capabilities",A)}return w}}class gP{constructor(t){this.name="solana",this.namespace=t.namespace,this.events=Oe("events"),this.client=Oe("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){this.httpProviders[t]||this.setHttpProvider(t,e),this.chainId=t,this.events.emit(fn.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(e=>{var i;const s=Xs(e);t[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[e])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){const i=this.createHttpProvider(t,e);i&&(this.httpProviders[t]=i)}createHttpProvider(t,e){const i=e||an(t,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new hn(new Dn(i,Oe("disableProviderPing")))}}class mP{constructor(t){this.name="cosmos",this.namespace=t.namespace,this.events=Oe("events"),this.client=Oe("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){this.httpProviders[t]||this.setHttpProvider(t,e),this.chainId=t,this.events.emit(fn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(e=>{var i;const s=Xs(e);t[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[e])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){const i=this.createHttpProvider(t,e);i&&(this.httpProviders[t]=i)}createHttpProvider(t,e){const i=e||an(t,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new hn(new Dn(i,Oe("disableProviderPing")))}}class vP{constructor(t){this.name="algorand",this.namespace=t.namespace,this.events=Oe("events"),this.client=Oe("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){if(!this.httpProviders[t]){const i=e||an(`${this.name}:${t}`,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,i)}this.chainId=t,this.events.emit(fn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(e=>{var i;t[e]=this.createHttpProvider(e,(i=this.namespace.rpcMap)==null?void 0:i[e])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){const i=this.createHttpProvider(t,e);i&&(this.httpProviders[t]=i)}createHttpProvider(t,e){const i=e||an(t,this.namespace,this.client.core.projectId);return typeof i>"u"?void 0:new hn(new Dn(i,Oe("disableProviderPing")))}}class bP{constructor(t){this.name="cip34",this.namespace=t.namespace,this.events=Oe("events"),this.client=Oe("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){this.httpProviders[t]||this.setHttpProvider(t,e),this.chainId=t,this.events.emit(fn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(e=>{const i=this.getCardanoRPCUrl(e),s=Xs(e);t[s]=this.createHttpProvider(s,i)}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return e}getCardanoRPCUrl(t){const e=this.namespace.rpcMap;if(e)return e[t]}setHttpProvider(t,e){const i=this.createHttpProvider(t,e);i&&(this.httpProviders[t]=i)}createHttpProvider(t,e){const i=e||this.getCardanoRPCUrl(t);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new hn(new Dn(i,Oe("disableProviderPing")))}}class yP{constructor(t){this.name="elrond",this.namespace=t.namespace,this.events=Oe("events"),this.client=Oe("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){this.httpProviders[t]||this.setHttpProvider(t,e),this.chainId=t,this.events.emit(fn.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(e=>{var i;const s=Xs(e);t[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[e])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){const i=this.createHttpProvider(t,e);i&&(this.httpProviders[t]=i)}createHttpProvider(t,e){const i=e||an(t,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new hn(new Dn(i,Oe("disableProviderPing")))}}class wP{constructor(t){this.name="multiversx",this.namespace=t.namespace,this.events=Oe("events"),this.client=Oe("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){this.httpProviders[t]||this.setHttpProvider(t,e),this.chainId=t,this.events.emit(fn.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(e=>{var i;const s=Xs(e);t[s]=this.createHttpProvider(s,(i=this.namespace.rpcMap)==null?void 0:i[e])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){const i=this.createHttpProvider(t,e);i&&(this.httpProviders[t]=i)}createHttpProvider(t,e){const i=e||an(t,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new hn(new Dn(i,Oe("disableProviderPing")))}}class AP{constructor(t){this.name="near",this.namespace=t.namespace,this.events=Oe("events"),this.client=Oe("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace=Object.assign(this.namespace,t)}requestAccounts(){return this.getAccounts()}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider().request(t.request)}setDefaultChain(t,e){if(this.chainId=t,!this.httpProviders[t]){const i=e||an(`${this.name}:${t}`,this.namespace);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);this.setHttpProvider(t,i)}this.events.emit(fn.DEFAULT_CHAIN_CHANGED,`${this.name}:${this.chainId}`)}getAccounts(){const t=this.namespace.accounts;return t?t.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2])||[]:[]}createHttpProviders(){const t={};return this.namespace.chains.forEach(e=>{var i;t[e]=this.createHttpProvider(e,(i=this.namespace.rpcMap)==null?void 0:i[e])}),t}getHttpProvider(){const t=`${this.name}:${this.chainId}`,e=this.httpProviders[t];if(typeof e>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){const i=this.createHttpProvider(t,e);i&&(this.httpProviders[t]=i)}createHttpProvider(t,e){const i=e||an(t,this.namespace);return typeof i>"u"?void 0:new hn(new Dn(i,Oe("disableProviderPing")))}}class _P{constructor(t){this.name=bo,this.namespace=t.namespace,this.events=Oe("events"),this.client=Oe("client"),this.chainId=this.getDefaultChain(),this.httpProviders=this.createHttpProviders()}updateNamespace(t){this.namespace.chains=[...new Set((this.namespace.chains||[]).concat(t.chains||[]))],this.namespace.accounts=[...new Set((this.namespace.accounts||[]).concat(t.accounts||[]))],this.namespace.methods=[...new Set((this.namespace.methods||[]).concat(t.methods||[]))],this.namespace.events=[...new Set((this.namespace.events||[]).concat(t.events||[]))],this.httpProviders=this.createHttpProviders()}requestAccounts(){return this.getAccounts()}request(t){return this.namespace.methods.includes(t.request.method)?this.client.request(t):this.getHttpProvider(t.chainId).request(t.request)}setDefaultChain(t,e){this.httpProviders[t]||this.setHttpProvider(t,e),this.chainId=t,this.events.emit(fn.DEFAULT_CHAIN_CHANGED,`${this.name}:${t}`)}getDefaultChain(){if(this.chainId)return this.chainId;if(this.namespace.defaultChain)return this.namespace.defaultChain;const t=this.namespace.chains[0];if(!t)throw new Error("ChainId not found");return t.split(":")[1]}getAccounts(){const t=this.namespace.accounts;return t?[...new Set(t.filter(e=>e.split(":")[1]===this.chainId.toString()).map(e=>e.split(":")[2]))]:[]}createHttpProviders(){var t,e;const i={};return(e=(t=this.namespace)==null?void 0:t.accounts)==null||e.forEach(s=>{const o=Ea(s);i[`${o.namespace}:${o.reference}`]=this.createHttpProvider(s)}),i}getHttpProvider(t){const e=this.httpProviders[t];if(typeof e>"u")throw new Error(`JSON-RPC provider for ${t} not found`);return e}setHttpProvider(t,e){const i=this.createHttpProvider(t,e);i&&(this.httpProviders[t]=i)}createHttpProvider(t,e){const i=e||an(t,this.namespace,this.client.core.projectId);if(!i)throw new Error(`No RPC url provided for chainId: ${t}`);return new hn(new Dn(i,Oe("disableProviderPing")))}}var MP=Object.defineProperty,EP=Object.defineProperties,IP=Object.getOwnPropertyDescriptors,sg=Object.getOwnPropertySymbols,SP=Object.prototype.hasOwnProperty,xP=Object.prototype.propertyIsEnumerable,og=(r,t,e)=>t in r?MP(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,Lh=(r,t)=>{for(var e in t||(t={}))SP.call(t,e)&&og(r,e,t[e]);if(sg)for(var e of sg(t))xP.call(t,e)&&og(r,e,t[e]);return r},Pu=(r,t)=>EP(r,IP(t));class R0{constructor(t){this.events=new o0,this.rpcProviders={},this.shouldAbortPairingAttempt=!1,this.maxPairingAttempts=10,this.disableProviderPing=!1,this.providerOpts=t,this.logger=typeof(t==null?void 0:t.logger)<"u"&&typeof(t==null?void 0:t.logger)!="string"?t.logger:i0(vf({level:(t==null?void 0:t.logger)||G1})),this.disableProviderPing=(t==null?void 0:t.disableProviderPing)||!1}static async init(t){const e=new R0(t);return await e.initialize(),e}async request(t,e,i){const[s,o]=this.validateChain(e);if(!this.session)throw new Error("Please call connect() before request()");return await this.getProvider(s).request({request:Lh({},t),chainId:`${s}:${o}`,topic:this.session.topic,expiry:i})}sendAsync(t,e,i,s){const o=new Date().getTime();this.request(t,i,s).then(u=>e(null,bf(o,u))).catch(u=>e(u,void 0))}async enable(){if(!this.client)throw new Error("Sign Client not initialized");return this.session||await this.connect({namespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties}),await this.requestAccounts()}async disconnect(){var t;if(!this.session)throw new Error("Please call connect() before enable()");await this.client.disconnect({topic:(t=this.session)==null?void 0:t.topic,reason:Te("USER_DISCONNECTED")}),await this.cleanup()}async connect(t){if(!this.client)throw new Error("Sign Client not initialized");if(this.setNamespaces(t),await this.cleanupPendingPairings(),!t.skipPairing)return await this.pair(t.pairingTopic)}async authenticate(t){if(!this.client)throw new Error("Sign Client not initialized");this.setNamespaces(t),await this.cleanupPendingPairings();const{uri:e,response:i}=await this.client.authenticate(t);e&&(this.uri=e,this.events.emit("display_uri",e));const s=await i();if(this.session=s.session,this.session){const o=tg(this.session.namespaces);this.namespaces=Iu(this.namespaces,o),this.persist("namespaces",this.namespaces),this.onConnect()}return s}on(t,e){this.events.on(t,e)}once(t,e){this.events.once(t,e)}removeListener(t,e){this.events.removeListener(t,e)}off(t,e){this.events.off(t,e)}get isWalletConnect(){return!0}async pair(t){this.shouldAbortPairingAttempt=!1;let e=0;do{if(this.shouldAbortPairingAttempt)throw new Error("Pairing aborted");if(e>=this.maxPairingAttempts)throw new Error("Max auto pairing attempts reached");const{uri:i,approval:s}=await this.client.connect({pairingTopic:t,requiredNamespaces:this.namespaces,optionalNamespaces:this.optionalNamespaces,sessionProperties:this.sessionProperties});i&&(this.uri=i,this.events.emit("display_uri",i)),await s().then(o=>{this.session=o;const u=tg(o.namespaces);this.namespaces=Iu(this.namespaces,u),this.persist("namespaces",this.namespaces)}).catch(o=>{if(o.message!==v2)throw o;e++})}while(!this.session);return this.onConnect(),this.session}setDefaultChain(t,e){try{if(!this.session)return;const[i,s]=this.validateChain(t),o=this.getProvider(i);o.name===bo?o.setDefaultChain(`${i}:${s}`,e):o.setDefaultChain(s,e)}catch(i){if(!/Please call connect/.test(i.message))throw i}}async cleanupPendingPairings(t={}){this.logger.info("Cleaning up inactive pairings...");const e=this.client.pairing.getAll();if(Qs(e)){for(const i of e)t.deletePairings?this.client.core.expirer.set(i.topic,0):await this.client.core.relayer.subscriber.unsubscribe(i.topic);this.logger.info(`Inactive pairings cleared: ${e.length}`)}}abortPairingAttempt(){this.shouldAbortPairingAttempt=!0}async checkStorage(){if(this.namespaces=await this.getFromStore("namespaces"),this.optionalNamespaces=await this.getFromStore("optionalNamespaces")||{},this.client.session.length){const t=this.client.session.keys.length-1;this.session=this.client.session.get(this.client.session.keys[t]),this.createProviders()}}async initialize(){this.logger.trace("Initialized"),await this.createClient(),await this.checkStorage(),this.registerEventListeners()}async createClient(){this.client=this.providerOpts.client||await N0.init({core:this.providerOpts.core,logger:this.providerOpts.logger||G1,relayUrl:this.providerOpts.relayUrl||Yx,projectId:this.providerOpts.projectId,metadata:this.providerOpts.metadata,storageOptions:this.providerOpts.storageOptions,storage:this.providerOpts.storage,name:this.providerOpts.name,customStoragePrefix:this.providerOpts.customStoragePrefix,telemetryEnabled:this.providerOpts.telemetryEnabled}),this.logger.trace("SignClient Initialized")}createProviders(){if(!this.client)throw new Error("Sign Client not initialized");if(!this.session)throw new Error("Session not initialized. Please call connect() before enable()");const t=[...new Set(Object.keys(this.session.namespaces).map(e=>wa(e)))];xu("client",this.client),xu("events",this.events),xu("disableProviderPing",this.disableProviderPing),t.forEach(e=>{if(!this.session)return;const i=oP(e,this.session),s=b2(i),o=Iu(this.namespaces,this.optionalNamespaces),u=Pu(Lh({},o[e]),{accounts:i,chains:s});switch(e){case"eip155":this.rpcProviders[e]=new pP({namespace:u});break;case"algorand":this.rpcProviders[e]=new vP({namespace:u});break;case"solana":this.rpcProviders[e]=new gP({namespace:u});break;case"cosmos":this.rpcProviders[e]=new mP({namespace:u});break;case"polkadot":this.rpcProviders[e]=new hP({namespace:u});break;case"cip34":this.rpcProviders[e]=new bP({namespace:u});break;case"elrond":this.rpcProviders[e]=new yP({namespace:u});break;case"multiversx":this.rpcProviders[e]=new wP({namespace:u});break;case"near":this.rpcProviders[e]=new AP({namespace:u});break;default:this.rpcProviders[bo]?this.rpcProviders[bo].updateNamespace(u):this.rpcProviders[bo]=new _P({namespace:u})}})}registerEventListeners(){if(typeof this.client>"u")throw new Error("Sign Client is not initialized");this.client.on("session_ping",t=>{this.events.emit("session_ping",t)}),this.client.on("session_event",t=>{const{params:e}=t,{event:i}=e;if(i.name==="accountsChanged"){const s=i.data;s&&Qs(s)&&this.events.emit("accountsChanged",s.map(aP))}else if(i.name==="chainChanged"){const s=e.chainId,o=e.event.data,u=wa(s),g=Su(s)!==Su(o)?`${u}:${Su(o)}`:s;this.onChainChanged(g)}else this.events.emit(i.name,i.data);this.events.emit("session_event",t)}),this.client.on("session_update",({topic:t,params:e})=>{var i;const{namespaces:s}=e,o=(i=this.client)==null?void 0:i.session.get(t);this.session=Pu(Lh({},o),{namespaces:s}),this.onSessionUpdate(),this.events.emit("session_update",{topic:t,params:e})}),this.client.on("session_delete",async t=>{await this.cleanup(),this.events.emit("session_delete",t),this.events.emit("disconnect",Pu(Lh({},Te("USER_DISCONNECTED")),{data:t.topic}))}),this.on(fn.DEFAULT_CHAIN_CHANGED,t=>{this.onChainChanged(t,!0)})}getProvider(t){return this.rpcProviders[t]||this.rpcProviders[bo]}onSessionUpdate(){Object.keys(this.rpcProviders).forEach(t=>{var e;this.getProvider(t).updateNamespace((e=this.session)==null?void 0:e.namespaces[t])})}setNamespaces(t){const{namespaces:e,optionalNamespaces:i,sessionProperties:s}=t;e&&Object.keys(e).length&&(this.namespaces=e),i&&Object.keys(i).length&&(this.optionalNamespaces=i),this.sessionProperties=s,this.persist("namespaces",e),this.persist("optionalNamespaces",i)}validateChain(t){const[e,i]=(t==null?void 0:t.split(":"))||["",""];if(!this.namespaces||!Object.keys(this.namespaces).length)return[e,i];if(e&&!Object.keys(this.namespaces||{}).map(u=>wa(u)).includes(e))throw new Error(`Namespace '${e}' is not configured. Please call connect() first with namespace config.`);if(e&&i)return[e,i];const s=wa(Object.keys(this.namespaces)[0]),o=this.rpcProviders[s].getDefaultChain();return[s,o]}async requestAccounts(){const[t]=this.validateChain();return await this.getProvider(t).requestAccounts()}onChainChanged(t,e=!1){if(!this.namespaces)return;const[i,s]=this.validateChain(t);s&&(e||this.getProvider(i).setDefaultChain(s),this.namespaces[i]?this.namespaces[i].defaultChain=s:this.namespaces[`${i}:${s}`]?this.namespaces[`${i}:${s}`].defaultChain=s:this.namespaces[`${i}:${s}`]={defaultChain:s},this.persist("namespaces",this.namespaces),this.events.emit("chainChanged",s))}onConnect(){this.createProviders(),this.events.emit("connect",{session:this.session})}async cleanup(){this.session=void 0,this.namespaces=void 0,this.optionalNamespaces=void 0,this.sessionProperties=void 0,this.persist("namespaces",void 0),this.persist("optionalNamespaces",void 0),this.persist("sessionProperties",void 0),await this.cleanupPendingPairings({deletePairings:!0})}persist(t,e){this.client.core.storage.setItem(`${Y1}/${t}`,e)}async getFromStore(t){return await this.client.core.storage.getItem(`${Y1}/${t}`)}}const PP=R0,NP="wc",RP="ethereum_provider",CP=`${NP}@2:${RP}:`,OP="https://rpc.walletconnect.com/v1/",t0=["eth_sendTransaction","personal_sign"],BP=["eth_accounts","eth_requestAccounts","eth_sendRawTransaction","eth_sign","eth_signTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","eth_sendTransaction","personal_sign","wallet_switchEthereumChain","wallet_addEthereumChain","wallet_getPermissions","wallet_requestPermissions","wallet_registerOnboarding","wallet_watchAsset","wallet_scanQRCode","wallet_sendCalls","wallet_getCapabilities","wallet_getCallsStatus","wallet_showCallsStatus"],e0=["chainChanged","accountsChanged"],TP=["chainChanged","accountsChanged","message","disconnect","connect"];var qP=Object.defineProperty,DP=Object.defineProperties,kP=Object.getOwnPropertyDescriptors,ag=Object.getOwnPropertySymbols,UP=Object.prototype.hasOwnProperty,zP=Object.prototype.propertyIsEnumerable,hg=(r,t,e)=>t in r?qP(r,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):r[t]=e,yo=(r,t)=>{for(var e in t||(t={}))UP.call(t,e)&&hg(r,e,t[e]);if(ag)for(var e of ag(t))zP.call(t,e)&&hg(r,e,t[e]);return r},Nu=(r,t)=>DP(r,kP(t));function gf(r){return Number(r[0].split(":")[1])}function $h(r){return`0x${r.toString(16)}`}function FP(r){const{chains:t,optionalChains:e,methods:i,optionalMethods:s,events:o,optionalEvents:u,rpcMap:g}=r;if(!zu(t))throw new Error("Invalid chains");const w={chains:t,methods:i||t0,events:o||e0,rpcMap:yo({},t.length?{[gf(t)]:g[gf(t)]}:{})},A=o==null?void 0:o.filter(R=>!e0.includes(R)),S=i==null?void 0:i.filter(R=>!t0.includes(R));if(!e&&!u&&!s&&!(A!=null&&A.length)&&!(S!=null&&S.length))return{required:t.length?w:void 0};const x=(A==null?void 0:A.length)&&(S==null?void 0:S.length)||!e,N={chains:[...new Set(x?w.chains.concat(e||[]):e)],methods:[...new Set(w.methods.concat(s!=null&&s.length?s:BP))],events:[...new Set(w.events.concat(u!=null&&u.length?u:TP))],rpcMap:g};return{required:t.length?w:void 0,optional:e.length?N:void 0}}class C0{constructor(){this.events=new os.EventEmitter,this.namespace="eip155",this.accounts=[],this.chainId=1,this.STORAGE_KEY=CP,this.on=(t,e)=>(this.events.on(t,e),this),this.once=(t,e)=>(this.events.once(t,e),this),this.removeListener=(t,e)=>(this.events.removeListener(t,e),this),this.off=(t,e)=>(this.events.off(t,e),this),this.parseAccount=t=>this.isCompatibleChainId(t)?this.parseAccountId(t).address:t,this.signer={},this.rpc={}}static async init(t){const e=new C0;return await e.initialize(t),e}async request(t,e){return await this.signer.request(t,this.formatChainId(this.chainId),e)}sendAsync(t,e,i){this.signer.sendAsync(t,e,this.formatChainId(this.chainId),i)}get connected(){return this.signer.client?this.signer.client.core.relayer.connected:!1}get connecting(){return this.signer.client?this.signer.client.core.relayer.connecting:!1}async enable(){return this.session||await this.connect(),await this.request({method:"eth_requestAccounts"})}async connect(t){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts(t);const{required:e,optional:i}=FP(this.rpc);try{const s=await new Promise(async(u,g)=>{var w;this.rpc.showQrModal&&((w=this.modal)==null||w.subscribeModal(A=>{!A.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),g(new Error("Connection request reset. Please try again.")))})),await this.signer.connect(Nu(yo({namespaces:yo({},e&&{[this.namespace]:e})},i&&{optionalNamespaces:{[this.namespace]:i}}),{pairingTopic:t==null?void 0:t.pairingTopic})).then(A=>{u(A)}).catch(A=>{g(new Error(A.message))})});if(!s)return;const o=hp(s.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:o),this.setAccounts(o),this.events.emit("connect",{chainId:$h(this.chainId)})}catch(s){throw this.signer.logger.error(s),s}finally{this.modal&&this.modal.closeModal()}}async authenticate(t){if(!this.signer.client)throw new Error("Provider not initialized. Call init() first");this.loadConnectOpts({chains:t==null?void 0:t.chains});try{const e=await new Promise(async(s,o)=>{var u;this.rpc.showQrModal&&((u=this.modal)==null||u.subscribeModal(g=>{!g.open&&!this.signer.session&&(this.signer.abortPairingAttempt(),o(new Error("Connection request reset. Please try again.")))})),await this.signer.authenticate(Nu(yo({},t),{chains:this.rpc.chains})).then(g=>{s(g)}).catch(g=>{o(new Error(g.message))})}),i=e.session;if(i){const s=hp(i.namespaces,[this.namespace]);this.setChainIds(this.rpc.chains.length?this.rpc.chains:s),this.setAccounts(s),this.events.emit("connect",{chainId:$h(this.chainId)})}return e}catch(e){throw this.signer.logger.error(e),e}finally{this.modal&&this.modal.closeModal()}}async disconnect(){this.session&&await this.signer.disconnect(),this.reset()}get isWalletConnect(){return!0}get session(){return this.signer.session}registerEventListeners(){this.signer.on("session_event",t=>{const{params:e}=t,{event:i}=e;i.name==="accountsChanged"?(this.accounts=this.parseAccounts(i.data),this.events.emit("accountsChanged",this.accounts)):i.name==="chainChanged"?this.setChainId(this.formatChainId(i.data)):this.events.emit(i.name,i.data),this.events.emit("session_event",t)}),this.signer.on("chainChanged",t=>{const e=parseInt(t);this.chainId=e,this.events.emit("chainChanged",$h(this.chainId)),this.persist()}),this.signer.on("session_update",t=>{this.events.emit("session_update",t)}),this.signer.on("session_delete",t=>{this.reset(),this.events.emit("session_delete",t),this.events.emit("disconnect",Nu(yo({},U7("USER_DISCONNECTED")),{data:t.topic,name:"USER_DISCONNECTED"}))}),this.signer.on("display_uri",t=>{var e,i;this.rpc.showQrModal&&((e=this.modal)==null||e.closeModal(),(i=this.modal)==null||i.openModal({uri:t})),this.events.emit("display_uri",t)})}switchEthereumChain(t){this.request({method:"wallet_switchEthereumChain",params:[{chainId:t.toString(16)}]})}isCompatibleChainId(t){return typeof t=="string"?t.startsWith(`${this.namespace}:`):!1}formatChainId(t){return`${this.namespace}:${t}`}parseChainId(t){return Number(t.split(":")[1])}setChainIds(t){const e=t.filter(i=>this.isCompatibleChainId(i)).map(i=>this.parseChainId(i));e.length&&(this.chainId=e[0],this.events.emit("chainChanged",$h(this.chainId)),this.persist())}setChainId(t){if(this.isCompatibleChainId(t)){const e=this.parseChainId(t);this.chainId=e,this.switchEthereumChain(e)}}parseAccountId(t){const[e,i,s]=t.split(":");return{chainId:`${e}:${i}`,address:s}}setAccounts(t){this.accounts=t.filter(e=>this.parseChainId(this.parseAccountId(e).chainId)===this.chainId).map(e=>this.parseAccountId(e).address),this.events.emit("accountsChanged",this.accounts)}getRpcConfig(t){var e,i;const s=(e=t==null?void 0:t.chains)!=null?e:[],o=(i=t==null?void 0:t.optionalChains)!=null?i:[],u=s.concat(o);if(!u.length)throw new Error("No chains specified in either `chains` or `optionalChains`");const g=s.length?(t==null?void 0:t.methods)||t0:[],w=s.length?(t==null?void 0:t.events)||e0:[],A=(t==null?void 0:t.optionalMethods)||[],S=(t==null?void 0:t.optionalEvents)||[],x=(t==null?void 0:t.rpcMap)||this.buildRpcMap(u,t.projectId),N=(t==null?void 0:t.qrModalOptions)||void 0;return{chains:s==null?void 0:s.map(R=>this.formatChainId(R)),optionalChains:o.map(R=>this.formatChainId(R)),methods:g,events:w,optionalMethods:A,optionalEvents:S,rpcMap:x,showQrModal:!!(t!=null&&t.showQrModal),qrModalOptions:N,projectId:t.projectId,metadata:t.metadata}}buildRpcMap(t,e){const i={};return t.forEach(s=>{i[s]=this.getRpcUrl(s,e)}),i}async initialize(t){if(this.rpc=this.getRpcConfig(t),this.chainId=this.rpc.chains.length?gf(this.rpc.chains):gf(this.rpc.optionalChains),this.signer=await PP.init({projectId:this.rpc.projectId,metadata:this.rpc.metadata,disableProviderPing:t.disableProviderPing,relayUrl:t.relayUrl,storageOptions:t.storageOptions,customStoragePrefix:t.customStoragePrefix,telemetryEnabled:t.telemetryEnabled}),this.registerEventListeners(),await this.loadPersistedSession(),this.rpc.showQrModal){let e;try{const{WalletConnectModal:i}=await U4(()=>import("./index-zsoumjy1.js").then(s=>s.i),__vite__mapDeps([0,1]));e=i}catch{throw new Error("To use QR modal, please install @walletconnect/modal package")}if(e)try{this.modal=new e(yo({projectId:this.rpc.projectId},this.rpc.qrModalOptions))}catch(i){throw this.signer.logger.error(i),new Error("Could not generate WalletConnectModal Instance")}}}loadConnectOpts(t){if(!t)return;const{chains:e,optionalChains:i,rpcMap:s}=t;e&&zu(e)&&(this.rpc.chains=e.map(o=>this.formatChainId(o)),e.forEach(o=>{this.rpc.rpcMap[o]=(s==null?void 0:s[o])||this.getRpcUrl(o)})),i&&zu(i)&&(this.rpc.optionalChains=[],this.rpc.optionalChains=i==null?void 0:i.map(o=>this.formatChainId(o)),i.forEach(o=>{this.rpc.rpcMap[o]=(s==null?void 0:s[o])||this.getRpcUrl(o)}))}getRpcUrl(t,e){var i;return((i=this.rpc.rpcMap)==null?void 0:i[t])||`${OP}?chainId=eip155:${t}&projectId=${e||this.rpc.projectId}`}async loadPersistedSession(){if(this.session)try{const t=await this.signer.client.core.storage.getItem(`${this.STORAGE_KEY}/chainId`),e=this.session.namespaces[`${this.namespace}:${t}`]?this.session.namespaces[`${this.namespace}:${t}`]:this.session.namespaces[this.namespace];this.setChainIds(t?[this.formatChainId(t)]:e==null?void 0:e.accounts),this.setAccounts(e==null?void 0:e.accounts)}catch(t){this.signer.logger.error("Failed to load persisted session, clearing state..."),this.signer.logger.error(t),await this.disconnect().catch(e=>this.signer.logger.warn(e))}}reset(){this.chainId=1,this.accounts=[]}persist(){this.session&&this.signer.client.core.storage.setItem(`${this.STORAGE_KEY}/chainId`,this.chainId)}parseAccounts(t){return typeof t=="string"||t instanceof String?[this.parseAccount(t)]:t.map(e=>this.parseAccount(e))}}const XP=C0;export{XP as EthereumProvider,TP as OPTIONAL_EVENTS,BP as OPTIONAL_METHODS,e0 as REQUIRED_EVENTS,t0 as REQUIRED_METHODS,C0 as default};
